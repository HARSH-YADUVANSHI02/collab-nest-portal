(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))r(l);new MutationObserver(l=>{for(const u of l)if(u.type==="childList")for(const f of u.addedNodes)f.tagName==="LINK"&&f.rel==="modulepreload"&&r(f)}).observe(document,{childList:!0,subtree:!0});function i(l){const u={};return l.integrity&&(u.integrity=l.integrity),l.referrerPolicy&&(u.referrerPolicy=l.referrerPolicy),l.crossOrigin==="use-credentials"?u.credentials="include":l.crossOrigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function r(l){if(l.ep)return;l.ep=!0;const u=i(l);fetch(l.href,u)}})();function lA(s){return s&&s.__esModule&&Object.prototype.hasOwnProperty.call(s,"default")?s.default:s}var Yd={exports:{}},Sl={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var u0;function uA(){if(u0)return Sl;u0=1;var s=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function i(r,l,u){var f=null;if(u!==void 0&&(f=""+u),l.key!==void 0&&(f=""+l.key),"key"in l){u={};for(var p in l)p!=="key"&&(u[p]=l[p])}else u=l;return l=u.ref,{$$typeof:s,type:r,key:f,ref:l!==void 0?l:null,props:u}}return Sl.Fragment=e,Sl.jsx=i,Sl.jsxs=i,Sl}var c0;function cA(){return c0||(c0=1,Yd.exports=uA()),Yd.exports}var E=cA(),Kd={exports:{}},Se={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var h0;function hA(){if(h0)return Se;h0=1;var s=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),l=Symbol.for("react.profiler"),u=Symbol.for("react.consumer"),f=Symbol.for("react.context"),p=Symbol.for("react.forward_ref"),y=Symbol.for("react.suspense"),g=Symbol.for("react.memo"),T=Symbol.for("react.lazy"),A=Symbol.for("react.activity"),x=Symbol.iterator;function j(M){return M===null||typeof M!="object"?null:(M=x&&M[x]||M["@@iterator"],typeof M=="function"?M:null)}var U={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Q=Object.assign,G={};function te(M,Z,re){this.props=M,this.context=Z,this.refs=G,this.updater=re||U}te.prototype.isReactComponent={},te.prototype.setState=function(M,Z){if(typeof M!="object"&&typeof M!="function"&&M!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,M,Z,"setState")},te.prototype.forceUpdate=function(M){this.updater.enqueueForceUpdate(this,M,"forceUpdate")};function fe(){}fe.prototype=te.prototype;function ee(M,Z,re){this.props=M,this.context=Z,this.refs=G,this.updater=re||U}var ue=ee.prototype=new fe;ue.constructor=ee,Q(ue,te.prototype),ue.isPureReactComponent=!0;var ce=Array.isArray;function Te(){}var N={H:null,A:null,T:null,S:null},w=Object.prototype.hasOwnProperty;function I(M,Z,re){var le=re.ref;return{$$typeof:s,type:M,key:Z,ref:le!==void 0?le:null,props:re}}function V(M,Z){return I(M.type,Z,M.props)}function D(M){return typeof M=="object"&&M!==null&&M.$$typeof===s}function k(M){var Z={"=":"=0",":":"=2"};return"$"+M.replace(/[=:]/g,function(re){return Z[re]})}var R=/\/+/g;function be(M,Z){return typeof M=="object"&&M!==null&&M.key!=null?k(""+M.key):Z.toString(36)}function lt(M){switch(M.status){case"fulfilled":return M.value;case"rejected":throw M.reason;default:switch(typeof M.status=="string"?M.then(Te,Te):(M.status="pending",M.then(function(Z){M.status==="pending"&&(M.status="fulfilled",M.value=Z)},function(Z){M.status==="pending"&&(M.status="rejected",M.reason=Z)})),M.status){case"fulfilled":return M.value;case"rejected":throw M.reason}}throw M}function K(M,Z,re,le,Ee){var Ie=typeof M;(Ie==="undefined"||Ie==="boolean")&&(M=null);var Le=!1;if(M===null)Le=!0;else switch(Ie){case"bigint":case"string":case"number":Le=!0;break;case"object":switch(M.$$typeof){case s:case e:Le=!0;break;case T:return Le=M._init,K(Le(M._payload),Z,re,le,Ee)}}if(Le)return Ee=Ee(M),Le=le===""?"."+be(M,0):le,ce(Ee)?(re="",Le!=null&&(re=Le.replace(R,"$&/")+"/"),K(Ee,Z,re,"",function(gr){return gr})):Ee!=null&&(D(Ee)&&(Ee=V(Ee,re+(Ee.key==null||M&&M.key===Ee.key?"":(""+Ee.key).replace(R,"$&/")+"/")+Le)),Z.push(Ee)),1;Le=0;var Mt=le===""?".":le+":";if(ce(M))for(var rt=0;rt<M.length;rt++)le=M[rt],Ie=Mt+be(le,rt),Le+=K(le,Z,re,Ie,Ee);else if(rt=j(M),typeof rt=="function")for(M=rt.call(M),rt=0;!(le=M.next()).done;)le=le.value,Ie=Mt+be(le,rt++),Le+=K(le,Z,re,Ie,Ee);else if(Ie==="object"){if(typeof M.then=="function")return K(lt(M),Z,re,le,Ee);throw Z=String(M),Error("Objects are not valid as a React child (found: "+(Z==="[object Object]"?"object with keys {"+Object.keys(M).join(", ")+"}":Z)+"). If you meant to render a collection of children, use an array instead.")}return Le}function se(M,Z,re){if(M==null)return M;var le=[],Ee=0;return K(M,le,"","",function(Ie){return Z.call(re,Ie,Ee++)}),le}function ge(M){if(M._status===-1){var Z=M._result;Z=Z(),Z.then(function(re){(M._status===0||M._status===-1)&&(M._status=1,M._result=re)},function(re){(M._status===0||M._status===-1)&&(M._status=2,M._result=re)}),M._status===-1&&(M._status=0,M._result=Z)}if(M._status===1)return M._result.default;throw M._result}var ze=typeof reportError=="function"?reportError:function(M){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var Z=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof M=="object"&&M!==null&&typeof M.message=="string"?String(M.message):String(M),error:M});if(!window.dispatchEvent(Z))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",M);return}console.error(M)},Qe={map:se,forEach:function(M,Z,re){se(M,function(){Z.apply(this,arguments)},re)},count:function(M){var Z=0;return se(M,function(){Z++}),Z},toArray:function(M){return se(M,function(Z){return Z})||[]},only:function(M){if(!D(M))throw Error("React.Children.only expected to receive a single React element child.");return M}};return Se.Activity=A,Se.Children=Qe,Se.Component=te,Se.Fragment=i,Se.Profiler=l,Se.PureComponent=ee,Se.StrictMode=r,Se.Suspense=y,Se.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=N,Se.__COMPILER_RUNTIME={__proto__:null,c:function(M){return N.H.useMemoCache(M)}},Se.cache=function(M){return function(){return M.apply(null,arguments)}},Se.cacheSignal=function(){return null},Se.cloneElement=function(M,Z,re){if(M==null)throw Error("The argument must be a React element, but you passed "+M+".");var le=Q({},M.props),Ee=M.key;if(Z!=null)for(Ie in Z.key!==void 0&&(Ee=""+Z.key),Z)!w.call(Z,Ie)||Ie==="key"||Ie==="__self"||Ie==="__source"||Ie==="ref"&&Z.ref===void 0||(le[Ie]=Z[Ie]);var Ie=arguments.length-2;if(Ie===1)le.children=re;else if(1<Ie){for(var Le=Array(Ie),Mt=0;Mt<Ie;Mt++)Le[Mt]=arguments[Mt+2];le.children=Le}return I(M.type,Ee,le)},Se.createContext=function(M){return M={$$typeof:f,_currentValue:M,_currentValue2:M,_threadCount:0,Provider:null,Consumer:null},M.Provider=M,M.Consumer={$$typeof:u,_context:M},M},Se.createElement=function(M,Z,re){var le,Ee={},Ie=null;if(Z!=null)for(le in Z.key!==void 0&&(Ie=""+Z.key),Z)w.call(Z,le)&&le!=="key"&&le!=="__self"&&le!=="__source"&&(Ee[le]=Z[le]);var Le=arguments.length-2;if(Le===1)Ee.children=re;else if(1<Le){for(var Mt=Array(Le),rt=0;rt<Le;rt++)Mt[rt]=arguments[rt+2];Ee.children=Mt}if(M&&M.defaultProps)for(le in Le=M.defaultProps,Le)Ee[le]===void 0&&(Ee[le]=Le[le]);return I(M,Ie,Ee)},Se.createRef=function(){return{current:null}},Se.forwardRef=function(M){return{$$typeof:p,render:M}},Se.isValidElement=D,Se.lazy=function(M){return{$$typeof:T,_payload:{_status:-1,_result:M},_init:ge}},Se.memo=function(M,Z){return{$$typeof:g,type:M,compare:Z===void 0?null:Z}},Se.startTransition=function(M){var Z=N.T,re={};N.T=re;try{var le=M(),Ee=N.S;Ee!==null&&Ee(re,le),typeof le=="object"&&le!==null&&typeof le.then=="function"&&le.then(Te,ze)}catch(Ie){ze(Ie)}finally{Z!==null&&re.types!==null&&(Z.types=re.types),N.T=Z}},Se.unstable_useCacheRefresh=function(){return N.H.useCacheRefresh()},Se.use=function(M){return N.H.use(M)},Se.useActionState=function(M,Z,re){return N.H.useActionState(M,Z,re)},Se.useCallback=function(M,Z){return N.H.useCallback(M,Z)},Se.useContext=function(M){return N.H.useContext(M)},Se.useDebugValue=function(){},Se.useDeferredValue=function(M,Z){return N.H.useDeferredValue(M,Z)},Se.useEffect=function(M,Z){return N.H.useEffect(M,Z)},Se.useEffectEvent=function(M){return N.H.useEffectEvent(M)},Se.useId=function(){return N.H.useId()},Se.useImperativeHandle=function(M,Z,re){return N.H.useImperativeHandle(M,Z,re)},Se.useInsertionEffect=function(M,Z){return N.H.useInsertionEffect(M,Z)},Se.useLayoutEffect=function(M,Z){return N.H.useLayoutEffect(M,Z)},Se.useMemo=function(M,Z){return N.H.useMemo(M,Z)},Se.useOptimistic=function(M,Z){return N.H.useOptimistic(M,Z)},Se.useReducer=function(M,Z,re){return N.H.useReducer(M,Z,re)},Se.useRef=function(M){return N.H.useRef(M)},Se.useState=function(M){return N.H.useState(M)},Se.useSyncExternalStore=function(M,Z,re){return N.H.useSyncExternalStore(M,Z,re)},Se.useTransition=function(){return N.H.useTransition()},Se.version="19.2.0",Se}var f0;function Hm(){return f0||(f0=1,Kd.exports=hA()),Kd.exports}var ie=Hm();const fA=lA(ie);var Xd={exports:{}},wl={},$d={exports:{}},Jd={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var d0;function dA(){return d0||(d0=1,(function(s){function e(K,se){var ge=K.length;K.push(se);e:for(;0<ge;){var ze=ge-1>>>1,Qe=K[ze];if(0<l(Qe,se))K[ze]=se,K[ge]=Qe,ge=ze;else break e}}function i(K){return K.length===0?null:K[0]}function r(K){if(K.length===0)return null;var se=K[0],ge=K.pop();if(ge!==se){K[0]=ge;e:for(var ze=0,Qe=K.length,M=Qe>>>1;ze<M;){var Z=2*(ze+1)-1,re=K[Z],le=Z+1,Ee=K[le];if(0>l(re,ge))le<Qe&&0>l(Ee,re)?(K[ze]=Ee,K[le]=ge,ze=le):(K[ze]=re,K[Z]=ge,ze=Z);else if(le<Qe&&0>l(Ee,ge))K[ze]=Ee,K[le]=ge,ze=le;else break e}}return se}function l(K,se){var ge=K.sortIndex-se.sortIndex;return ge!==0?ge:K.id-se.id}if(s.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var u=performance;s.unstable_now=function(){return u.now()}}else{var f=Date,p=f.now();s.unstable_now=function(){return f.now()-p}}var y=[],g=[],T=1,A=null,x=3,j=!1,U=!1,Q=!1,G=!1,te=typeof setTimeout=="function"?setTimeout:null,fe=typeof clearTimeout=="function"?clearTimeout:null,ee=typeof setImmediate<"u"?setImmediate:null;function ue(K){for(var se=i(g);se!==null;){if(se.callback===null)r(g);else if(se.startTime<=K)r(g),se.sortIndex=se.expirationTime,e(y,se);else break;se=i(g)}}function ce(K){if(Q=!1,ue(K),!U)if(i(y)!==null)U=!0,Te||(Te=!0,k());else{var se=i(g);se!==null&&lt(ce,se.startTime-K)}}var Te=!1,N=-1,w=5,I=-1;function V(){return G?!0:!(s.unstable_now()-I<w)}function D(){if(G=!1,Te){var K=s.unstable_now();I=K;var se=!0;try{e:{U=!1,Q&&(Q=!1,fe(N),N=-1),j=!0;var ge=x;try{t:{for(ue(K),A=i(y);A!==null&&!(A.expirationTime>K&&V());){var ze=A.callback;if(typeof ze=="function"){A.callback=null,x=A.priorityLevel;var Qe=ze(A.expirationTime<=K);if(K=s.unstable_now(),typeof Qe=="function"){A.callback=Qe,ue(K),se=!0;break t}A===i(y)&&r(y),ue(K)}else r(y);A=i(y)}if(A!==null)se=!0;else{var M=i(g);M!==null&&lt(ce,M.startTime-K),se=!1}}break e}finally{A=null,x=ge,j=!1}se=void 0}}finally{se?k():Te=!1}}}var k;if(typeof ee=="function")k=function(){ee(D)};else if(typeof MessageChannel<"u"){var R=new MessageChannel,be=R.port2;R.port1.onmessage=D,k=function(){be.postMessage(null)}}else k=function(){te(D,0)};function lt(K,se){N=te(function(){K(s.unstable_now())},se)}s.unstable_IdlePriority=5,s.unstable_ImmediatePriority=1,s.unstable_LowPriority=4,s.unstable_NormalPriority=3,s.unstable_Profiling=null,s.unstable_UserBlockingPriority=2,s.unstable_cancelCallback=function(K){K.callback=null},s.unstable_forceFrameRate=function(K){0>K||125<K?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):w=0<K?Math.floor(1e3/K):5},s.unstable_getCurrentPriorityLevel=function(){return x},s.unstable_next=function(K){switch(x){case 1:case 2:case 3:var se=3;break;default:se=x}var ge=x;x=se;try{return K()}finally{x=ge}},s.unstable_requestPaint=function(){G=!0},s.unstable_runWithPriority=function(K,se){switch(K){case 1:case 2:case 3:case 4:case 5:break;default:K=3}var ge=x;x=K;try{return se()}finally{x=ge}},s.unstable_scheduleCallback=function(K,se,ge){var ze=s.unstable_now();switch(typeof ge=="object"&&ge!==null?(ge=ge.delay,ge=typeof ge=="number"&&0<ge?ze+ge:ze):ge=ze,K){case 1:var Qe=-1;break;case 2:Qe=250;break;case 5:Qe=1073741823;break;case 4:Qe=1e4;break;default:Qe=5e3}return Qe=ge+Qe,K={id:T++,callback:se,priorityLevel:K,startTime:ge,expirationTime:Qe,sortIndex:-1},ge>ze?(K.sortIndex=ge,e(g,K),i(y)===null&&K===i(g)&&(Q?(fe(N),N=-1):Q=!0,lt(ce,ge-ze))):(K.sortIndex=Qe,e(y,K),U||j||(U=!0,Te||(Te=!0,k()))),K},s.unstable_shouldYield=V,s.unstable_wrapCallback=function(K){var se=x;return function(){var ge=x;x=se;try{return K.apply(this,arguments)}finally{x=ge}}}})(Jd)),Jd}var m0;function mA(){return m0||(m0=1,$d.exports=dA()),$d.exports}var Zd={exports:{}},Jt={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var p0;function pA(){if(p0)return Jt;p0=1;var s=Hm();function e(y){var g="https://react.dev/errors/"+y;if(1<arguments.length){g+="?args[]="+encodeURIComponent(arguments[1]);for(var T=2;T<arguments.length;T++)g+="&args[]="+encodeURIComponent(arguments[T])}return"Minified React error #"+y+"; visit "+g+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function i(){}var r={d:{f:i,r:function(){throw Error(e(522))},D:i,C:i,L:i,m:i,X:i,S:i,M:i},p:0,findDOMNode:null},l=Symbol.for("react.portal");function u(y,g,T){var A=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:l,key:A==null?null:""+A,children:y,containerInfo:g,implementation:T}}var f=s.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function p(y,g){if(y==="font")return"";if(typeof g=="string")return g==="use-credentials"?g:""}return Jt.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,Jt.createPortal=function(y,g){var T=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!g||g.nodeType!==1&&g.nodeType!==9&&g.nodeType!==11)throw Error(e(299));return u(y,g,null,T)},Jt.flushSync=function(y){var g=f.T,T=r.p;try{if(f.T=null,r.p=2,y)return y()}finally{f.T=g,r.p=T,r.d.f()}},Jt.preconnect=function(y,g){typeof y=="string"&&(g?(g=g.crossOrigin,g=typeof g=="string"?g==="use-credentials"?g:"":void 0):g=null,r.d.C(y,g))},Jt.prefetchDNS=function(y){typeof y=="string"&&r.d.D(y)},Jt.preinit=function(y,g){if(typeof y=="string"&&g&&typeof g.as=="string"){var T=g.as,A=p(T,g.crossOrigin),x=typeof g.integrity=="string"?g.integrity:void 0,j=typeof g.fetchPriority=="string"?g.fetchPriority:void 0;T==="style"?r.d.S(y,typeof g.precedence=="string"?g.precedence:void 0,{crossOrigin:A,integrity:x,fetchPriority:j}):T==="script"&&r.d.X(y,{crossOrigin:A,integrity:x,fetchPriority:j,nonce:typeof g.nonce=="string"?g.nonce:void 0})}},Jt.preinitModule=function(y,g){if(typeof y=="string")if(typeof g=="object"&&g!==null){if(g.as==null||g.as==="script"){var T=p(g.as,g.crossOrigin);r.d.M(y,{crossOrigin:T,integrity:typeof g.integrity=="string"?g.integrity:void 0,nonce:typeof g.nonce=="string"?g.nonce:void 0})}}else g==null&&r.d.M(y)},Jt.preload=function(y,g){if(typeof y=="string"&&typeof g=="object"&&g!==null&&typeof g.as=="string"){var T=g.as,A=p(T,g.crossOrigin);r.d.L(y,T,{crossOrigin:A,integrity:typeof g.integrity=="string"?g.integrity:void 0,nonce:typeof g.nonce=="string"?g.nonce:void 0,type:typeof g.type=="string"?g.type:void 0,fetchPriority:typeof g.fetchPriority=="string"?g.fetchPriority:void 0,referrerPolicy:typeof g.referrerPolicy=="string"?g.referrerPolicy:void 0,imageSrcSet:typeof g.imageSrcSet=="string"?g.imageSrcSet:void 0,imageSizes:typeof g.imageSizes=="string"?g.imageSizes:void 0,media:typeof g.media=="string"?g.media:void 0})}},Jt.preloadModule=function(y,g){if(typeof y=="string")if(g){var T=p(g.as,g.crossOrigin);r.d.m(y,{as:typeof g.as=="string"&&g.as!=="script"?g.as:void 0,crossOrigin:T,integrity:typeof g.integrity=="string"?g.integrity:void 0})}else r.d.m(y)},Jt.requestFormReset=function(y){r.d.r(y)},Jt.unstable_batchedUpdates=function(y,g){return y(g)},Jt.useFormState=function(y,g,T){return f.H.useFormState(y,g,T)},Jt.useFormStatus=function(){return f.H.useHostTransitionStatus()},Jt.version="19.2.0",Jt}var g0;function gA(){if(g0)return Zd.exports;g0=1;function s(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(s)}catch(e){console.error(e)}}return s(),Zd.exports=pA(),Zd.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var y0;function yA(){if(y0)return wl;y0=1;var s=mA(),e=Hm(),i=gA();function r(t){var n="https://react.dev/errors/"+t;if(1<arguments.length){n+="?args[]="+encodeURIComponent(arguments[1]);for(var a=2;a<arguments.length;a++)n+="&args[]="+encodeURIComponent(arguments[a])}return"Minified React error #"+t+"; visit "+n+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function l(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function u(t){var n=t,a=t;if(t.alternate)for(;n.return;)n=n.return;else{t=n;do n=t,(n.flags&4098)!==0&&(a=n.return),t=n.return;while(t)}return n.tag===3?a:null}function f(t){if(t.tag===13){var n=t.memoizedState;if(n===null&&(t=t.alternate,t!==null&&(n=t.memoizedState)),n!==null)return n.dehydrated}return null}function p(t){if(t.tag===31){var n=t.memoizedState;if(n===null&&(t=t.alternate,t!==null&&(n=t.memoizedState)),n!==null)return n.dehydrated}return null}function y(t){if(u(t)!==t)throw Error(r(188))}function g(t){var n=t.alternate;if(!n){if(n=u(t),n===null)throw Error(r(188));return n!==t?null:t}for(var a=t,o=n;;){var h=a.return;if(h===null)break;var d=h.alternate;if(d===null){if(o=h.return,o!==null){a=o;continue}break}if(h.child===d.child){for(d=h.child;d;){if(d===a)return y(h),t;if(d===o)return y(h),n;d=d.sibling}throw Error(r(188))}if(a.return!==o.return)a=h,o=d;else{for(var _=!1,b=h.child;b;){if(b===a){_=!0,a=h,o=d;break}if(b===o){_=!0,o=h,a=d;break}b=b.sibling}if(!_){for(b=d.child;b;){if(b===a){_=!0,a=d,o=h;break}if(b===o){_=!0,o=d,a=h;break}b=b.sibling}if(!_)throw Error(r(189))}}if(a.alternate!==o)throw Error(r(190))}if(a.tag!==3)throw Error(r(188));return a.stateNode.current===a?t:n}function T(t){var n=t.tag;if(n===5||n===26||n===27||n===6)return t;for(t=t.child;t!==null;){if(n=T(t),n!==null)return n;t=t.sibling}return null}var A=Object.assign,x=Symbol.for("react.element"),j=Symbol.for("react.transitional.element"),U=Symbol.for("react.portal"),Q=Symbol.for("react.fragment"),G=Symbol.for("react.strict_mode"),te=Symbol.for("react.profiler"),fe=Symbol.for("react.consumer"),ee=Symbol.for("react.context"),ue=Symbol.for("react.forward_ref"),ce=Symbol.for("react.suspense"),Te=Symbol.for("react.suspense_list"),N=Symbol.for("react.memo"),w=Symbol.for("react.lazy"),I=Symbol.for("react.activity"),V=Symbol.for("react.memo_cache_sentinel"),D=Symbol.iterator;function k(t){return t===null||typeof t!="object"?null:(t=D&&t[D]||t["@@iterator"],typeof t=="function"?t:null)}var R=Symbol.for("react.client.reference");function be(t){if(t==null)return null;if(typeof t=="function")return t.$$typeof===R?null:t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Q:return"Fragment";case te:return"Profiler";case G:return"StrictMode";case ce:return"Suspense";case Te:return"SuspenseList";case I:return"Activity"}if(typeof t=="object")switch(t.$$typeof){case U:return"Portal";case ee:return t.displayName||"Context";case fe:return(t._context.displayName||"Context")+".Consumer";case ue:var n=t.render;return t=t.displayName,t||(t=n.displayName||n.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case N:return n=t.displayName||null,n!==null?n:be(t.type)||"Memo";case w:n=t._payload,t=t._init;try{return be(t(n))}catch{}}return null}var lt=Array.isArray,K=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,se=i.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ge={pending:!1,data:null,method:null,action:null},ze=[],Qe=-1;function M(t){return{current:t}}function Z(t){0>Qe||(t.current=ze[Qe],ze[Qe]=null,Qe--)}function re(t,n){Qe++,ze[Qe]=t.current,t.current=n}var le=M(null),Ee=M(null),Ie=M(null),Le=M(null);function Mt(t,n){switch(re(Ie,n),re(Ee,t),re(le,null),n.nodeType){case 9:case 11:t=(t=n.documentElement)&&(t=t.namespaceURI)?O_(t):0;break;default:if(t=n.tagName,n=n.namespaceURI)n=O_(n),t=M_(n,t);else switch(t){case"svg":t=1;break;case"math":t=2;break;default:t=0}}Z(le),re(le,t)}function rt(){Z(le),Z(Ee),Z(Ie)}function gr(t){t.memoizedState!==null&&re(Le,t);var n=le.current,a=M_(n,t.type);n!==a&&(re(Ee,t),re(le,a))}function sa(t){Ee.current===t&&(Z(le),Z(Ee)),Le.current===t&&(Z(Le),El._currentValue=ge)}var ra,aa;function oi(t){if(ra===void 0)try{throw Error()}catch(a){var n=a.stack.trim().match(/\n( *(at )?)/);ra=n&&n[1]||"",aa=-1<a.stack.indexOf(`
    at`)?" (<anonymous>)":-1<a.stack.indexOf("@")?"@unknown:0:0":""}return`
`+ra+t+aa}var Eo=!1;function yr(t,n){if(!t||Eo)return"";Eo=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var o={DetermineComponentFrameRoot:function(){try{if(n){var $=function(){throw Error()};if(Object.defineProperty($.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct($,[])}catch(F){var q=F}Reflect.construct(t,[],$)}else{try{$.call()}catch(F){q=F}t.call($.prototype)}}else{try{throw Error()}catch(F){q=F}($=t())&&typeof $.catch=="function"&&$.catch(function(){})}}catch(F){if(F&&q&&typeof F.stack=="string")return[F.stack,q.stack]}return[null,null]}};o.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var h=Object.getOwnPropertyDescriptor(o.DetermineComponentFrameRoot,"name");h&&h.configurable&&Object.defineProperty(o.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var d=o.DetermineComponentFrameRoot(),_=d[0],b=d[1];if(_&&b){var C=_.split(`
`),B=b.split(`
`);for(h=o=0;o<C.length&&!C[o].includes("DetermineComponentFrameRoot");)o++;for(;h<B.length&&!B[h].includes("DetermineComponentFrameRoot");)h++;if(o===C.length||h===B.length)for(o=C.length-1,h=B.length-1;1<=o&&0<=h&&C[o]!==B[h];)h--;for(;1<=o&&0<=h;o--,h--)if(C[o]!==B[h]){if(o!==1||h!==1)do if(o--,h--,0>h||C[o]!==B[h]){var Y=`
`+C[o].replace(" at new "," at ");return t.displayName&&Y.includes("<anonymous>")&&(Y=Y.replace("<anonymous>",t.displayName)),Y}while(1<=o&&0<=h);break}}}finally{Eo=!1,Error.prepareStackTrace=a}return(a=t?t.displayName||t.name:"")?oi(a):""}function To(t,n){switch(t.tag){case 26:case 27:case 5:return oi(t.type);case 16:return oi("Lazy");case 13:return t.child!==n&&n!==null?oi("Suspense Fallback"):oi("Suspense");case 19:return oi("SuspenseList");case 0:case 15:return yr(t.type,!1);case 11:return yr(t.type.render,!1);case 1:return yr(t.type,!0);case 31:return oi("Activity");default:return""}}function bo(t){try{var n="",a=null;do n+=To(t,a),a=t,t=t.return;while(t);return n}catch(o){return`
Error generating stack: `+o.message+`
`+o.stack}}var Tt=Object.prototype.hasOwnProperty,Vt=s.unstable_scheduleCallback,gs=s.unstable_cancelCallback,Kh=s.unstable_shouldYield,uu=s.unstable_requestPaint,nn=s.unstable_now,_r=s.unstable_getCurrentPriorityLevel,Ao=s.unstable_ImmediatePriority,So=s.unstable_UserBlockingPriority,ys=s.unstable_NormalPriority,Xh=s.unstable_LowPriority,cu=s.unstable_IdlePriority,hu=s.log,fu=s.unstable_setDisableYieldValue,Fn=null,qt=null;function Rn(t){if(typeof hu=="function"&&fu(t),qt&&typeof qt.setStrictMode=="function")try{qt.setStrictMode(Fn,t)}catch{}}var gt=Math.clz32?Math.clz32:mu,du=Math.log,oa=Math.LN2;function mu(t){return t>>>=0,t===0?32:31-(du(t)/oa|0)|0}var li=256,vr=262144,bt=4194304;function ui(t){var n=t&42;if(n!==0)return n;switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return t&261888;case 262144:case 524288:case 1048576:case 2097152:return t&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return t&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return t}}function ci(t,n,a){var o=t.pendingLanes;if(o===0)return 0;var h=0,d=t.suspendedLanes,_=t.pingedLanes;t=t.warmLanes;var b=o&134217727;return b!==0?(o=b&~d,o!==0?h=ui(o):(_&=b,_!==0?h=ui(_):a||(a=b&~t,a!==0&&(h=ui(a))))):(b=o&~d,b!==0?h=ui(b):_!==0?h=ui(_):a||(a=o&~t,a!==0&&(h=ui(a)))),h===0?0:n!==0&&n!==h&&(n&d)===0&&(d=h&-h,a=n&-n,d>=a||d===32&&(a&4194048)!==0)?n:h}function Gn(t,n){return(t.pendingLanes&~(t.suspendedLanes&~t.pingedLanes)&n)===0}function $h(t,n){switch(t){case 1:case 2:case 4:case 8:case 64:return n+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function pu(){var t=bt;return bt<<=1,(bt&62914560)===0&&(bt=4194304),t}function hi(t){for(var n=[],a=0;31>a;a++)n.push(t);return n}function Er(t,n){t.pendingLanes|=n,n!==268435456&&(t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0)}function Jh(t,n,a,o,h,d){var _=t.pendingLanes;t.pendingLanes=a,t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0,t.expiredLanes&=a,t.entangledLanes&=a,t.errorRecoveryDisabledLanes&=a,t.shellSuspendCounter=0;var b=t.entanglements,C=t.expirationTimes,B=t.hiddenUpdates;for(a=_&~a;0<a;){var Y=31-gt(a),$=1<<Y;b[Y]=0,C[Y]=-1;var q=B[Y];if(q!==null)for(B[Y]=null,Y=0;Y<q.length;Y++){var F=q[Y];F!==null&&(F.lane&=-536870913)}a&=~$}o!==0&&Tr(t,o,0),d!==0&&h===0&&t.tag!==0&&(t.suspendedLanes|=d&~(_&~n))}function Tr(t,n,a){t.pendingLanes|=n,t.suspendedLanes&=~n;var o=31-gt(n);t.entangledLanes|=n,t.entanglements[o]=t.entanglements[o]|1073741824|a&261930}function wo(t,n){var a=t.entangledLanes|=n;for(t=t.entanglements;a;){var o=31-gt(a),h=1<<o;h&n|t[o]&n&&(t[o]|=n),a&=~h}}function xo(t,n){var a=n&-n;return a=(a&42)!==0?1:br(a),(a&(t.suspendedLanes|n))!==0?0:a}function br(t){switch(t){case 2:t=1;break;case 8:t=4;break;case 32:t=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:t=128;break;case 268435456:t=134217728;break;default:t=0}return t}function Ui(t){return t&=-t,2<t?8<t?(t&134217727)!==0?32:268435456:8:2}function gu(){var t=se.p;return t!==0?t:(t=window.event,t===void 0?32:n0(t.type))}function Qn(t,n){var a=se.p;try{return se.p=t,n()}finally{se.p=a}}var Yn=Math.random().toString(36).slice(2),At="__reactFiber$"+Yn,Lt="__reactProps$"+Yn,fi="__reactContainer$"+Yn,la="__reactEvents$"+Yn,Zh="__reactListeners$"+Yn,yu="__reactHandles$"+Yn,_u="__reactResources$"+Yn,di="__reactMarker$"+Yn;function ua(t){delete t[At],delete t[Lt],delete t[la],delete t[Zh],delete t[yu]}function mi(t){var n=t[At];if(n)return n;for(var a=t.parentNode;a;){if(n=a[fi]||a[At]){if(a=n.alternate,n.child!==null||a!==null&&a.child!==null)for(t=z_(t);t!==null;){if(a=t[At])return a;t=z_(t)}return n}t=a,a=t.parentNode}return null}function In(t){if(t=t[At]||t[fi]){var n=t.tag;if(n===5||n===6||n===13||n===31||n===26||n===27||n===3)return t}return null}function yn(t){var n=t.tag;if(n===5||n===26||n===27||n===6)return t.stateNode;throw Error(r(33))}function pi(t){var n=t[_u];return n||(n=t[_u]={hoistableStyles:new Map,hoistableScripts:new Map}),n}function St(t){t[di]=!0}var Ro=new Set,Io={};function gi(t,n){yi(t,n),yi(t+"Capture",n)}function yi(t,n){for(Io[t]=n,t=0;t<n.length;t++)Ro.add(n[t])}var Co=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),No={},Do={};function vu(t){return Tt.call(Do,t)?!0:Tt.call(No,t)?!1:Co.test(t)?Do[t]=!0:(No[t]=!0,!1)}function ca(t,n,a){if(vu(n))if(a===null)t.removeAttribute(n);else{switch(typeof a){case"undefined":case"function":case"symbol":t.removeAttribute(n);return;case"boolean":var o=n.toLowerCase().slice(0,5);if(o!=="data-"&&o!=="aria-"){t.removeAttribute(n);return}}t.setAttribute(n,""+a)}}function _n(t,n,a){if(a===null)t.removeAttribute(n);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(n);return}t.setAttribute(n,""+a)}}function wt(t,n,a,o){if(o===null)t.removeAttribute(a);else{switch(typeof o){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(a);return}t.setAttributeNS(n,a,""+o)}}function Ut(t){switch(typeof t){case"bigint":case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function _s(t){var n=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(n==="checkbox"||n==="radio")}function Oo(t,n,a){var o=Object.getOwnPropertyDescriptor(t.constructor.prototype,n);if(!t.hasOwnProperty(n)&&typeof o<"u"&&typeof o.get=="function"&&typeof o.set=="function"){var h=o.get,d=o.set;return Object.defineProperty(t,n,{configurable:!0,get:function(){return h.call(this)},set:function(_){a=""+_,d.call(this,_)}}),Object.defineProperty(t,n,{enumerable:o.enumerable}),{getValue:function(){return a},setValue:function(_){a=""+_},stopTracking:function(){t._valueTracker=null,delete t[n]}}}}function Ye(t){if(!t._valueTracker){var n=_s(t)?"checked":"value";t._valueTracker=Oo(t,n,""+t[n])}}function Ar(t){if(!t)return!1;var n=t._valueTracker;if(!n)return!0;var a=n.getValue(),o="";return t&&(o=_s(t)?t.checked?"true":"false":t.value),t=o,t!==a?(n.setValue(t),!0):!1}function _i(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}var Sr=/[\n"\\]/g;function an(t){return t.replace(Sr,function(n){return"\\"+n.charCodeAt(0).toString(16)+" "})}function ha(t,n,a,o,h,d,_,b){t.name="",_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"?t.type=_:t.removeAttribute("type"),n!=null?_==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+Ut(n)):t.value!==""+Ut(n)&&(t.value=""+Ut(n)):_!=="submit"&&_!=="reset"||t.removeAttribute("value"),n!=null?Mo(t,_,Ut(n)):a!=null?Mo(t,_,Ut(a)):o!=null&&t.removeAttribute("value"),h==null&&d!=null&&(t.defaultChecked=!!d),h!=null&&(t.checked=h&&typeof h!="function"&&typeof h!="symbol"),b!=null&&typeof b!="function"&&typeof b!="symbol"&&typeof b!="boolean"?t.name=""+Ut(b):t.removeAttribute("name")}function Eu(t,n,a,o,h,d,_,b){if(d!=null&&typeof d!="function"&&typeof d!="symbol"&&typeof d!="boolean"&&(t.type=d),n!=null||a!=null){if(!(d!=="submit"&&d!=="reset"||n!=null)){Ye(t);return}a=a!=null?""+Ut(a):"",n=n!=null?""+Ut(n):a,b||n===t.value||(t.value=n),t.defaultValue=n}o=o??h,o=typeof o!="function"&&typeof o!="symbol"&&!!o,t.checked=b?t.checked:!!o,t.defaultChecked=!!o,_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"&&(t.name=_),Ye(t)}function Mo(t,n,a){n==="number"&&_i(t.ownerDocument)===t||t.defaultValue===""+a||(t.defaultValue=""+a)}function vs(t,n,a,o){if(t=t.options,n){n={};for(var h=0;h<a.length;h++)n["$"+a[h]]=!0;for(a=0;a<t.length;a++)h=n.hasOwnProperty("$"+t[a].value),t[a].selected!==h&&(t[a].selected=h),h&&o&&(t[a].defaultSelected=!0)}else{for(a=""+Ut(a),n=null,h=0;h<t.length;h++){if(t[h].value===a){t[h].selected=!0,o&&(t[h].defaultSelected=!0);return}n!==null||t[h].disabled||(n=t[h])}n!==null&&(n.selected=!0)}}function Tu(t,n,a){if(n!=null&&(n=""+Ut(n),n!==t.value&&(t.value=n),a==null)){t.defaultValue!==n&&(t.defaultValue=n);return}t.defaultValue=a!=null?""+Ut(a):""}function Es(t,n,a,o){if(n==null){if(o!=null){if(a!=null)throw Error(r(92));if(lt(o)){if(1<o.length)throw Error(r(93));o=o[0]}a=o}a==null&&(a=""),n=a}a=Ut(n),t.defaultValue=a,o=t.textContent,o===a&&o!==""&&o!==null&&(t.value=o),Ye(t)}function on(t,n){if(n){var a=t.firstChild;if(a&&a===t.lastChild&&a.nodeType===3){a.nodeValue=n;return}}t.textContent=n}var bu=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Vo(t,n,a){var o=n.indexOf("--")===0;a==null||typeof a=="boolean"||a===""?o?t.setProperty(n,""):n==="float"?t.cssFloat="":t[n]="":o?t.setProperty(n,a):typeof a!="number"||a===0||bu.has(n)?n==="float"?t.cssFloat=a:t[n]=(""+a).trim():t[n]=a+"px"}function ko(t,n,a){if(n!=null&&typeof n!="object")throw Error(r(62));if(t=t.style,a!=null){for(var o in a)!a.hasOwnProperty(o)||n!=null&&n.hasOwnProperty(o)||(o.indexOf("--")===0?t.setProperty(o,""):o==="float"?t.cssFloat="":t[o]="");for(var h in n)o=n[h],n.hasOwnProperty(h)&&a[h]!==o&&Vo(t,h,o)}else for(var d in n)n.hasOwnProperty(d)&&Vo(t,d,n[d])}function fa(t){if(t.indexOf("-")===-1)return!1;switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Au=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Ts=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function da(t){return Ts.test(""+t)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":t}function Kn(){}var jo=null;function Cn(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var bs=null,vi=null;function wr(t){var n=In(t);if(n&&(t=n.stateNode)){var a=t[Lt]||null;e:switch(t=n.stateNode,n.type){case"input":if(ha(t,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name),n=a.name,a.type==="radio"&&n!=null){for(a=t;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll('input[name="'+an(""+n)+'"][type="radio"]'),n=0;n<a.length;n++){var o=a[n];if(o!==t&&o.form===t.form){var h=o[Lt]||null;if(!h)throw Error(r(90));ha(o,h.value,h.defaultValue,h.defaultValue,h.checked,h.defaultChecked,h.type,h.name)}}for(n=0;n<a.length;n++)o=a[n],o.form===t.form&&Ar(o)}break e;case"textarea":Tu(t,a.value,a.defaultValue);break e;case"select":n=a.value,n!=null&&vs(t,!!a.multiple,n,!1)}}}var ma=!1;function As(t,n,a){if(ma)return t(n,a);ma=!0;try{var o=t(n);return o}finally{if(ma=!1,(bs!==null||vi!==null)&&(gc(),bs&&(n=bs,t=vi,vi=bs=null,wr(n),t)))for(n=0;n<t.length;n++)wr(t[n])}}function Xn(t,n){var a=t.stateNode;if(a===null)return null;var o=a[Lt]||null;if(o===null)return null;a=o[n];e:switch(n){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(o=!o.disabled)||(t=t.type,o=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!o;break e;default:t=!1}if(t)return null;if(a&&typeof a!="function")throw Error(r(231,n,typeof a));return a}var Nn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),xr=!1;if(Nn)try{var $e={};Object.defineProperty($e,"passive",{get:function(){xr=!0}}),window.addEventListener("test",$e,$e),window.removeEventListener("test",$e,$e)}catch{xr=!1}var Ei=null,Po=null,Rr=null;function Lo(){if(Rr)return Rr;var t,n=Po,a=n.length,o,h="value"in Ei?Ei.value:Ei.textContent,d=h.length;for(t=0;t<a&&n[t]===h[t];t++);var _=a-t;for(o=1;o<=_&&n[a-o]===h[d-o];o++);return Rr=h.slice(t,1<o?1-o:void 0)}function Ir(t){var n=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&n===13&&(t=13)):t=n,t===10&&(t=13),32<=t||t===13?t:0}function zi(){return!0}function $n(){return!1}function Ht(t){function n(a,o,h,d,_){this._reactName=a,this._targetInst=h,this.type=o,this.nativeEvent=d,this.target=_,this.currentTarget=null;for(var b in t)t.hasOwnProperty(b)&&(a=t[b],this[b]=a?a(d):d[b]);return this.isDefaultPrevented=(d.defaultPrevented!=null?d.defaultPrevented:d.returnValue===!1)?zi:$n,this.isPropagationStopped=$n,this}return A(n.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=zi)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=zi)},persist:function(){},isPersistent:zi}),n}var Bi={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ti=Ht(Bi),Ss=A({},Bi,{view:0,detail:0}),Uo=Ht(Ss),ws,pa,bi,ga=A({},Ss,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:xs,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==bi&&(bi&&t.type==="mousemove"?(ws=t.screenX-bi.screenX,pa=t.screenY-bi.screenY):pa=ws=0,bi=t),ws)},movementY:function(t){return"movementY"in t?t.movementY:pa}}),zo=Ht(ga),Cr=A({},ga,{dataTransfer:0}),Su=Ht(Cr),wu=A({},Ss,{relatedTarget:0}),Nr=Ht(wu),Bo=A({},Bi,{animationName:0,elapsedTime:0,pseudoElement:0}),xu=Ht(Bo),ya=A({},Bi,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),Ru=Ht(ya),Iu=A({},Bi,{data:0}),Ai=Ht(Iu),Cu={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Nu={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Du={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Ou(t){var n=this.nativeEvent;return n.getModifierState?n.getModifierState(t):(t=Du[t])?!!n[t]:!1}function xs(){return Ou}var sn=A({},Ss,{key:function(t){if(t.key){var n=Cu[t.key]||t.key;if(n!=="Unidentified")return n}return t.type==="keypress"?(t=Ir(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?Nu[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:xs,charCode:function(t){return t.type==="keypress"?Ir(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Ir(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),Mu=Ht(sn),Vu=A({},ga,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),qi=Ht(Vu),c=A({},Ss,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:xs}),m=Ht(c),v=A({},Bi,{propertyName:0,elapsedTime:0,pseudoElement:0}),S=Ht(v),L=A({},ga,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),H=Ht(L),ne=A({},Bi,{newState:0,oldState:0}),xe=Ht(ne),yt=[9,13,27,32],He=Nn&&"CompositionEvent"in window,at=null;Nn&&"documentMode"in document&&(at=document.documentMode);var Dn=Nn&&"TextEvent"in window&&!at,Si=Nn&&(!He||at&&8<at&&11>=at),Jn=" ",Zn=!1;function Dr(t,n){switch(t){case"keyup":return yt.indexOf(n.keyCode)!==-1;case"keydown":return n.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function _a(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var va=!1;function O1(t,n){switch(t){case"compositionend":return _a(n);case"keypress":return n.which!==32?null:(Zn=!0,Jn);case"textInput":return t=n.data,t===Jn&&Zn?null:t;default:return null}}function M1(t,n){if(va)return t==="compositionend"||!He&&Dr(t,n)?(t=Lo(),Rr=Po=Ei=null,va=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(n.ctrlKey||n.altKey||n.metaKey)||n.ctrlKey&&n.altKey){if(n.char&&1<n.char.length)return n.char;if(n.which)return String.fromCharCode(n.which)}return null;case"compositionend":return Si&&n.locale!=="ko"?null:n.data;default:return null}}var V1={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Hp(t){var n=t&&t.nodeName&&t.nodeName.toLowerCase();return n==="input"?!!V1[t.type]:n==="textarea"}function Fp(t,n,a,o){bs?vi?vi.push(o):vi=[o]:bs=o,n=Ac(n,"onChange"),0<n.length&&(a=new Ti("onChange","change",null,a,o),t.push({event:a,listeners:n}))}var qo=null,Ho=null;function k1(t){x_(t,0)}function ku(t){var n=yn(t);if(Ar(n))return t}function Gp(t,n){if(t==="change")return n}var Qp=!1;if(Nn){var Wh;if(Nn){var ef="oninput"in document;if(!ef){var Yp=document.createElement("div");Yp.setAttribute("oninput","return;"),ef=typeof Yp.oninput=="function"}Wh=ef}else Wh=!1;Qp=Wh&&(!document.documentMode||9<document.documentMode)}function Kp(){qo&&(qo.detachEvent("onpropertychange",Xp),Ho=qo=null)}function Xp(t){if(t.propertyName==="value"&&ku(Ho)){var n=[];Fp(n,Ho,t,Cn(t)),As(k1,n)}}function j1(t,n,a){t==="focusin"?(Kp(),qo=n,Ho=a,qo.attachEvent("onpropertychange",Xp)):t==="focusout"&&Kp()}function P1(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return ku(Ho)}function L1(t,n){if(t==="click")return ku(n)}function U1(t,n){if(t==="input"||t==="change")return ku(n)}function z1(t,n){return t===n&&(t!==0||1/t===1/n)||t!==t&&n!==n}var vn=typeof Object.is=="function"?Object.is:z1;function Fo(t,n){if(vn(t,n))return!0;if(typeof t!="object"||t===null||typeof n!="object"||n===null)return!1;var a=Object.keys(t),o=Object.keys(n);if(a.length!==o.length)return!1;for(o=0;o<a.length;o++){var h=a[o];if(!Tt.call(n,h)||!vn(t[h],n[h]))return!1}return!0}function $p(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Jp(t,n){var a=$p(t);t=0;for(var o;a;){if(a.nodeType===3){if(o=t+a.textContent.length,t<=n&&o>=n)return{node:a,offset:n-t};t=o}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=$p(a)}}function Zp(t,n){return t&&n?t===n?!0:t&&t.nodeType===3?!1:n&&n.nodeType===3?Zp(t,n.parentNode):"contains"in t?t.contains(n):t.compareDocumentPosition?!!(t.compareDocumentPosition(n)&16):!1:!1}function Wp(t){t=t!=null&&t.ownerDocument!=null&&t.ownerDocument.defaultView!=null?t.ownerDocument.defaultView:window;for(var n=_i(t.document);n instanceof t.HTMLIFrameElement;){try{var a=typeof n.contentWindow.location.href=="string"}catch{a=!1}if(a)t=n.contentWindow;else break;n=_i(t.document)}return n}function tf(t){var n=t&&t.nodeName&&t.nodeName.toLowerCase();return n&&(n==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||n==="textarea"||t.contentEditable==="true")}var B1=Nn&&"documentMode"in document&&11>=document.documentMode,Ea=null,nf=null,Go=null,sf=!1;function eg(t,n,a){var o=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;sf||Ea==null||Ea!==_i(o)||(o=Ea,"selectionStart"in o&&tf(o)?o={start:o.selectionStart,end:o.selectionEnd}:(o=(o.ownerDocument&&o.ownerDocument.defaultView||window).getSelection(),o={anchorNode:o.anchorNode,anchorOffset:o.anchorOffset,focusNode:o.focusNode,focusOffset:o.focusOffset}),Go&&Fo(Go,o)||(Go=o,o=Ac(nf,"onSelect"),0<o.length&&(n=new Ti("onSelect","select",null,n,a),t.push({event:n,listeners:o}),n.target=Ea)))}function Or(t,n){var a={};return a[t.toLowerCase()]=n.toLowerCase(),a["Webkit"+t]="webkit"+n,a["Moz"+t]="moz"+n,a}var Ta={animationend:Or("Animation","AnimationEnd"),animationiteration:Or("Animation","AnimationIteration"),animationstart:Or("Animation","AnimationStart"),transitionrun:Or("Transition","TransitionRun"),transitionstart:Or("Transition","TransitionStart"),transitioncancel:Or("Transition","TransitionCancel"),transitionend:Or("Transition","TransitionEnd")},rf={},tg={};Nn&&(tg=document.createElement("div").style,"AnimationEvent"in window||(delete Ta.animationend.animation,delete Ta.animationiteration.animation,delete Ta.animationstart.animation),"TransitionEvent"in window||delete Ta.transitionend.transition);function Mr(t){if(rf[t])return rf[t];if(!Ta[t])return t;var n=Ta[t],a;for(a in n)if(n.hasOwnProperty(a)&&a in tg)return rf[t]=n[a];return t}var ng=Mr("animationend"),ig=Mr("animationiteration"),sg=Mr("animationstart"),q1=Mr("transitionrun"),H1=Mr("transitionstart"),F1=Mr("transitioncancel"),rg=Mr("transitionend"),ag=new Map,af="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");af.push("scrollEnd");function Wn(t,n){ag.set(t,n),gi(n,[t])}var ju=typeof reportError=="function"?reportError:function(t){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var n=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof t=="object"&&t!==null&&typeof t.message=="string"?String(t.message):String(t),error:t});if(!window.dispatchEvent(n))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",t);return}console.error(t)},On=[],ba=0,of=0;function Pu(){for(var t=ba,n=of=ba=0;n<t;){var a=On[n];On[n++]=null;var o=On[n];On[n++]=null;var h=On[n];On[n++]=null;var d=On[n];if(On[n++]=null,o!==null&&h!==null){var _=o.pending;_===null?h.next=h:(h.next=_.next,_.next=h),o.pending=h}d!==0&&og(a,h,d)}}function Lu(t,n,a,o){On[ba++]=t,On[ba++]=n,On[ba++]=a,On[ba++]=o,of|=o,t.lanes|=o,t=t.alternate,t!==null&&(t.lanes|=o)}function lf(t,n,a,o){return Lu(t,n,a,o),Uu(t)}function Vr(t,n){return Lu(t,null,null,n),Uu(t)}function og(t,n,a){t.lanes|=a;var o=t.alternate;o!==null&&(o.lanes|=a);for(var h=!1,d=t.return;d!==null;)d.childLanes|=a,o=d.alternate,o!==null&&(o.childLanes|=a),d.tag===22&&(t=d.stateNode,t===null||t._visibility&1||(h=!0)),t=d,d=d.return;return t.tag===3?(d=t.stateNode,h&&n!==null&&(h=31-gt(a),t=d.hiddenUpdates,o=t[h],o===null?t[h]=[n]:o.push(n),n.lane=a|536870912),d):null}function Uu(t){if(50<dl)throw dl=0,yd=null,Error(r(185));for(var n=t.return;n!==null;)t=n,n=t.return;return t.tag===3?t.stateNode:null}var Aa={};function G1(t,n,a,o){this.tag=t,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=n,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=o,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function En(t,n,a,o){return new G1(t,n,a,o)}function uf(t){return t=t.prototype,!(!t||!t.isReactComponent)}function Hi(t,n){var a=t.alternate;return a===null?(a=En(t.tag,n,t.key,t.mode),a.elementType=t.elementType,a.type=t.type,a.stateNode=t.stateNode,a.alternate=t,t.alternate=a):(a.pendingProps=n,a.type=t.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=t.flags&65011712,a.childLanes=t.childLanes,a.lanes=t.lanes,a.child=t.child,a.memoizedProps=t.memoizedProps,a.memoizedState=t.memoizedState,a.updateQueue=t.updateQueue,n=t.dependencies,a.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext},a.sibling=t.sibling,a.index=t.index,a.ref=t.ref,a.refCleanup=t.refCleanup,a}function lg(t,n){t.flags&=65011714;var a=t.alternate;return a===null?(t.childLanes=0,t.lanes=n,t.child=null,t.subtreeFlags=0,t.memoizedProps=null,t.memoizedState=null,t.updateQueue=null,t.dependencies=null,t.stateNode=null):(t.childLanes=a.childLanes,t.lanes=a.lanes,t.child=a.child,t.subtreeFlags=0,t.deletions=null,t.memoizedProps=a.memoizedProps,t.memoizedState=a.memoizedState,t.updateQueue=a.updateQueue,t.type=a.type,n=a.dependencies,t.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),t}function zu(t,n,a,o,h,d){var _=0;if(o=t,typeof t=="function")uf(t)&&(_=1);else if(typeof t=="string")_=$b(t,a,le.current)?26:t==="html"||t==="head"||t==="body"?27:5;else e:switch(t){case I:return t=En(31,a,n,h),t.elementType=I,t.lanes=d,t;case Q:return kr(a.children,h,d,n);case G:_=8,h|=24;break;case te:return t=En(12,a,n,h|2),t.elementType=te,t.lanes=d,t;case ce:return t=En(13,a,n,h),t.elementType=ce,t.lanes=d,t;case Te:return t=En(19,a,n,h),t.elementType=Te,t.lanes=d,t;default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case ee:_=10;break e;case fe:_=9;break e;case ue:_=11;break e;case N:_=14;break e;case w:_=16,o=null;break e}_=29,a=Error(r(130,t===null?"null":typeof t,"")),o=null}return n=En(_,a,n,h),n.elementType=t,n.type=o,n.lanes=d,n}function kr(t,n,a,o){return t=En(7,t,o,n),t.lanes=a,t}function cf(t,n,a){return t=En(6,t,null,n),t.lanes=a,t}function ug(t){var n=En(18,null,null,0);return n.stateNode=t,n}function hf(t,n,a){return n=En(4,t.children!==null?t.children:[],t.key,n),n.lanes=a,n.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},n}var cg=new WeakMap;function Mn(t,n){if(typeof t=="object"&&t!==null){var a=cg.get(t);return a!==void 0?a:(n={value:t,source:n,stack:bo(n)},cg.set(t,n),n)}return{value:t,source:n,stack:bo(n)}}var Sa=[],wa=0,Bu=null,Qo=0,Vn=[],kn=0,Rs=null,wi=1,xi="";function Fi(t,n){Sa[wa++]=Qo,Sa[wa++]=Bu,Bu=t,Qo=n}function hg(t,n,a){Vn[kn++]=wi,Vn[kn++]=xi,Vn[kn++]=Rs,Rs=t;var o=wi;t=xi;var h=32-gt(o)-1;o&=~(1<<h),a+=1;var d=32-gt(n)+h;if(30<d){var _=h-h%5;d=(o&(1<<_)-1).toString(32),o>>=_,h-=_,wi=1<<32-gt(n)+h|a<<h|o,xi=d+t}else wi=1<<d|a<<h|o,xi=t}function ff(t){t.return!==null&&(Fi(t,1),hg(t,1,0))}function df(t){for(;t===Bu;)Bu=Sa[--wa],Sa[wa]=null,Qo=Sa[--wa],Sa[wa]=null;for(;t===Rs;)Rs=Vn[--kn],Vn[kn]=null,xi=Vn[--kn],Vn[kn]=null,wi=Vn[--kn],Vn[kn]=null}function fg(t,n){Vn[kn++]=wi,Vn[kn++]=xi,Vn[kn++]=Rs,wi=n.id,xi=n.overflow,Rs=t}var Ft=null,nt=null,Pe=!1,Is=null,jn=!1,mf=Error(r(519));function Cs(t){var n=Error(r(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Yo(Mn(n,t)),mf}function dg(t){var n=t.stateNode,a=t.type,o=t.memoizedProps;switch(n[At]=t,n[Lt]=o,a){case"dialog":De("cancel",n),De("close",n);break;case"iframe":case"object":case"embed":De("load",n);break;case"video":case"audio":for(a=0;a<pl.length;a++)De(pl[a],n);break;case"source":De("error",n);break;case"img":case"image":case"link":De("error",n),De("load",n);break;case"details":De("toggle",n);break;case"input":De("invalid",n),Eu(n,o.value,o.defaultValue,o.checked,o.defaultChecked,o.type,o.name,!0);break;case"select":De("invalid",n);break;case"textarea":De("invalid",n),Es(n,o.value,o.defaultValue,o.children)}a=o.children,typeof a!="string"&&typeof a!="number"&&typeof a!="bigint"||n.textContent===""+a||o.suppressHydrationWarning===!0||N_(n.textContent,a)?(o.popover!=null&&(De("beforetoggle",n),De("toggle",n)),o.onScroll!=null&&De("scroll",n),o.onScrollEnd!=null&&De("scrollend",n),o.onClick!=null&&(n.onclick=Kn),n=!0):n=!1,n||Cs(t,!0)}function mg(t){for(Ft=t.return;Ft;)switch(Ft.tag){case 5:case 31:case 13:jn=!1;return;case 27:case 3:jn=!0;return;default:Ft=Ft.return}}function xa(t){if(t!==Ft)return!1;if(!Pe)return mg(t),Pe=!0,!1;var n=t.tag,a;if((a=n!==3&&n!==27)&&((a=n===5)&&(a=t.type,a=!(a!=="form"&&a!=="button")||Od(t.type,t.memoizedProps)),a=!a),a&&nt&&Cs(t),mg(t),n===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(r(317));nt=U_(t)}else if(n===31){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(r(317));nt=U_(t)}else n===27?(n=nt,Hs(t.type)?(t=Pd,Pd=null,nt=t):nt=n):nt=Ft?Ln(t.stateNode.nextSibling):null;return!0}function jr(){nt=Ft=null,Pe=!1}function pf(){var t=Is;return t!==null&&(hn===null?hn=t:hn.push.apply(hn,t),Is=null),t}function Yo(t){Is===null?Is=[t]:Is.push(t)}var gf=M(null),Pr=null,Gi=null;function Ns(t,n,a){re(gf,n._currentValue),n._currentValue=a}function Qi(t){t._currentValue=gf.current,Z(gf)}function yf(t,n,a){for(;t!==null;){var o=t.alternate;if((t.childLanes&n)!==n?(t.childLanes|=n,o!==null&&(o.childLanes|=n)):o!==null&&(o.childLanes&n)!==n&&(o.childLanes|=n),t===a)break;t=t.return}}function _f(t,n,a,o){var h=t.child;for(h!==null&&(h.return=t);h!==null;){var d=h.dependencies;if(d!==null){var _=h.child;d=d.firstContext;e:for(;d!==null;){var b=d;d=h;for(var C=0;C<n.length;C++)if(b.context===n[C]){d.lanes|=a,b=d.alternate,b!==null&&(b.lanes|=a),yf(d.return,a,t),o||(_=null);break e}d=b.next}}else if(h.tag===18){if(_=h.return,_===null)throw Error(r(341));_.lanes|=a,d=_.alternate,d!==null&&(d.lanes|=a),yf(_,a,t),_=null}else _=h.child;if(_!==null)_.return=h;else for(_=h;_!==null;){if(_===t){_=null;break}if(h=_.sibling,h!==null){h.return=_.return,_=h;break}_=_.return}h=_}}function Ra(t,n,a,o){t=null;for(var h=n,d=!1;h!==null;){if(!d){if((h.flags&524288)!==0)d=!0;else if((h.flags&262144)!==0)break}if(h.tag===10){var _=h.alternate;if(_===null)throw Error(r(387));if(_=_.memoizedProps,_!==null){var b=h.type;vn(h.pendingProps.value,_.value)||(t!==null?t.push(b):t=[b])}}else if(h===Le.current){if(_=h.alternate,_===null)throw Error(r(387));_.memoizedState.memoizedState!==h.memoizedState.memoizedState&&(t!==null?t.push(El):t=[El])}h=h.return}t!==null&&_f(n,t,a,o),n.flags|=262144}function qu(t){for(t=t.firstContext;t!==null;){if(!vn(t.context._currentValue,t.memoizedValue))return!0;t=t.next}return!1}function Lr(t){Pr=t,Gi=null,t=t.dependencies,t!==null&&(t.firstContext=null)}function Gt(t){return pg(Pr,t)}function Hu(t,n){return Pr===null&&Lr(t),pg(t,n)}function pg(t,n){var a=n._currentValue;if(n={context:n,memoizedValue:a,next:null},Gi===null){if(t===null)throw Error(r(308));Gi=n,t.dependencies={lanes:0,firstContext:n},t.flags|=524288}else Gi=Gi.next=n;return a}var Q1=typeof AbortController<"u"?AbortController:function(){var t=[],n=this.signal={aborted:!1,addEventListener:function(a,o){t.push(o)}};this.abort=function(){n.aborted=!0,t.forEach(function(a){return a()})}},Y1=s.unstable_scheduleCallback,K1=s.unstable_NormalPriority,xt={$$typeof:ee,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function vf(){return{controller:new Q1,data:new Map,refCount:0}}function Ko(t){t.refCount--,t.refCount===0&&Y1(K1,function(){t.controller.abort()})}var Xo=null,Ef=0,Ia=0,Ca=null;function X1(t,n){if(Xo===null){var a=Xo=[];Ef=0,Ia=Ad(),Ca={status:"pending",value:void 0,then:function(o){a.push(o)}}}return Ef++,n.then(gg,gg),n}function gg(){if(--Ef===0&&Xo!==null){Ca!==null&&(Ca.status="fulfilled");var t=Xo;Xo=null,Ia=0,Ca=null;for(var n=0;n<t.length;n++)(0,t[n])()}}function $1(t,n){var a=[],o={status:"pending",value:null,reason:null,then:function(h){a.push(h)}};return t.then(function(){o.status="fulfilled",o.value=n;for(var h=0;h<a.length;h++)(0,a[h])(n)},function(h){for(o.status="rejected",o.reason=h,h=0;h<a.length;h++)(0,a[h])(void 0)}),o}var yg=K.S;K.S=function(t,n){e_=nn(),typeof n=="object"&&n!==null&&typeof n.then=="function"&&X1(t,n),yg!==null&&yg(t,n)};var Ur=M(null);function Tf(){var t=Ur.current;return t!==null?t:et.pooledCache}function Fu(t,n){n===null?re(Ur,Ur.current):re(Ur,n.pool)}function _g(){var t=Tf();return t===null?null:{parent:xt._currentValue,pool:t}}var Na=Error(r(460)),bf=Error(r(474)),Gu=Error(r(542)),Qu={then:function(){}};function vg(t){return t=t.status,t==="fulfilled"||t==="rejected"}function Eg(t,n,a){switch(a=t[a],a===void 0?t.push(n):a!==n&&(n.then(Kn,Kn),n=a),n.status){case"fulfilled":return n.value;case"rejected":throw t=n.reason,bg(t),t;default:if(typeof n.status=="string")n.then(Kn,Kn);else{if(t=et,t!==null&&100<t.shellSuspendCounter)throw Error(r(482));t=n,t.status="pending",t.then(function(o){if(n.status==="pending"){var h=n;h.status="fulfilled",h.value=o}},function(o){if(n.status==="pending"){var h=n;h.status="rejected",h.reason=o}})}switch(n.status){case"fulfilled":return n.value;case"rejected":throw t=n.reason,bg(t),t}throw Br=n,Na}}function zr(t){try{var n=t._init;return n(t._payload)}catch(a){throw a!==null&&typeof a=="object"&&typeof a.then=="function"?(Br=a,Na):a}}var Br=null;function Tg(){if(Br===null)throw Error(r(459));var t=Br;return Br=null,t}function bg(t){if(t===Na||t===Gu)throw Error(r(483))}var Da=null,$o=0;function Yu(t){var n=$o;return $o+=1,Da===null&&(Da=[]),Eg(Da,t,n)}function Jo(t,n){n=n.props.ref,t.ref=n!==void 0?n:null}function Ku(t,n){throw n.$$typeof===x?Error(r(525)):(t=Object.prototype.toString.call(n),Error(r(31,t==="[object Object]"?"object with keys {"+Object.keys(n).join(", ")+"}":t)))}function Ag(t){function n(P,O){if(t){var z=P.deletions;z===null?(P.deletions=[O],P.flags|=16):z.push(O)}}function a(P,O){if(!t)return null;for(;O!==null;)n(P,O),O=O.sibling;return null}function o(P){for(var O=new Map;P!==null;)P.key!==null?O.set(P.key,P):O.set(P.index,P),P=P.sibling;return O}function h(P,O){return P=Hi(P,O),P.index=0,P.sibling=null,P}function d(P,O,z){return P.index=z,t?(z=P.alternate,z!==null?(z=z.index,z<O?(P.flags|=67108866,O):z):(P.flags|=67108866,O)):(P.flags|=1048576,O)}function _(P){return t&&P.alternate===null&&(P.flags|=67108866),P}function b(P,O,z,X){return O===null||O.tag!==6?(O=cf(z,P.mode,X),O.return=P,O):(O=h(O,z),O.return=P,O)}function C(P,O,z,X){var me=z.type;return me===Q?Y(P,O,z.props.children,X,z.key):O!==null&&(O.elementType===me||typeof me=="object"&&me!==null&&me.$$typeof===w&&zr(me)===O.type)?(O=h(O,z.props),Jo(O,z),O.return=P,O):(O=zu(z.type,z.key,z.props,null,P.mode,X),Jo(O,z),O.return=P,O)}function B(P,O,z,X){return O===null||O.tag!==4||O.stateNode.containerInfo!==z.containerInfo||O.stateNode.implementation!==z.implementation?(O=hf(z,P.mode,X),O.return=P,O):(O=h(O,z.children||[]),O.return=P,O)}function Y(P,O,z,X,me){return O===null||O.tag!==7?(O=kr(z,P.mode,X,me),O.return=P,O):(O=h(O,z),O.return=P,O)}function $(P,O,z){if(typeof O=="string"&&O!==""||typeof O=="number"||typeof O=="bigint")return O=cf(""+O,P.mode,z),O.return=P,O;if(typeof O=="object"&&O!==null){switch(O.$$typeof){case j:return z=zu(O.type,O.key,O.props,null,P.mode,z),Jo(z,O),z.return=P,z;case U:return O=hf(O,P.mode,z),O.return=P,O;case w:return O=zr(O),$(P,O,z)}if(lt(O)||k(O))return O=kr(O,P.mode,z,null),O.return=P,O;if(typeof O.then=="function")return $(P,Yu(O),z);if(O.$$typeof===ee)return $(P,Hu(P,O),z);Ku(P,O)}return null}function q(P,O,z,X){var me=O!==null?O.key:null;if(typeof z=="string"&&z!==""||typeof z=="number"||typeof z=="bigint")return me!==null?null:b(P,O,""+z,X);if(typeof z=="object"&&z!==null){switch(z.$$typeof){case j:return z.key===me?C(P,O,z,X):null;case U:return z.key===me?B(P,O,z,X):null;case w:return z=zr(z),q(P,O,z,X)}if(lt(z)||k(z))return me!==null?null:Y(P,O,z,X,null);if(typeof z.then=="function")return q(P,O,Yu(z),X);if(z.$$typeof===ee)return q(P,O,Hu(P,z),X);Ku(P,z)}return null}function F(P,O,z,X,me){if(typeof X=="string"&&X!==""||typeof X=="number"||typeof X=="bigint")return P=P.get(z)||null,b(O,P,""+X,me);if(typeof X=="object"&&X!==null){switch(X.$$typeof){case j:return P=P.get(X.key===null?z:X.key)||null,C(O,P,X,me);case U:return P=P.get(X.key===null?z:X.key)||null,B(O,P,X,me);case w:return X=zr(X),F(P,O,z,X,me)}if(lt(X)||k(X))return P=P.get(z)||null,Y(O,P,X,me,null);if(typeof X.then=="function")return F(P,O,z,Yu(X),me);if(X.$$typeof===ee)return F(P,O,z,Hu(O,X),me);Ku(O,X)}return null}function he(P,O,z,X){for(var me=null,Be=null,de=O,Ce=O=0,Me=null;de!==null&&Ce<z.length;Ce++){de.index>Ce?(Me=de,de=null):Me=de.sibling;var qe=q(P,de,z[Ce],X);if(qe===null){de===null&&(de=Me);break}t&&de&&qe.alternate===null&&n(P,de),O=d(qe,O,Ce),Be===null?me=qe:Be.sibling=qe,Be=qe,de=Me}if(Ce===z.length)return a(P,de),Pe&&Fi(P,Ce),me;if(de===null){for(;Ce<z.length;Ce++)de=$(P,z[Ce],X),de!==null&&(O=d(de,O,Ce),Be===null?me=de:Be.sibling=de,Be=de);return Pe&&Fi(P,Ce),me}for(de=o(de);Ce<z.length;Ce++)Me=F(de,P,Ce,z[Ce],X),Me!==null&&(t&&Me.alternate!==null&&de.delete(Me.key===null?Ce:Me.key),O=d(Me,O,Ce),Be===null?me=Me:Be.sibling=Me,Be=Me);return t&&de.forEach(function(Ks){return n(P,Ks)}),Pe&&Fi(P,Ce),me}function ye(P,O,z,X){if(z==null)throw Error(r(151));for(var me=null,Be=null,de=O,Ce=O=0,Me=null,qe=z.next();de!==null&&!qe.done;Ce++,qe=z.next()){de.index>Ce?(Me=de,de=null):Me=de.sibling;var Ks=q(P,de,qe.value,X);if(Ks===null){de===null&&(de=Me);break}t&&de&&Ks.alternate===null&&n(P,de),O=d(Ks,O,Ce),Be===null?me=Ks:Be.sibling=Ks,Be=Ks,de=Me}if(qe.done)return a(P,de),Pe&&Fi(P,Ce),me;if(de===null){for(;!qe.done;Ce++,qe=z.next())qe=$(P,qe.value,X),qe!==null&&(O=d(qe,O,Ce),Be===null?me=qe:Be.sibling=qe,Be=qe);return Pe&&Fi(P,Ce),me}for(de=o(de);!qe.done;Ce++,qe=z.next())qe=F(de,P,Ce,qe.value,X),qe!==null&&(t&&qe.alternate!==null&&de.delete(qe.key===null?Ce:qe.key),O=d(qe,O,Ce),Be===null?me=qe:Be.sibling=qe,Be=qe);return t&&de.forEach(function(oA){return n(P,oA)}),Pe&&Fi(P,Ce),me}function We(P,O,z,X){if(typeof z=="object"&&z!==null&&z.type===Q&&z.key===null&&(z=z.props.children),typeof z=="object"&&z!==null){switch(z.$$typeof){case j:e:{for(var me=z.key;O!==null;){if(O.key===me){if(me=z.type,me===Q){if(O.tag===7){a(P,O.sibling),X=h(O,z.props.children),X.return=P,P=X;break e}}else if(O.elementType===me||typeof me=="object"&&me!==null&&me.$$typeof===w&&zr(me)===O.type){a(P,O.sibling),X=h(O,z.props),Jo(X,z),X.return=P,P=X;break e}a(P,O);break}else n(P,O);O=O.sibling}z.type===Q?(X=kr(z.props.children,P.mode,X,z.key),X.return=P,P=X):(X=zu(z.type,z.key,z.props,null,P.mode,X),Jo(X,z),X.return=P,P=X)}return _(P);case U:e:{for(me=z.key;O!==null;){if(O.key===me)if(O.tag===4&&O.stateNode.containerInfo===z.containerInfo&&O.stateNode.implementation===z.implementation){a(P,O.sibling),X=h(O,z.children||[]),X.return=P,P=X;break e}else{a(P,O);break}else n(P,O);O=O.sibling}X=hf(z,P.mode,X),X.return=P,P=X}return _(P);case w:return z=zr(z),We(P,O,z,X)}if(lt(z))return he(P,O,z,X);if(k(z)){if(me=k(z),typeof me!="function")throw Error(r(150));return z=me.call(z),ye(P,O,z,X)}if(typeof z.then=="function")return We(P,O,Yu(z),X);if(z.$$typeof===ee)return We(P,O,Hu(P,z),X);Ku(P,z)}return typeof z=="string"&&z!==""||typeof z=="number"||typeof z=="bigint"?(z=""+z,O!==null&&O.tag===6?(a(P,O.sibling),X=h(O,z),X.return=P,P=X):(a(P,O),X=cf(z,P.mode,X),X.return=P,P=X),_(P)):a(P,O)}return function(P,O,z,X){try{$o=0;var me=We(P,O,z,X);return Da=null,me}catch(de){if(de===Na||de===Gu)throw de;var Be=En(29,de,null,P.mode);return Be.lanes=X,Be.return=P,Be}finally{}}}var qr=Ag(!0),Sg=Ag(!1),Ds=!1;function Af(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Sf(t,n){t=t.updateQueue,n.updateQueue===t&&(n.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,callbacks:null})}function Os(t){return{lane:t,tag:0,payload:null,callback:null,next:null}}function Ms(t,n,a){var o=t.updateQueue;if(o===null)return null;if(o=o.shared,(Fe&2)!==0){var h=o.pending;return h===null?n.next=n:(n.next=h.next,h.next=n),o.pending=n,n=Uu(t),og(t,null,a),n}return Lu(t,o,n,a),Uu(t)}function Zo(t,n,a){if(n=n.updateQueue,n!==null&&(n=n.shared,(a&4194048)!==0)){var o=n.lanes;o&=t.pendingLanes,a|=o,n.lanes=a,wo(t,a)}}function wf(t,n){var a=t.updateQueue,o=t.alternate;if(o!==null&&(o=o.updateQueue,a===o)){var h=null,d=null;if(a=a.firstBaseUpdate,a!==null){do{var _={lane:a.lane,tag:a.tag,payload:a.payload,callback:null,next:null};d===null?h=d=_:d=d.next=_,a=a.next}while(a!==null);d===null?h=d=n:d=d.next=n}else h=d=n;a={baseState:o.baseState,firstBaseUpdate:h,lastBaseUpdate:d,shared:o.shared,callbacks:o.callbacks},t.updateQueue=a;return}t=a.lastBaseUpdate,t===null?a.firstBaseUpdate=n:t.next=n,a.lastBaseUpdate=n}var xf=!1;function Wo(){if(xf){var t=Ca;if(t!==null)throw t}}function el(t,n,a,o){xf=!1;var h=t.updateQueue;Ds=!1;var d=h.firstBaseUpdate,_=h.lastBaseUpdate,b=h.shared.pending;if(b!==null){h.shared.pending=null;var C=b,B=C.next;C.next=null,_===null?d=B:_.next=B,_=C;var Y=t.alternate;Y!==null&&(Y=Y.updateQueue,b=Y.lastBaseUpdate,b!==_&&(b===null?Y.firstBaseUpdate=B:b.next=B,Y.lastBaseUpdate=C))}if(d!==null){var $=h.baseState;_=0,Y=B=C=null,b=d;do{var q=b.lane&-536870913,F=q!==b.lane;if(F?(Oe&q)===q:(o&q)===q){q!==0&&q===Ia&&(xf=!0),Y!==null&&(Y=Y.next={lane:0,tag:b.tag,payload:b.payload,callback:null,next:null});e:{var he=t,ye=b;q=n;var We=a;switch(ye.tag){case 1:if(he=ye.payload,typeof he=="function"){$=he.call(We,$,q);break e}$=he;break e;case 3:he.flags=he.flags&-65537|128;case 0:if(he=ye.payload,q=typeof he=="function"?he.call(We,$,q):he,q==null)break e;$=A({},$,q);break e;case 2:Ds=!0}}q=b.callback,q!==null&&(t.flags|=64,F&&(t.flags|=8192),F=h.callbacks,F===null?h.callbacks=[q]:F.push(q))}else F={lane:q,tag:b.tag,payload:b.payload,callback:b.callback,next:null},Y===null?(B=Y=F,C=$):Y=Y.next=F,_|=q;if(b=b.next,b===null){if(b=h.shared.pending,b===null)break;F=b,b=F.next,F.next=null,h.lastBaseUpdate=F,h.shared.pending=null}}while(!0);Y===null&&(C=$),h.baseState=C,h.firstBaseUpdate=B,h.lastBaseUpdate=Y,d===null&&(h.shared.lanes=0),Ls|=_,t.lanes=_,t.memoizedState=$}}function wg(t,n){if(typeof t!="function")throw Error(r(191,t));t.call(n)}function xg(t,n){var a=t.callbacks;if(a!==null)for(t.callbacks=null,t=0;t<a.length;t++)wg(a[t],n)}var Oa=M(null),Xu=M(0);function Rg(t,n){t=ts,re(Xu,t),re(Oa,n),ts=t|n.baseLanes}function Rf(){re(Xu,ts),re(Oa,Oa.current)}function If(){ts=Xu.current,Z(Oa),Z(Xu)}var Tn=M(null),Pn=null;function Vs(t){var n=t.alternate;re(_t,_t.current&1),re(Tn,t),Pn===null&&(n===null||Oa.current!==null||n.memoizedState!==null)&&(Pn=t)}function Cf(t){re(_t,_t.current),re(Tn,t),Pn===null&&(Pn=t)}function Ig(t){t.tag===22?(re(_t,_t.current),re(Tn,t),Pn===null&&(Pn=t)):ks()}function ks(){re(_t,_t.current),re(Tn,Tn.current)}function bn(t){Z(Tn),Pn===t&&(Pn=null),Z(_t)}var _t=M(0);function $u(t){for(var n=t;n!==null;){if(n.tag===13){var a=n.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||kd(a)||jd(a)))return n}else if(n.tag===19&&(n.memoizedProps.revealOrder==="forwards"||n.memoizedProps.revealOrder==="backwards"||n.memoizedProps.revealOrder==="unstable_legacy-backwards"||n.memoizedProps.revealOrder==="together")){if((n.flags&128)!==0)return n}else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return null;n=n.return}n.sibling.return=n.return,n=n.sibling}return null}var Yi=0,Re=null,Je=null,Rt=null,Ju=!1,Ma=!1,Hr=!1,Zu=0,tl=0,Va=null,J1=0;function ct(){throw Error(r(321))}function Nf(t,n){if(n===null)return!1;for(var a=0;a<n.length&&a<t.length;a++)if(!vn(t[a],n[a]))return!1;return!0}function Df(t,n,a,o,h,d){return Yi=d,Re=n,n.memoizedState=null,n.updateQueue=null,n.lanes=0,K.H=t===null||t.memoizedState===null?hy:Qf,Hr=!1,d=a(o,h),Hr=!1,Ma&&(d=Ng(n,a,o,h)),Cg(t),d}function Cg(t){K.H=sl;var n=Je!==null&&Je.next!==null;if(Yi=0,Rt=Je=Re=null,Ju=!1,tl=0,Va=null,n)throw Error(r(300));t===null||It||(t=t.dependencies,t!==null&&qu(t)&&(It=!0))}function Ng(t,n,a,o){Re=t;var h=0;do{if(Ma&&(Va=null),tl=0,Ma=!1,25<=h)throw Error(r(301));if(h+=1,Rt=Je=null,t.updateQueue!=null){var d=t.updateQueue;d.lastEffect=null,d.events=null,d.stores=null,d.memoCache!=null&&(d.memoCache.index=0)}K.H=fy,d=n(a,o)}while(Ma);return d}function Z1(){var t=K.H,n=t.useState()[0];return n=typeof n.then=="function"?nl(n):n,t=t.useState()[0],(Je!==null?Je.memoizedState:null)!==t&&(Re.flags|=1024),n}function Of(){var t=Zu!==0;return Zu=0,t}function Mf(t,n,a){n.updateQueue=t.updateQueue,n.flags&=-2053,t.lanes&=~a}function Vf(t){if(Ju){for(t=t.memoizedState;t!==null;){var n=t.queue;n!==null&&(n.pending=null),t=t.next}Ju=!1}Yi=0,Rt=Je=Re=null,Ma=!1,tl=Zu=0,Va=null}function rn(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Rt===null?Re.memoizedState=Rt=t:Rt=Rt.next=t,Rt}function vt(){if(Je===null){var t=Re.alternate;t=t!==null?t.memoizedState:null}else t=Je.next;var n=Rt===null?Re.memoizedState:Rt.next;if(n!==null)Rt=n,Je=t;else{if(t===null)throw Re.alternate===null?Error(r(467)):Error(r(310));Je=t,t={memoizedState:Je.memoizedState,baseState:Je.baseState,baseQueue:Je.baseQueue,queue:Je.queue,next:null},Rt===null?Re.memoizedState=Rt=t:Rt=Rt.next=t}return Rt}function Wu(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function nl(t){var n=tl;return tl+=1,Va===null&&(Va=[]),t=Eg(Va,t,n),n=Re,(Rt===null?n.memoizedState:Rt.next)===null&&(n=n.alternate,K.H=n===null||n.memoizedState===null?hy:Qf),t}function ec(t){if(t!==null&&typeof t=="object"){if(typeof t.then=="function")return nl(t);if(t.$$typeof===ee)return Gt(t)}throw Error(r(438,String(t)))}function kf(t){var n=null,a=Re.updateQueue;if(a!==null&&(n=a.memoCache),n==null){var o=Re.alternate;o!==null&&(o=o.updateQueue,o!==null&&(o=o.memoCache,o!=null&&(n={data:o.data.map(function(h){return h.slice()}),index:0})))}if(n==null&&(n={data:[],index:0}),a===null&&(a=Wu(),Re.updateQueue=a),a.memoCache=n,a=n.data[n.index],a===void 0)for(a=n.data[n.index]=Array(t),o=0;o<t;o++)a[o]=V;return n.index++,a}function Ki(t,n){return typeof n=="function"?n(t):n}function tc(t){var n=vt();return jf(n,Je,t)}function jf(t,n,a){var o=t.queue;if(o===null)throw Error(r(311));o.lastRenderedReducer=a;var h=t.baseQueue,d=o.pending;if(d!==null){if(h!==null){var _=h.next;h.next=d.next,d.next=_}n.baseQueue=h=d,o.pending=null}if(d=t.baseState,h===null)t.memoizedState=d;else{n=h.next;var b=_=null,C=null,B=n,Y=!1;do{var $=B.lane&-536870913;if($!==B.lane?(Oe&$)===$:(Yi&$)===$){var q=B.revertLane;if(q===0)C!==null&&(C=C.next={lane:0,revertLane:0,gesture:null,action:B.action,hasEagerState:B.hasEagerState,eagerState:B.eagerState,next:null}),$===Ia&&(Y=!0);else if((Yi&q)===q){B=B.next,q===Ia&&(Y=!0);continue}else $={lane:0,revertLane:B.revertLane,gesture:null,action:B.action,hasEagerState:B.hasEagerState,eagerState:B.eagerState,next:null},C===null?(b=C=$,_=d):C=C.next=$,Re.lanes|=q,Ls|=q;$=B.action,Hr&&a(d,$),d=B.hasEagerState?B.eagerState:a(d,$)}else q={lane:$,revertLane:B.revertLane,gesture:B.gesture,action:B.action,hasEagerState:B.hasEagerState,eagerState:B.eagerState,next:null},C===null?(b=C=q,_=d):C=C.next=q,Re.lanes|=$,Ls|=$;B=B.next}while(B!==null&&B!==n);if(C===null?_=d:C.next=b,!vn(d,t.memoizedState)&&(It=!0,Y&&(a=Ca,a!==null)))throw a;t.memoizedState=d,t.baseState=_,t.baseQueue=C,o.lastRenderedState=d}return h===null&&(o.lanes=0),[t.memoizedState,o.dispatch]}function Pf(t){var n=vt(),a=n.queue;if(a===null)throw Error(r(311));a.lastRenderedReducer=t;var o=a.dispatch,h=a.pending,d=n.memoizedState;if(h!==null){a.pending=null;var _=h=h.next;do d=t(d,_.action),_=_.next;while(_!==h);vn(d,n.memoizedState)||(It=!0),n.memoizedState=d,n.baseQueue===null&&(n.baseState=d),a.lastRenderedState=d}return[d,o]}function Dg(t,n,a){var o=Re,h=vt(),d=Pe;if(d){if(a===void 0)throw Error(r(407));a=a()}else a=n();var _=!vn((Je||h).memoizedState,a);if(_&&(h.memoizedState=a,It=!0),h=h.queue,zf(Vg.bind(null,o,h,t),[t]),h.getSnapshot!==n||_||Rt!==null&&Rt.memoizedState.tag&1){if(o.flags|=2048,ka(9,{destroy:void 0},Mg.bind(null,o,h,a,n),null),et===null)throw Error(r(349));d||(Yi&127)!==0||Og(o,n,a)}return a}function Og(t,n,a){t.flags|=16384,t={getSnapshot:n,value:a},n=Re.updateQueue,n===null?(n=Wu(),Re.updateQueue=n,n.stores=[t]):(a=n.stores,a===null?n.stores=[t]:a.push(t))}function Mg(t,n,a,o){n.value=a,n.getSnapshot=o,kg(n)&&jg(t)}function Vg(t,n,a){return a(function(){kg(n)&&jg(t)})}function kg(t){var n=t.getSnapshot;t=t.value;try{var a=n();return!vn(t,a)}catch{return!0}}function jg(t){var n=Vr(t,2);n!==null&&fn(n,t,2)}function Lf(t){var n=rn();if(typeof t=="function"){var a=t;if(t=a(),Hr){Rn(!0);try{a()}finally{Rn(!1)}}}return n.memoizedState=n.baseState=t,n.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ki,lastRenderedState:t},n}function Pg(t,n,a,o){return t.baseState=a,jf(t,Je,typeof o=="function"?o:Ki)}function W1(t,n,a,o,h){if(sc(t))throw Error(r(485));if(t=n.action,t!==null){var d={payload:h,action:t,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(_){d.listeners.push(_)}};K.T!==null?a(!0):d.isTransition=!1,o(d),a=n.pending,a===null?(d.next=n.pending=d,Lg(n,d)):(d.next=a.next,n.pending=a.next=d)}}function Lg(t,n){var a=n.action,o=n.payload,h=t.state;if(n.isTransition){var d=K.T,_={};K.T=_;try{var b=a(h,o),C=K.S;C!==null&&C(_,b),Ug(t,n,b)}catch(B){Uf(t,n,B)}finally{d!==null&&_.types!==null&&(d.types=_.types),K.T=d}}else try{d=a(h,o),Ug(t,n,d)}catch(B){Uf(t,n,B)}}function Ug(t,n,a){a!==null&&typeof a=="object"&&typeof a.then=="function"?a.then(function(o){zg(t,n,o)},function(o){return Uf(t,n,o)}):zg(t,n,a)}function zg(t,n,a){n.status="fulfilled",n.value=a,Bg(n),t.state=a,n=t.pending,n!==null&&(a=n.next,a===n?t.pending=null:(a=a.next,n.next=a,Lg(t,a)))}function Uf(t,n,a){var o=t.pending;if(t.pending=null,o!==null){o=o.next;do n.status="rejected",n.reason=a,Bg(n),n=n.next;while(n!==o)}t.action=null}function Bg(t){t=t.listeners;for(var n=0;n<t.length;n++)(0,t[n])()}function qg(t,n){return n}function Hg(t,n){if(Pe){var a=et.formState;if(a!==null){e:{var o=Re;if(Pe){if(nt){t:{for(var h=nt,d=jn;h.nodeType!==8;){if(!d){h=null;break t}if(h=Ln(h.nextSibling),h===null){h=null;break t}}d=h.data,h=d==="F!"||d==="F"?h:null}if(h){nt=Ln(h.nextSibling),o=h.data==="F!";break e}}Cs(o)}o=!1}o&&(n=a[0])}}return a=rn(),a.memoizedState=a.baseState=n,o={pending:null,lanes:0,dispatch:null,lastRenderedReducer:qg,lastRenderedState:n},a.queue=o,a=ly.bind(null,Re,o),o.dispatch=a,o=Lf(!1),d=Gf.bind(null,Re,!1,o.queue),o=rn(),h={state:n,dispatch:null,action:t,pending:null},o.queue=h,a=W1.bind(null,Re,h,d,a),h.dispatch=a,o.memoizedState=t,[n,a,!1]}function Fg(t){var n=vt();return Gg(n,Je,t)}function Gg(t,n,a){if(n=jf(t,n,qg)[0],t=tc(Ki)[0],typeof n=="object"&&n!==null&&typeof n.then=="function")try{var o=nl(n)}catch(_){throw _===Na?Gu:_}else o=n;n=vt();var h=n.queue,d=h.dispatch;return a!==n.memoizedState&&(Re.flags|=2048,ka(9,{destroy:void 0},eb.bind(null,h,a),null)),[o,d,t]}function eb(t,n){t.action=n}function Qg(t){var n=vt(),a=Je;if(a!==null)return Gg(n,a,t);vt(),n=n.memoizedState,a=vt();var o=a.queue.dispatch;return a.memoizedState=t,[n,o,!1]}function ka(t,n,a,o){return t={tag:t,create:a,deps:o,inst:n,next:null},n=Re.updateQueue,n===null&&(n=Wu(),Re.updateQueue=n),a=n.lastEffect,a===null?n.lastEffect=t.next=t:(o=a.next,a.next=t,t.next=o,n.lastEffect=t),t}function Yg(){return vt().memoizedState}function nc(t,n,a,o){var h=rn();Re.flags|=t,h.memoizedState=ka(1|n,{destroy:void 0},a,o===void 0?null:o)}function ic(t,n,a,o){var h=vt();o=o===void 0?null:o;var d=h.memoizedState.inst;Je!==null&&o!==null&&Nf(o,Je.memoizedState.deps)?h.memoizedState=ka(n,d,a,o):(Re.flags|=t,h.memoizedState=ka(1|n,d,a,o))}function Kg(t,n){nc(8390656,8,t,n)}function zf(t,n){ic(2048,8,t,n)}function tb(t){Re.flags|=4;var n=Re.updateQueue;if(n===null)n=Wu(),Re.updateQueue=n,n.events=[t];else{var a=n.events;a===null?n.events=[t]:a.push(t)}}function Xg(t){var n=vt().memoizedState;return tb({ref:n,nextImpl:t}),function(){if((Fe&2)!==0)throw Error(r(440));return n.impl.apply(void 0,arguments)}}function $g(t,n){return ic(4,2,t,n)}function Jg(t,n){return ic(4,4,t,n)}function Zg(t,n){if(typeof n=="function"){t=t();var a=n(t);return function(){typeof a=="function"?a():n(null)}}if(n!=null)return t=t(),n.current=t,function(){n.current=null}}function Wg(t,n,a){a=a!=null?a.concat([t]):null,ic(4,4,Zg.bind(null,n,t),a)}function Bf(){}function ey(t,n){var a=vt();n=n===void 0?null:n;var o=a.memoizedState;return n!==null&&Nf(n,o[1])?o[0]:(a.memoizedState=[t,n],t)}function ty(t,n){var a=vt();n=n===void 0?null:n;var o=a.memoizedState;if(n!==null&&Nf(n,o[1]))return o[0];if(o=t(),Hr){Rn(!0);try{t()}finally{Rn(!1)}}return a.memoizedState=[o,n],o}function qf(t,n,a){return a===void 0||(Yi&1073741824)!==0&&(Oe&261930)===0?t.memoizedState=n:(t.memoizedState=a,t=n_(),Re.lanes|=t,Ls|=t,a)}function ny(t,n,a,o){return vn(a,n)?a:Oa.current!==null?(t=qf(t,a,o),vn(t,n)||(It=!0),t):(Yi&42)===0||(Yi&1073741824)!==0&&(Oe&261930)===0?(It=!0,t.memoizedState=a):(t=n_(),Re.lanes|=t,Ls|=t,n)}function iy(t,n,a,o,h){var d=se.p;se.p=d!==0&&8>d?d:8;var _=K.T,b={};K.T=b,Gf(t,!1,n,a);try{var C=h(),B=K.S;if(B!==null&&B(b,C),C!==null&&typeof C=="object"&&typeof C.then=="function"){var Y=$1(C,o);il(t,n,Y,wn(t))}else il(t,n,o,wn(t))}catch($){il(t,n,{then:function(){},status:"rejected",reason:$},wn())}finally{se.p=d,_!==null&&b.types!==null&&(_.types=b.types),K.T=_}}function nb(){}function Hf(t,n,a,o){if(t.tag!==5)throw Error(r(476));var h=sy(t).queue;iy(t,h,n,ge,a===null?nb:function(){return ry(t),a(o)})}function sy(t){var n=t.memoizedState;if(n!==null)return n;n={memoizedState:ge,baseState:ge,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ki,lastRenderedState:ge},next:null};var a={};return n.next={memoizedState:a,baseState:a,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ki,lastRenderedState:a},next:null},t.memoizedState=n,t=t.alternate,t!==null&&(t.memoizedState=n),n}function ry(t){var n=sy(t);n.next===null&&(n=t.alternate.memoizedState),il(t,n.next.queue,{},wn())}function Ff(){return Gt(El)}function ay(){return vt().memoizedState}function oy(){return vt().memoizedState}function ib(t){for(var n=t.return;n!==null;){switch(n.tag){case 24:case 3:var a=wn();t=Os(a);var o=Ms(n,t,a);o!==null&&(fn(o,n,a),Zo(o,n,a)),n={cache:vf()},t.payload=n;return}n=n.return}}function sb(t,n,a){var o=wn();a={lane:o,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null},sc(t)?uy(n,a):(a=lf(t,n,a,o),a!==null&&(fn(a,t,o),cy(a,n,o)))}function ly(t,n,a){var o=wn();il(t,n,a,o)}function il(t,n,a,o){var h={lane:o,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null};if(sc(t))uy(n,h);else{var d=t.alternate;if(t.lanes===0&&(d===null||d.lanes===0)&&(d=n.lastRenderedReducer,d!==null))try{var _=n.lastRenderedState,b=d(_,a);if(h.hasEagerState=!0,h.eagerState=b,vn(b,_))return Lu(t,n,h,0),et===null&&Pu(),!1}catch{}finally{}if(a=lf(t,n,h,o),a!==null)return fn(a,t,o),cy(a,n,o),!0}return!1}function Gf(t,n,a,o){if(o={lane:2,revertLane:Ad(),gesture:null,action:o,hasEagerState:!1,eagerState:null,next:null},sc(t)){if(n)throw Error(r(479))}else n=lf(t,a,o,2),n!==null&&fn(n,t,2)}function sc(t){var n=t.alternate;return t===Re||n!==null&&n===Re}function uy(t,n){Ma=Ju=!0;var a=t.pending;a===null?n.next=n:(n.next=a.next,a.next=n),t.pending=n}function cy(t,n,a){if((a&4194048)!==0){var o=n.lanes;o&=t.pendingLanes,a|=o,n.lanes=a,wo(t,a)}}var sl={readContext:Gt,use:ec,useCallback:ct,useContext:ct,useEffect:ct,useImperativeHandle:ct,useLayoutEffect:ct,useInsertionEffect:ct,useMemo:ct,useReducer:ct,useRef:ct,useState:ct,useDebugValue:ct,useDeferredValue:ct,useTransition:ct,useSyncExternalStore:ct,useId:ct,useHostTransitionStatus:ct,useFormState:ct,useActionState:ct,useOptimistic:ct,useMemoCache:ct,useCacheRefresh:ct};sl.useEffectEvent=ct;var hy={readContext:Gt,use:ec,useCallback:function(t,n){return rn().memoizedState=[t,n===void 0?null:n],t},useContext:Gt,useEffect:Kg,useImperativeHandle:function(t,n,a){a=a!=null?a.concat([t]):null,nc(4194308,4,Zg.bind(null,n,t),a)},useLayoutEffect:function(t,n){return nc(4194308,4,t,n)},useInsertionEffect:function(t,n){nc(4,2,t,n)},useMemo:function(t,n){var a=rn();n=n===void 0?null:n;var o=t();if(Hr){Rn(!0);try{t()}finally{Rn(!1)}}return a.memoizedState=[o,n],o},useReducer:function(t,n,a){var o=rn();if(a!==void 0){var h=a(n);if(Hr){Rn(!0);try{a(n)}finally{Rn(!1)}}}else h=n;return o.memoizedState=o.baseState=h,t={pending:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:h},o.queue=t,t=t.dispatch=sb.bind(null,Re,t),[o.memoizedState,t]},useRef:function(t){var n=rn();return t={current:t},n.memoizedState=t},useState:function(t){t=Lf(t);var n=t.queue,a=ly.bind(null,Re,n);return n.dispatch=a,[t.memoizedState,a]},useDebugValue:Bf,useDeferredValue:function(t,n){var a=rn();return qf(a,t,n)},useTransition:function(){var t=Lf(!1);return t=iy.bind(null,Re,t.queue,!0,!1),rn().memoizedState=t,[!1,t]},useSyncExternalStore:function(t,n,a){var o=Re,h=rn();if(Pe){if(a===void 0)throw Error(r(407));a=a()}else{if(a=n(),et===null)throw Error(r(349));(Oe&127)!==0||Og(o,n,a)}h.memoizedState=a;var d={value:a,getSnapshot:n};return h.queue=d,Kg(Vg.bind(null,o,d,t),[t]),o.flags|=2048,ka(9,{destroy:void 0},Mg.bind(null,o,d,a,n),null),a},useId:function(){var t=rn(),n=et.identifierPrefix;if(Pe){var a=xi,o=wi;a=(o&~(1<<32-gt(o)-1)).toString(32)+a,n="_"+n+"R_"+a,a=Zu++,0<a&&(n+="H"+a.toString(32)),n+="_"}else a=J1++,n="_"+n+"r_"+a.toString(32)+"_";return t.memoizedState=n},useHostTransitionStatus:Ff,useFormState:Hg,useActionState:Hg,useOptimistic:function(t){var n=rn();n.memoizedState=n.baseState=t;var a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return n.queue=a,n=Gf.bind(null,Re,!0,a),a.dispatch=n,[t,n]},useMemoCache:kf,useCacheRefresh:function(){return rn().memoizedState=ib.bind(null,Re)},useEffectEvent:function(t){var n=rn(),a={impl:t};return n.memoizedState=a,function(){if((Fe&2)!==0)throw Error(r(440));return a.impl.apply(void 0,arguments)}}},Qf={readContext:Gt,use:ec,useCallback:ey,useContext:Gt,useEffect:zf,useImperativeHandle:Wg,useInsertionEffect:$g,useLayoutEffect:Jg,useMemo:ty,useReducer:tc,useRef:Yg,useState:function(){return tc(Ki)},useDebugValue:Bf,useDeferredValue:function(t,n){var a=vt();return ny(a,Je.memoizedState,t,n)},useTransition:function(){var t=tc(Ki)[0],n=vt().memoizedState;return[typeof t=="boolean"?t:nl(t),n]},useSyncExternalStore:Dg,useId:ay,useHostTransitionStatus:Ff,useFormState:Fg,useActionState:Fg,useOptimistic:function(t,n){var a=vt();return Pg(a,Je,t,n)},useMemoCache:kf,useCacheRefresh:oy};Qf.useEffectEvent=Xg;var fy={readContext:Gt,use:ec,useCallback:ey,useContext:Gt,useEffect:zf,useImperativeHandle:Wg,useInsertionEffect:$g,useLayoutEffect:Jg,useMemo:ty,useReducer:Pf,useRef:Yg,useState:function(){return Pf(Ki)},useDebugValue:Bf,useDeferredValue:function(t,n){var a=vt();return Je===null?qf(a,t,n):ny(a,Je.memoizedState,t,n)},useTransition:function(){var t=Pf(Ki)[0],n=vt().memoizedState;return[typeof t=="boolean"?t:nl(t),n]},useSyncExternalStore:Dg,useId:ay,useHostTransitionStatus:Ff,useFormState:Qg,useActionState:Qg,useOptimistic:function(t,n){var a=vt();return Je!==null?Pg(a,Je,t,n):(a.baseState=t,[t,a.queue.dispatch])},useMemoCache:kf,useCacheRefresh:oy};fy.useEffectEvent=Xg;function Yf(t,n,a,o){n=t.memoizedState,a=a(o,n),a=a==null?n:A({},n,a),t.memoizedState=a,t.lanes===0&&(t.updateQueue.baseState=a)}var Kf={enqueueSetState:function(t,n,a){t=t._reactInternals;var o=wn(),h=Os(o);h.payload=n,a!=null&&(h.callback=a),n=Ms(t,h,o),n!==null&&(fn(n,t,o),Zo(n,t,o))},enqueueReplaceState:function(t,n,a){t=t._reactInternals;var o=wn(),h=Os(o);h.tag=1,h.payload=n,a!=null&&(h.callback=a),n=Ms(t,h,o),n!==null&&(fn(n,t,o),Zo(n,t,o))},enqueueForceUpdate:function(t,n){t=t._reactInternals;var a=wn(),o=Os(a);o.tag=2,n!=null&&(o.callback=n),n=Ms(t,o,a),n!==null&&(fn(n,t,a),Zo(n,t,a))}};function dy(t,n,a,o,h,d,_){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(o,d,_):n.prototype&&n.prototype.isPureReactComponent?!Fo(a,o)||!Fo(h,d):!0}function my(t,n,a,o){t=n.state,typeof n.componentWillReceiveProps=="function"&&n.componentWillReceiveProps(a,o),typeof n.UNSAFE_componentWillReceiveProps=="function"&&n.UNSAFE_componentWillReceiveProps(a,o),n.state!==t&&Kf.enqueueReplaceState(n,n.state,null)}function Fr(t,n){var a=n;if("ref"in n){a={};for(var o in n)o!=="ref"&&(a[o]=n[o])}if(t=t.defaultProps){a===n&&(a=A({},a));for(var h in t)a[h]===void 0&&(a[h]=t[h])}return a}function py(t){ju(t)}function gy(t){console.error(t)}function yy(t){ju(t)}function rc(t,n){try{var a=t.onUncaughtError;a(n.value,{componentStack:n.stack})}catch(o){setTimeout(function(){throw o})}}function _y(t,n,a){try{var o=t.onCaughtError;o(a.value,{componentStack:a.stack,errorBoundary:n.tag===1?n.stateNode:null})}catch(h){setTimeout(function(){throw h})}}function Xf(t,n,a){return a=Os(a),a.tag=3,a.payload={element:null},a.callback=function(){rc(t,n)},a}function vy(t){return t=Os(t),t.tag=3,t}function Ey(t,n,a,o){var h=a.type.getDerivedStateFromError;if(typeof h=="function"){var d=o.value;t.payload=function(){return h(d)},t.callback=function(){_y(n,a,o)}}var _=a.stateNode;_!==null&&typeof _.componentDidCatch=="function"&&(t.callback=function(){_y(n,a,o),typeof h!="function"&&(Us===null?Us=new Set([this]):Us.add(this));var b=o.stack;this.componentDidCatch(o.value,{componentStack:b!==null?b:""})})}function rb(t,n,a,o,h){if(a.flags|=32768,o!==null&&typeof o=="object"&&typeof o.then=="function"){if(n=a.alternate,n!==null&&Ra(n,a,h,!0),a=Tn.current,a!==null){switch(a.tag){case 31:case 13:return Pn===null?yc():a.alternate===null&&ht===0&&(ht=3),a.flags&=-257,a.flags|=65536,a.lanes=h,o===Qu?a.flags|=16384:(n=a.updateQueue,n===null?a.updateQueue=new Set([o]):n.add(o),Ed(t,o,h)),!1;case 22:return a.flags|=65536,o===Qu?a.flags|=16384:(n=a.updateQueue,n===null?(n={transitions:null,markerInstances:null,retryQueue:new Set([o])},a.updateQueue=n):(a=n.retryQueue,a===null?n.retryQueue=new Set([o]):a.add(o)),Ed(t,o,h)),!1}throw Error(r(435,a.tag))}return Ed(t,o,h),yc(),!1}if(Pe)return n=Tn.current,n!==null?((n.flags&65536)===0&&(n.flags|=256),n.flags|=65536,n.lanes=h,o!==mf&&(t=Error(r(422),{cause:o}),Yo(Mn(t,a)))):(o!==mf&&(n=Error(r(423),{cause:o}),Yo(Mn(n,a))),t=t.current.alternate,t.flags|=65536,h&=-h,t.lanes|=h,o=Mn(o,a),h=Xf(t.stateNode,o,h),wf(t,h),ht!==4&&(ht=2)),!1;var d=Error(r(520),{cause:o});if(d=Mn(d,a),fl===null?fl=[d]:fl.push(d),ht!==4&&(ht=2),n===null)return!0;o=Mn(o,a),a=n;do{switch(a.tag){case 3:return a.flags|=65536,t=h&-h,a.lanes|=t,t=Xf(a.stateNode,o,t),wf(a,t),!1;case 1:if(n=a.type,d=a.stateNode,(a.flags&128)===0&&(typeof n.getDerivedStateFromError=="function"||d!==null&&typeof d.componentDidCatch=="function"&&(Us===null||!Us.has(d))))return a.flags|=65536,h&=-h,a.lanes|=h,h=vy(h),Ey(h,t,a,o),wf(a,h),!1}a=a.return}while(a!==null);return!1}var $f=Error(r(461)),It=!1;function Qt(t,n,a,o){n.child=t===null?Sg(n,null,a,o):qr(n,t.child,a,o)}function Ty(t,n,a,o,h){a=a.render;var d=n.ref;if("ref"in o){var _={};for(var b in o)b!=="ref"&&(_[b]=o[b])}else _=o;return Lr(n),o=Df(t,n,a,_,d,h),b=Of(),t!==null&&!It?(Mf(t,n,h),Xi(t,n,h)):(Pe&&b&&ff(n),n.flags|=1,Qt(t,n,o,h),n.child)}function by(t,n,a,o,h){if(t===null){var d=a.type;return typeof d=="function"&&!uf(d)&&d.defaultProps===void 0&&a.compare===null?(n.tag=15,n.type=d,Ay(t,n,d,o,h)):(t=zu(a.type,null,o,n,n.mode,h),t.ref=n.ref,t.return=n,n.child=t)}if(d=t.child,!sd(t,h)){var _=d.memoizedProps;if(a=a.compare,a=a!==null?a:Fo,a(_,o)&&t.ref===n.ref)return Xi(t,n,h)}return n.flags|=1,t=Hi(d,o),t.ref=n.ref,t.return=n,n.child=t}function Ay(t,n,a,o,h){if(t!==null){var d=t.memoizedProps;if(Fo(d,o)&&t.ref===n.ref)if(It=!1,n.pendingProps=o=d,sd(t,h))(t.flags&131072)!==0&&(It=!0);else return n.lanes=t.lanes,Xi(t,n,h)}return Jf(t,n,a,o,h)}function Sy(t,n,a,o){var h=o.children,d=t!==null?t.memoizedState:null;if(t===null&&n.stateNode===null&&(n.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),o.mode==="hidden"){if((n.flags&128)!==0){if(d=d!==null?d.baseLanes|a:a,t!==null){for(o=n.child=t.child,h=0;o!==null;)h=h|o.lanes|o.childLanes,o=o.sibling;o=h&~d}else o=0,n.child=null;return wy(t,n,d,a,o)}if((a&536870912)!==0)n.memoizedState={baseLanes:0,cachePool:null},t!==null&&Fu(n,d!==null?d.cachePool:null),d!==null?Rg(n,d):Rf(),Ig(n);else return o=n.lanes=536870912,wy(t,n,d!==null?d.baseLanes|a:a,a,o)}else d!==null?(Fu(n,d.cachePool),Rg(n,d),ks(),n.memoizedState=null):(t!==null&&Fu(n,null),Rf(),ks());return Qt(t,n,h,a),n.child}function rl(t,n){return t!==null&&t.tag===22||n.stateNode!==null||(n.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),n.sibling}function wy(t,n,a,o,h){var d=Tf();return d=d===null?null:{parent:xt._currentValue,pool:d},n.memoizedState={baseLanes:a,cachePool:d},t!==null&&Fu(n,null),Rf(),Ig(n),t!==null&&Ra(t,n,o,!0),n.childLanes=h,null}function ac(t,n){return n=lc({mode:n.mode,children:n.children},t.mode),n.ref=t.ref,t.child=n,n.return=t,n}function xy(t,n,a){return qr(n,t.child,null,a),t=ac(n,n.pendingProps),t.flags|=2,bn(n),n.memoizedState=null,t}function ab(t,n,a){var o=n.pendingProps,h=(n.flags&128)!==0;if(n.flags&=-129,t===null){if(Pe){if(o.mode==="hidden")return t=ac(n,o),n.lanes=536870912,rl(null,t);if(Cf(n),(t=nt)?(t=L_(t,jn),t=t!==null&&t.data==="&"?t:null,t!==null&&(n.memoizedState={dehydrated:t,treeContext:Rs!==null?{id:wi,overflow:xi}:null,retryLane:536870912,hydrationErrors:null},a=ug(t),a.return=n,n.child=a,Ft=n,nt=null)):t=null,t===null)throw Cs(n);return n.lanes=536870912,null}return ac(n,o)}var d=t.memoizedState;if(d!==null){var _=d.dehydrated;if(Cf(n),h)if(n.flags&256)n.flags&=-257,n=xy(t,n,a);else if(n.memoizedState!==null)n.child=t.child,n.flags|=128,n=null;else throw Error(r(558));else if(It||Ra(t,n,a,!1),h=(a&t.childLanes)!==0,It||h){if(o=et,o!==null&&(_=xo(o,a),_!==0&&_!==d.retryLane))throw d.retryLane=_,Vr(t,_),fn(o,t,_),$f;yc(),n=xy(t,n,a)}else t=d.treeContext,nt=Ln(_.nextSibling),Ft=n,Pe=!0,Is=null,jn=!1,t!==null&&fg(n,t),n=ac(n,o),n.flags|=4096;return n}return t=Hi(t.child,{mode:o.mode,children:o.children}),t.ref=n.ref,n.child=t,t.return=n,t}function oc(t,n){var a=n.ref;if(a===null)t!==null&&t.ref!==null&&(n.flags|=4194816);else{if(typeof a!="function"&&typeof a!="object")throw Error(r(284));(t===null||t.ref!==a)&&(n.flags|=4194816)}}function Jf(t,n,a,o,h){return Lr(n),a=Df(t,n,a,o,void 0,h),o=Of(),t!==null&&!It?(Mf(t,n,h),Xi(t,n,h)):(Pe&&o&&ff(n),n.flags|=1,Qt(t,n,a,h),n.child)}function Ry(t,n,a,o,h,d){return Lr(n),n.updateQueue=null,a=Ng(n,o,a,h),Cg(t),o=Of(),t!==null&&!It?(Mf(t,n,d),Xi(t,n,d)):(Pe&&o&&ff(n),n.flags|=1,Qt(t,n,a,d),n.child)}function Iy(t,n,a,o,h){if(Lr(n),n.stateNode===null){var d=Aa,_=a.contextType;typeof _=="object"&&_!==null&&(d=Gt(_)),d=new a(o,d),n.memoizedState=d.state!==null&&d.state!==void 0?d.state:null,d.updater=Kf,n.stateNode=d,d._reactInternals=n,d=n.stateNode,d.props=o,d.state=n.memoizedState,d.refs={},Af(n),_=a.contextType,d.context=typeof _=="object"&&_!==null?Gt(_):Aa,d.state=n.memoizedState,_=a.getDerivedStateFromProps,typeof _=="function"&&(Yf(n,a,_,o),d.state=n.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof d.getSnapshotBeforeUpdate=="function"||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(_=d.state,typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount(),_!==d.state&&Kf.enqueueReplaceState(d,d.state,null),el(n,o,d,h),Wo(),d.state=n.memoizedState),typeof d.componentDidMount=="function"&&(n.flags|=4194308),o=!0}else if(t===null){d=n.stateNode;var b=n.memoizedProps,C=Fr(a,b);d.props=C;var B=d.context,Y=a.contextType;_=Aa,typeof Y=="object"&&Y!==null&&(_=Gt(Y));var $=a.getDerivedStateFromProps;Y=typeof $=="function"||typeof d.getSnapshotBeforeUpdate=="function",b=n.pendingProps!==b,Y||typeof d.UNSAFE_componentWillReceiveProps!="function"&&typeof d.componentWillReceiveProps!="function"||(b||B!==_)&&my(n,d,o,_),Ds=!1;var q=n.memoizedState;d.state=q,el(n,o,d,h),Wo(),B=n.memoizedState,b||q!==B||Ds?(typeof $=="function"&&(Yf(n,a,$,o),B=n.memoizedState),(C=Ds||dy(n,a,C,o,q,B,_))?(Y||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount()),typeof d.componentDidMount=="function"&&(n.flags|=4194308)):(typeof d.componentDidMount=="function"&&(n.flags|=4194308),n.memoizedProps=o,n.memoizedState=B),d.props=o,d.state=B,d.context=_,o=C):(typeof d.componentDidMount=="function"&&(n.flags|=4194308),o=!1)}else{d=n.stateNode,Sf(t,n),_=n.memoizedProps,Y=Fr(a,_),d.props=Y,$=n.pendingProps,q=d.context,B=a.contextType,C=Aa,typeof B=="object"&&B!==null&&(C=Gt(B)),b=a.getDerivedStateFromProps,(B=typeof b=="function"||typeof d.getSnapshotBeforeUpdate=="function")||typeof d.UNSAFE_componentWillReceiveProps!="function"&&typeof d.componentWillReceiveProps!="function"||(_!==$||q!==C)&&my(n,d,o,C),Ds=!1,q=n.memoizedState,d.state=q,el(n,o,d,h),Wo();var F=n.memoizedState;_!==$||q!==F||Ds||t!==null&&t.dependencies!==null&&qu(t.dependencies)?(typeof b=="function"&&(Yf(n,a,b,o),F=n.memoizedState),(Y=Ds||dy(n,a,Y,o,q,F,C)||t!==null&&t.dependencies!==null&&qu(t.dependencies))?(B||typeof d.UNSAFE_componentWillUpdate!="function"&&typeof d.componentWillUpdate!="function"||(typeof d.componentWillUpdate=="function"&&d.componentWillUpdate(o,F,C),typeof d.UNSAFE_componentWillUpdate=="function"&&d.UNSAFE_componentWillUpdate(o,F,C)),typeof d.componentDidUpdate=="function"&&(n.flags|=4),typeof d.getSnapshotBeforeUpdate=="function"&&(n.flags|=1024)):(typeof d.componentDidUpdate!="function"||_===t.memoizedProps&&q===t.memoizedState||(n.flags|=4),typeof d.getSnapshotBeforeUpdate!="function"||_===t.memoizedProps&&q===t.memoizedState||(n.flags|=1024),n.memoizedProps=o,n.memoizedState=F),d.props=o,d.state=F,d.context=C,o=Y):(typeof d.componentDidUpdate!="function"||_===t.memoizedProps&&q===t.memoizedState||(n.flags|=4),typeof d.getSnapshotBeforeUpdate!="function"||_===t.memoizedProps&&q===t.memoizedState||(n.flags|=1024),o=!1)}return d=o,oc(t,n),o=(n.flags&128)!==0,d||o?(d=n.stateNode,a=o&&typeof a.getDerivedStateFromError!="function"?null:d.render(),n.flags|=1,t!==null&&o?(n.child=qr(n,t.child,null,h),n.child=qr(n,null,a,h)):Qt(t,n,a,h),n.memoizedState=d.state,t=n.child):t=Xi(t,n,h),t}function Cy(t,n,a,o){return jr(),n.flags|=256,Qt(t,n,a,o),n.child}var Zf={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Wf(t){return{baseLanes:t,cachePool:_g()}}function ed(t,n,a){return t=t!==null?t.childLanes&~a:0,n&&(t|=Sn),t}function Ny(t,n,a){var o=n.pendingProps,h=!1,d=(n.flags&128)!==0,_;if((_=d)||(_=t!==null&&t.memoizedState===null?!1:(_t.current&2)!==0),_&&(h=!0,n.flags&=-129),_=(n.flags&32)!==0,n.flags&=-33,t===null){if(Pe){if(h?Vs(n):ks(),(t=nt)?(t=L_(t,jn),t=t!==null&&t.data!=="&"?t:null,t!==null&&(n.memoizedState={dehydrated:t,treeContext:Rs!==null?{id:wi,overflow:xi}:null,retryLane:536870912,hydrationErrors:null},a=ug(t),a.return=n,n.child=a,Ft=n,nt=null)):t=null,t===null)throw Cs(n);return jd(t)?n.lanes=32:n.lanes=536870912,null}var b=o.children;return o=o.fallback,h?(ks(),h=n.mode,b=lc({mode:"hidden",children:b},h),o=kr(o,h,a,null),b.return=n,o.return=n,b.sibling=o,n.child=b,o=n.child,o.memoizedState=Wf(a),o.childLanes=ed(t,_,a),n.memoizedState=Zf,rl(null,o)):(Vs(n),td(n,b))}var C=t.memoizedState;if(C!==null&&(b=C.dehydrated,b!==null)){if(d)n.flags&256?(Vs(n),n.flags&=-257,n=nd(t,n,a)):n.memoizedState!==null?(ks(),n.child=t.child,n.flags|=128,n=null):(ks(),b=o.fallback,h=n.mode,o=lc({mode:"visible",children:o.children},h),b=kr(b,h,a,null),b.flags|=2,o.return=n,b.return=n,o.sibling=b,n.child=o,qr(n,t.child,null,a),o=n.child,o.memoizedState=Wf(a),o.childLanes=ed(t,_,a),n.memoizedState=Zf,n=rl(null,o));else if(Vs(n),jd(b)){if(_=b.nextSibling&&b.nextSibling.dataset,_)var B=_.dgst;_=B,o=Error(r(419)),o.stack="",o.digest=_,Yo({value:o,source:null,stack:null}),n=nd(t,n,a)}else if(It||Ra(t,n,a,!1),_=(a&t.childLanes)!==0,It||_){if(_=et,_!==null&&(o=xo(_,a),o!==0&&o!==C.retryLane))throw C.retryLane=o,Vr(t,o),fn(_,t,o),$f;kd(b)||yc(),n=nd(t,n,a)}else kd(b)?(n.flags|=192,n.child=t.child,n=null):(t=C.treeContext,nt=Ln(b.nextSibling),Ft=n,Pe=!0,Is=null,jn=!1,t!==null&&fg(n,t),n=td(n,o.children),n.flags|=4096);return n}return h?(ks(),b=o.fallback,h=n.mode,C=t.child,B=C.sibling,o=Hi(C,{mode:"hidden",children:o.children}),o.subtreeFlags=C.subtreeFlags&65011712,B!==null?b=Hi(B,b):(b=kr(b,h,a,null),b.flags|=2),b.return=n,o.return=n,o.sibling=b,n.child=o,rl(null,o),o=n.child,b=t.child.memoizedState,b===null?b=Wf(a):(h=b.cachePool,h!==null?(C=xt._currentValue,h=h.parent!==C?{parent:C,pool:C}:h):h=_g(),b={baseLanes:b.baseLanes|a,cachePool:h}),o.memoizedState=b,o.childLanes=ed(t,_,a),n.memoizedState=Zf,rl(t.child,o)):(Vs(n),a=t.child,t=a.sibling,a=Hi(a,{mode:"visible",children:o.children}),a.return=n,a.sibling=null,t!==null&&(_=n.deletions,_===null?(n.deletions=[t],n.flags|=16):_.push(t)),n.child=a,n.memoizedState=null,a)}function td(t,n){return n=lc({mode:"visible",children:n},t.mode),n.return=t,t.child=n}function lc(t,n){return t=En(22,t,null,n),t.lanes=0,t}function nd(t,n,a){return qr(n,t.child,null,a),t=td(n,n.pendingProps.children),t.flags|=2,n.memoizedState=null,t}function Dy(t,n,a){t.lanes|=n;var o=t.alternate;o!==null&&(o.lanes|=n),yf(t.return,n,a)}function id(t,n,a,o,h,d){var _=t.memoizedState;_===null?t.memoizedState={isBackwards:n,rendering:null,renderingStartTime:0,last:o,tail:a,tailMode:h,treeForkCount:d}:(_.isBackwards=n,_.rendering=null,_.renderingStartTime=0,_.last=o,_.tail=a,_.tailMode=h,_.treeForkCount=d)}function Oy(t,n,a){var o=n.pendingProps,h=o.revealOrder,d=o.tail;o=o.children;var _=_t.current,b=(_&2)!==0;if(b?(_=_&1|2,n.flags|=128):_&=1,re(_t,_),Qt(t,n,o,a),o=Pe?Qo:0,!b&&t!==null&&(t.flags&128)!==0)e:for(t=n.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Dy(t,a,n);else if(t.tag===19)Dy(t,a,n);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===n)break e;for(;t.sibling===null;){if(t.return===null||t.return===n)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}switch(h){case"forwards":for(a=n.child,h=null;a!==null;)t=a.alternate,t!==null&&$u(t)===null&&(h=a),a=a.sibling;a=h,a===null?(h=n.child,n.child=null):(h=a.sibling,a.sibling=null),id(n,!1,h,a,d,o);break;case"backwards":case"unstable_legacy-backwards":for(a=null,h=n.child,n.child=null;h!==null;){if(t=h.alternate,t!==null&&$u(t)===null){n.child=h;break}t=h.sibling,h.sibling=a,a=h,h=t}id(n,!0,a,null,d,o);break;case"together":id(n,!1,null,null,void 0,o);break;default:n.memoizedState=null}return n.child}function Xi(t,n,a){if(t!==null&&(n.dependencies=t.dependencies),Ls|=n.lanes,(a&n.childLanes)===0)if(t!==null){if(Ra(t,n,a,!1),(a&n.childLanes)===0)return null}else return null;if(t!==null&&n.child!==t.child)throw Error(r(153));if(n.child!==null){for(t=n.child,a=Hi(t,t.pendingProps),n.child=a,a.return=n;t.sibling!==null;)t=t.sibling,a=a.sibling=Hi(t,t.pendingProps),a.return=n;a.sibling=null}return n.child}function sd(t,n){return(t.lanes&n)!==0?!0:(t=t.dependencies,!!(t!==null&&qu(t)))}function ob(t,n,a){switch(n.tag){case 3:Mt(n,n.stateNode.containerInfo),Ns(n,xt,t.memoizedState.cache),jr();break;case 27:case 5:gr(n);break;case 4:Mt(n,n.stateNode.containerInfo);break;case 10:Ns(n,n.type,n.memoizedProps.value);break;case 31:if(n.memoizedState!==null)return n.flags|=128,Cf(n),null;break;case 13:var o=n.memoizedState;if(o!==null)return o.dehydrated!==null?(Vs(n),n.flags|=128,null):(a&n.child.childLanes)!==0?Ny(t,n,a):(Vs(n),t=Xi(t,n,a),t!==null?t.sibling:null);Vs(n);break;case 19:var h=(t.flags&128)!==0;if(o=(a&n.childLanes)!==0,o||(Ra(t,n,a,!1),o=(a&n.childLanes)!==0),h){if(o)return Oy(t,n,a);n.flags|=128}if(h=n.memoizedState,h!==null&&(h.rendering=null,h.tail=null,h.lastEffect=null),re(_t,_t.current),o)break;return null;case 22:return n.lanes=0,Sy(t,n,a,n.pendingProps);case 24:Ns(n,xt,t.memoizedState.cache)}return Xi(t,n,a)}function My(t,n,a){if(t!==null)if(t.memoizedProps!==n.pendingProps)It=!0;else{if(!sd(t,a)&&(n.flags&128)===0)return It=!1,ob(t,n,a);It=(t.flags&131072)!==0}else It=!1,Pe&&(n.flags&1048576)!==0&&hg(n,Qo,n.index);switch(n.lanes=0,n.tag){case 16:e:{var o=n.pendingProps;if(t=zr(n.elementType),n.type=t,typeof t=="function")uf(t)?(o=Fr(t,o),n.tag=1,n=Iy(null,n,t,o,a)):(n.tag=0,n=Jf(null,n,t,o,a));else{if(t!=null){var h=t.$$typeof;if(h===ue){n.tag=11,n=Ty(null,n,t,o,a);break e}else if(h===N){n.tag=14,n=by(null,n,t,o,a);break e}}throw n=be(t)||t,Error(r(306,n,""))}}return n;case 0:return Jf(t,n,n.type,n.pendingProps,a);case 1:return o=n.type,h=Fr(o,n.pendingProps),Iy(t,n,o,h,a);case 3:e:{if(Mt(n,n.stateNode.containerInfo),t===null)throw Error(r(387));o=n.pendingProps;var d=n.memoizedState;h=d.element,Sf(t,n),el(n,o,null,a);var _=n.memoizedState;if(o=_.cache,Ns(n,xt,o),o!==d.cache&&_f(n,[xt],a,!0),Wo(),o=_.element,d.isDehydrated)if(d={element:o,isDehydrated:!1,cache:_.cache},n.updateQueue.baseState=d,n.memoizedState=d,n.flags&256){n=Cy(t,n,o,a);break e}else if(o!==h){h=Mn(Error(r(424)),n),Yo(h),n=Cy(t,n,o,a);break e}else{switch(t=n.stateNode.containerInfo,t.nodeType){case 9:t=t.body;break;default:t=t.nodeName==="HTML"?t.ownerDocument.body:t}for(nt=Ln(t.firstChild),Ft=n,Pe=!0,Is=null,jn=!0,a=Sg(n,null,o,a),n.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling}else{if(jr(),o===h){n=Xi(t,n,a);break e}Qt(t,n,o,a)}n=n.child}return n;case 26:return oc(t,n),t===null?(a=F_(n.type,null,n.pendingProps,null))?n.memoizedState=a:Pe||(a=n.type,t=n.pendingProps,o=Sc(Ie.current).createElement(a),o[At]=n,o[Lt]=t,Yt(o,a,t),St(o),n.stateNode=o):n.memoizedState=F_(n.type,t.memoizedProps,n.pendingProps,t.memoizedState),null;case 27:return gr(n),t===null&&Pe&&(o=n.stateNode=B_(n.type,n.pendingProps,Ie.current),Ft=n,jn=!0,h=nt,Hs(n.type)?(Pd=h,nt=Ln(o.firstChild)):nt=h),Qt(t,n,n.pendingProps.children,a),oc(t,n),t===null&&(n.flags|=4194304),n.child;case 5:return t===null&&Pe&&((h=o=nt)&&(o=Pb(o,n.type,n.pendingProps,jn),o!==null?(n.stateNode=o,Ft=n,nt=Ln(o.firstChild),jn=!1,h=!0):h=!1),h||Cs(n)),gr(n),h=n.type,d=n.pendingProps,_=t!==null?t.memoizedProps:null,o=d.children,Od(h,d)?o=null:_!==null&&Od(h,_)&&(n.flags|=32),n.memoizedState!==null&&(h=Df(t,n,Z1,null,null,a),El._currentValue=h),oc(t,n),Qt(t,n,o,a),n.child;case 6:return t===null&&Pe&&((t=a=nt)&&(a=Lb(a,n.pendingProps,jn),a!==null?(n.stateNode=a,Ft=n,nt=null,t=!0):t=!1),t||Cs(n)),null;case 13:return Ny(t,n,a);case 4:return Mt(n,n.stateNode.containerInfo),o=n.pendingProps,t===null?n.child=qr(n,null,o,a):Qt(t,n,o,a),n.child;case 11:return Ty(t,n,n.type,n.pendingProps,a);case 7:return Qt(t,n,n.pendingProps,a),n.child;case 8:return Qt(t,n,n.pendingProps.children,a),n.child;case 12:return Qt(t,n,n.pendingProps.children,a),n.child;case 10:return o=n.pendingProps,Ns(n,n.type,o.value),Qt(t,n,o.children,a),n.child;case 9:return h=n.type._context,o=n.pendingProps.children,Lr(n),h=Gt(h),o=o(h),n.flags|=1,Qt(t,n,o,a),n.child;case 14:return by(t,n,n.type,n.pendingProps,a);case 15:return Ay(t,n,n.type,n.pendingProps,a);case 19:return Oy(t,n,a);case 31:return ab(t,n,a);case 22:return Sy(t,n,a,n.pendingProps);case 24:return Lr(n),o=Gt(xt),t===null?(h=Tf(),h===null&&(h=et,d=vf(),h.pooledCache=d,d.refCount++,d!==null&&(h.pooledCacheLanes|=a),h=d),n.memoizedState={parent:o,cache:h},Af(n),Ns(n,xt,h)):((t.lanes&a)!==0&&(Sf(t,n),el(n,null,null,a),Wo()),h=t.memoizedState,d=n.memoizedState,h.parent!==o?(h={parent:o,cache:o},n.memoizedState=h,n.lanes===0&&(n.memoizedState=n.updateQueue.baseState=h),Ns(n,xt,o)):(o=d.cache,Ns(n,xt,o),o!==h.cache&&_f(n,[xt],a,!0))),Qt(t,n,n.pendingProps.children,a),n.child;case 29:throw n.pendingProps}throw Error(r(156,n.tag))}function $i(t){t.flags|=4}function rd(t,n,a,o,h){if((n=(t.mode&32)!==0)&&(n=!1),n){if(t.flags|=16777216,(h&335544128)===h)if(t.stateNode.complete)t.flags|=8192;else if(a_())t.flags|=8192;else throw Br=Qu,bf}else t.flags&=-16777217}function Vy(t,n){if(n.type!=="stylesheet"||(n.state.loading&4)!==0)t.flags&=-16777217;else if(t.flags|=16777216,!X_(n))if(a_())t.flags|=8192;else throw Br=Qu,bf}function uc(t,n){n!==null&&(t.flags|=4),t.flags&16384&&(n=t.tag!==22?pu():536870912,t.lanes|=n,Ua|=n)}function al(t,n){if(!Pe)switch(t.tailMode){case"hidden":n=t.tail;for(var a=null;n!==null;)n.alternate!==null&&(a=n),n=n.sibling;a===null?t.tail=null:a.sibling=null;break;case"collapsed":a=t.tail;for(var o=null;a!==null;)a.alternate!==null&&(o=a),a=a.sibling;o===null?n||t.tail===null?t.tail=null:t.tail.sibling=null:o.sibling=null}}function it(t){var n=t.alternate!==null&&t.alternate.child===t.child,a=0,o=0;if(n)for(var h=t.child;h!==null;)a|=h.lanes|h.childLanes,o|=h.subtreeFlags&65011712,o|=h.flags&65011712,h.return=t,h=h.sibling;else for(h=t.child;h!==null;)a|=h.lanes|h.childLanes,o|=h.subtreeFlags,o|=h.flags,h.return=t,h=h.sibling;return t.subtreeFlags|=o,t.childLanes=a,n}function lb(t,n,a){var o=n.pendingProps;switch(df(n),n.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return it(n),null;case 1:return it(n),null;case 3:return a=n.stateNode,o=null,t!==null&&(o=t.memoizedState.cache),n.memoizedState.cache!==o&&(n.flags|=2048),Qi(xt),rt(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(t===null||t.child===null)&&(xa(n)?$i(n):t===null||t.memoizedState.isDehydrated&&(n.flags&256)===0||(n.flags|=1024,pf())),it(n),null;case 26:var h=n.type,d=n.memoizedState;return t===null?($i(n),d!==null?(it(n),Vy(n,d)):(it(n),rd(n,h,null,o,a))):d?d!==t.memoizedState?($i(n),it(n),Vy(n,d)):(it(n),n.flags&=-16777217):(t=t.memoizedProps,t!==o&&$i(n),it(n),rd(n,h,t,o,a)),null;case 27:if(sa(n),a=Ie.current,h=n.type,t!==null&&n.stateNode!=null)t.memoizedProps!==o&&$i(n);else{if(!o){if(n.stateNode===null)throw Error(r(166));return it(n),null}t=le.current,xa(n)?dg(n):(t=B_(h,o,a),n.stateNode=t,$i(n))}return it(n),null;case 5:if(sa(n),h=n.type,t!==null&&n.stateNode!=null)t.memoizedProps!==o&&$i(n);else{if(!o){if(n.stateNode===null)throw Error(r(166));return it(n),null}if(d=le.current,xa(n))dg(n);else{var _=Sc(Ie.current);switch(d){case 1:d=_.createElementNS("http://www.w3.org/2000/svg",h);break;case 2:d=_.createElementNS("http://www.w3.org/1998/Math/MathML",h);break;default:switch(h){case"svg":d=_.createElementNS("http://www.w3.org/2000/svg",h);break;case"math":d=_.createElementNS("http://www.w3.org/1998/Math/MathML",h);break;case"script":d=_.createElement("div"),d.innerHTML="<script><\/script>",d=d.removeChild(d.firstChild);break;case"select":d=typeof o.is=="string"?_.createElement("select",{is:o.is}):_.createElement("select"),o.multiple?d.multiple=!0:o.size&&(d.size=o.size);break;default:d=typeof o.is=="string"?_.createElement(h,{is:o.is}):_.createElement(h)}}d[At]=n,d[Lt]=o;e:for(_=n.child;_!==null;){if(_.tag===5||_.tag===6)d.appendChild(_.stateNode);else if(_.tag!==4&&_.tag!==27&&_.child!==null){_.child.return=_,_=_.child;continue}if(_===n)break e;for(;_.sibling===null;){if(_.return===null||_.return===n)break e;_=_.return}_.sibling.return=_.return,_=_.sibling}n.stateNode=d;e:switch(Yt(d,h,o),h){case"button":case"input":case"select":case"textarea":o=!!o.autoFocus;break e;case"img":o=!0;break e;default:o=!1}o&&$i(n)}}return it(n),rd(n,n.type,t===null?null:t.memoizedProps,n.pendingProps,a),null;case 6:if(t&&n.stateNode!=null)t.memoizedProps!==o&&$i(n);else{if(typeof o!="string"&&n.stateNode===null)throw Error(r(166));if(t=Ie.current,xa(n)){if(t=n.stateNode,a=n.memoizedProps,o=null,h=Ft,h!==null)switch(h.tag){case 27:case 5:o=h.memoizedProps}t[At]=n,t=!!(t.nodeValue===a||o!==null&&o.suppressHydrationWarning===!0||N_(t.nodeValue,a)),t||Cs(n,!0)}else t=Sc(t).createTextNode(o),t[At]=n,n.stateNode=t}return it(n),null;case 31:if(a=n.memoizedState,t===null||t.memoizedState!==null){if(o=xa(n),a!==null){if(t===null){if(!o)throw Error(r(318));if(t=n.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(r(557));t[At]=n}else jr(),(n.flags&128)===0&&(n.memoizedState=null),n.flags|=4;it(n),t=!1}else a=pf(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=a),t=!0;if(!t)return n.flags&256?(bn(n),n):(bn(n),null);if((n.flags&128)!==0)throw Error(r(558))}return it(n),null;case 13:if(o=n.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(h=xa(n),o!==null&&o.dehydrated!==null){if(t===null){if(!h)throw Error(r(318));if(h=n.memoizedState,h=h!==null?h.dehydrated:null,!h)throw Error(r(317));h[At]=n}else jr(),(n.flags&128)===0&&(n.memoizedState=null),n.flags|=4;it(n),h=!1}else h=pf(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=h),h=!0;if(!h)return n.flags&256?(bn(n),n):(bn(n),null)}return bn(n),(n.flags&128)!==0?(n.lanes=a,n):(a=o!==null,t=t!==null&&t.memoizedState!==null,a&&(o=n.child,h=null,o.alternate!==null&&o.alternate.memoizedState!==null&&o.alternate.memoizedState.cachePool!==null&&(h=o.alternate.memoizedState.cachePool.pool),d=null,o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(d=o.memoizedState.cachePool.pool),d!==h&&(o.flags|=2048)),a!==t&&a&&(n.child.flags|=8192),uc(n,n.updateQueue),it(n),null);case 4:return rt(),t===null&&Rd(n.stateNode.containerInfo),it(n),null;case 10:return Qi(n.type),it(n),null;case 19:if(Z(_t),o=n.memoizedState,o===null)return it(n),null;if(h=(n.flags&128)!==0,d=o.rendering,d===null)if(h)al(o,!1);else{if(ht!==0||t!==null&&(t.flags&128)!==0)for(t=n.child;t!==null;){if(d=$u(t),d!==null){for(n.flags|=128,al(o,!1),t=d.updateQueue,n.updateQueue=t,uc(n,t),n.subtreeFlags=0,t=a,a=n.child;a!==null;)lg(a,t),a=a.sibling;return re(_t,_t.current&1|2),Pe&&Fi(n,o.treeForkCount),n.child}t=t.sibling}o.tail!==null&&nn()>mc&&(n.flags|=128,h=!0,al(o,!1),n.lanes=4194304)}else{if(!h)if(t=$u(d),t!==null){if(n.flags|=128,h=!0,t=t.updateQueue,n.updateQueue=t,uc(n,t),al(o,!0),o.tail===null&&o.tailMode==="hidden"&&!d.alternate&&!Pe)return it(n),null}else 2*nn()-o.renderingStartTime>mc&&a!==536870912&&(n.flags|=128,h=!0,al(o,!1),n.lanes=4194304);o.isBackwards?(d.sibling=n.child,n.child=d):(t=o.last,t!==null?t.sibling=d:n.child=d,o.last=d)}return o.tail!==null?(t=o.tail,o.rendering=t,o.tail=t.sibling,o.renderingStartTime=nn(),t.sibling=null,a=_t.current,re(_t,h?a&1|2:a&1),Pe&&Fi(n,o.treeForkCount),t):(it(n),null);case 22:case 23:return bn(n),If(),o=n.memoizedState!==null,t!==null?t.memoizedState!==null!==o&&(n.flags|=8192):o&&(n.flags|=8192),o?(a&536870912)!==0&&(n.flags&128)===0&&(it(n),n.subtreeFlags&6&&(n.flags|=8192)):it(n),a=n.updateQueue,a!==null&&uc(n,a.retryQueue),a=null,t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(a=t.memoizedState.cachePool.pool),o=null,n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(o=n.memoizedState.cachePool.pool),o!==a&&(n.flags|=2048),t!==null&&Z(Ur),null;case 24:return a=null,t!==null&&(a=t.memoizedState.cache),n.memoizedState.cache!==a&&(n.flags|=2048),Qi(xt),it(n),null;case 25:return null;case 30:return null}throw Error(r(156,n.tag))}function ub(t,n){switch(df(n),n.tag){case 1:return t=n.flags,t&65536?(n.flags=t&-65537|128,n):null;case 3:return Qi(xt),rt(),t=n.flags,(t&65536)!==0&&(t&128)===0?(n.flags=t&-65537|128,n):null;case 26:case 27:case 5:return sa(n),null;case 31:if(n.memoizedState!==null){if(bn(n),n.alternate===null)throw Error(r(340));jr()}return t=n.flags,t&65536?(n.flags=t&-65537|128,n):null;case 13:if(bn(n),t=n.memoizedState,t!==null&&t.dehydrated!==null){if(n.alternate===null)throw Error(r(340));jr()}return t=n.flags,t&65536?(n.flags=t&-65537|128,n):null;case 19:return Z(_t),null;case 4:return rt(),null;case 10:return Qi(n.type),null;case 22:case 23:return bn(n),If(),t!==null&&Z(Ur),t=n.flags,t&65536?(n.flags=t&-65537|128,n):null;case 24:return Qi(xt),null;case 25:return null;default:return null}}function ky(t,n){switch(df(n),n.tag){case 3:Qi(xt),rt();break;case 26:case 27:case 5:sa(n);break;case 4:rt();break;case 31:n.memoizedState!==null&&bn(n);break;case 13:bn(n);break;case 19:Z(_t);break;case 10:Qi(n.type);break;case 22:case 23:bn(n),If(),t!==null&&Z(Ur);break;case 24:Qi(xt)}}function ol(t,n){try{var a=n.updateQueue,o=a!==null?a.lastEffect:null;if(o!==null){var h=o.next;a=h;do{if((a.tag&t)===t){o=void 0;var d=a.create,_=a.inst;o=d(),_.destroy=o}a=a.next}while(a!==h)}}catch(b){Xe(n,n.return,b)}}function js(t,n,a){try{var o=n.updateQueue,h=o!==null?o.lastEffect:null;if(h!==null){var d=h.next;o=d;do{if((o.tag&t)===t){var _=o.inst,b=_.destroy;if(b!==void 0){_.destroy=void 0,h=n;var C=a,B=b;try{B()}catch(Y){Xe(h,C,Y)}}}o=o.next}while(o!==d)}}catch(Y){Xe(n,n.return,Y)}}function jy(t){var n=t.updateQueue;if(n!==null){var a=t.stateNode;try{xg(n,a)}catch(o){Xe(t,t.return,o)}}}function Py(t,n,a){a.props=Fr(t.type,t.memoizedProps),a.state=t.memoizedState;try{a.componentWillUnmount()}catch(o){Xe(t,n,o)}}function ll(t,n){try{var a=t.ref;if(a!==null){switch(t.tag){case 26:case 27:case 5:var o=t.stateNode;break;case 30:o=t.stateNode;break;default:o=t.stateNode}typeof a=="function"?t.refCleanup=a(o):a.current=o}}catch(h){Xe(t,n,h)}}function Ri(t,n){var a=t.ref,o=t.refCleanup;if(a!==null)if(typeof o=="function")try{o()}catch(h){Xe(t,n,h)}finally{t.refCleanup=null,t=t.alternate,t!=null&&(t.refCleanup=null)}else if(typeof a=="function")try{a(null)}catch(h){Xe(t,n,h)}else a.current=null}function Ly(t){var n=t.type,a=t.memoizedProps,o=t.stateNode;try{e:switch(n){case"button":case"input":case"select":case"textarea":a.autoFocus&&o.focus();break e;case"img":a.src?o.src=a.src:a.srcSet&&(o.srcset=a.srcSet)}}catch(h){Xe(t,t.return,h)}}function ad(t,n,a){try{var o=t.stateNode;Db(o,t.type,a,n),o[Lt]=n}catch(h){Xe(t,t.return,h)}}function Uy(t){return t.tag===5||t.tag===3||t.tag===26||t.tag===27&&Hs(t.type)||t.tag===4}function od(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||Uy(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.tag===27&&Hs(t.type)||t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function ld(t,n,a){var o=t.tag;if(o===5||o===6)t=t.stateNode,n?(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a).insertBefore(t,n):(n=a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,n.appendChild(t),a=a._reactRootContainer,a!=null||n.onclick!==null||(n.onclick=Kn));else if(o!==4&&(o===27&&Hs(t.type)&&(a=t.stateNode,n=null),t=t.child,t!==null))for(ld(t,n,a),t=t.sibling;t!==null;)ld(t,n,a),t=t.sibling}function cc(t,n,a){var o=t.tag;if(o===5||o===6)t=t.stateNode,n?a.insertBefore(t,n):a.appendChild(t);else if(o!==4&&(o===27&&Hs(t.type)&&(a=t.stateNode),t=t.child,t!==null))for(cc(t,n,a),t=t.sibling;t!==null;)cc(t,n,a),t=t.sibling}function zy(t){var n=t.stateNode,a=t.memoizedProps;try{for(var o=t.type,h=n.attributes;h.length;)n.removeAttributeNode(h[0]);Yt(n,o,a),n[At]=t,n[Lt]=a}catch(d){Xe(t,t.return,d)}}var Ji=!1,Ct=!1,ud=!1,By=typeof WeakSet=="function"?WeakSet:Set,zt=null;function cb(t,n){if(t=t.containerInfo,Nd=Dc,t=Wp(t),tf(t)){if("selectionStart"in t)var a={start:t.selectionStart,end:t.selectionEnd};else e:{a=(a=t.ownerDocument)&&a.defaultView||window;var o=a.getSelection&&a.getSelection();if(o&&o.rangeCount!==0){a=o.anchorNode;var h=o.anchorOffset,d=o.focusNode;o=o.focusOffset;try{a.nodeType,d.nodeType}catch{a=null;break e}var _=0,b=-1,C=-1,B=0,Y=0,$=t,q=null;t:for(;;){for(var F;$!==a||h!==0&&$.nodeType!==3||(b=_+h),$!==d||o!==0&&$.nodeType!==3||(C=_+o),$.nodeType===3&&(_+=$.nodeValue.length),(F=$.firstChild)!==null;)q=$,$=F;for(;;){if($===t)break t;if(q===a&&++B===h&&(b=_),q===d&&++Y===o&&(C=_),(F=$.nextSibling)!==null)break;$=q,q=$.parentNode}$=F}a=b===-1||C===-1?null:{start:b,end:C}}else a=null}a=a||{start:0,end:0}}else a=null;for(Dd={focusedElem:t,selectionRange:a},Dc=!1,zt=n;zt!==null;)if(n=zt,t=n.child,(n.subtreeFlags&1028)!==0&&t!==null)t.return=n,zt=t;else for(;zt!==null;){switch(n=zt,d=n.alternate,t=n.flags,n.tag){case 0:if((t&4)!==0&&(t=n.updateQueue,t=t!==null?t.events:null,t!==null))for(a=0;a<t.length;a++)h=t[a],h.ref.impl=h.nextImpl;break;case 11:case 15:break;case 1:if((t&1024)!==0&&d!==null){t=void 0,a=n,h=d.memoizedProps,d=d.memoizedState,o=a.stateNode;try{var he=Fr(a.type,h);t=o.getSnapshotBeforeUpdate(he,d),o.__reactInternalSnapshotBeforeUpdate=t}catch(ye){Xe(a,a.return,ye)}}break;case 3:if((t&1024)!==0){if(t=n.stateNode.containerInfo,a=t.nodeType,a===9)Vd(t);else if(a===1)switch(t.nodeName){case"HEAD":case"HTML":case"BODY":Vd(t);break;default:t.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((t&1024)!==0)throw Error(r(163))}if(t=n.sibling,t!==null){t.return=n.return,zt=t;break}zt=n.return}}function qy(t,n,a){var o=a.flags;switch(a.tag){case 0:case 11:case 15:Wi(t,a),o&4&&ol(5,a);break;case 1:if(Wi(t,a),o&4)if(t=a.stateNode,n===null)try{t.componentDidMount()}catch(_){Xe(a,a.return,_)}else{var h=Fr(a.type,n.memoizedProps);n=n.memoizedState;try{t.componentDidUpdate(h,n,t.__reactInternalSnapshotBeforeUpdate)}catch(_){Xe(a,a.return,_)}}o&64&&jy(a),o&512&&ll(a,a.return);break;case 3:if(Wi(t,a),o&64&&(t=a.updateQueue,t!==null)){if(n=null,a.child!==null)switch(a.child.tag){case 27:case 5:n=a.child.stateNode;break;case 1:n=a.child.stateNode}try{xg(t,n)}catch(_){Xe(a,a.return,_)}}break;case 27:n===null&&o&4&&zy(a);case 26:case 5:Wi(t,a),n===null&&o&4&&Ly(a),o&512&&ll(a,a.return);break;case 12:Wi(t,a);break;case 31:Wi(t,a),o&4&&Gy(t,a);break;case 13:Wi(t,a),o&4&&Qy(t,a),o&64&&(t=a.memoizedState,t!==null&&(t=t.dehydrated,t!==null&&(a=vb.bind(null,a),Ub(t,a))));break;case 22:if(o=a.memoizedState!==null||Ji,!o){n=n!==null&&n.memoizedState!==null||Ct,h=Ji;var d=Ct;Ji=o,(Ct=n)&&!d?es(t,a,(a.subtreeFlags&8772)!==0):Wi(t,a),Ji=h,Ct=d}break;case 30:break;default:Wi(t,a)}}function Hy(t){var n=t.alternate;n!==null&&(t.alternate=null,Hy(n)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(n=t.stateNode,n!==null&&ua(n)),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}var ot=null,ln=!1;function Zi(t,n,a){for(a=a.child;a!==null;)Fy(t,n,a),a=a.sibling}function Fy(t,n,a){if(qt&&typeof qt.onCommitFiberUnmount=="function")try{qt.onCommitFiberUnmount(Fn,a)}catch{}switch(a.tag){case 26:Ct||Ri(a,n),Zi(t,n,a),a.memoizedState?a.memoizedState.count--:a.stateNode&&(a=a.stateNode,a.parentNode.removeChild(a));break;case 27:Ct||Ri(a,n);var o=ot,h=ln;Hs(a.type)&&(ot=a.stateNode,ln=!1),Zi(t,n,a),yl(a.stateNode),ot=o,ln=h;break;case 5:Ct||Ri(a,n);case 6:if(o=ot,h=ln,ot=null,Zi(t,n,a),ot=o,ln=h,ot!==null)if(ln)try{(ot.nodeType===9?ot.body:ot.nodeName==="HTML"?ot.ownerDocument.body:ot).removeChild(a.stateNode)}catch(d){Xe(a,n,d)}else try{ot.removeChild(a.stateNode)}catch(d){Xe(a,n,d)}break;case 18:ot!==null&&(ln?(t=ot,j_(t.nodeType===9?t.body:t.nodeName==="HTML"?t.ownerDocument.body:t,a.stateNode),Ya(t)):j_(ot,a.stateNode));break;case 4:o=ot,h=ln,ot=a.stateNode.containerInfo,ln=!0,Zi(t,n,a),ot=o,ln=h;break;case 0:case 11:case 14:case 15:js(2,a,n),Ct||js(4,a,n),Zi(t,n,a);break;case 1:Ct||(Ri(a,n),o=a.stateNode,typeof o.componentWillUnmount=="function"&&Py(a,n,o)),Zi(t,n,a);break;case 21:Zi(t,n,a);break;case 22:Ct=(o=Ct)||a.memoizedState!==null,Zi(t,n,a),Ct=o;break;default:Zi(t,n,a)}}function Gy(t,n){if(n.memoizedState===null&&(t=n.alternate,t!==null&&(t=t.memoizedState,t!==null))){t=t.dehydrated;try{Ya(t)}catch(a){Xe(n,n.return,a)}}}function Qy(t,n){if(n.memoizedState===null&&(t=n.alternate,t!==null&&(t=t.memoizedState,t!==null&&(t=t.dehydrated,t!==null))))try{Ya(t)}catch(a){Xe(n,n.return,a)}}function hb(t){switch(t.tag){case 31:case 13:case 19:var n=t.stateNode;return n===null&&(n=t.stateNode=new By),n;case 22:return t=t.stateNode,n=t._retryCache,n===null&&(n=t._retryCache=new By),n;default:throw Error(r(435,t.tag))}}function hc(t,n){var a=hb(t);n.forEach(function(o){if(!a.has(o)){a.add(o);var h=Eb.bind(null,t,o);o.then(h,h)}})}function un(t,n){var a=n.deletions;if(a!==null)for(var o=0;o<a.length;o++){var h=a[o],d=t,_=n,b=_;e:for(;b!==null;){switch(b.tag){case 27:if(Hs(b.type)){ot=b.stateNode,ln=!1;break e}break;case 5:ot=b.stateNode,ln=!1;break e;case 3:case 4:ot=b.stateNode.containerInfo,ln=!0;break e}b=b.return}if(ot===null)throw Error(r(160));Fy(d,_,h),ot=null,ln=!1,d=h.alternate,d!==null&&(d.return=null),h.return=null}if(n.subtreeFlags&13886)for(n=n.child;n!==null;)Yy(n,t),n=n.sibling}var ei=null;function Yy(t,n){var a=t.alternate,o=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:un(n,t),cn(t),o&4&&(js(3,t,t.return),ol(3,t),js(5,t,t.return));break;case 1:un(n,t),cn(t),o&512&&(Ct||a===null||Ri(a,a.return)),o&64&&Ji&&(t=t.updateQueue,t!==null&&(o=t.callbacks,o!==null&&(a=t.shared.hiddenCallbacks,t.shared.hiddenCallbacks=a===null?o:a.concat(o))));break;case 26:var h=ei;if(un(n,t),cn(t),o&512&&(Ct||a===null||Ri(a,a.return)),o&4){var d=a!==null?a.memoizedState:null;if(o=t.memoizedState,a===null)if(o===null)if(t.stateNode===null){e:{o=t.type,a=t.memoizedProps,h=h.ownerDocument||h;t:switch(o){case"title":d=h.getElementsByTagName("title")[0],(!d||d[di]||d[At]||d.namespaceURI==="http://www.w3.org/2000/svg"||d.hasAttribute("itemprop"))&&(d=h.createElement(o),h.head.insertBefore(d,h.querySelector("head > title"))),Yt(d,o,a),d[At]=t,St(d),o=d;break e;case"link":var _=Y_("link","href",h).get(o+(a.href||""));if(_){for(var b=0;b<_.length;b++)if(d=_[b],d.getAttribute("href")===(a.href==null||a.href===""?null:a.href)&&d.getAttribute("rel")===(a.rel==null?null:a.rel)&&d.getAttribute("title")===(a.title==null?null:a.title)&&d.getAttribute("crossorigin")===(a.crossOrigin==null?null:a.crossOrigin)){_.splice(b,1);break t}}d=h.createElement(o),Yt(d,o,a),h.head.appendChild(d);break;case"meta":if(_=Y_("meta","content",h).get(o+(a.content||""))){for(b=0;b<_.length;b++)if(d=_[b],d.getAttribute("content")===(a.content==null?null:""+a.content)&&d.getAttribute("name")===(a.name==null?null:a.name)&&d.getAttribute("property")===(a.property==null?null:a.property)&&d.getAttribute("http-equiv")===(a.httpEquiv==null?null:a.httpEquiv)&&d.getAttribute("charset")===(a.charSet==null?null:a.charSet)){_.splice(b,1);break t}}d=h.createElement(o),Yt(d,o,a),h.head.appendChild(d);break;default:throw Error(r(468,o))}d[At]=t,St(d),o=d}t.stateNode=o}else K_(h,t.type,t.stateNode);else t.stateNode=Q_(h,o,t.memoizedProps);else d!==o?(d===null?a.stateNode!==null&&(a=a.stateNode,a.parentNode.removeChild(a)):d.count--,o===null?K_(h,t.type,t.stateNode):Q_(h,o,t.memoizedProps)):o===null&&t.stateNode!==null&&ad(t,t.memoizedProps,a.memoizedProps)}break;case 27:un(n,t),cn(t),o&512&&(Ct||a===null||Ri(a,a.return)),a!==null&&o&4&&ad(t,t.memoizedProps,a.memoizedProps);break;case 5:if(un(n,t),cn(t),o&512&&(Ct||a===null||Ri(a,a.return)),t.flags&32){h=t.stateNode;try{on(h,"")}catch(he){Xe(t,t.return,he)}}o&4&&t.stateNode!=null&&(h=t.memoizedProps,ad(t,h,a!==null?a.memoizedProps:h)),o&1024&&(ud=!0);break;case 6:if(un(n,t),cn(t),o&4){if(t.stateNode===null)throw Error(r(162));o=t.memoizedProps,a=t.stateNode;try{a.nodeValue=o}catch(he){Xe(t,t.return,he)}}break;case 3:if(Rc=null,h=ei,ei=wc(n.containerInfo),un(n,t),ei=h,cn(t),o&4&&a!==null&&a.memoizedState.isDehydrated)try{Ya(n.containerInfo)}catch(he){Xe(t,t.return,he)}ud&&(ud=!1,Ky(t));break;case 4:o=ei,ei=wc(t.stateNode.containerInfo),un(n,t),cn(t),ei=o;break;case 12:un(n,t),cn(t);break;case 31:un(n,t),cn(t),o&4&&(o=t.updateQueue,o!==null&&(t.updateQueue=null,hc(t,o)));break;case 13:un(n,t),cn(t),t.child.flags&8192&&t.memoizedState!==null!=(a!==null&&a.memoizedState!==null)&&(dc=nn()),o&4&&(o=t.updateQueue,o!==null&&(t.updateQueue=null,hc(t,o)));break;case 22:h=t.memoizedState!==null;var C=a!==null&&a.memoizedState!==null,B=Ji,Y=Ct;if(Ji=B||h,Ct=Y||C,un(n,t),Ct=Y,Ji=B,cn(t),o&8192)e:for(n=t.stateNode,n._visibility=h?n._visibility&-2:n._visibility|1,h&&(a===null||C||Ji||Ct||Gr(t)),a=null,n=t;;){if(n.tag===5||n.tag===26){if(a===null){C=a=n;try{if(d=C.stateNode,h)_=d.style,typeof _.setProperty=="function"?_.setProperty("display","none","important"):_.display="none";else{b=C.stateNode;var $=C.memoizedProps.style,q=$!=null&&$.hasOwnProperty("display")?$.display:null;b.style.display=q==null||typeof q=="boolean"?"":(""+q).trim()}}catch(he){Xe(C,C.return,he)}}}else if(n.tag===6){if(a===null){C=n;try{C.stateNode.nodeValue=h?"":C.memoizedProps}catch(he){Xe(C,C.return,he)}}}else if(n.tag===18){if(a===null){C=n;try{var F=C.stateNode;h?P_(F,!0):P_(C.stateNode,!1)}catch(he){Xe(C,C.return,he)}}}else if((n.tag!==22&&n.tag!==23||n.memoizedState===null||n===t)&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break e;for(;n.sibling===null;){if(n.return===null||n.return===t)break e;a===n&&(a=null),n=n.return}a===n&&(a=null),n.sibling.return=n.return,n=n.sibling}o&4&&(o=t.updateQueue,o!==null&&(a=o.retryQueue,a!==null&&(o.retryQueue=null,hc(t,a))));break;case 19:un(n,t),cn(t),o&4&&(o=t.updateQueue,o!==null&&(t.updateQueue=null,hc(t,o)));break;case 30:break;case 21:break;default:un(n,t),cn(t)}}function cn(t){var n=t.flags;if(n&2){try{for(var a,o=t.return;o!==null;){if(Uy(o)){a=o;break}o=o.return}if(a==null)throw Error(r(160));switch(a.tag){case 27:var h=a.stateNode,d=od(t);cc(t,d,h);break;case 5:var _=a.stateNode;a.flags&32&&(on(_,""),a.flags&=-33);var b=od(t);cc(t,b,_);break;case 3:case 4:var C=a.stateNode.containerInfo,B=od(t);ld(t,B,C);break;default:throw Error(r(161))}}catch(Y){Xe(t,t.return,Y)}t.flags&=-3}n&4096&&(t.flags&=-4097)}function Ky(t){if(t.subtreeFlags&1024)for(t=t.child;t!==null;){var n=t;Ky(n),n.tag===5&&n.flags&1024&&n.stateNode.reset(),t=t.sibling}}function Wi(t,n){if(n.subtreeFlags&8772)for(n=n.child;n!==null;)qy(t,n.alternate,n),n=n.sibling}function Gr(t){for(t=t.child;t!==null;){var n=t;switch(n.tag){case 0:case 11:case 14:case 15:js(4,n,n.return),Gr(n);break;case 1:Ri(n,n.return);var a=n.stateNode;typeof a.componentWillUnmount=="function"&&Py(n,n.return,a),Gr(n);break;case 27:yl(n.stateNode);case 26:case 5:Ri(n,n.return),Gr(n);break;case 22:n.memoizedState===null&&Gr(n);break;case 30:Gr(n);break;default:Gr(n)}t=t.sibling}}function es(t,n,a){for(a=a&&(n.subtreeFlags&8772)!==0,n=n.child;n!==null;){var o=n.alternate,h=t,d=n,_=d.flags;switch(d.tag){case 0:case 11:case 15:es(h,d,a),ol(4,d);break;case 1:if(es(h,d,a),o=d,h=o.stateNode,typeof h.componentDidMount=="function")try{h.componentDidMount()}catch(B){Xe(o,o.return,B)}if(o=d,h=o.updateQueue,h!==null){var b=o.stateNode;try{var C=h.shared.hiddenCallbacks;if(C!==null)for(h.shared.hiddenCallbacks=null,h=0;h<C.length;h++)wg(C[h],b)}catch(B){Xe(o,o.return,B)}}a&&_&64&&jy(d),ll(d,d.return);break;case 27:zy(d);case 26:case 5:es(h,d,a),a&&o===null&&_&4&&Ly(d),ll(d,d.return);break;case 12:es(h,d,a);break;case 31:es(h,d,a),a&&_&4&&Gy(h,d);break;case 13:es(h,d,a),a&&_&4&&Qy(h,d);break;case 22:d.memoizedState===null&&es(h,d,a),ll(d,d.return);break;case 30:break;default:es(h,d,a)}n=n.sibling}}function cd(t,n){var a=null;t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(a=t.memoizedState.cachePool.pool),t=null,n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(t=n.memoizedState.cachePool.pool),t!==a&&(t!=null&&t.refCount++,a!=null&&Ko(a))}function hd(t,n){t=null,n.alternate!==null&&(t=n.alternate.memoizedState.cache),n=n.memoizedState.cache,n!==t&&(n.refCount++,t!=null&&Ko(t))}function ti(t,n,a,o){if(n.subtreeFlags&10256)for(n=n.child;n!==null;)Xy(t,n,a,o),n=n.sibling}function Xy(t,n,a,o){var h=n.flags;switch(n.tag){case 0:case 11:case 15:ti(t,n,a,o),h&2048&&ol(9,n);break;case 1:ti(t,n,a,o);break;case 3:ti(t,n,a,o),h&2048&&(t=null,n.alternate!==null&&(t=n.alternate.memoizedState.cache),n=n.memoizedState.cache,n!==t&&(n.refCount++,t!=null&&Ko(t)));break;case 12:if(h&2048){ti(t,n,a,o),t=n.stateNode;try{var d=n.memoizedProps,_=d.id,b=d.onPostCommit;typeof b=="function"&&b(_,n.alternate===null?"mount":"update",t.passiveEffectDuration,-0)}catch(C){Xe(n,n.return,C)}}else ti(t,n,a,o);break;case 31:ti(t,n,a,o);break;case 13:ti(t,n,a,o);break;case 23:break;case 22:d=n.stateNode,_=n.alternate,n.memoizedState!==null?d._visibility&2?ti(t,n,a,o):ul(t,n):d._visibility&2?ti(t,n,a,o):(d._visibility|=2,ja(t,n,a,o,(n.subtreeFlags&10256)!==0||!1)),h&2048&&cd(_,n);break;case 24:ti(t,n,a,o),h&2048&&hd(n.alternate,n);break;default:ti(t,n,a,o)}}function ja(t,n,a,o,h){for(h=h&&((n.subtreeFlags&10256)!==0||!1),n=n.child;n!==null;){var d=t,_=n,b=a,C=o,B=_.flags;switch(_.tag){case 0:case 11:case 15:ja(d,_,b,C,h),ol(8,_);break;case 23:break;case 22:var Y=_.stateNode;_.memoizedState!==null?Y._visibility&2?ja(d,_,b,C,h):ul(d,_):(Y._visibility|=2,ja(d,_,b,C,h)),h&&B&2048&&cd(_.alternate,_);break;case 24:ja(d,_,b,C,h),h&&B&2048&&hd(_.alternate,_);break;default:ja(d,_,b,C,h)}n=n.sibling}}function ul(t,n){if(n.subtreeFlags&10256)for(n=n.child;n!==null;){var a=t,o=n,h=o.flags;switch(o.tag){case 22:ul(a,o),h&2048&&cd(o.alternate,o);break;case 24:ul(a,o),h&2048&&hd(o.alternate,o);break;default:ul(a,o)}n=n.sibling}}var cl=8192;function Pa(t,n,a){if(t.subtreeFlags&cl)for(t=t.child;t!==null;)$y(t,n,a),t=t.sibling}function $y(t,n,a){switch(t.tag){case 26:Pa(t,n,a),t.flags&cl&&t.memoizedState!==null&&Jb(a,ei,t.memoizedState,t.memoizedProps);break;case 5:Pa(t,n,a);break;case 3:case 4:var o=ei;ei=wc(t.stateNode.containerInfo),Pa(t,n,a),ei=o;break;case 22:t.memoizedState===null&&(o=t.alternate,o!==null&&o.memoizedState!==null?(o=cl,cl=16777216,Pa(t,n,a),cl=o):Pa(t,n,a));break;default:Pa(t,n,a)}}function Jy(t){var n=t.alternate;if(n!==null&&(t=n.child,t!==null)){n.child=null;do n=t.sibling,t.sibling=null,t=n;while(t!==null)}}function hl(t){var n=t.deletions;if((t.flags&16)!==0){if(n!==null)for(var a=0;a<n.length;a++){var o=n[a];zt=o,Wy(o,t)}Jy(t)}if(t.subtreeFlags&10256)for(t=t.child;t!==null;)Zy(t),t=t.sibling}function Zy(t){switch(t.tag){case 0:case 11:case 15:hl(t),t.flags&2048&&js(9,t,t.return);break;case 3:hl(t);break;case 12:hl(t);break;case 22:var n=t.stateNode;t.memoizedState!==null&&n._visibility&2&&(t.return===null||t.return.tag!==13)?(n._visibility&=-3,fc(t)):hl(t);break;default:hl(t)}}function fc(t){var n=t.deletions;if((t.flags&16)!==0){if(n!==null)for(var a=0;a<n.length;a++){var o=n[a];zt=o,Wy(o,t)}Jy(t)}for(t=t.child;t!==null;){switch(n=t,n.tag){case 0:case 11:case 15:js(8,n,n.return),fc(n);break;case 22:a=n.stateNode,a._visibility&2&&(a._visibility&=-3,fc(n));break;default:fc(n)}t=t.sibling}}function Wy(t,n){for(;zt!==null;){var a=zt;switch(a.tag){case 0:case 11:case 15:js(8,a,n);break;case 23:case 22:if(a.memoizedState!==null&&a.memoizedState.cachePool!==null){var o=a.memoizedState.cachePool.pool;o!=null&&o.refCount++}break;case 24:Ko(a.memoizedState.cache)}if(o=a.child,o!==null)o.return=a,zt=o;else e:for(a=t;zt!==null;){o=zt;var h=o.sibling,d=o.return;if(Hy(o),o===a){zt=null;break e}if(h!==null){h.return=d,zt=h;break e}zt=d}}}var fb={getCacheForType:function(t){var n=Gt(xt),a=n.data.get(t);return a===void 0&&(a=t(),n.data.set(t,a)),a},cacheSignal:function(){return Gt(xt).controller.signal}},db=typeof WeakMap=="function"?WeakMap:Map,Fe=0,et=null,Ne=null,Oe=0,Ke=0,An=null,Ps=!1,La=!1,fd=!1,ts=0,ht=0,Ls=0,Qr=0,dd=0,Sn=0,Ua=0,fl=null,hn=null,md=!1,dc=0,e_=0,mc=1/0,pc=null,Us=null,kt=0,zs=null,za=null,ns=0,pd=0,gd=null,t_=null,dl=0,yd=null;function wn(){return(Fe&2)!==0&&Oe!==0?Oe&-Oe:K.T!==null?Ad():gu()}function n_(){if(Sn===0)if((Oe&536870912)===0||Pe){var t=vr;vr<<=1,(vr&3932160)===0&&(vr=262144),Sn=t}else Sn=536870912;return t=Tn.current,t!==null&&(t.flags|=32),Sn}function fn(t,n,a){(t===et&&(Ke===2||Ke===9)||t.cancelPendingCommit!==null)&&(Ba(t,0),Bs(t,Oe,Sn,!1)),Er(t,a),((Fe&2)===0||t!==et)&&(t===et&&((Fe&2)===0&&(Qr|=a),ht===4&&Bs(t,Oe,Sn,!1)),Ii(t))}function i_(t,n,a){if((Fe&6)!==0)throw Error(r(327));var o=!a&&(n&127)===0&&(n&t.expiredLanes)===0||Gn(t,n),h=o?gb(t,n):vd(t,n,!0),d=o;do{if(h===0){La&&!o&&Bs(t,n,0,!1);break}else{if(a=t.current.alternate,d&&!mb(a)){h=vd(t,n,!1),d=!1;continue}if(h===2){if(d=n,t.errorRecoveryDisabledLanes&d)var _=0;else _=t.pendingLanes&-536870913,_=_!==0?_:_&536870912?536870912:0;if(_!==0){n=_;e:{var b=t;h=fl;var C=b.current.memoizedState.isDehydrated;if(C&&(Ba(b,_).flags|=256),_=vd(b,_,!1),_!==2){if(fd&&!C){b.errorRecoveryDisabledLanes|=d,Qr|=d,h=4;break e}d=hn,hn=h,d!==null&&(hn===null?hn=d:hn.push.apply(hn,d))}h=_}if(d=!1,h!==2)continue}}if(h===1){Ba(t,0),Bs(t,n,0,!0);break}e:{switch(o=t,d=h,d){case 0:case 1:throw Error(r(345));case 4:if((n&4194048)!==n)break;case 6:Bs(o,n,Sn,!Ps);break e;case 2:hn=null;break;case 3:case 5:break;default:throw Error(r(329))}if((n&62914560)===n&&(h=dc+300-nn(),10<h)){if(Bs(o,n,Sn,!Ps),ci(o,0,!0)!==0)break e;ns=n,o.timeoutHandle=V_(s_.bind(null,o,a,hn,pc,md,n,Sn,Qr,Ua,Ps,d,"Throttled",-0,0),h);break e}s_(o,a,hn,pc,md,n,Sn,Qr,Ua,Ps,d,null,-0,0)}}break}while(!0);Ii(t)}function s_(t,n,a,o,h,d,_,b,C,B,Y,$,q,F){if(t.timeoutHandle=-1,$=n.subtreeFlags,$&8192||($&16785408)===16785408){$={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Kn},$y(n,d,$);var he=(d&62914560)===d?dc-nn():(d&4194048)===d?e_-nn():0;if(he=Zb($,he),he!==null){ns=d,t.cancelPendingCommit=he(f_.bind(null,t,n,d,a,o,h,_,b,C,Y,$,null,q,F)),Bs(t,d,_,!B);return}}f_(t,n,d,a,o,h,_,b,C)}function mb(t){for(var n=t;;){var a=n.tag;if((a===0||a===11||a===15)&&n.flags&16384&&(a=n.updateQueue,a!==null&&(a=a.stores,a!==null)))for(var o=0;o<a.length;o++){var h=a[o],d=h.getSnapshot;h=h.value;try{if(!vn(d(),h))return!1}catch{return!1}}if(a=n.child,n.subtreeFlags&16384&&a!==null)a.return=n,n=a;else{if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return!0;n=n.return}n.sibling.return=n.return,n=n.sibling}}return!0}function Bs(t,n,a,o){n&=~dd,n&=~Qr,t.suspendedLanes|=n,t.pingedLanes&=~n,o&&(t.warmLanes|=n),o=t.expirationTimes;for(var h=n;0<h;){var d=31-gt(h),_=1<<d;o[d]=-1,h&=~_}a!==0&&Tr(t,a,n)}function gc(){return(Fe&6)===0?(ml(0),!1):!0}function _d(){if(Ne!==null){if(Ke===0)var t=Ne.return;else t=Ne,Gi=Pr=null,Vf(t),Da=null,$o=0,t=Ne;for(;t!==null;)ky(t.alternate,t),t=t.return;Ne=null}}function Ba(t,n){var a=t.timeoutHandle;a!==-1&&(t.timeoutHandle=-1,Vb(a)),a=t.cancelPendingCommit,a!==null&&(t.cancelPendingCommit=null,a()),ns=0,_d(),et=t,Ne=a=Hi(t.current,null),Oe=n,Ke=0,An=null,Ps=!1,La=Gn(t,n),fd=!1,Ua=Sn=dd=Qr=Ls=ht=0,hn=fl=null,md=!1,(n&8)!==0&&(n|=n&32);var o=t.entangledLanes;if(o!==0)for(t=t.entanglements,o&=n;0<o;){var h=31-gt(o),d=1<<h;n|=t[h],o&=~d}return ts=n,Pu(),a}function r_(t,n){Re=null,K.H=sl,n===Na||n===Gu?(n=Tg(),Ke=3):n===bf?(n=Tg(),Ke=4):Ke=n===$f?8:n!==null&&typeof n=="object"&&typeof n.then=="function"?6:1,An=n,Ne===null&&(ht=1,rc(t,Mn(n,t.current)))}function a_(){var t=Tn.current;return t===null?!0:(Oe&4194048)===Oe?Pn===null:(Oe&62914560)===Oe||(Oe&536870912)!==0?t===Pn:!1}function o_(){var t=K.H;return K.H=sl,t===null?sl:t}function l_(){var t=K.A;return K.A=fb,t}function yc(){ht=4,Ps||(Oe&4194048)!==Oe&&Tn.current!==null||(La=!0),(Ls&134217727)===0&&(Qr&134217727)===0||et===null||Bs(et,Oe,Sn,!1)}function vd(t,n,a){var o=Fe;Fe|=2;var h=o_(),d=l_();(et!==t||Oe!==n)&&(pc=null,Ba(t,n)),n=!1;var _=ht;e:do try{if(Ke!==0&&Ne!==null){var b=Ne,C=An;switch(Ke){case 8:_d(),_=6;break e;case 3:case 2:case 9:case 6:Tn.current===null&&(n=!0);var B=Ke;if(Ke=0,An=null,qa(t,b,C,B),a&&La){_=0;break e}break;default:B=Ke,Ke=0,An=null,qa(t,b,C,B)}}pb(),_=ht;break}catch(Y){r_(t,Y)}while(!0);return n&&t.shellSuspendCounter++,Gi=Pr=null,Fe=o,K.H=h,K.A=d,Ne===null&&(et=null,Oe=0,Pu()),_}function pb(){for(;Ne!==null;)u_(Ne)}function gb(t,n){var a=Fe;Fe|=2;var o=o_(),h=l_();et!==t||Oe!==n?(pc=null,mc=nn()+500,Ba(t,n)):La=Gn(t,n);e:do try{if(Ke!==0&&Ne!==null){n=Ne;var d=An;t:switch(Ke){case 1:Ke=0,An=null,qa(t,n,d,1);break;case 2:case 9:if(vg(d)){Ke=0,An=null,c_(n);break}n=function(){Ke!==2&&Ke!==9||et!==t||(Ke=7),Ii(t)},d.then(n,n);break e;case 3:Ke=7;break e;case 4:Ke=5;break e;case 7:vg(d)?(Ke=0,An=null,c_(n)):(Ke=0,An=null,qa(t,n,d,7));break;case 5:var _=null;switch(Ne.tag){case 26:_=Ne.memoizedState;case 5:case 27:var b=Ne;if(_?X_(_):b.stateNode.complete){Ke=0,An=null;var C=b.sibling;if(C!==null)Ne=C;else{var B=b.return;B!==null?(Ne=B,_c(B)):Ne=null}break t}}Ke=0,An=null,qa(t,n,d,5);break;case 6:Ke=0,An=null,qa(t,n,d,6);break;case 8:_d(),ht=6;break e;default:throw Error(r(462))}}yb();break}catch(Y){r_(t,Y)}while(!0);return Gi=Pr=null,K.H=o,K.A=h,Fe=a,Ne!==null?0:(et=null,Oe=0,Pu(),ht)}function yb(){for(;Ne!==null&&!Kh();)u_(Ne)}function u_(t){var n=My(t.alternate,t,ts);t.memoizedProps=t.pendingProps,n===null?_c(t):Ne=n}function c_(t){var n=t,a=n.alternate;switch(n.tag){case 15:case 0:n=Ry(a,n,n.pendingProps,n.type,void 0,Oe);break;case 11:n=Ry(a,n,n.pendingProps,n.type.render,n.ref,Oe);break;case 5:Vf(n);default:ky(a,n),n=Ne=lg(n,ts),n=My(a,n,ts)}t.memoizedProps=t.pendingProps,n===null?_c(t):Ne=n}function qa(t,n,a,o){Gi=Pr=null,Vf(n),Da=null,$o=0;var h=n.return;try{if(rb(t,h,n,a,Oe)){ht=1,rc(t,Mn(a,t.current)),Ne=null;return}}catch(d){if(h!==null)throw Ne=h,d;ht=1,rc(t,Mn(a,t.current)),Ne=null;return}n.flags&32768?(Pe||o===1?t=!0:La||(Oe&536870912)!==0?t=!1:(Ps=t=!0,(o===2||o===9||o===3||o===6)&&(o=Tn.current,o!==null&&o.tag===13&&(o.flags|=16384))),h_(n,t)):_c(n)}function _c(t){var n=t;do{if((n.flags&32768)!==0){h_(n,Ps);return}t=n.return;var a=lb(n.alternate,n,ts);if(a!==null){Ne=a;return}if(n=n.sibling,n!==null){Ne=n;return}Ne=n=t}while(n!==null);ht===0&&(ht=5)}function h_(t,n){do{var a=ub(t.alternate,t);if(a!==null){a.flags&=32767,Ne=a;return}if(a=t.return,a!==null&&(a.flags|=32768,a.subtreeFlags=0,a.deletions=null),!n&&(t=t.sibling,t!==null)){Ne=t;return}Ne=t=a}while(t!==null);ht=6,Ne=null}function f_(t,n,a,o,h,d,_,b,C){t.cancelPendingCommit=null;do vc();while(kt!==0);if((Fe&6)!==0)throw Error(r(327));if(n!==null){if(n===t.current)throw Error(r(177));if(d=n.lanes|n.childLanes,d|=of,Jh(t,a,d,_,b,C),t===et&&(Ne=et=null,Oe=0),za=n,zs=t,ns=a,pd=d,gd=h,t_=o,(n.subtreeFlags&10256)!==0||(n.flags&10256)!==0?(t.callbackNode=null,t.callbackPriority=0,Tb(ys,function(){return y_(),null})):(t.callbackNode=null,t.callbackPriority=0),o=(n.flags&13878)!==0,(n.subtreeFlags&13878)!==0||o){o=K.T,K.T=null,h=se.p,se.p=2,_=Fe,Fe|=4;try{cb(t,n,a)}finally{Fe=_,se.p=h,K.T=o}}kt=1,d_(),m_(),p_()}}function d_(){if(kt===1){kt=0;var t=zs,n=za,a=(n.flags&13878)!==0;if((n.subtreeFlags&13878)!==0||a){a=K.T,K.T=null;var o=se.p;se.p=2;var h=Fe;Fe|=4;try{Yy(n,t);var d=Dd,_=Wp(t.containerInfo),b=d.focusedElem,C=d.selectionRange;if(_!==b&&b&&b.ownerDocument&&Zp(b.ownerDocument.documentElement,b)){if(C!==null&&tf(b)){var B=C.start,Y=C.end;if(Y===void 0&&(Y=B),"selectionStart"in b)b.selectionStart=B,b.selectionEnd=Math.min(Y,b.value.length);else{var $=b.ownerDocument||document,q=$&&$.defaultView||window;if(q.getSelection){var F=q.getSelection(),he=b.textContent.length,ye=Math.min(C.start,he),We=C.end===void 0?ye:Math.min(C.end,he);!F.extend&&ye>We&&(_=We,We=ye,ye=_);var P=Jp(b,ye),O=Jp(b,We);if(P&&O&&(F.rangeCount!==1||F.anchorNode!==P.node||F.anchorOffset!==P.offset||F.focusNode!==O.node||F.focusOffset!==O.offset)){var z=$.createRange();z.setStart(P.node,P.offset),F.removeAllRanges(),ye>We?(F.addRange(z),F.extend(O.node,O.offset)):(z.setEnd(O.node,O.offset),F.addRange(z))}}}}for($=[],F=b;F=F.parentNode;)F.nodeType===1&&$.push({element:F,left:F.scrollLeft,top:F.scrollTop});for(typeof b.focus=="function"&&b.focus(),b=0;b<$.length;b++){var X=$[b];X.element.scrollLeft=X.left,X.element.scrollTop=X.top}}Dc=!!Nd,Dd=Nd=null}finally{Fe=h,se.p=o,K.T=a}}t.current=n,kt=2}}function m_(){if(kt===2){kt=0;var t=zs,n=za,a=(n.flags&8772)!==0;if((n.subtreeFlags&8772)!==0||a){a=K.T,K.T=null;var o=se.p;se.p=2;var h=Fe;Fe|=4;try{qy(t,n.alternate,n)}finally{Fe=h,se.p=o,K.T=a}}kt=3}}function p_(){if(kt===4||kt===3){kt=0,uu();var t=zs,n=za,a=ns,o=t_;(n.subtreeFlags&10256)!==0||(n.flags&10256)!==0?kt=5:(kt=0,za=zs=null,g_(t,t.pendingLanes));var h=t.pendingLanes;if(h===0&&(Us=null),Ui(a),n=n.stateNode,qt&&typeof qt.onCommitFiberRoot=="function")try{qt.onCommitFiberRoot(Fn,n,void 0,(n.current.flags&128)===128)}catch{}if(o!==null){n=K.T,h=se.p,se.p=2,K.T=null;try{for(var d=t.onRecoverableError,_=0;_<o.length;_++){var b=o[_];d(b.value,{componentStack:b.stack})}}finally{K.T=n,se.p=h}}(ns&3)!==0&&vc(),Ii(t),h=t.pendingLanes,(a&261930)!==0&&(h&42)!==0?t===yd?dl++:(dl=0,yd=t):dl=0,ml(0)}}function g_(t,n){(t.pooledCacheLanes&=n)===0&&(n=t.pooledCache,n!=null&&(t.pooledCache=null,Ko(n)))}function vc(){return d_(),m_(),p_(),y_()}function y_(){if(kt!==5)return!1;var t=zs,n=pd;pd=0;var a=Ui(ns),o=K.T,h=se.p;try{se.p=32>a?32:a,K.T=null,a=gd,gd=null;var d=zs,_=ns;if(kt=0,za=zs=null,ns=0,(Fe&6)!==0)throw Error(r(331));var b=Fe;if(Fe|=4,Zy(d.current),Xy(d,d.current,_,a),Fe=b,ml(0,!1),qt&&typeof qt.onPostCommitFiberRoot=="function")try{qt.onPostCommitFiberRoot(Fn,d)}catch{}return!0}finally{se.p=h,K.T=o,g_(t,n)}}function __(t,n,a){n=Mn(a,n),n=Xf(t.stateNode,n,2),t=Ms(t,n,2),t!==null&&(Er(t,2),Ii(t))}function Xe(t,n,a){if(t.tag===3)__(t,t,a);else for(;n!==null;){if(n.tag===3){__(n,t,a);break}else if(n.tag===1){var o=n.stateNode;if(typeof n.type.getDerivedStateFromError=="function"||typeof o.componentDidCatch=="function"&&(Us===null||!Us.has(o))){t=Mn(a,t),a=vy(2),o=Ms(n,a,2),o!==null&&(Ey(a,o,n,t),Er(o,2),Ii(o));break}}n=n.return}}function Ed(t,n,a){var o=t.pingCache;if(o===null){o=t.pingCache=new db;var h=new Set;o.set(n,h)}else h=o.get(n),h===void 0&&(h=new Set,o.set(n,h));h.has(a)||(fd=!0,h.add(a),t=_b.bind(null,t,n,a),n.then(t,t))}function _b(t,n,a){var o=t.pingCache;o!==null&&o.delete(n),t.pingedLanes|=t.suspendedLanes&a,t.warmLanes&=~a,et===t&&(Oe&a)===a&&(ht===4||ht===3&&(Oe&62914560)===Oe&&300>nn()-dc?(Fe&2)===0&&Ba(t,0):dd|=a,Ua===Oe&&(Ua=0)),Ii(t)}function v_(t,n){n===0&&(n=pu()),t=Vr(t,n),t!==null&&(Er(t,n),Ii(t))}function vb(t){var n=t.memoizedState,a=0;n!==null&&(a=n.retryLane),v_(t,a)}function Eb(t,n){var a=0;switch(t.tag){case 31:case 13:var o=t.stateNode,h=t.memoizedState;h!==null&&(a=h.retryLane);break;case 19:o=t.stateNode;break;case 22:o=t.stateNode._retryCache;break;default:throw Error(r(314))}o!==null&&o.delete(n),v_(t,a)}function Tb(t,n){return Vt(t,n)}var Ec=null,Ha=null,Td=!1,Tc=!1,bd=!1,qs=0;function Ii(t){t!==Ha&&t.next===null&&(Ha===null?Ec=Ha=t:Ha=Ha.next=t),Tc=!0,Td||(Td=!0,Ab())}function ml(t,n){if(!bd&&Tc){bd=!0;do for(var a=!1,o=Ec;o!==null;){if(t!==0){var h=o.pendingLanes;if(h===0)var d=0;else{var _=o.suspendedLanes,b=o.pingedLanes;d=(1<<31-gt(42|t)+1)-1,d&=h&~(_&~b),d=d&201326741?d&201326741|1:d?d|2:0}d!==0&&(a=!0,A_(o,d))}else d=Oe,d=ci(o,o===et?d:0,o.cancelPendingCommit!==null||o.timeoutHandle!==-1),(d&3)===0||Gn(o,d)||(a=!0,A_(o,d));o=o.next}while(a);bd=!1}}function bb(){E_()}function E_(){Tc=Td=!1;var t=0;qs!==0&&Mb()&&(t=qs);for(var n=nn(),a=null,o=Ec;o!==null;){var h=o.next,d=T_(o,n);d===0?(o.next=null,a===null?Ec=h:a.next=h,h===null&&(Ha=a)):(a=o,(t!==0||(d&3)!==0)&&(Tc=!0)),o=h}kt!==0&&kt!==5||ml(t),qs!==0&&(qs=0)}function T_(t,n){for(var a=t.suspendedLanes,o=t.pingedLanes,h=t.expirationTimes,d=t.pendingLanes&-62914561;0<d;){var _=31-gt(d),b=1<<_,C=h[_];C===-1?((b&a)===0||(b&o)!==0)&&(h[_]=$h(b,n)):C<=n&&(t.expiredLanes|=b),d&=~b}if(n=et,a=Oe,a=ci(t,t===n?a:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),o=t.callbackNode,a===0||t===n&&(Ke===2||Ke===9)||t.cancelPendingCommit!==null)return o!==null&&o!==null&&gs(o),t.callbackNode=null,t.callbackPriority=0;if((a&3)===0||Gn(t,a)){if(n=a&-a,n===t.callbackPriority)return n;switch(o!==null&&gs(o),Ui(a)){case 2:case 8:a=So;break;case 32:a=ys;break;case 268435456:a=cu;break;default:a=ys}return o=b_.bind(null,t),a=Vt(a,o),t.callbackPriority=n,t.callbackNode=a,n}return o!==null&&o!==null&&gs(o),t.callbackPriority=2,t.callbackNode=null,2}function b_(t,n){if(kt!==0&&kt!==5)return t.callbackNode=null,t.callbackPriority=0,null;var a=t.callbackNode;if(vc()&&t.callbackNode!==a)return null;var o=Oe;return o=ci(t,t===et?o:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),o===0?null:(i_(t,o,n),T_(t,nn()),t.callbackNode!=null&&t.callbackNode===a?b_.bind(null,t):null)}function A_(t,n){if(vc())return null;i_(t,n,!0)}function Ab(){kb(function(){(Fe&6)!==0?Vt(Ao,bb):E_()})}function Ad(){if(qs===0){var t=Ia;t===0&&(t=li,li<<=1,(li&261888)===0&&(li=256)),qs=t}return qs}function S_(t){return t==null||typeof t=="symbol"||typeof t=="boolean"?null:typeof t=="function"?t:da(""+t)}function w_(t,n){var a=n.ownerDocument.createElement("input");return a.name=n.name,a.value=n.value,t.id&&a.setAttribute("form",t.id),n.parentNode.insertBefore(a,n),t=new FormData(t),a.parentNode.removeChild(a),t}function Sb(t,n,a,o,h){if(n==="submit"&&a&&a.stateNode===h){var d=S_((h[Lt]||null).action),_=o.submitter;_&&(n=(n=_[Lt]||null)?S_(n.formAction):_.getAttribute("formAction"),n!==null&&(d=n,_=null));var b=new Ti("action","action",null,o,h);t.push({event:b,listeners:[{instance:null,listener:function(){if(o.defaultPrevented){if(qs!==0){var C=_?w_(h,_):new FormData(h);Hf(a,{pending:!0,data:C,method:h.method,action:d},null,C)}}else typeof d=="function"&&(b.preventDefault(),C=_?w_(h,_):new FormData(h),Hf(a,{pending:!0,data:C,method:h.method,action:d},d,C))},currentTarget:h}]})}}for(var Sd=0;Sd<af.length;Sd++){var wd=af[Sd],wb=wd.toLowerCase(),xb=wd[0].toUpperCase()+wd.slice(1);Wn(wb,"on"+xb)}Wn(ng,"onAnimationEnd"),Wn(ig,"onAnimationIteration"),Wn(sg,"onAnimationStart"),Wn("dblclick","onDoubleClick"),Wn("focusin","onFocus"),Wn("focusout","onBlur"),Wn(q1,"onTransitionRun"),Wn(H1,"onTransitionStart"),Wn(F1,"onTransitionCancel"),Wn(rg,"onTransitionEnd"),yi("onMouseEnter",["mouseout","mouseover"]),yi("onMouseLeave",["mouseout","mouseover"]),yi("onPointerEnter",["pointerout","pointerover"]),yi("onPointerLeave",["pointerout","pointerover"]),gi("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),gi("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),gi("onBeforeInput",["compositionend","keypress","textInput","paste"]),gi("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),gi("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),gi("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var pl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Rb=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(pl));function x_(t,n){n=(n&4)!==0;for(var a=0;a<t.length;a++){var o=t[a],h=o.event;o=o.listeners;e:{var d=void 0;if(n)for(var _=o.length-1;0<=_;_--){var b=o[_],C=b.instance,B=b.currentTarget;if(b=b.listener,C!==d&&h.isPropagationStopped())break e;d=b,h.currentTarget=B;try{d(h)}catch(Y){ju(Y)}h.currentTarget=null,d=C}else for(_=0;_<o.length;_++){if(b=o[_],C=b.instance,B=b.currentTarget,b=b.listener,C!==d&&h.isPropagationStopped())break e;d=b,h.currentTarget=B;try{d(h)}catch(Y){ju(Y)}h.currentTarget=null,d=C}}}}function De(t,n){var a=n[la];a===void 0&&(a=n[la]=new Set);var o=t+"__bubble";a.has(o)||(R_(n,t,2,!1),a.add(o))}function xd(t,n,a){var o=0;n&&(o|=4),R_(a,t,o,n)}var bc="_reactListening"+Math.random().toString(36).slice(2);function Rd(t){if(!t[bc]){t[bc]=!0,Ro.forEach(function(a){a!=="selectionchange"&&(Rb.has(a)||xd(a,!1,t),xd(a,!0,t))});var n=t.nodeType===9?t:t.ownerDocument;n===null||n[bc]||(n[bc]=!0,xd("selectionchange",!1,n))}}function R_(t,n,a,o){switch(n0(n)){case 2:var h=tA;break;case 8:h=nA;break;default:h=qd}a=h.bind(null,n,a,t),h=void 0,!xr||n!=="touchstart"&&n!=="touchmove"&&n!=="wheel"||(h=!0),o?h!==void 0?t.addEventListener(n,a,{capture:!0,passive:h}):t.addEventListener(n,a,!0):h!==void 0?t.addEventListener(n,a,{passive:h}):t.addEventListener(n,a,!1)}function Id(t,n,a,o,h){var d=o;if((n&1)===0&&(n&2)===0&&o!==null)e:for(;;){if(o===null)return;var _=o.tag;if(_===3||_===4){var b=o.stateNode.containerInfo;if(b===h)break;if(_===4)for(_=o.return;_!==null;){var C=_.tag;if((C===3||C===4)&&_.stateNode.containerInfo===h)return;_=_.return}for(;b!==null;){if(_=mi(b),_===null)return;if(C=_.tag,C===5||C===6||C===26||C===27){o=d=_;continue e}b=b.parentNode}}o=o.return}As(function(){var B=d,Y=Cn(a),$=[];e:{var q=ag.get(t);if(q!==void 0){var F=Ti,he=t;switch(t){case"keypress":if(Ir(a)===0)break e;case"keydown":case"keyup":F=Mu;break;case"focusin":he="focus",F=Nr;break;case"focusout":he="blur",F=Nr;break;case"beforeblur":case"afterblur":F=Nr;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":F=zo;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":F=Su;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":F=m;break;case ng:case ig:case sg:F=xu;break;case rg:F=S;break;case"scroll":case"scrollend":F=Uo;break;case"wheel":F=H;break;case"copy":case"cut":case"paste":F=Ru;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":F=qi;break;case"toggle":case"beforetoggle":F=xe}var ye=(n&4)!==0,We=!ye&&(t==="scroll"||t==="scrollend"),P=ye?q!==null?q+"Capture":null:q;ye=[];for(var O=B,z;O!==null;){var X=O;if(z=X.stateNode,X=X.tag,X!==5&&X!==26&&X!==27||z===null||P===null||(X=Xn(O,P),X!=null&&ye.push(gl(O,X,z))),We)break;O=O.return}0<ye.length&&(q=new F(q,he,null,a,Y),$.push({event:q,listeners:ye}))}}if((n&7)===0){e:{if(q=t==="mouseover"||t==="pointerover",F=t==="mouseout"||t==="pointerout",q&&a!==jo&&(he=a.relatedTarget||a.fromElement)&&(mi(he)||he[fi]))break e;if((F||q)&&(q=Y.window===Y?Y:(q=Y.ownerDocument)?q.defaultView||q.parentWindow:window,F?(he=a.relatedTarget||a.toElement,F=B,he=he?mi(he):null,he!==null&&(We=u(he),ye=he.tag,he!==We||ye!==5&&ye!==27&&ye!==6)&&(he=null)):(F=null,he=B),F!==he)){if(ye=zo,X="onMouseLeave",P="onMouseEnter",O="mouse",(t==="pointerout"||t==="pointerover")&&(ye=qi,X="onPointerLeave",P="onPointerEnter",O="pointer"),We=F==null?q:yn(F),z=he==null?q:yn(he),q=new ye(X,O+"leave",F,a,Y),q.target=We,q.relatedTarget=z,X=null,mi(Y)===B&&(ye=new ye(P,O+"enter",he,a,Y),ye.target=z,ye.relatedTarget=We,X=ye),We=X,F&&he)t:{for(ye=Ib,P=F,O=he,z=0,X=P;X;X=ye(X))z++;X=0;for(var me=O;me;me=ye(me))X++;for(;0<z-X;)P=ye(P),z--;for(;0<X-z;)O=ye(O),X--;for(;z--;){if(P===O||O!==null&&P===O.alternate){ye=P;break t}P=ye(P),O=ye(O)}ye=null}else ye=null;F!==null&&I_($,q,F,ye,!1),he!==null&&We!==null&&I_($,We,he,ye,!0)}}e:{if(q=B?yn(B):window,F=q.nodeName&&q.nodeName.toLowerCase(),F==="select"||F==="input"&&q.type==="file")var Be=Gp;else if(Hp(q))if(Qp)Be=U1;else{Be=P1;var de=j1}else F=q.nodeName,!F||F.toLowerCase()!=="input"||q.type!=="checkbox"&&q.type!=="radio"?B&&fa(B.elementType)&&(Be=Gp):Be=L1;if(Be&&(Be=Be(t,B))){Fp($,Be,a,Y);break e}de&&de(t,q,B),t==="focusout"&&B&&q.type==="number"&&B.memoizedProps.value!=null&&Mo(q,"number",q.value)}switch(de=B?yn(B):window,t){case"focusin":(Hp(de)||de.contentEditable==="true")&&(Ea=de,nf=B,Go=null);break;case"focusout":Go=nf=Ea=null;break;case"mousedown":sf=!0;break;case"contextmenu":case"mouseup":case"dragend":sf=!1,eg($,a,Y);break;case"selectionchange":if(B1)break;case"keydown":case"keyup":eg($,a,Y)}var Ce;if(He)e:{switch(t){case"compositionstart":var Me="onCompositionStart";break e;case"compositionend":Me="onCompositionEnd";break e;case"compositionupdate":Me="onCompositionUpdate";break e}Me=void 0}else va?Dr(t,a)&&(Me="onCompositionEnd"):t==="keydown"&&a.keyCode===229&&(Me="onCompositionStart");Me&&(Si&&a.locale!=="ko"&&(va||Me!=="onCompositionStart"?Me==="onCompositionEnd"&&va&&(Ce=Lo()):(Ei=Y,Po="value"in Ei?Ei.value:Ei.textContent,va=!0)),de=Ac(B,Me),0<de.length&&(Me=new Ai(Me,t,null,a,Y),$.push({event:Me,listeners:de}),Ce?Me.data=Ce:(Ce=_a(a),Ce!==null&&(Me.data=Ce)))),(Ce=Dn?O1(t,a):M1(t,a))&&(Me=Ac(B,"onBeforeInput"),0<Me.length&&(de=new Ai("onBeforeInput","beforeinput",null,a,Y),$.push({event:de,listeners:Me}),de.data=Ce)),Sb($,t,B,a,Y)}x_($,n)})}function gl(t,n,a){return{instance:t,listener:n,currentTarget:a}}function Ac(t,n){for(var a=n+"Capture",o=[];t!==null;){var h=t,d=h.stateNode;if(h=h.tag,h!==5&&h!==26&&h!==27||d===null||(h=Xn(t,a),h!=null&&o.unshift(gl(t,h,d)),h=Xn(t,n),h!=null&&o.push(gl(t,h,d))),t.tag===3)return o;t=t.return}return[]}function Ib(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5&&t.tag!==27);return t||null}function I_(t,n,a,o,h){for(var d=n._reactName,_=[];a!==null&&a!==o;){var b=a,C=b.alternate,B=b.stateNode;if(b=b.tag,C!==null&&C===o)break;b!==5&&b!==26&&b!==27||B===null||(C=B,h?(B=Xn(a,d),B!=null&&_.unshift(gl(a,B,C))):h||(B=Xn(a,d),B!=null&&_.push(gl(a,B,C)))),a=a.return}_.length!==0&&t.push({event:n,listeners:_})}var Cb=/\r\n?/g,Nb=/\u0000|\uFFFD/g;function C_(t){return(typeof t=="string"?t:""+t).replace(Cb,`
`).replace(Nb,"")}function N_(t,n){return n=C_(n),C_(t)===n}function Ze(t,n,a,o,h,d){switch(a){case"children":typeof o=="string"?n==="body"||n==="textarea"&&o===""||on(t,o):(typeof o=="number"||typeof o=="bigint")&&n!=="body"&&on(t,""+o);break;case"className":_n(t,"class",o);break;case"tabIndex":_n(t,"tabindex",o);break;case"dir":case"role":case"viewBox":case"width":case"height":_n(t,a,o);break;case"style":ko(t,o,d);break;case"data":if(n!=="object"){_n(t,"data",o);break}case"src":case"href":if(o===""&&(n!=="a"||a!=="href")){t.removeAttribute(a);break}if(o==null||typeof o=="function"||typeof o=="symbol"||typeof o=="boolean"){t.removeAttribute(a);break}o=da(""+o),t.setAttribute(a,o);break;case"action":case"formAction":if(typeof o=="function"){t.setAttribute(a,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof d=="function"&&(a==="formAction"?(n!=="input"&&Ze(t,n,"name",h.name,h,null),Ze(t,n,"formEncType",h.formEncType,h,null),Ze(t,n,"formMethod",h.formMethod,h,null),Ze(t,n,"formTarget",h.formTarget,h,null)):(Ze(t,n,"encType",h.encType,h,null),Ze(t,n,"method",h.method,h,null),Ze(t,n,"target",h.target,h,null)));if(o==null||typeof o=="symbol"||typeof o=="boolean"){t.removeAttribute(a);break}o=da(""+o),t.setAttribute(a,o);break;case"onClick":o!=null&&(t.onclick=Kn);break;case"onScroll":o!=null&&De("scroll",t);break;case"onScrollEnd":o!=null&&De("scrollend",t);break;case"dangerouslySetInnerHTML":if(o!=null){if(typeof o!="object"||!("__html"in o))throw Error(r(61));if(a=o.__html,a!=null){if(h.children!=null)throw Error(r(60));t.innerHTML=a}}break;case"multiple":t.multiple=o&&typeof o!="function"&&typeof o!="symbol";break;case"muted":t.muted=o&&typeof o!="function"&&typeof o!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(o==null||typeof o=="function"||typeof o=="boolean"||typeof o=="symbol"){t.removeAttribute("xlink:href");break}a=da(""+o),t.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",a);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":o!=null&&typeof o!="function"&&typeof o!="symbol"?t.setAttribute(a,""+o):t.removeAttribute(a);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":o&&typeof o!="function"&&typeof o!="symbol"?t.setAttribute(a,""):t.removeAttribute(a);break;case"capture":case"download":o===!0?t.setAttribute(a,""):o!==!1&&o!=null&&typeof o!="function"&&typeof o!="symbol"?t.setAttribute(a,o):t.removeAttribute(a);break;case"cols":case"rows":case"size":case"span":o!=null&&typeof o!="function"&&typeof o!="symbol"&&!isNaN(o)&&1<=o?t.setAttribute(a,o):t.removeAttribute(a);break;case"rowSpan":case"start":o==null||typeof o=="function"||typeof o=="symbol"||isNaN(o)?t.removeAttribute(a):t.setAttribute(a,o);break;case"popover":De("beforetoggle",t),De("toggle",t),ca(t,"popover",o);break;case"xlinkActuate":wt(t,"http://www.w3.org/1999/xlink","xlink:actuate",o);break;case"xlinkArcrole":wt(t,"http://www.w3.org/1999/xlink","xlink:arcrole",o);break;case"xlinkRole":wt(t,"http://www.w3.org/1999/xlink","xlink:role",o);break;case"xlinkShow":wt(t,"http://www.w3.org/1999/xlink","xlink:show",o);break;case"xlinkTitle":wt(t,"http://www.w3.org/1999/xlink","xlink:title",o);break;case"xlinkType":wt(t,"http://www.w3.org/1999/xlink","xlink:type",o);break;case"xmlBase":wt(t,"http://www.w3.org/XML/1998/namespace","xml:base",o);break;case"xmlLang":wt(t,"http://www.w3.org/XML/1998/namespace","xml:lang",o);break;case"xmlSpace":wt(t,"http://www.w3.org/XML/1998/namespace","xml:space",o);break;case"is":ca(t,"is",o);break;case"innerText":case"textContent":break;default:(!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(a=Au.get(a)||a,ca(t,a,o))}}function Cd(t,n,a,o,h,d){switch(a){case"style":ko(t,o,d);break;case"dangerouslySetInnerHTML":if(o!=null){if(typeof o!="object"||!("__html"in o))throw Error(r(61));if(a=o.__html,a!=null){if(h.children!=null)throw Error(r(60));t.innerHTML=a}}break;case"children":typeof o=="string"?on(t,o):(typeof o=="number"||typeof o=="bigint")&&on(t,""+o);break;case"onScroll":o!=null&&De("scroll",t);break;case"onScrollEnd":o!=null&&De("scrollend",t);break;case"onClick":o!=null&&(t.onclick=Kn);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Io.hasOwnProperty(a))e:{if(a[0]==="o"&&a[1]==="n"&&(h=a.endsWith("Capture"),n=a.slice(2,h?a.length-7:void 0),d=t[Lt]||null,d=d!=null?d[a]:null,typeof d=="function"&&t.removeEventListener(n,d,h),typeof o=="function")){typeof d!="function"&&d!==null&&(a in t?t[a]=null:t.hasAttribute(a)&&t.removeAttribute(a)),t.addEventListener(n,o,h);break e}a in t?t[a]=o:o===!0?t.setAttribute(a,""):ca(t,a,o)}}}function Yt(t,n,a){switch(n){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":De("error",t),De("load",t);var o=!1,h=!1,d;for(d in a)if(a.hasOwnProperty(d)){var _=a[d];if(_!=null)switch(d){case"src":o=!0;break;case"srcSet":h=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,n));default:Ze(t,n,d,_,a,null)}}h&&Ze(t,n,"srcSet",a.srcSet,a,null),o&&Ze(t,n,"src",a.src,a,null);return;case"input":De("invalid",t);var b=d=_=h=null,C=null,B=null;for(o in a)if(a.hasOwnProperty(o)){var Y=a[o];if(Y!=null)switch(o){case"name":h=Y;break;case"type":_=Y;break;case"checked":C=Y;break;case"defaultChecked":B=Y;break;case"value":d=Y;break;case"defaultValue":b=Y;break;case"children":case"dangerouslySetInnerHTML":if(Y!=null)throw Error(r(137,n));break;default:Ze(t,n,o,Y,a,null)}}Eu(t,d,b,C,B,_,h,!1);return;case"select":De("invalid",t),o=_=d=null;for(h in a)if(a.hasOwnProperty(h)&&(b=a[h],b!=null))switch(h){case"value":d=b;break;case"defaultValue":_=b;break;case"multiple":o=b;default:Ze(t,n,h,b,a,null)}n=d,a=_,t.multiple=!!o,n!=null?vs(t,!!o,n,!1):a!=null&&vs(t,!!o,a,!0);return;case"textarea":De("invalid",t),d=h=o=null;for(_ in a)if(a.hasOwnProperty(_)&&(b=a[_],b!=null))switch(_){case"value":o=b;break;case"defaultValue":h=b;break;case"children":d=b;break;case"dangerouslySetInnerHTML":if(b!=null)throw Error(r(91));break;default:Ze(t,n,_,b,a,null)}Es(t,o,h,d);return;case"option":for(C in a)if(a.hasOwnProperty(C)&&(o=a[C],o!=null))switch(C){case"selected":t.selected=o&&typeof o!="function"&&typeof o!="symbol";break;default:Ze(t,n,C,o,a,null)}return;case"dialog":De("beforetoggle",t),De("toggle",t),De("cancel",t),De("close",t);break;case"iframe":case"object":De("load",t);break;case"video":case"audio":for(o=0;o<pl.length;o++)De(pl[o],t);break;case"image":De("error",t),De("load",t);break;case"details":De("toggle",t);break;case"embed":case"source":case"link":De("error",t),De("load",t);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(B in a)if(a.hasOwnProperty(B)&&(o=a[B],o!=null))switch(B){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,n));default:Ze(t,n,B,o,a,null)}return;default:if(fa(n)){for(Y in a)a.hasOwnProperty(Y)&&(o=a[Y],o!==void 0&&Cd(t,n,Y,o,a,void 0));return}}for(b in a)a.hasOwnProperty(b)&&(o=a[b],o!=null&&Ze(t,n,b,o,a,null))}function Db(t,n,a,o){switch(n){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var h=null,d=null,_=null,b=null,C=null,B=null,Y=null;for(F in a){var $=a[F];if(a.hasOwnProperty(F)&&$!=null)switch(F){case"checked":break;case"value":break;case"defaultValue":C=$;default:o.hasOwnProperty(F)||Ze(t,n,F,null,o,$)}}for(var q in o){var F=o[q];if($=a[q],o.hasOwnProperty(q)&&(F!=null||$!=null))switch(q){case"type":d=F;break;case"name":h=F;break;case"checked":B=F;break;case"defaultChecked":Y=F;break;case"value":_=F;break;case"defaultValue":b=F;break;case"children":case"dangerouslySetInnerHTML":if(F!=null)throw Error(r(137,n));break;default:F!==$&&Ze(t,n,q,F,o,$)}}ha(t,_,b,C,B,Y,d,h);return;case"select":F=_=b=q=null;for(d in a)if(C=a[d],a.hasOwnProperty(d)&&C!=null)switch(d){case"value":break;case"multiple":F=C;default:o.hasOwnProperty(d)||Ze(t,n,d,null,o,C)}for(h in o)if(d=o[h],C=a[h],o.hasOwnProperty(h)&&(d!=null||C!=null))switch(h){case"value":q=d;break;case"defaultValue":b=d;break;case"multiple":_=d;default:d!==C&&Ze(t,n,h,d,o,C)}n=b,a=_,o=F,q!=null?vs(t,!!a,q,!1):!!o!=!!a&&(n!=null?vs(t,!!a,n,!0):vs(t,!!a,a?[]:"",!1));return;case"textarea":F=q=null;for(b in a)if(h=a[b],a.hasOwnProperty(b)&&h!=null&&!o.hasOwnProperty(b))switch(b){case"value":break;case"children":break;default:Ze(t,n,b,null,o,h)}for(_ in o)if(h=o[_],d=a[_],o.hasOwnProperty(_)&&(h!=null||d!=null))switch(_){case"value":q=h;break;case"defaultValue":F=h;break;case"children":break;case"dangerouslySetInnerHTML":if(h!=null)throw Error(r(91));break;default:h!==d&&Ze(t,n,_,h,o,d)}Tu(t,q,F);return;case"option":for(var he in a)if(q=a[he],a.hasOwnProperty(he)&&q!=null&&!o.hasOwnProperty(he))switch(he){case"selected":t.selected=!1;break;default:Ze(t,n,he,null,o,q)}for(C in o)if(q=o[C],F=a[C],o.hasOwnProperty(C)&&q!==F&&(q!=null||F!=null))switch(C){case"selected":t.selected=q&&typeof q!="function"&&typeof q!="symbol";break;default:Ze(t,n,C,q,o,F)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var ye in a)q=a[ye],a.hasOwnProperty(ye)&&q!=null&&!o.hasOwnProperty(ye)&&Ze(t,n,ye,null,o,q);for(B in o)if(q=o[B],F=a[B],o.hasOwnProperty(B)&&q!==F&&(q!=null||F!=null))switch(B){case"children":case"dangerouslySetInnerHTML":if(q!=null)throw Error(r(137,n));break;default:Ze(t,n,B,q,o,F)}return;default:if(fa(n)){for(var We in a)q=a[We],a.hasOwnProperty(We)&&q!==void 0&&!o.hasOwnProperty(We)&&Cd(t,n,We,void 0,o,q);for(Y in o)q=o[Y],F=a[Y],!o.hasOwnProperty(Y)||q===F||q===void 0&&F===void 0||Cd(t,n,Y,q,o,F);return}}for(var P in a)q=a[P],a.hasOwnProperty(P)&&q!=null&&!o.hasOwnProperty(P)&&Ze(t,n,P,null,o,q);for($ in o)q=o[$],F=a[$],!o.hasOwnProperty($)||q===F||q==null&&F==null||Ze(t,n,$,q,o,F)}function D_(t){switch(t){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function Ob(){if(typeof performance.getEntriesByType=="function"){for(var t=0,n=0,a=performance.getEntriesByType("resource"),o=0;o<a.length;o++){var h=a[o],d=h.transferSize,_=h.initiatorType,b=h.duration;if(d&&b&&D_(_)){for(_=0,b=h.responseEnd,o+=1;o<a.length;o++){var C=a[o],B=C.startTime;if(B>b)break;var Y=C.transferSize,$=C.initiatorType;Y&&D_($)&&(C=C.responseEnd,_+=Y*(C<b?1:(b-B)/(C-B)))}if(--o,n+=8*(d+_)/(h.duration/1e3),t++,10<t)break}}if(0<t)return n/t/1e6}return navigator.connection&&(t=navigator.connection.downlink,typeof t=="number")?t:5}var Nd=null,Dd=null;function Sc(t){return t.nodeType===9?t:t.ownerDocument}function O_(t){switch(t){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function M_(t,n){if(t===0)switch(n){case"svg":return 1;case"math":return 2;default:return 0}return t===1&&n==="foreignObject"?0:t}function Od(t,n){return t==="textarea"||t==="noscript"||typeof n.children=="string"||typeof n.children=="number"||typeof n.children=="bigint"||typeof n.dangerouslySetInnerHTML=="object"&&n.dangerouslySetInnerHTML!==null&&n.dangerouslySetInnerHTML.__html!=null}var Md=null;function Mb(){var t=window.event;return t&&t.type==="popstate"?t===Md?!1:(Md=t,!0):(Md=null,!1)}var V_=typeof setTimeout=="function"?setTimeout:void 0,Vb=typeof clearTimeout=="function"?clearTimeout:void 0,k_=typeof Promise=="function"?Promise:void 0,kb=typeof queueMicrotask=="function"?queueMicrotask:typeof k_<"u"?function(t){return k_.resolve(null).then(t).catch(jb)}:V_;function jb(t){setTimeout(function(){throw t})}function Hs(t){return t==="head"}function j_(t,n){var a=n,o=0;do{var h=a.nextSibling;if(t.removeChild(a),h&&h.nodeType===8)if(a=h.data,a==="/$"||a==="/&"){if(o===0){t.removeChild(h),Ya(n);return}o--}else if(a==="$"||a==="$?"||a==="$~"||a==="$!"||a==="&")o++;else if(a==="html")yl(t.ownerDocument.documentElement);else if(a==="head"){a=t.ownerDocument.head,yl(a);for(var d=a.firstChild;d;){var _=d.nextSibling,b=d.nodeName;d[di]||b==="SCRIPT"||b==="STYLE"||b==="LINK"&&d.rel.toLowerCase()==="stylesheet"||a.removeChild(d),d=_}}else a==="body"&&yl(t.ownerDocument.body);a=h}while(a);Ya(n)}function P_(t,n){var a=t;t=0;do{var o=a.nextSibling;if(a.nodeType===1?n?(a._stashedDisplay=a.style.display,a.style.display="none"):(a.style.display=a._stashedDisplay||"",a.getAttribute("style")===""&&a.removeAttribute("style")):a.nodeType===3&&(n?(a._stashedText=a.nodeValue,a.nodeValue=""):a.nodeValue=a._stashedText||""),o&&o.nodeType===8)if(a=o.data,a==="/$"){if(t===0)break;t--}else a!=="$"&&a!=="$?"&&a!=="$~"&&a!=="$!"||t++;a=o}while(a)}function Vd(t){var n=t.firstChild;for(n&&n.nodeType===10&&(n=n.nextSibling);n;){var a=n;switch(n=n.nextSibling,a.nodeName){case"HTML":case"HEAD":case"BODY":Vd(a),ua(a);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(a.rel.toLowerCase()==="stylesheet")continue}t.removeChild(a)}}function Pb(t,n,a,o){for(;t.nodeType===1;){var h=a;if(t.nodeName.toLowerCase()!==n.toLowerCase()){if(!o&&(t.nodeName!=="INPUT"||t.type!=="hidden"))break}else if(o){if(!t[di])switch(n){case"meta":if(!t.hasAttribute("itemprop"))break;return t;case"link":if(d=t.getAttribute("rel"),d==="stylesheet"&&t.hasAttribute("data-precedence"))break;if(d!==h.rel||t.getAttribute("href")!==(h.href==null||h.href===""?null:h.href)||t.getAttribute("crossorigin")!==(h.crossOrigin==null?null:h.crossOrigin)||t.getAttribute("title")!==(h.title==null?null:h.title))break;return t;case"style":if(t.hasAttribute("data-precedence"))break;return t;case"script":if(d=t.getAttribute("src"),(d!==(h.src==null?null:h.src)||t.getAttribute("type")!==(h.type==null?null:h.type)||t.getAttribute("crossorigin")!==(h.crossOrigin==null?null:h.crossOrigin))&&d&&t.hasAttribute("async")&&!t.hasAttribute("itemprop"))break;return t;default:return t}}else if(n==="input"&&t.type==="hidden"){var d=h.name==null?null:""+h.name;if(h.type==="hidden"&&t.getAttribute("name")===d)return t}else return t;if(t=Ln(t.nextSibling),t===null)break}return null}function Lb(t,n,a){if(n==="")return null;for(;t.nodeType!==3;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!a||(t=Ln(t.nextSibling),t===null))return null;return t}function L_(t,n){for(;t.nodeType!==8;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!n||(t=Ln(t.nextSibling),t===null))return null;return t}function kd(t){return t.data==="$?"||t.data==="$~"}function jd(t){return t.data==="$!"||t.data==="$?"&&t.ownerDocument.readyState!=="loading"}function Ub(t,n){var a=t.ownerDocument;if(t.data==="$~")t._reactRetry=n;else if(t.data!=="$?"||a.readyState!=="loading")n();else{var o=function(){n(),a.removeEventListener("DOMContentLoaded",o)};a.addEventListener("DOMContentLoaded",o),t._reactRetry=o}}function Ln(t){for(;t!=null;t=t.nextSibling){var n=t.nodeType;if(n===1||n===3)break;if(n===8){if(n=t.data,n==="$"||n==="$!"||n==="$?"||n==="$~"||n==="&"||n==="F!"||n==="F")break;if(n==="/$"||n==="/&")return null}}return t}var Pd=null;function U_(t){t=t.nextSibling;for(var n=0;t;){if(t.nodeType===8){var a=t.data;if(a==="/$"||a==="/&"){if(n===0)return Ln(t.nextSibling);n--}else a!=="$"&&a!=="$!"&&a!=="$?"&&a!=="$~"&&a!=="&"||n++}t=t.nextSibling}return null}function z_(t){t=t.previousSibling;for(var n=0;t;){if(t.nodeType===8){var a=t.data;if(a==="$"||a==="$!"||a==="$?"||a==="$~"||a==="&"){if(n===0)return t;n--}else a!=="/$"&&a!=="/&"||n++}t=t.previousSibling}return null}function B_(t,n,a){switch(n=Sc(a),t){case"html":if(t=n.documentElement,!t)throw Error(r(452));return t;case"head":if(t=n.head,!t)throw Error(r(453));return t;case"body":if(t=n.body,!t)throw Error(r(454));return t;default:throw Error(r(451))}}function yl(t){for(var n=t.attributes;n.length;)t.removeAttributeNode(n[0]);ua(t)}var Un=new Map,q_=new Set;function wc(t){return typeof t.getRootNode=="function"?t.getRootNode():t.nodeType===9?t:t.ownerDocument}var is=se.d;se.d={f:zb,r:Bb,D:qb,C:Hb,L:Fb,m:Gb,X:Yb,S:Qb,M:Kb};function zb(){var t=is.f(),n=gc();return t||n}function Bb(t){var n=In(t);n!==null&&n.tag===5&&n.type==="form"?ry(n):is.r(t)}var Fa=typeof document>"u"?null:document;function H_(t,n,a){var o=Fa;if(o&&typeof n=="string"&&n){var h=an(n);h='link[rel="'+t+'"][href="'+h+'"]',typeof a=="string"&&(h+='[crossorigin="'+a+'"]'),q_.has(h)||(q_.add(h),t={rel:t,crossOrigin:a,href:n},o.querySelector(h)===null&&(n=o.createElement("link"),Yt(n,"link",t),St(n),o.head.appendChild(n)))}}function qb(t){is.D(t),H_("dns-prefetch",t,null)}function Hb(t,n){is.C(t,n),H_("preconnect",t,n)}function Fb(t,n,a){is.L(t,n,a);var o=Fa;if(o&&t&&n){var h='link[rel="preload"][as="'+an(n)+'"]';n==="image"&&a&&a.imageSrcSet?(h+='[imagesrcset="'+an(a.imageSrcSet)+'"]',typeof a.imageSizes=="string"&&(h+='[imagesizes="'+an(a.imageSizes)+'"]')):h+='[href="'+an(t)+'"]';var d=h;switch(n){case"style":d=Ga(t);break;case"script":d=Qa(t)}Un.has(d)||(t=A({rel:"preload",href:n==="image"&&a&&a.imageSrcSet?void 0:t,as:n},a),Un.set(d,t),o.querySelector(h)!==null||n==="style"&&o.querySelector(_l(d))||n==="script"&&o.querySelector(vl(d))||(n=o.createElement("link"),Yt(n,"link",t),St(n),o.head.appendChild(n)))}}function Gb(t,n){is.m(t,n);var a=Fa;if(a&&t){var o=n&&typeof n.as=="string"?n.as:"script",h='link[rel="modulepreload"][as="'+an(o)+'"][href="'+an(t)+'"]',d=h;switch(o){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":d=Qa(t)}if(!Un.has(d)&&(t=A({rel:"modulepreload",href:t},n),Un.set(d,t),a.querySelector(h)===null)){switch(o){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(a.querySelector(vl(d)))return}o=a.createElement("link"),Yt(o,"link",t),St(o),a.head.appendChild(o)}}}function Qb(t,n,a){is.S(t,n,a);var o=Fa;if(o&&t){var h=pi(o).hoistableStyles,d=Ga(t);n=n||"default";var _=h.get(d);if(!_){var b={loading:0,preload:null};if(_=o.querySelector(_l(d)))b.loading=5;else{t=A({rel:"stylesheet",href:t,"data-precedence":n},a),(a=Un.get(d))&&Ld(t,a);var C=_=o.createElement("link");St(C),Yt(C,"link",t),C._p=new Promise(function(B,Y){C.onload=B,C.onerror=Y}),C.addEventListener("load",function(){b.loading|=1}),C.addEventListener("error",function(){b.loading|=2}),b.loading|=4,xc(_,n,o)}_={type:"stylesheet",instance:_,count:1,state:b},h.set(d,_)}}}function Yb(t,n){is.X(t,n);var a=Fa;if(a&&t){var o=pi(a).hoistableScripts,h=Qa(t),d=o.get(h);d||(d=a.querySelector(vl(h)),d||(t=A({src:t,async:!0},n),(n=Un.get(h))&&Ud(t,n),d=a.createElement("script"),St(d),Yt(d,"link",t),a.head.appendChild(d)),d={type:"script",instance:d,count:1,state:null},o.set(h,d))}}function Kb(t,n){is.M(t,n);var a=Fa;if(a&&t){var o=pi(a).hoistableScripts,h=Qa(t),d=o.get(h);d||(d=a.querySelector(vl(h)),d||(t=A({src:t,async:!0,type:"module"},n),(n=Un.get(h))&&Ud(t,n),d=a.createElement("script"),St(d),Yt(d,"link",t),a.head.appendChild(d)),d={type:"script",instance:d,count:1,state:null},o.set(h,d))}}function F_(t,n,a,o){var h=(h=Ie.current)?wc(h):null;if(!h)throw Error(r(446));switch(t){case"meta":case"title":return null;case"style":return typeof a.precedence=="string"&&typeof a.href=="string"?(n=Ga(a.href),a=pi(h).hoistableStyles,o=a.get(n),o||(o={type:"style",instance:null,count:0,state:null},a.set(n,o)),o):{type:"void",instance:null,count:0,state:null};case"link":if(a.rel==="stylesheet"&&typeof a.href=="string"&&typeof a.precedence=="string"){t=Ga(a.href);var d=pi(h).hoistableStyles,_=d.get(t);if(_||(h=h.ownerDocument||h,_={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},d.set(t,_),(d=h.querySelector(_l(t)))&&!d._p&&(_.instance=d,_.state.loading=5),Un.has(t)||(a={rel:"preload",as:"style",href:a.href,crossOrigin:a.crossOrigin,integrity:a.integrity,media:a.media,hrefLang:a.hrefLang,referrerPolicy:a.referrerPolicy},Un.set(t,a),d||Xb(h,t,a,_.state))),n&&o===null)throw Error(r(528,""));return _}if(n&&o!==null)throw Error(r(529,""));return null;case"script":return n=a.async,a=a.src,typeof a=="string"&&n&&typeof n!="function"&&typeof n!="symbol"?(n=Qa(a),a=pi(h).hoistableScripts,o=a.get(n),o||(o={type:"script",instance:null,count:0,state:null},a.set(n,o)),o):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,t))}}function Ga(t){return'href="'+an(t)+'"'}function _l(t){return'link[rel="stylesheet"]['+t+"]"}function G_(t){return A({},t,{"data-precedence":t.precedence,precedence:null})}function Xb(t,n,a,o){t.querySelector('link[rel="preload"][as="style"]['+n+"]")?o.loading=1:(n=t.createElement("link"),o.preload=n,n.addEventListener("load",function(){return o.loading|=1}),n.addEventListener("error",function(){return o.loading|=2}),Yt(n,"link",a),St(n),t.head.appendChild(n))}function Qa(t){return'[src="'+an(t)+'"]'}function vl(t){return"script[async]"+t}function Q_(t,n,a){if(n.count++,n.instance===null)switch(n.type){case"style":var o=t.querySelector('style[data-href~="'+an(a.href)+'"]');if(o)return n.instance=o,St(o),o;var h=A({},a,{"data-href":a.href,"data-precedence":a.precedence,href:null,precedence:null});return o=(t.ownerDocument||t).createElement("style"),St(o),Yt(o,"style",h),xc(o,a.precedence,t),n.instance=o;case"stylesheet":h=Ga(a.href);var d=t.querySelector(_l(h));if(d)return n.state.loading|=4,n.instance=d,St(d),d;o=G_(a),(h=Un.get(h))&&Ld(o,h),d=(t.ownerDocument||t).createElement("link"),St(d);var _=d;return _._p=new Promise(function(b,C){_.onload=b,_.onerror=C}),Yt(d,"link",o),n.state.loading|=4,xc(d,a.precedence,t),n.instance=d;case"script":return d=Qa(a.src),(h=t.querySelector(vl(d)))?(n.instance=h,St(h),h):(o=a,(h=Un.get(d))&&(o=A({},a),Ud(o,h)),t=t.ownerDocument||t,h=t.createElement("script"),St(h),Yt(h,"link",o),t.head.appendChild(h),n.instance=h);case"void":return null;default:throw Error(r(443,n.type))}else n.type==="stylesheet"&&(n.state.loading&4)===0&&(o=n.instance,n.state.loading|=4,xc(o,a.precedence,t));return n.instance}function xc(t,n,a){for(var o=a.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),h=o.length?o[o.length-1]:null,d=h,_=0;_<o.length;_++){var b=o[_];if(b.dataset.precedence===n)d=b;else if(d!==h)break}d?d.parentNode.insertBefore(t,d.nextSibling):(n=a.nodeType===9?a.head:a,n.insertBefore(t,n.firstChild))}function Ld(t,n){t.crossOrigin==null&&(t.crossOrigin=n.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=n.referrerPolicy),t.title==null&&(t.title=n.title)}function Ud(t,n){t.crossOrigin==null&&(t.crossOrigin=n.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=n.referrerPolicy),t.integrity==null&&(t.integrity=n.integrity)}var Rc=null;function Y_(t,n,a){if(Rc===null){var o=new Map,h=Rc=new Map;h.set(a,o)}else h=Rc,o=h.get(a),o||(o=new Map,h.set(a,o));if(o.has(t))return o;for(o.set(t,null),a=a.getElementsByTagName(t),h=0;h<a.length;h++){var d=a[h];if(!(d[di]||d[At]||t==="link"&&d.getAttribute("rel")==="stylesheet")&&d.namespaceURI!=="http://www.w3.org/2000/svg"){var _=d.getAttribute(n)||"";_=t+_;var b=o.get(_);b?b.push(d):o.set(_,[d])}}return o}function K_(t,n,a){t=t.ownerDocument||t,t.head.insertBefore(a,n==="title"?t.querySelector("head > title"):null)}function $b(t,n,a){if(a===1||n.itemProp!=null)return!1;switch(t){case"meta":case"title":return!0;case"style":if(typeof n.precedence!="string"||typeof n.href!="string"||n.href==="")break;return!0;case"link":if(typeof n.rel!="string"||typeof n.href!="string"||n.href===""||n.onLoad||n.onError)break;switch(n.rel){case"stylesheet":return t=n.disabled,typeof n.precedence=="string"&&t==null;default:return!0}case"script":if(n.async&&typeof n.async!="function"&&typeof n.async!="symbol"&&!n.onLoad&&!n.onError&&n.src&&typeof n.src=="string")return!0}return!1}function X_(t){return!(t.type==="stylesheet"&&(t.state.loading&3)===0)}function Jb(t,n,a,o){if(a.type==="stylesheet"&&(typeof o.media!="string"||matchMedia(o.media).matches!==!1)&&(a.state.loading&4)===0){if(a.instance===null){var h=Ga(o.href),d=n.querySelector(_l(h));if(d){n=d._p,n!==null&&typeof n=="object"&&typeof n.then=="function"&&(t.count++,t=Ic.bind(t),n.then(t,t)),a.state.loading|=4,a.instance=d,St(d);return}d=n.ownerDocument||n,o=G_(o),(h=Un.get(h))&&Ld(o,h),d=d.createElement("link"),St(d);var _=d;_._p=new Promise(function(b,C){_.onload=b,_.onerror=C}),Yt(d,"link",o),a.instance=d}t.stylesheets===null&&(t.stylesheets=new Map),t.stylesheets.set(a,n),(n=a.state.preload)&&(a.state.loading&3)===0&&(t.count++,a=Ic.bind(t),n.addEventListener("load",a),n.addEventListener("error",a))}}var zd=0;function Zb(t,n){return t.stylesheets&&t.count===0&&Nc(t,t.stylesheets),0<t.count||0<t.imgCount?function(a){var o=setTimeout(function(){if(t.stylesheets&&Nc(t,t.stylesheets),t.unsuspend){var d=t.unsuspend;t.unsuspend=null,d()}},6e4+n);0<t.imgBytes&&zd===0&&(zd=62500*Ob());var h=setTimeout(function(){if(t.waitingForImages=!1,t.count===0&&(t.stylesheets&&Nc(t,t.stylesheets),t.unsuspend)){var d=t.unsuspend;t.unsuspend=null,d()}},(t.imgBytes>zd?50:800)+n);return t.unsuspend=a,function(){t.unsuspend=null,clearTimeout(o),clearTimeout(h)}}:null}function Ic(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Nc(this,this.stylesheets);else if(this.unsuspend){var t=this.unsuspend;this.unsuspend=null,t()}}}var Cc=null;function Nc(t,n){t.stylesheets=null,t.unsuspend!==null&&(t.count++,Cc=new Map,n.forEach(Wb,t),Cc=null,Ic.call(t))}function Wb(t,n){if(!(n.state.loading&4)){var a=Cc.get(t);if(a)var o=a.get(null);else{a=new Map,Cc.set(t,a);for(var h=t.querySelectorAll("link[data-precedence],style[data-precedence]"),d=0;d<h.length;d++){var _=h[d];(_.nodeName==="LINK"||_.getAttribute("media")!=="not all")&&(a.set(_.dataset.precedence,_),o=_)}o&&a.set(null,o)}h=n.instance,_=h.getAttribute("data-precedence"),d=a.get(_)||o,d===o&&a.set(null,h),a.set(_,h),this.count++,o=Ic.bind(this),h.addEventListener("load",o),h.addEventListener("error",o),d?d.parentNode.insertBefore(h,d.nextSibling):(t=t.nodeType===9?t.head:t,t.insertBefore(h,t.firstChild)),n.state.loading|=4}}var El={$$typeof:ee,Provider:null,Consumer:null,_currentValue:ge,_currentValue2:ge,_threadCount:0};function eA(t,n,a,o,h,d,_,b,C){this.tag=1,this.containerInfo=t,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=hi(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=hi(0),this.hiddenUpdates=hi(null),this.identifierPrefix=o,this.onUncaughtError=h,this.onCaughtError=d,this.onRecoverableError=_,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=C,this.incompleteTransitions=new Map}function $_(t,n,a,o,h,d,_,b,C,B,Y,$){return t=new eA(t,n,a,_,C,B,Y,$,b),n=1,d===!0&&(n|=24),d=En(3,null,null,n),t.current=d,d.stateNode=t,n=vf(),n.refCount++,t.pooledCache=n,n.refCount++,d.memoizedState={element:o,isDehydrated:a,cache:n},Af(d),t}function J_(t){return t?(t=Aa,t):Aa}function Z_(t,n,a,o,h,d){h=J_(h),o.context===null?o.context=h:o.pendingContext=h,o=Os(n),o.payload={element:a},d=d===void 0?null:d,d!==null&&(o.callback=d),a=Ms(t,o,n),a!==null&&(fn(a,t,n),Zo(a,t,n))}function W_(t,n){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var a=t.retryLane;t.retryLane=a!==0&&a<n?a:n}}function Bd(t,n){W_(t,n),(t=t.alternate)&&W_(t,n)}function e0(t){if(t.tag===13||t.tag===31){var n=Vr(t,67108864);n!==null&&fn(n,t,67108864),Bd(t,67108864)}}function t0(t){if(t.tag===13||t.tag===31){var n=wn();n=br(n);var a=Vr(t,n);a!==null&&fn(a,t,n),Bd(t,n)}}var Dc=!0;function tA(t,n,a,o){var h=K.T;K.T=null;var d=se.p;try{se.p=2,qd(t,n,a,o)}finally{se.p=d,K.T=h}}function nA(t,n,a,o){var h=K.T;K.T=null;var d=se.p;try{se.p=8,qd(t,n,a,o)}finally{se.p=d,K.T=h}}function qd(t,n,a,o){if(Dc){var h=Hd(o);if(h===null)Id(t,n,o,Oc,a),i0(t,o);else if(sA(h,t,n,a,o))o.stopPropagation();else if(i0(t,o),n&4&&-1<iA.indexOf(t)){for(;h!==null;){var d=In(h);if(d!==null)switch(d.tag){case 3:if(d=d.stateNode,d.current.memoizedState.isDehydrated){var _=ui(d.pendingLanes);if(_!==0){var b=d;for(b.pendingLanes|=2,b.entangledLanes|=2;_;){var C=1<<31-gt(_);b.entanglements[1]|=C,_&=~C}Ii(d),(Fe&6)===0&&(mc=nn()+500,ml(0))}}break;case 31:case 13:b=Vr(d,2),b!==null&&fn(b,d,2),gc(),Bd(d,2)}if(d=Hd(o),d===null&&Id(t,n,o,Oc,a),d===h)break;h=d}h!==null&&o.stopPropagation()}else Id(t,n,o,null,a)}}function Hd(t){return t=Cn(t),Fd(t)}var Oc=null;function Fd(t){if(Oc=null,t=mi(t),t!==null){var n=u(t);if(n===null)t=null;else{var a=n.tag;if(a===13){if(t=f(n),t!==null)return t;t=null}else if(a===31){if(t=p(n),t!==null)return t;t=null}else if(a===3){if(n.stateNode.current.memoizedState.isDehydrated)return n.tag===3?n.stateNode.containerInfo:null;t=null}else n!==t&&(t=null)}}return Oc=t,null}function n0(t){switch(t){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(_r()){case Ao:return 2;case So:return 8;case ys:case Xh:return 32;case cu:return 268435456;default:return 32}default:return 32}}var Gd=!1,Fs=null,Gs=null,Qs=null,Tl=new Map,bl=new Map,Ys=[],iA="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function i0(t,n){switch(t){case"focusin":case"focusout":Fs=null;break;case"dragenter":case"dragleave":Gs=null;break;case"mouseover":case"mouseout":Qs=null;break;case"pointerover":case"pointerout":Tl.delete(n.pointerId);break;case"gotpointercapture":case"lostpointercapture":bl.delete(n.pointerId)}}function Al(t,n,a,o,h,d){return t===null||t.nativeEvent!==d?(t={blockedOn:n,domEventName:a,eventSystemFlags:o,nativeEvent:d,targetContainers:[h]},n!==null&&(n=In(n),n!==null&&e0(n)),t):(t.eventSystemFlags|=o,n=t.targetContainers,h!==null&&n.indexOf(h)===-1&&n.push(h),t)}function sA(t,n,a,o,h){switch(n){case"focusin":return Fs=Al(Fs,t,n,a,o,h),!0;case"dragenter":return Gs=Al(Gs,t,n,a,o,h),!0;case"mouseover":return Qs=Al(Qs,t,n,a,o,h),!0;case"pointerover":var d=h.pointerId;return Tl.set(d,Al(Tl.get(d)||null,t,n,a,o,h)),!0;case"gotpointercapture":return d=h.pointerId,bl.set(d,Al(bl.get(d)||null,t,n,a,o,h)),!0}return!1}function s0(t){var n=mi(t.target);if(n!==null){var a=u(n);if(a!==null){if(n=a.tag,n===13){if(n=f(a),n!==null){t.blockedOn=n,Qn(t.priority,function(){t0(a)});return}}else if(n===31){if(n=p(a),n!==null){t.blockedOn=n,Qn(t.priority,function(){t0(a)});return}}else if(n===3&&a.stateNode.current.memoizedState.isDehydrated){t.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Mc(t){if(t.blockedOn!==null)return!1;for(var n=t.targetContainers;0<n.length;){var a=Hd(t.nativeEvent);if(a===null){a=t.nativeEvent;var o=new a.constructor(a.type,a);jo=o,a.target.dispatchEvent(o),jo=null}else return n=In(a),n!==null&&e0(n),t.blockedOn=a,!1;n.shift()}return!0}function r0(t,n,a){Mc(t)&&a.delete(n)}function rA(){Gd=!1,Fs!==null&&Mc(Fs)&&(Fs=null),Gs!==null&&Mc(Gs)&&(Gs=null),Qs!==null&&Mc(Qs)&&(Qs=null),Tl.forEach(r0),bl.forEach(r0)}function Vc(t,n){t.blockedOn===n&&(t.blockedOn=null,Gd||(Gd=!0,s.unstable_scheduleCallback(s.unstable_NormalPriority,rA)))}var kc=null;function a0(t){kc!==t&&(kc=t,s.unstable_scheduleCallback(s.unstable_NormalPriority,function(){kc===t&&(kc=null);for(var n=0;n<t.length;n+=3){var a=t[n],o=t[n+1],h=t[n+2];if(typeof o!="function"){if(Fd(o||a)===null)continue;break}var d=In(a);d!==null&&(t.splice(n,3),n-=3,Hf(d,{pending:!0,data:h,method:a.method,action:o},o,h))}}))}function Ya(t){function n(C){return Vc(C,t)}Fs!==null&&Vc(Fs,t),Gs!==null&&Vc(Gs,t),Qs!==null&&Vc(Qs,t),Tl.forEach(n),bl.forEach(n);for(var a=0;a<Ys.length;a++){var o=Ys[a];o.blockedOn===t&&(o.blockedOn=null)}for(;0<Ys.length&&(a=Ys[0],a.blockedOn===null);)s0(a),a.blockedOn===null&&Ys.shift();if(a=(t.ownerDocument||t).$$reactFormReplay,a!=null)for(o=0;o<a.length;o+=3){var h=a[o],d=a[o+1],_=h[Lt]||null;if(typeof d=="function")_||a0(a);else if(_){var b=null;if(d&&d.hasAttribute("formAction")){if(h=d,_=d[Lt]||null)b=_.formAction;else if(Fd(h)!==null)continue}else b=_.action;typeof b=="function"?a[o+1]=b:(a.splice(o,3),o-=3),a0(a)}}}function o0(){function t(d){d.canIntercept&&d.info==="react-transition"&&d.intercept({handler:function(){return new Promise(function(_){return h=_})},focusReset:"manual",scroll:"manual"})}function n(){h!==null&&(h(),h=null),o||setTimeout(a,20)}function a(){if(!o&&!navigation.transition){var d=navigation.currentEntry;d&&d.url!=null&&navigation.navigate(d.url,{state:d.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var o=!1,h=null;return navigation.addEventListener("navigate",t),navigation.addEventListener("navigatesuccess",n),navigation.addEventListener("navigateerror",n),setTimeout(a,100),function(){o=!0,navigation.removeEventListener("navigate",t),navigation.removeEventListener("navigatesuccess",n),navigation.removeEventListener("navigateerror",n),h!==null&&(h(),h=null)}}}function Qd(t){this._internalRoot=t}jc.prototype.render=Qd.prototype.render=function(t){var n=this._internalRoot;if(n===null)throw Error(r(409));var a=n.current,o=wn();Z_(a,o,t,n,null,null)},jc.prototype.unmount=Qd.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var n=t.containerInfo;Z_(t.current,2,null,t,null,null),gc(),n[fi]=null}};function jc(t){this._internalRoot=t}jc.prototype.unstable_scheduleHydration=function(t){if(t){var n=gu();t={blockedOn:null,target:t,priority:n};for(var a=0;a<Ys.length&&n!==0&&n<Ys[a].priority;a++);Ys.splice(a,0,t),a===0&&s0(t)}};var l0=e.version;if(l0!=="19.2.0")throw Error(r(527,l0,"19.2.0"));se.findDOMNode=function(t){var n=t._reactInternals;if(n===void 0)throw typeof t.render=="function"?Error(r(188)):(t=Object.keys(t).join(","),Error(r(268,t)));return t=g(n),t=t!==null?T(t):null,t=t===null?null:t.stateNode,t};var aA={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:K,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Pc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Pc.isDisabled&&Pc.supportsFiber)try{Fn=Pc.inject(aA),qt=Pc}catch{}}return wl.createRoot=function(t,n){if(!l(t))throw Error(r(299));var a=!1,o="",h=py,d=gy,_=yy;return n!=null&&(n.unstable_strictMode===!0&&(a=!0),n.identifierPrefix!==void 0&&(o=n.identifierPrefix),n.onUncaughtError!==void 0&&(h=n.onUncaughtError),n.onCaughtError!==void 0&&(d=n.onCaughtError),n.onRecoverableError!==void 0&&(_=n.onRecoverableError)),n=$_(t,1,!1,null,null,a,o,null,h,d,_,o0),t[fi]=n.current,Rd(t),new Qd(n)},wl.hydrateRoot=function(t,n,a){if(!l(t))throw Error(r(299));var o=!1,h="",d=py,_=gy,b=yy,C=null;return a!=null&&(a.unstable_strictMode===!0&&(o=!0),a.identifierPrefix!==void 0&&(h=a.identifierPrefix),a.onUncaughtError!==void 0&&(d=a.onUncaughtError),a.onCaughtError!==void 0&&(_=a.onCaughtError),a.onRecoverableError!==void 0&&(b=a.onRecoverableError),a.formState!==void 0&&(C=a.formState)),n=$_(t,1,!0,n,a??null,o,h,C,d,_,b,o0),n.context=J_(null),a=n.current,o=wn(),o=br(o),h=Os(o),h.callback=null,Ms(a,h,o),a=o,n.current.lanes=a,Er(n,a),Ii(n),t[fi]=n.current,Rd(t),new jc(n)},wl.version="19.2.0",wl}var _0;function _A(){if(_0)return Xd.exports;_0=1;function s(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(s)}catch(e){console.error(e)}}return s(),Xd.exports=yA(),Xd.exports}var vA=_A();const EA=()=>{};var v0={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eE=function(s){const e=[];let i=0;for(let r=0;r<s.length;r++){let l=s.charCodeAt(r);l<128?e[i++]=l:l<2048?(e[i++]=l>>6|192,e[i++]=l&63|128):(l&64512)===55296&&r+1<s.length&&(s.charCodeAt(r+1)&64512)===56320?(l=65536+((l&1023)<<10)+(s.charCodeAt(++r)&1023),e[i++]=l>>18|240,e[i++]=l>>12&63|128,e[i++]=l>>6&63|128,e[i++]=l&63|128):(e[i++]=l>>12|224,e[i++]=l>>6&63|128,e[i++]=l&63|128)}return e},TA=function(s){const e=[];let i=0,r=0;for(;i<s.length;){const l=s[i++];if(l<128)e[r++]=String.fromCharCode(l);else if(l>191&&l<224){const u=s[i++];e[r++]=String.fromCharCode((l&31)<<6|u&63)}else if(l>239&&l<365){const u=s[i++],f=s[i++],p=s[i++],y=((l&7)<<18|(u&63)<<12|(f&63)<<6|p&63)-65536;e[r++]=String.fromCharCode(55296+(y>>10)),e[r++]=String.fromCharCode(56320+(y&1023))}else{const u=s[i++],f=s[i++];e[r++]=String.fromCharCode((l&15)<<12|(u&63)<<6|f&63)}}return e.join("")},tE={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(s,e){if(!Array.isArray(s))throw Error("encodeByteArray takes an array as a parameter");this.init_();const i=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let l=0;l<s.length;l+=3){const u=s[l],f=l+1<s.length,p=f?s[l+1]:0,y=l+2<s.length,g=y?s[l+2]:0,T=u>>2,A=(u&3)<<4|p>>4;let x=(p&15)<<2|g>>6,j=g&63;y||(j=64,f||(x=64)),r.push(i[T],i[A],i[x],i[j])}return r.join("")},encodeString(s,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(s):this.encodeByteArray(eE(s),e)},decodeString(s,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(s):TA(this.decodeStringToByteArray(s,e))},decodeStringToByteArray(s,e){this.init_();const i=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let l=0;l<s.length;){const u=i[s.charAt(l++)],p=l<s.length?i[s.charAt(l)]:0;++l;const g=l<s.length?i[s.charAt(l)]:64;++l;const A=l<s.length?i[s.charAt(l)]:64;if(++l,u==null||p==null||g==null||A==null)throw new bA;const x=u<<2|p>>4;if(r.push(x),g!==64){const j=p<<4&240|g>>2;if(r.push(j),A!==64){const U=g<<6&192|A;r.push(U)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let s=0;s<this.ENCODED_VALS.length;s++)this.byteToCharMap_[s]=this.ENCODED_VALS.charAt(s),this.charToByteMap_[this.byteToCharMap_[s]]=s,this.byteToCharMapWebSafe_[s]=this.ENCODED_VALS_WEBSAFE.charAt(s),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[s]]=s,s>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(s)]=s,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(s)]=s)}}};class bA extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const AA=function(s){const e=eE(s);return tE.encodeByteArray(e,!0)},eh=function(s){return AA(s).replace(/\./g,"")},nE=function(s){try{return tE.decodeString(s,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SA(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wA=()=>SA().__FIREBASE_DEFAULTS__,xA=()=>{if(typeof process>"u"||typeof v0>"u")return;const s=v0.__FIREBASE_DEFAULTS__;if(s)return JSON.parse(s)},RA=()=>{if(typeof document>"u")return;let s;try{s=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=s&&nE(s[1]);return e&&JSON.parse(e)},bh=()=>{try{return EA()||wA()||xA()||RA()}catch(s){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${s}`);return}},iE=s=>bh()?.emulatorHosts?.[s],IA=s=>{const e=iE(s);if(!e)return;const i=e.lastIndexOf(":");if(i<=0||i+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(i+1),10);return e[0]==="["?[e.substring(1,i-1),r]:[e.substring(0,i),r]},sE=()=>bh()?.config,rE=s=>bh()?.[`_${s}`];/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CA{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,i)=>{this.resolve=e,this.reject=i})}wrapCallback(e){return(i,r)=>{i?this.reject(i):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(i):e(i,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ho(s){try{return(s.startsWith("http://")||s.startsWith("https://")?new URL(s).hostname:s).endsWith(".cloudworkstations.dev")}catch{return!1}}async function aE(s){return(await fetch(s,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NA(s,e){if(s.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const i={alg:"none",type:"JWT"},r=e||"demo-project",l=s.iat||0,u=s.sub||s.user_id;if(!u)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const f={iss:`https://securetoken.google.com/${r}`,aud:r,iat:l,exp:l+3600,auth_time:l,sub:u,user_id:u,firebase:{sign_in_provider:"custom",identities:{}},...s};return[eh(JSON.stringify(i)),eh(JSON.stringify(f)),""].join(".")}const Ol={};function DA(){const s={prod:[],emulator:[]};for(const e of Object.keys(Ol))Ol[e]?s.emulator.push(e):s.prod.push(e);return s}function OA(s){let e=document.getElementById(s),i=!1;return e||(e=document.createElement("div"),e.setAttribute("id",s),i=!0),{created:i,element:e}}let E0=!1;function oE(s,e){if(typeof window>"u"||typeof document>"u"||!ho(window.location.host)||Ol[s]===e||Ol[s]||E0)return;Ol[s]=e;function i(x){return`__firebase__banner__${x}`}const r="__firebase__banner",u=DA().prod.length>0;function f(){const x=document.getElementById(r);x&&x.remove()}function p(x){x.style.display="flex",x.style.background="#7faaf0",x.style.position="fixed",x.style.bottom="5px",x.style.left="5px",x.style.padding=".5em",x.style.borderRadius="5px",x.style.alignItems="center"}function y(x,j){x.setAttribute("width","24"),x.setAttribute("id",j),x.setAttribute("height","24"),x.setAttribute("viewBox","0 0 24 24"),x.setAttribute("fill","none"),x.style.marginLeft="-6px"}function g(){const x=document.createElement("span");return x.style.cursor="pointer",x.style.marginLeft="16px",x.style.fontSize="24px",x.innerHTML=" &times;",x.onclick=()=>{E0=!0,f()},x}function T(x,j){x.setAttribute("id",j),x.innerText="Learn more",x.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",x.setAttribute("target","__blank"),x.style.paddingLeft="5px",x.style.textDecoration="underline"}function A(){const x=OA(r),j=i("text"),U=document.getElementById(j)||document.createElement("span"),Q=i("learnmore"),G=document.getElementById(Q)||document.createElement("a"),te=i("preprendIcon"),fe=document.getElementById(te)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(x.created){const ee=x.element;p(ee),T(G,Q);const ue=g();y(fe,te),ee.append(fe,U,G,ue),document.body.appendChild(ee)}u?(U.innerText="Preview backend disconnected.",fe.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(fe.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,U.innerText="Preview backend running in this workspace."),U.setAttribute("id",j)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",A):A()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function MA(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(tn())}function VA(){const s=bh()?.forceEnvironment;if(s==="node")return!0;if(s==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function kA(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function jA(){const s=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof s=="object"&&s.id!==void 0}function PA(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function LA(){const s=tn();return s.indexOf("MSIE ")>=0||s.indexOf("Trident/")>=0}function UA(){return!VA()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function zA(){try{return typeof indexedDB=="object"}catch{return!1}}function BA(){return new Promise((s,e)=>{try{let i=!0;const r="validate-browser-context-for-indexeddb-analytics-module",l=self.indexedDB.open(r);l.onsuccess=()=>{l.result.close(),i||self.indexedDB.deleteDatabase(r),s(!0)},l.onupgradeneeded=()=>{i=!1},l.onerror=()=>{e(l.error?.message||"")}}catch(i){e(i)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qA="FirebaseError";class fs extends Error{constructor(e,i,r){super(i),this.code=e,this.customData=r,this.name=qA,Object.setPrototypeOf(this,fs.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Kl.prototype.create)}}class Kl{constructor(e,i,r){this.service=e,this.serviceName=i,this.errors=r}create(e,...i){const r=i[0]||{},l=`${this.service}/${e}`,u=this.errors[e],f=u?HA(u,r):"Error",p=`${this.serviceName}: ${f} (${l}).`;return new fs(l,p,r)}}function HA(s,e){return s.replace(FA,(i,r)=>{const l=e[r];return l!=null?String(l):`<${r}?>`})}const FA=/\{\$([^}]+)}/g;function GA(s){for(const e in s)if(Object.prototype.hasOwnProperty.call(s,e))return!1;return!0}function Jr(s,e){if(s===e)return!0;const i=Object.keys(s),r=Object.keys(e);for(const l of i){if(!r.includes(l))return!1;const u=s[l],f=e[l];if(T0(u)&&T0(f)){if(!Jr(u,f))return!1}else if(u!==f)return!1}for(const l of r)if(!i.includes(l))return!1;return!0}function T0(s){return s!==null&&typeof s=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xl(s){const e=[];for(const[i,r]of Object.entries(s))Array.isArray(r)?r.forEach(l=>{e.push(encodeURIComponent(i)+"="+encodeURIComponent(l))}):e.push(encodeURIComponent(i)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function xl(s){const e={};return s.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[l,u]=r.split("=");e[decodeURIComponent(l)]=decodeURIComponent(u)}}),e}function Rl(s){const e=s.indexOf("?");if(!e)return"";const i=s.indexOf("#",e);return s.substring(e,i>0?i:void 0)}function QA(s,e){const i=new YA(s,e);return i.subscribe.bind(i)}class YA{constructor(e,i){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=i,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(i=>{i.next(e)})}error(e){this.forEachObserver(i=>{i.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,i,r){let l;if(e===void 0&&i===void 0&&r===void 0)throw new Error("Missing Observer.");KA(e,["next","error","complete"])?l=e:l={next:e,error:i,complete:r},l.next===void 0&&(l.next=Wd),l.error===void 0&&(l.error=Wd),l.complete===void 0&&(l.complete=Wd);const u=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?l.error(this.finalError):l.complete()}catch{}}),this.observers.push(l),u}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let i=0;i<this.observers.length;i++)this.sendOne(i,e)}sendOne(e,i){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{i(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function KA(s,e){if(typeof s!="object"||s===null)return!1;for(const i of e)if(i in s&&typeof s[i]=="function")return!0;return!1}function Wd(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pt(s){return s&&s._delegate?s._delegate:s}class Zr{constructor(e,i,r){this.name=e,this.instanceFactory=i,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yr="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XA{constructor(e,i){this.name=e,this.container=i,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const i=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(i)){const r=new CA;if(this.instancesDeferred.set(i,r),this.isInitialized(i)||this.shouldAutoInitialize())try{const l=this.getOrInitializeService({instanceIdentifier:i});l&&r.resolve(l)}catch{}}return this.instancesDeferred.get(i).promise}getImmediate(e){const i=this.normalizeInstanceIdentifier(e?.identifier),r=e?.optional??!1;if(this.isInitialized(i)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:i})}catch(l){if(r)return null;throw l}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(JA(e))try{this.getOrInitializeService({instanceIdentifier:Yr})}catch{}for(const[i,r]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(i);try{const u=this.getOrInitializeService({instanceIdentifier:l});r.resolve(u)}catch{}}}}clearInstance(e=Yr){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(i=>"INTERNAL"in i).map(i=>i.INTERNAL.delete()),...e.filter(i=>"_delete"in i).map(i=>i._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Yr){return this.instances.has(e)}getOptions(e=Yr){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:i={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const l=this.getOrInitializeService({instanceIdentifier:r,options:i});for(const[u,f]of this.instancesDeferred.entries()){const p=this.normalizeInstanceIdentifier(u);r===p&&f.resolve(l)}return l}onInit(e,i){const r=this.normalizeInstanceIdentifier(i),l=this.onInitCallbacks.get(r)??new Set;l.add(e),this.onInitCallbacks.set(r,l);const u=this.instances.get(r);return u&&e(u,r),()=>{l.delete(e)}}invokeOnInitCallbacks(e,i){const r=this.onInitCallbacks.get(i);if(r)for(const l of r)try{l(e,i)}catch{}}getOrInitializeService({instanceIdentifier:e,options:i={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:$A(e),options:i}),this.instances.set(e,r),this.instancesOptions.set(e,i),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Yr){return this.component?this.component.multipleInstances?e:Yr:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function $A(s){return s===Yr?void 0:s}function JA(s){return s.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZA{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const i=this.getProvider(e.name);if(i.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);i.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const i=new XA(e,this);return this.providers.set(e,i),i}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ve;(function(s){s[s.DEBUG=0]="DEBUG",s[s.VERBOSE=1]="VERBOSE",s[s.INFO=2]="INFO",s[s.WARN=3]="WARN",s[s.ERROR=4]="ERROR",s[s.SILENT=5]="SILENT"})(Ve||(Ve={}));const WA={debug:Ve.DEBUG,verbose:Ve.VERBOSE,info:Ve.INFO,warn:Ve.WARN,error:Ve.ERROR,silent:Ve.SILENT},eS=Ve.INFO,tS={[Ve.DEBUG]:"log",[Ve.VERBOSE]:"log",[Ve.INFO]:"info",[Ve.WARN]:"warn",[Ve.ERROR]:"error"},nS=(s,e,...i)=>{if(e<s.logLevel)return;const r=new Date().toISOString(),l=tS[e];if(l)console[l](`[${r}]  ${s.name}:`,...i);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Fm{constructor(e){this.name=e,this._logLevel=eS,this._logHandler=nS,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Ve))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?WA[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Ve.DEBUG,...e),this._logHandler(this,Ve.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Ve.VERBOSE,...e),this._logHandler(this,Ve.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Ve.INFO,...e),this._logHandler(this,Ve.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Ve.WARN,...e),this._logHandler(this,Ve.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Ve.ERROR,...e),this._logHandler(this,Ve.ERROR,...e)}}const iS=(s,e)=>e.some(i=>s instanceof i);let b0,A0;function sS(){return b0||(b0=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function rS(){return A0||(A0=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const lE=new WeakMap,fm=new WeakMap,uE=new WeakMap,em=new WeakMap,Gm=new WeakMap;function aS(s){const e=new Promise((i,r)=>{const l=()=>{s.removeEventListener("success",u),s.removeEventListener("error",f)},u=()=>{i(tr(s.result)),l()},f=()=>{r(s.error),l()};s.addEventListener("success",u),s.addEventListener("error",f)});return e.then(i=>{i instanceof IDBCursor&&lE.set(i,s)}).catch(()=>{}),Gm.set(e,s),e}function oS(s){if(fm.has(s))return;const e=new Promise((i,r)=>{const l=()=>{s.removeEventListener("complete",u),s.removeEventListener("error",f),s.removeEventListener("abort",f)},u=()=>{i(),l()},f=()=>{r(s.error||new DOMException("AbortError","AbortError")),l()};s.addEventListener("complete",u),s.addEventListener("error",f),s.addEventListener("abort",f)});fm.set(s,e)}let dm={get(s,e,i){if(s instanceof IDBTransaction){if(e==="done")return fm.get(s);if(e==="objectStoreNames")return s.objectStoreNames||uE.get(s);if(e==="store")return i.objectStoreNames[1]?void 0:i.objectStore(i.objectStoreNames[0])}return tr(s[e])},set(s,e,i){return s[e]=i,!0},has(s,e){return s instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in s}};function lS(s){dm=s(dm)}function uS(s){return s===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...i){const r=s.call(tm(this),e,...i);return uE.set(r,e.sort?e.sort():[e]),tr(r)}:rS().includes(s)?function(...e){return s.apply(tm(this),e),tr(lE.get(this))}:function(...e){return tr(s.apply(tm(this),e))}}function cS(s){return typeof s=="function"?uS(s):(s instanceof IDBTransaction&&oS(s),iS(s,sS())?new Proxy(s,dm):s)}function tr(s){if(s instanceof IDBRequest)return aS(s);if(em.has(s))return em.get(s);const e=cS(s);return e!==s&&(em.set(s,e),Gm.set(e,s)),e}const tm=s=>Gm.get(s);function hS(s,e,{blocked:i,upgrade:r,blocking:l,terminated:u}={}){const f=indexedDB.open(s,e),p=tr(f);return r&&f.addEventListener("upgradeneeded",y=>{r(tr(f.result),y.oldVersion,y.newVersion,tr(f.transaction),y)}),i&&f.addEventListener("blocked",y=>i(y.oldVersion,y.newVersion,y)),p.then(y=>{u&&y.addEventListener("close",()=>u()),l&&y.addEventListener("versionchange",g=>l(g.oldVersion,g.newVersion,g))}).catch(()=>{}),p}const fS=["get","getKey","getAll","getAllKeys","count"],dS=["put","add","delete","clear"],nm=new Map;function S0(s,e){if(!(s instanceof IDBDatabase&&!(e in s)&&typeof e=="string"))return;if(nm.get(e))return nm.get(e);const i=e.replace(/FromIndex$/,""),r=e!==i,l=dS.includes(i);if(!(i in(r?IDBIndex:IDBObjectStore).prototype)||!(l||fS.includes(i)))return;const u=async function(f,...p){const y=this.transaction(f,l?"readwrite":"readonly");let g=y.store;return r&&(g=g.index(p.shift())),(await Promise.all([g[i](...p),l&&y.done]))[0]};return nm.set(e,u),u}lS(s=>({...s,get:(e,i,r)=>S0(e,i)||s.get(e,i,r),has:(e,i)=>!!S0(e,i)||s.has(e,i)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mS{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(i=>{if(pS(i)){const r=i.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(i=>i).join(" ")}}function pS(s){return s.getComponent()?.type==="VERSION"}const mm="@firebase/app",w0="0.14.5";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const os=new Fm("@firebase/app"),gS="@firebase/app-compat",yS="@firebase/analytics-compat",_S="@firebase/analytics",vS="@firebase/app-check-compat",ES="@firebase/app-check",TS="@firebase/auth",bS="@firebase/auth-compat",AS="@firebase/database",SS="@firebase/data-connect",wS="@firebase/database-compat",xS="@firebase/functions",RS="@firebase/functions-compat",IS="@firebase/installations",CS="@firebase/installations-compat",NS="@firebase/messaging",DS="@firebase/messaging-compat",OS="@firebase/performance",MS="@firebase/performance-compat",VS="@firebase/remote-config",kS="@firebase/remote-config-compat",jS="@firebase/storage",PS="@firebase/storage-compat",LS="@firebase/firestore",US="@firebase/ai",zS="@firebase/firestore-compat",BS="firebase",qS="12.5.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pm="[DEFAULT]",HS={[mm]:"fire-core",[gS]:"fire-core-compat",[_S]:"fire-analytics",[yS]:"fire-analytics-compat",[ES]:"fire-app-check",[vS]:"fire-app-check-compat",[TS]:"fire-auth",[bS]:"fire-auth-compat",[AS]:"fire-rtdb",[SS]:"fire-data-connect",[wS]:"fire-rtdb-compat",[xS]:"fire-fn",[RS]:"fire-fn-compat",[IS]:"fire-iid",[CS]:"fire-iid-compat",[NS]:"fire-fcm",[DS]:"fire-fcm-compat",[OS]:"fire-perf",[MS]:"fire-perf-compat",[VS]:"fire-rc",[kS]:"fire-rc-compat",[jS]:"fire-gcs",[PS]:"fire-gcs-compat",[LS]:"fire-fst",[zS]:"fire-fst-compat",[US]:"fire-vertex","fire-js":"fire-js",[BS]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const th=new Map,FS=new Map,gm=new Map;function x0(s,e){try{s.container.addComponent(e)}catch(i){os.debug(`Component ${e.name} failed to register with FirebaseApp ${s.name}`,i)}}function so(s){const e=s.name;if(gm.has(e))return os.debug(`There were multiple attempts to register component ${e}.`),!1;gm.set(e,s);for(const i of th.values())x0(i,s);for(const i of FS.values())x0(i,s);return!0}function Qm(s,e){const i=s.container.getProvider("heartbeat").getImmediate({optional:!0});return i&&i.triggerHeartbeat(),s.container.getProvider(e)}function mn(s){return s==null?!1:s.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GS={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},nr=new Kl("app","Firebase",GS);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QS{constructor(e,i,r){this._isDeleted=!1,this._options={...e},this._config={...i},this._name=i.name,this._automaticDataCollectionEnabled=i.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Zr("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw nr.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fo=qS;function cE(s,e={}){let i=s;typeof e!="object"&&(e={name:e});const r={name:pm,automaticDataCollectionEnabled:!0,...e},l=r.name;if(typeof l!="string"||!l)throw nr.create("bad-app-name",{appName:String(l)});if(i||(i=sE()),!i)throw nr.create("no-options");const u=th.get(l);if(u){if(Jr(i,u.options)&&Jr(r,u.config))return u;throw nr.create("duplicate-app",{appName:l})}const f=new ZA(l);for(const y of gm.values())f.addComponent(y);const p=new QS(i,r,f);return th.set(l,p),p}function hE(s=pm){const e=th.get(s);if(!e&&s===pm&&sE())return cE();if(!e)throw nr.create("no-app",{appName:s});return e}function ir(s,e,i){let r=HS[s]??s;i&&(r+=`-${i}`);const l=r.match(/\s|\//),u=e.match(/\s|\//);if(l||u){const f=[`Unable to register library "${r}" with version "${e}":`];l&&f.push(`library name "${r}" contains illegal characters (whitespace or "/")`),l&&u&&f.push("and"),u&&f.push(`version name "${e}" contains illegal characters (whitespace or "/")`),os.warn(f.join(" "));return}so(new Zr(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YS="firebase-heartbeat-database",KS=1,Ll="firebase-heartbeat-store";let im=null;function fE(){return im||(im=hS(YS,KS,{upgrade:(s,e)=>{switch(e){case 0:try{s.createObjectStore(Ll)}catch(i){console.warn(i)}}}}).catch(s=>{throw nr.create("idb-open",{originalErrorMessage:s.message})})),im}async function XS(s){try{const i=(await fE()).transaction(Ll),r=await i.objectStore(Ll).get(dE(s));return await i.done,r}catch(e){if(e instanceof fs)os.warn(e.message);else{const i=nr.create("idb-get",{originalErrorMessage:e?.message});os.warn(i.message)}}}async function R0(s,e){try{const r=(await fE()).transaction(Ll,"readwrite");await r.objectStore(Ll).put(e,dE(s)),await r.done}catch(i){if(i instanceof fs)os.warn(i.message);else{const r=nr.create("idb-set",{originalErrorMessage:i?.message});os.warn(r.message)}}}function dE(s){return`${s.name}!${s.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $S=1024,JS=30;class ZS{constructor(e){this.container=e,this._heartbeatsCache=null;const i=this.container.getProvider("app").getImmediate();this._storage=new ew(i),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=I0();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(l=>l.date===r))return;if(this._heartbeatsCache.heartbeats.push({date:r,agent:i}),this._heartbeatsCache.heartbeats.length>JS){const l=tw(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(l,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){os.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=I0(),{heartbeatsToSend:i,unsentEntries:r}=WS(this._heartbeatsCache.heartbeats),l=eh(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=e,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),l}catch(e){return os.warn(e),""}}}function I0(){return new Date().toISOString().substring(0,10)}function WS(s,e=$S){const i=[];let r=s.slice();for(const l of s){const u=i.find(f=>f.agent===l.agent);if(u){if(u.dates.push(l.date),C0(i)>e){u.dates.pop();break}}else if(i.push({agent:l.agent,dates:[l.date]}),C0(i)>e){i.pop();break}r=r.slice(1)}return{heartbeatsToSend:i,unsentEntries:r}}class ew{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return zA()?BA().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const i=await XS(this.app);return i?.heartbeats?i:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return R0(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return R0(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function C0(s){return eh(JSON.stringify({version:2,heartbeats:s})).length}function tw(s){if(s.length===0)return-1;let e=0,i=s[0].date;for(let r=1;r<s.length;r++)s[r].date<i&&(i=s[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nw(s){so(new Zr("platform-logger",e=>new mS(e),"PRIVATE")),so(new Zr("heartbeat",e=>new ZS(e),"PRIVATE")),ir(mm,w0,s),ir(mm,w0,"esm2020"),ir("fire-js","")}nw("");var iw="firebase",sw="12.5.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ir(iw,sw,"app");function mE(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const rw=mE,pE=new Kl("auth","Firebase",mE());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nh=new Fm("@firebase/auth");function aw(s,...e){nh.logLevel<=Ve.WARN&&nh.warn(`Auth (${fo}): ${s}`,...e)}function Fc(s,...e){nh.logLevel<=Ve.ERROR&&nh.error(`Auth (${fo}): ${s}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ri(s,...e){throw Ym(s,...e)}function Ni(s,...e){return Ym(s,...e)}function gE(s,e,i){const r={...rw(),[e]:i};return new Kl("auth","Firebase",r).create(e,{appName:s.name})}function ii(s){return gE(s,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Ym(s,...e){if(typeof s!="string"){const i=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=s.name),s._errorFactory.create(i,...r)}return pE.create(s,...e)}function _e(s,e,...i){if(!s)throw Ym(e,...i)}function ss(s){const e="INTERNAL ASSERTION FAILED: "+s;throw Fc(e),new Error(e)}function ls(s,e){s||ss(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ym(){return typeof self<"u"&&self.location?.href||""}function ow(){return N0()==="http:"||N0()==="https:"}function N0(){return typeof self<"u"&&self.location?.protocol||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lw(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(ow()||jA()||"connection"in navigator)?navigator.onLine:!0}function uw(){if(typeof navigator>"u")return null;const s=navigator;return s.languages&&s.languages[0]||s.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $l{constructor(e,i){this.shortDelay=e,this.longDelay=i,ls(i>e,"Short delay should be less than long delay!"),this.isMobile=MA()||PA()}get(){return lw()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Km(s,e){ls(s.emulator,"Emulator should always be set here");const{url:i}=s.emulator;return e?`${i}${e.startsWith("/")?e.slice(1):e}`:i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yE{static initialize(e,i,r){this.fetchImpl=e,i&&(this.headersImpl=i),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;ss("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;ss("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;ss("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cw={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hw=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],fw=new $l(3e4,6e4);function ds(s,e){return s.tenantId&&!e.tenantId?{...e,tenantId:s.tenantId}:e}async function dr(s,e,i,r,l={}){return _E(s,l,async()=>{let u={},f={};r&&(e==="GET"?f=r:u={body:JSON.stringify(r)});const p=Xl({key:s.config.apiKey,...f}).slice(1),y=await s._getAdditionalHeaders();y["Content-Type"]="application/json",s.languageCode&&(y["X-Firebase-Locale"]=s.languageCode);const g={method:e,headers:y,...u};return kA()||(g.referrerPolicy="no-referrer"),s.emulatorConfig&&ho(s.emulatorConfig.host)&&(g.credentials="include"),yE.fetch()(await vE(s,s.config.apiHost,i,p),g)})}async function _E(s,e,i){s._canInitEmulator=!1;const r={...cw,...e};try{const l=new mw(s),u=await Promise.race([i(),l.promise]);l.clearNetworkTimeout();const f=await u.json();if("needConfirmation"in f)throw Lc(s,"account-exists-with-different-credential",f);if(u.ok&&!("errorMessage"in f))return f;{const p=u.ok?f.errorMessage:f.error.message,[y,g]=p.split(" : ");if(y==="FEDERATED_USER_ID_ALREADY_LINKED")throw Lc(s,"credential-already-in-use",f);if(y==="EMAIL_EXISTS")throw Lc(s,"email-already-in-use",f);if(y==="USER_DISABLED")throw Lc(s,"user-disabled",f);const T=r[y]||y.toLowerCase().replace(/[_\s]+/g,"-");if(g)throw gE(s,T,g);ri(s,T)}}catch(l){if(l instanceof fs)throw l;ri(s,"network-request-failed",{message:String(l)})}}async function mo(s,e,i,r,l={}){const u=await dr(s,e,i,r,l);return"mfaPendingCredential"in u&&ri(s,"multi-factor-auth-required",{_serverResponse:u}),u}async function vE(s,e,i,r){const l=`${e}${i}?${r}`,u=s,f=u.config.emulator?Km(s.config,l):`${s.config.apiScheme}://${l}`;return hw.includes(i)&&(await u._persistenceManagerAvailable,u._getPersistenceType()==="COOKIE")?u._getPersistence()._getFinalTarget(f).toString():f}function dw(s){switch(s){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class mw{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((i,r)=>{this.timer=setTimeout(()=>r(Ni(this.auth,"network-request-failed")),fw.get())})}}function Lc(s,e,i){const r={appName:s.name};i.email&&(r.email=i.email),i.phoneNumber&&(r.phoneNumber=i.phoneNumber);const l=Ni(s,e,r);return l.customData._tokenResponse=i,l}function D0(s){return s!==void 0&&s.enterprise!==void 0}class pw{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const i of this.recaptchaEnforcementState)if(i.provider&&i.provider===e)return dw(i.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function gw(s,e){return dr(s,"GET","/v2/recaptchaConfig",ds(s,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function yw(s,e){return dr(s,"POST","/v1/accounts:delete",e)}async function ih(s,e){return dr(s,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ml(s){if(s)try{const e=new Date(Number(s));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function _w(s,e=!1){const i=Pt(s),r=await i.getIdToken(e),l=Xm(r);_e(l&&l.exp&&l.auth_time&&l.iat,i.auth,"internal-error");const u=typeof l.firebase=="object"?l.firebase:void 0,f=u?.sign_in_provider;return{claims:l,token:r,authTime:Ml(sm(l.auth_time)),issuedAtTime:Ml(sm(l.iat)),expirationTime:Ml(sm(l.exp)),signInProvider:f||null,signInSecondFactor:u?.sign_in_second_factor||null}}function sm(s){return Number(s)*1e3}function Xm(s){const[e,i,r]=s.split(".");if(e===void 0||i===void 0||r===void 0)return Fc("JWT malformed, contained fewer than 3 sections"),null;try{const l=nE(i);return l?JSON.parse(l):(Fc("Failed to decode base64 JWT payload"),null)}catch(l){return Fc("Caught error parsing JWT payload as JSON",l?.toString()),null}}function O0(s){const e=Xm(s);return _e(e,"internal-error"),_e(typeof e.exp<"u","internal-error"),_e(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ul(s,e,i=!1){if(i)return e;try{return await e}catch(r){throw r instanceof fs&&vw(r)&&s.auth.currentUser===s&&await s.auth.signOut(),r}}function vw({code:s}){return s==="auth/user-disabled"||s==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ew{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const i=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),i}else{this.errorBackoff=3e4;const r=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const i=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},i)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _m{constructor(e,i){this.createdAt=e,this.lastLoginAt=i,this._initializeTime()}_initializeTime(){this.lastSignInTime=Ml(this.lastLoginAt),this.creationTime=Ml(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function sh(s){const e=s.auth,i=await s.getIdToken(),r=await Ul(s,ih(e,{idToken:i}));_e(r?.users.length,e,"internal-error");const l=r.users[0];s._notifyReloadListener(l);const u=l.providerUserInfo?.length?EE(l.providerUserInfo):[],f=bw(s.providerData,u),p=s.isAnonymous,y=!(s.email&&l.passwordHash)&&!f?.length,g=p?y:!1,T={uid:l.localId,displayName:l.displayName||null,photoURL:l.photoUrl||null,email:l.email||null,emailVerified:l.emailVerified||!1,phoneNumber:l.phoneNumber||null,tenantId:l.tenantId||null,providerData:f,metadata:new _m(l.createdAt,l.lastLoginAt),isAnonymous:g};Object.assign(s,T)}async function Tw(s){const e=Pt(s);await sh(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function bw(s,e){return[...s.filter(r=>!e.some(l=>l.providerId===r.providerId)),...e]}function EE(s){return s.map(({providerId:e,...i})=>({providerId:e,uid:i.rawId||"",displayName:i.displayName||null,email:i.email||null,phoneNumber:i.phoneNumber||null,photoURL:i.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Aw(s,e){const i=await _E(s,{},async()=>{const r=Xl({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:l,apiKey:u}=s.config,f=await vE(s,l,"/v1/token",`key=${u}`),p=await s._getAdditionalHeaders();p["Content-Type"]="application/x-www-form-urlencoded";const y={method:"POST",headers:p,body:r};return s.emulatorConfig&&ho(s.emulatorConfig.host)&&(y.credentials="include"),yE.fetch()(f,y)});return{accessToken:i.access_token,expiresIn:i.expires_in,refreshToken:i.refresh_token}}async function Sw(s,e){return dr(s,"POST","/v2/accounts:revokeToken",ds(s,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eo{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){_e(e.idToken,"internal-error"),_e(typeof e.idToken<"u","internal-error"),_e(typeof e.refreshToken<"u","internal-error");const i="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):O0(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,i)}updateFromIdToken(e){_e(e.length!==0,"internal-error");const i=O0(e);this.updateTokensAndExpiration(e,null,i)}async getToken(e,i=!1){return!i&&this.accessToken&&!this.isExpired?this.accessToken:(_e(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,i){const{accessToken:r,refreshToken:l,expiresIn:u}=await Aw(e,i);this.updateTokensAndExpiration(r,l,Number(u))}updateTokensAndExpiration(e,i,r){this.refreshToken=i||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,i){const{refreshToken:r,accessToken:l,expirationTime:u}=i,f=new eo;return r&&(_e(typeof r=="string","internal-error",{appName:e}),f.refreshToken=r),l&&(_e(typeof l=="string","internal-error",{appName:e}),f.accessToken=l),u&&(_e(typeof u=="number","internal-error",{appName:e}),f.expirationTime=u),f}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new eo,this.toJSON())}_performRefresh(){return ss("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xs(s,e){_e(typeof s=="string"||typeof s>"u","internal-error",{appName:e})}class ni{constructor({uid:e,auth:i,stsTokenManager:r,...l}){this.providerId="firebase",this.proactiveRefresh=new Ew(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=i,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=l.displayName||null,this.email=l.email||null,this.emailVerified=l.emailVerified||!1,this.phoneNumber=l.phoneNumber||null,this.photoURL=l.photoURL||null,this.isAnonymous=l.isAnonymous||!1,this.tenantId=l.tenantId||null,this.providerData=l.providerData?[...l.providerData]:[],this.metadata=new _m(l.createdAt||void 0,l.lastLoginAt||void 0)}async getIdToken(e){const i=await Ul(this,this.stsTokenManager.getToken(this.auth,e));return _e(i,this.auth,"internal-error"),this.accessToken!==i&&(this.accessToken=i,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),i}getIdTokenResult(e){return _w(this,e)}reload(){return Tw(this)}_assign(e){this!==e&&(_e(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(i=>({...i})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const i=new ni({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return i.metadata._copy(this.metadata),i}_onReload(e){_e(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,i=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),i&&await sh(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(mn(this.auth.app))return Promise.reject(ii(this.auth));const e=await this.getIdToken();return await Ul(this,yw(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,i){const r=i.displayName??void 0,l=i.email??void 0,u=i.phoneNumber??void 0,f=i.photoURL??void 0,p=i.tenantId??void 0,y=i._redirectEventId??void 0,g=i.createdAt??void 0,T=i.lastLoginAt??void 0,{uid:A,emailVerified:x,isAnonymous:j,providerData:U,stsTokenManager:Q}=i;_e(A&&Q,e,"internal-error");const G=eo.fromJSON(this.name,Q);_e(typeof A=="string",e,"internal-error"),Xs(r,e.name),Xs(l,e.name),_e(typeof x=="boolean",e,"internal-error"),_e(typeof j=="boolean",e,"internal-error"),Xs(u,e.name),Xs(f,e.name),Xs(p,e.name),Xs(y,e.name),Xs(g,e.name),Xs(T,e.name);const te=new ni({uid:A,auth:e,email:l,emailVerified:x,displayName:r,isAnonymous:j,photoURL:f,phoneNumber:u,tenantId:p,stsTokenManager:G,createdAt:g,lastLoginAt:T});return U&&Array.isArray(U)&&(te.providerData=U.map(fe=>({...fe}))),y&&(te._redirectEventId=y),te}static async _fromIdTokenResponse(e,i,r=!1){const l=new eo;l.updateFromServerResponse(i);const u=new ni({uid:i.localId,auth:e,stsTokenManager:l,isAnonymous:r});return await sh(u),u}static async _fromGetAccountInfoResponse(e,i,r){const l=i.users[0];_e(l.localId!==void 0,"internal-error");const u=l.providerUserInfo!==void 0?EE(l.providerUserInfo):[],f=!(l.email&&l.passwordHash)&&!u?.length,p=new eo;p.updateFromIdToken(r);const y=new ni({uid:l.localId,auth:e,stsTokenManager:p,isAnonymous:f}),g={uid:l.localId,displayName:l.displayName||null,photoURL:l.photoUrl||null,email:l.email||null,emailVerified:l.emailVerified||!1,phoneNumber:l.phoneNumber||null,tenantId:l.tenantId||null,providerData:u,metadata:new _m(l.createdAt,l.lastLoginAt),isAnonymous:!(l.email&&l.passwordHash)&&!u?.length};return Object.assign(y,g),y}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const M0=new Map;function rs(s){ls(s instanceof Function,"Expected a class definition");let e=M0.get(s);return e?(ls(e instanceof s,"Instance stored in cache mismatched with class"),e):(e=new s,M0.set(s,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TE{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,i){this.storage[e]=i}async _get(e){const i=this.storage[e];return i===void 0?null:i}async _remove(e){delete this.storage[e]}_addListener(e,i){}_removeListener(e,i){}}TE.type="NONE";const V0=TE;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gc(s,e,i){return`firebase:${s}:${e}:${i}`}class to{constructor(e,i,r){this.persistence=e,this.auth=i,this.userKey=r;const{config:l,name:u}=this.auth;this.fullUserKey=Gc(this.userKey,l.apiKey,u),this.fullPersistenceKey=Gc("persistence",l.apiKey,u),this.boundEventHandler=i._onStorageEvent.bind(i),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const i=await ih(this.auth,{idToken:e}).catch(()=>{});return i?ni._fromGetAccountInfoResponse(this.auth,i,e):null}return ni._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const i=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,i)return this.setCurrentUser(i)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,i,r="authUser"){if(!i.length)return new to(rs(V0),e,r);const l=(await Promise.all(i.map(async g=>{if(await g._isAvailable())return g}))).filter(g=>g);let u=l[0]||rs(V0);const f=Gc(r,e.config.apiKey,e.name);let p=null;for(const g of i)try{const T=await g._get(f);if(T){let A;if(typeof T=="string"){const x=await ih(e,{idToken:T}).catch(()=>{});if(!x)break;A=await ni._fromGetAccountInfoResponse(e,x,T)}else A=ni._fromJSON(e,T);g!==u&&(p=A),u=g;break}}catch{}const y=l.filter(g=>g._shouldAllowMigration);return!u._shouldAllowMigration||!y.length?new to(u,e,r):(u=y[0],p&&await u._set(f,p.toJSON()),await Promise.all(i.map(async g=>{if(g!==u)try{await g._remove(f)}catch{}})),new to(u,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function k0(s){const e=s.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(wE(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(bE(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(RE(e))return"Blackberry";if(IE(e))return"Webos";if(AE(e))return"Safari";if((e.includes("chrome/")||SE(e))&&!e.includes("edge/"))return"Chrome";if(xE(e))return"Android";{const i=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=s.match(i);if(r?.length===2)return r[1]}return"Other"}function bE(s=tn()){return/firefox\//i.test(s)}function AE(s=tn()){const e=s.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function SE(s=tn()){return/crios\//i.test(s)}function wE(s=tn()){return/iemobile/i.test(s)}function xE(s=tn()){return/android/i.test(s)}function RE(s=tn()){return/blackberry/i.test(s)}function IE(s=tn()){return/webos/i.test(s)}function $m(s=tn()){return/iphone|ipad|ipod/i.test(s)||/macintosh/i.test(s)&&/mobile/i.test(s)}function ww(s=tn()){return $m(s)&&!!window.navigator?.standalone}function xw(){return LA()&&document.documentMode===10}function CE(s=tn()){return $m(s)||xE(s)||IE(s)||RE(s)||/windows phone/i.test(s)||wE(s)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NE(s,e=[]){let i;switch(s){case"Browser":i=k0(tn());break;case"Worker":i=`${k0(tn())}-${s}`;break;default:i=s}const r=e.length?e.join(","):"FirebaseCore-web";return`${i}/JsCore/${fo}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rw{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,i){const r=u=>new Promise((f,p)=>{try{const y=e(u);f(y)}catch(y){p(y)}});r.onAbort=i,this.queue.push(r);const l=this.queue.length-1;return()=>{this.queue[l]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const i=[];try{for(const r of this.queue)await r(e),r.onAbort&&i.push(r.onAbort)}catch(r){i.reverse();for(const l of i)try{l()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Iw(s,e={}){return dr(s,"GET","/v2/passwordPolicy",ds(s,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cw=6;class Nw{constructor(e){const i=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=i.minPasswordLength??Cw,i.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=i.maxPasswordLength),i.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=i.containsLowercaseCharacter),i.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=i.containsUppercaseCharacter),i.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=i.containsNumericCharacter),i.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=i.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const i={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,i),this.validatePasswordCharacterOptions(e,i),i.isValid&&(i.isValid=i.meetsMinPasswordLength??!0),i.isValid&&(i.isValid=i.meetsMaxPasswordLength??!0),i.isValid&&(i.isValid=i.containsLowercaseLetter??!0),i.isValid&&(i.isValid=i.containsUppercaseLetter??!0),i.isValid&&(i.isValid=i.containsNumericCharacter??!0),i.isValid&&(i.isValid=i.containsNonAlphanumericCharacter??!0),i}validatePasswordLengthOptions(e,i){const r=this.customStrengthOptions.minPasswordLength,l=this.customStrengthOptions.maxPasswordLength;r&&(i.meetsMinPasswordLength=e.length>=r),l&&(i.meetsMaxPasswordLength=e.length<=l)}validatePasswordCharacterOptions(e,i){this.updatePasswordCharacterOptionsStatuses(i,!1,!1,!1,!1);let r;for(let l=0;l<e.length;l++)r=e.charAt(l),this.updatePasswordCharacterOptionsStatuses(i,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,i,r,l,u){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=i)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=l)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=u))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dw{constructor(e,i,r,l){this.app=e,this.heartbeatServiceProvider=i,this.appCheckServiceProvider=r,this.config=l,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new j0(this),this.idTokenSubscription=new j0(this),this.beforeStateQueue=new Rw(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=pE,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=l.sdkClientVersion,this._persistenceManagerAvailable=new Promise(u=>this._resolvePersistenceManagerAvailable=u)}_initializeWithPersistence(e,i){return i&&(this._popupRedirectResolver=rs(i)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await to.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(i),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const i=await ih(this,{idToken:e}),r=await ni._fromGetAccountInfoResponse(this,i,e);await this.directlySetCurrentUser(r)}catch(i){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",i),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(mn(this.app)){const u=this.app.settings.authIdToken;return u?new Promise(f=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(u).then(f,f))}):this.directlySetCurrentUser(null)}const i=await this.assertedPersistence.getCurrentUser();let r=i,l=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const u=this.redirectUser?._redirectEventId,f=r?._redirectEventId,p=await this.tryRedirectSignIn(e);(!u||u===f)&&p?.user&&(r=p.user,l=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(l)try{await this.beforeStateQueue.runMiddleware(r)}catch(u){r=i,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(u))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return _e(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let i=null;try{i=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return i}async reloadAndSetCurrentUserOrClear(e){try{await sh(e)}catch(i){if(i?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=uw()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(mn(this.app))return Promise.reject(ii(this));const i=e?Pt(e):null;return i&&_e(i.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(i&&i._clone(this))}async _updateCurrentUser(e,i=!1){if(!this._deleted)return e&&_e(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),i||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return mn(this.app)?Promise.reject(ii(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return mn(this.app)?Promise.reject(ii(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(rs(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const i=this._getPasswordPolicyInternal();return i.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):i.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await Iw(this),i=new Nw(e);this.tenantId===null?this._projectPasswordPolicy=i:this._tenantPasswordPolicies[this.tenantId]=i}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Kl("auth","Firebase",e())}onAuthStateChanged(e,i,r){return this.registerStateListener(this.authStateSubscription,e,i,r)}beforeAuthStateChanged(e,i){return this.beforeStateQueue.pushCallback(e,i)}onIdTokenChanged(e,i,r){return this.registerStateListener(this.idTokenSubscription,e,i,r)}authStateReady(){return new Promise((e,i)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},i)}})}async revokeAccessToken(e){if(this.currentUser){const i=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:i};this.tenantId!=null&&(r.tenantId=this.tenantId),await Sw(this,r)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,i){const r=await this.getOrInitRedirectPersistenceManager(i);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const i=e&&rs(e)||this._popupRedirectResolver;_e(i,this,"argument-error"),this.redirectPersistenceManager=await to.create(this,[rs(i._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,i,r,l){if(this._deleted)return()=>{};const u=typeof i=="function"?i:i.next.bind(i);let f=!1;const p=this._isInitialized?Promise.resolve():this._initializationPromise;if(_e(p,this,"internal-error"),p.then(()=>{f||u(this.currentUser)}),typeof i=="function"){const y=e.addObserver(i,r,l);return()=>{f=!0,y()}}else{const y=e.addObserver(i);return()=>{f=!0,y()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return _e(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=NE(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const i=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();i&&(e["X-Firebase-Client"]=i);const r=await this._getAppCheckToken();return r&&(e["X-Firebase-AppCheck"]=r),e}async _getAppCheckToken(){if(mn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&aw(`Error while retrieving App Check token: ${e.error}`),e?.token}}function ms(s){return Pt(s)}class j0{constructor(e){this.auth=e,this.observer=null,this.addObserver=QA(i=>this.observer=i)}get next(){return _e(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ah={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function Ow(s){Ah=s}function DE(s){return Ah.loadJS(s)}function Mw(){return Ah.recaptchaEnterpriseScript}function Vw(){return Ah.gapiScript}function kw(s){return`__${s}${Math.floor(Math.random()*1e6)}`}class jw{constructor(){this.enterprise=new Pw}ready(e){e()}execute(e,i){return Promise.resolve("token")}render(e,i){return""}}class Pw{ready(e){e()}execute(e,i){return Promise.resolve("token")}render(e,i){return""}}const Lw="recaptcha-enterprise",OE="NO_RECAPTCHA";class Uw{constructor(e){this.type=Lw,this.auth=ms(e)}async verify(e="verify",i=!1){async function r(u){if(!i){if(u.tenantId==null&&u._agentRecaptchaConfig!=null)return u._agentRecaptchaConfig.siteKey;if(u.tenantId!=null&&u._tenantRecaptchaConfigs[u.tenantId]!==void 0)return u._tenantRecaptchaConfigs[u.tenantId].siteKey}return new Promise(async(f,p)=>{gw(u,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(y=>{if(y.recaptchaKey===void 0)p(new Error("recaptcha Enterprise site key undefined"));else{const g=new pw(y);return u.tenantId==null?u._agentRecaptchaConfig=g:u._tenantRecaptchaConfigs[u.tenantId]=g,f(g.siteKey)}}).catch(y=>{p(y)})})}function l(u,f,p){const y=window.grecaptcha;D0(y)?y.enterprise.ready(()=>{y.enterprise.execute(u,{action:e}).then(g=>{f(g)}).catch(()=>{f(OE)})}):p(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new jw().execute("siteKey",{action:"verify"}):new Promise((u,f)=>{r(this.auth).then(p=>{if(!i&&D0(window.grecaptcha))l(p,u,f);else{if(typeof window>"u"){f(new Error("RecaptchaVerifier is only supported in browser"));return}let y=Mw();y.length!==0&&(y+=p),DE(y).then(()=>{l(p,u,f)}).catch(g=>{f(g)})}}).catch(p=>{f(p)})})}}async function P0(s,e,i,r=!1,l=!1){const u=new Uw(s);let f;if(l)f=OE;else try{f=await u.verify(i)}catch{f=await u.verify(i,!0)}const p={...e};if(i==="mfaSmsEnrollment"||i==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in p){const y=p.phoneEnrollmentInfo.phoneNumber,g=p.phoneEnrollmentInfo.recaptchaToken;Object.assign(p,{phoneEnrollmentInfo:{phoneNumber:y,recaptchaToken:g,captchaResponse:f,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in p){const y=p.phoneSignInInfo.recaptchaToken;Object.assign(p,{phoneSignInInfo:{recaptchaToken:y,captchaResponse:f,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return p}return r?Object.assign(p,{captchaResp:f}):Object.assign(p,{captchaResponse:f}),Object.assign(p,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(p,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),p}async function vm(s,e,i,r,l){if(s._getRecaptchaConfig()?.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const u=await P0(s,e,i,i==="getOobCode");return r(s,u)}else return r(s,e).catch(async u=>{if(u.code==="auth/missing-recaptcha-token"){console.log(`${i} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const f=await P0(s,e,i,i==="getOobCode");return r(s,f)}else return Promise.reject(u)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zw(s,e){const i=Qm(s,"auth");if(i.isInitialized()){const l=i.getImmediate(),u=i.getOptions();if(Jr(u,e??{}))return l;ri(l,"already-initialized")}return i.initialize({options:e})}function Bw(s,e){const i=e?.persistence||[],r=(Array.isArray(i)?i:[i]).map(rs);e?.errorMap&&s._updateErrorMap(e.errorMap),s._initializeWithPersistence(r,e?.popupRedirectResolver)}function qw(s,e,i){const r=ms(s);_e(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const l=!1,u=ME(e),{host:f,port:p}=Hw(e),y=p===null?"":`:${p}`,g={url:`${u}//${f}${y}/`},T=Object.freeze({host:f,port:p,protocol:u.replace(":",""),options:Object.freeze({disableWarnings:l})});if(!r._canInitEmulator){_e(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),_e(Jr(g,r.config.emulator)&&Jr(T,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=g,r.emulatorConfig=T,r.settings.appVerificationDisabledForTesting=!0,ho(f)?(aE(`${u}//${f}${y}`),oE("Auth",!0)):Fw()}function ME(s){const e=s.indexOf(":");return e<0?"":s.substr(0,e+1)}function Hw(s){const e=ME(s),i=/(\/\/)?([^?#/]+)/.exec(s.substr(e.length));if(!i)return{host:"",port:null};const r=i[2].split("@").pop()||"",l=/^(\[[^\]]+\])(:|$)/.exec(r);if(l){const u=l[1];return{host:u,port:L0(r.substr(u.length+1))}}else{const[u,f]=r.split(":");return{host:u,port:L0(f)}}}function L0(s){if(!s)return null;const e=Number(s);return isNaN(e)?null:e}function Fw(){function s(){const e=document.createElement("p"),i=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",i.position="fixed",i.width="100%",i.backgroundColor="#ffffff",i.border=".1em solid #000000",i.color="#b50000",i.bottom="0px",i.left="0px",i.margin="0px",i.zIndex="10000",i.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",s):s())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jm{constructor(e,i){this.providerId=e,this.signInMethod=i}toJSON(){return ss("not implemented")}_getIdTokenResponse(e){return ss("not implemented")}_linkToIdToken(e,i){return ss("not implemented")}_getReauthenticationResolver(e){return ss("not implemented")}}async function Gw(s,e){return dr(s,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Qw(s,e){return mo(s,"POST","/v1/accounts:signInWithPassword",ds(s,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Yw(s,e){return mo(s,"POST","/v1/accounts:signInWithEmailLink",ds(s,e))}async function Kw(s,e){return mo(s,"POST","/v1/accounts:signInWithEmailLink",ds(s,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zl extends Jm{constructor(e,i,r,l=null){super("password",r),this._email=e,this._password=i,this._tenantId=l}static _fromEmailAndPassword(e,i){return new zl(e,i,"password")}static _fromEmailAndCode(e,i,r=null){return new zl(e,i,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const i=typeof e=="string"?JSON.parse(e):e;if(i?.email&&i?.password){if(i.signInMethod==="password")return this._fromEmailAndPassword(i.email,i.password);if(i.signInMethod==="emailLink")return this._fromEmailAndCode(i.email,i.password,i.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const i={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return vm(e,i,"signInWithPassword",Qw);case"emailLink":return Yw(e,{email:this._email,oobCode:this._password});default:ri(e,"internal-error")}}async _linkToIdToken(e,i){switch(this.signInMethod){case"password":const r={idToken:i,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return vm(e,r,"signUpPassword",Gw);case"emailLink":return Kw(e,{idToken:i,email:this._email,oobCode:this._password});default:ri(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function no(s,e){return mo(s,"POST","/v1/accounts:signInWithIdp",ds(s,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xw="http://localhost";class Wr extends Jm{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const i=new Wr(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(i.idToken=e.idToken),e.accessToken&&(i.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(i.nonce=e.nonce),e.pendingToken&&(i.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(i.accessToken=e.oauthToken,i.secret=e.oauthTokenSecret):ri("argument-error"),i}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const i=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:l,...u}=i;if(!r||!l)return null;const f=new Wr(r,l);return f.idToken=u.idToken||void 0,f.accessToken=u.accessToken||void 0,f.secret=u.secret,f.nonce=u.nonce,f.pendingToken=u.pendingToken||null,f}_getIdTokenResponse(e){const i=this.buildRequest();return no(e,i)}_linkToIdToken(e,i){const r=this.buildRequest();return r.idToken=i,no(e,r)}_getReauthenticationResolver(e){const i=this.buildRequest();return i.autoCreate=!1,no(e,i)}buildRequest(){const e={requestUri:Xw,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const i={};this.idToken&&(i.id_token=this.idToken),this.accessToken&&(i.access_token=this.accessToken),this.secret&&(i.oauth_token_secret=this.secret),i.providerId=this.providerId,this.nonce&&!this.pendingToken&&(i.nonce=this.nonce),e.postBody=Xl(i)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $w(s){switch(s){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function Jw(s){const e=xl(Rl(s)).link,i=e?xl(Rl(e)).deep_link_id:null,r=xl(Rl(s)).deep_link_id;return(r?xl(Rl(r)).link:null)||r||i||e||s}class Zm{constructor(e){const i=xl(Rl(e)),r=i.apiKey??null,l=i.oobCode??null,u=$w(i.mode??null);_e(r&&l&&u,"argument-error"),this.apiKey=r,this.operation=u,this.code=l,this.continueUrl=i.continueUrl??null,this.languageCode=i.lang??null,this.tenantId=i.tenantId??null}static parseLink(e){const i=Jw(e);try{return new Zm(i)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class po{constructor(){this.providerId=po.PROVIDER_ID}static credential(e,i){return zl._fromEmailAndPassword(e,i)}static credentialWithLink(e,i){const r=Zm.parseLink(i);return _e(r,"argument-error"),zl._fromEmailAndCode(e,r.code,r.tenantId)}}po.PROVIDER_ID="password";po.EMAIL_PASSWORD_SIGN_IN_METHOD="password";po.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VE{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jl extends VE{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $s extends Jl{constructor(){super("facebook.com")}static credential(e){return Wr._fromParams({providerId:$s.PROVIDER_ID,signInMethod:$s.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return $s.credentialFromTaggedObject(e)}static credentialFromError(e){return $s.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return $s.credential(e.oauthAccessToken)}catch{return null}}}$s.FACEBOOK_SIGN_IN_METHOD="facebook.com";$s.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Js extends Jl{constructor(){super("google.com"),this.addScope("profile")}static credential(e,i){return Wr._fromParams({providerId:Js.PROVIDER_ID,signInMethod:Js.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:i})}static credentialFromResult(e){return Js.credentialFromTaggedObject(e)}static credentialFromError(e){return Js.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:i,oauthAccessToken:r}=e;if(!i&&!r)return null;try{return Js.credential(i,r)}catch{return null}}}Js.GOOGLE_SIGN_IN_METHOD="google.com";Js.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zs extends Jl{constructor(){super("github.com")}static credential(e){return Wr._fromParams({providerId:Zs.PROVIDER_ID,signInMethod:Zs.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Zs.credentialFromTaggedObject(e)}static credentialFromError(e){return Zs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Zs.credential(e.oauthAccessToken)}catch{return null}}}Zs.GITHUB_SIGN_IN_METHOD="github.com";Zs.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ws extends Jl{constructor(){super("twitter.com")}static credential(e,i){return Wr._fromParams({providerId:Ws.PROVIDER_ID,signInMethod:Ws.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:i})}static credentialFromResult(e){return Ws.credentialFromTaggedObject(e)}static credentialFromError(e){return Ws.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:i,oauthTokenSecret:r}=e;if(!i||!r)return null;try{return Ws.credential(i,r)}catch{return null}}}Ws.TWITTER_SIGN_IN_METHOD="twitter.com";Ws.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function kE(s,e){return mo(s,"POST","/v1/accounts:signUp",ds(s,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ji{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,i,r,l=!1){const u=await ni._fromIdTokenResponse(e,r,l),f=U0(r);return new ji({user:u,providerId:f,_tokenResponse:r,operationType:i})}static async _forOperation(e,i,r){await e._updateTokensIfNecessary(r,!0);const l=U0(r);return new ji({user:e,providerId:l,_tokenResponse:r,operationType:i})}}function U0(s){return s.providerId?s.providerId:"phoneNumber"in s?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Zw(s){if(mn(s.app))return Promise.reject(ii(s));const e=ms(s);if(await e._initializationPromise,e.currentUser?.isAnonymous)return new ji({user:e.currentUser,providerId:null,operationType:"signIn"});const i=await kE(e,{returnSecureToken:!0}),r=await ji._fromIdTokenResponse(e,"signIn",i,!0);return await e._updateCurrentUser(r.user),r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rh extends fs{constructor(e,i,r,l){super(i.code,i.message),this.operationType=r,this.user=l,Object.setPrototypeOf(this,rh.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:i.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,i,r,l){return new rh(e,i,r,l)}}function jE(s,e,i,r){return(e==="reauthenticate"?i._getReauthenticationResolver(s):i._getIdTokenResponse(s)).catch(u=>{throw u.code==="auth/multi-factor-auth-required"?rh._fromErrorAndOperation(s,u,e,r):u})}async function Ww(s,e,i=!1){const r=await Ul(s,e._linkToIdToken(s.auth,await s.getIdToken()),i);return ji._forOperation(s,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function e2(s,e,i=!1){const{auth:r}=s;if(mn(r.app))return Promise.reject(ii(r));const l="reauthenticate";try{const u=await Ul(s,jE(r,l,e,s),i);_e(u.idToken,r,"internal-error");const f=Xm(u.idToken);_e(f,r,"internal-error");const{sub:p}=f;return _e(s.uid===p,r,"user-mismatch"),ji._forOperation(s,l,u)}catch(u){throw u?.code==="auth/user-not-found"&&ri(r,"user-mismatch"),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function PE(s,e,i=!1){if(mn(s.app))return Promise.reject(ii(s));const r="signIn",l=await jE(s,r,e),u=await ji._fromIdTokenResponse(s,r,l);return i||await s._updateCurrentUser(u.user),u}async function t2(s,e){return PE(ms(s),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function n2(s,e){return mo(s,"POST","/v1/accounts:signInWithCustomToken",ds(s,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function i2(s,e){if(mn(s.app))return Promise.reject(ii(s));const i=ms(s),r=await n2(i,{token:e,returnSecureToken:!0}),l=await ji._fromIdTokenResponse(i,"signIn",r);return await i._updateCurrentUser(l.user),l}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function LE(s){const e=ms(s);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function s2(s,e,i){if(mn(s.app))return Promise.reject(ii(s));const r=ms(s),f=await vm(r,{returnSecureToken:!0,email:e,password:i,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",kE).catch(y=>{throw y.code==="auth/password-does-not-meet-requirements"&&LE(s),y}),p=await ji._fromIdTokenResponse(r,"signIn",f);return await r._updateCurrentUser(p.user),p}function r2(s,e,i){return mn(s.app)?Promise.reject(ii(s)):t2(Pt(s),po.credential(e,i)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&LE(s),r})}function a2(s,e,i,r){return Pt(s).onIdTokenChanged(e,i,r)}function o2(s,e,i){return Pt(s).beforeAuthStateChanged(e,i)}function l2(s,e,i,r){return Pt(s).onAuthStateChanged(e,i,r)}function u2(s){return Pt(s).signOut()}const ah="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UE{constructor(e,i){this.storageRetriever=e,this.type=i}_isAvailable(){try{return this.storage?(this.storage.setItem(ah,"1"),this.storage.removeItem(ah),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,i){return this.storage.setItem(e,JSON.stringify(i)),Promise.resolve()}_get(e){const i=this.storage.getItem(e);return Promise.resolve(i?JSON.parse(i):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const c2=1e3,h2=10;class zE extends UE{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,i)=>this.onStorageEvent(e,i),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=CE(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const i of Object.keys(this.listeners)){const r=this.storage.getItem(i),l=this.localCache[i];r!==l&&e(i,l,r)}}onStorageEvent(e,i=!1){if(!e.key){this.forAllChangedKeys((f,p,y)=>{this.notifyListeners(f,y)});return}const r=e.key;i?this.detachListener():this.stopPolling();const l=()=>{const f=this.storage.getItem(r);!i&&this.localCache[r]===f||this.notifyListeners(r,f)},u=this.storage.getItem(r);xw()&&u!==e.newValue&&e.newValue!==e.oldValue?setTimeout(l,h2):l()}notifyListeners(e,i){this.localCache[e]=i;const r=this.listeners[e];if(r)for(const l of Array.from(r))l(i&&JSON.parse(i))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,i,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:i,newValue:r}),!0)})},c2)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,i){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(i)}_removeListener(e,i){this.listeners[e]&&(this.listeners[e].delete(i),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,i){await super._set(e,i),this.localCache[e]=JSON.stringify(i)}async _get(e){const i=await super._get(e);return this.localCache[e]=JSON.stringify(i),i}async _remove(e){await super._remove(e),delete this.localCache[e]}}zE.type="LOCAL";const f2=zE;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BE extends UE{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,i){}_removeListener(e,i){}}BE.type="SESSION";const qE=BE;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function d2(s){return Promise.all(s.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(i){return{fulfilled:!1,reason:i}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sh{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const i=this.receivers.find(l=>l.isListeningto(e));if(i)return i;const r=new Sh(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const i=e,{eventId:r,eventType:l,data:u}=i.data,f=this.handlersMap[l];if(!f?.size)return;i.ports[0].postMessage({status:"ack",eventId:r,eventType:l});const p=Array.from(f).map(async g=>g(i.origin,u)),y=await d2(p);i.ports[0].postMessage({status:"done",eventId:r,eventType:l,response:y})}_subscribe(e,i){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(i)}_unsubscribe(e,i){this.handlersMap[e]&&i&&this.handlersMap[e].delete(i),(!i||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Sh.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wm(s="",e=10){let i="";for(let r=0;r<e;r++)i+=Math.floor(Math.random()*10);return s+i}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m2{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,i,r=50){const l=typeof MessageChannel<"u"?new MessageChannel:null;if(!l)throw new Error("connection_unavailable");let u,f;return new Promise((p,y)=>{const g=Wm("",20);l.port1.start();const T=setTimeout(()=>{y(new Error("unsupported_event"))},r);f={messageChannel:l,onMessage(A){const x=A;if(x.data.eventId===g)switch(x.data.status){case"ack":clearTimeout(T),u=setTimeout(()=>{y(new Error("timeout"))},3e3);break;case"done":clearTimeout(u),p(x.data.response);break;default:clearTimeout(T),clearTimeout(u),y(new Error("invalid_response"));break}}},this.handlers.add(f),l.port1.addEventListener("message",f.onMessage),this.target.postMessage({eventType:e,eventId:g,data:i},[l.port2])}).finally(()=>{f&&this.removeMessageHandler(f)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Di(){return window}function p2(s){Di().location.href=s}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HE(){return typeof Di().WorkerGlobalScope<"u"&&typeof Di().importScripts=="function"}async function g2(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function y2(){return navigator?.serviceWorker?.controller||null}function _2(){return HE()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FE="firebaseLocalStorageDb",v2=1,oh="firebaseLocalStorage",GE="fbase_key";class Zl{constructor(e){this.request=e}toPromise(){return new Promise((e,i)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{i(this.request.error)})})}}function wh(s,e){return s.transaction([oh],e?"readwrite":"readonly").objectStore(oh)}function E2(){const s=indexedDB.deleteDatabase(FE);return new Zl(s).toPromise()}function Em(){const s=indexedDB.open(FE,v2);return new Promise((e,i)=>{s.addEventListener("error",()=>{i(s.error)}),s.addEventListener("upgradeneeded",()=>{const r=s.result;try{r.createObjectStore(oh,{keyPath:GE})}catch(l){i(l)}}),s.addEventListener("success",async()=>{const r=s.result;r.objectStoreNames.contains(oh)?e(r):(r.close(),await E2(),e(await Em()))})})}async function z0(s,e,i){const r=wh(s,!0).put({[GE]:e,value:i});return new Zl(r).toPromise()}async function T2(s,e){const i=wh(s,!1).get(e),r=await new Zl(i).toPromise();return r===void 0?null:r.value}function B0(s,e){const i=wh(s,!0).delete(e);return new Zl(i).toPromise()}const b2=800,A2=3;class QE{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Em(),this.db)}async _withRetries(e){let i=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(i++>A2)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return HE()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Sh._getInstance(_2()),this.receiver._subscribe("keyChanged",async(e,i)=>({keyProcessed:(await this._poll()).includes(i.key)})),this.receiver._subscribe("ping",async(e,i)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await g2(),!this.activeServiceWorker)return;this.sender=new m2(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&e[0]?.fulfilled&&e[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||y2()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Em();return await z0(e,ah,"1"),await B0(e,ah),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,i){return this._withPendingWrite(async()=>(await this._withRetries(r=>z0(r,e,i)),this.localCache[e]=i,this.notifyServiceWorker(e)))}async _get(e){const i=await this._withRetries(r=>T2(r,e));return this.localCache[e]=i,i}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(i=>B0(i,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(l=>{const u=wh(l,!1).getAll();return new Zl(u).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const i=[],r=new Set;if(e.length!==0)for(const{fbase_key:l,value:u}of e)r.add(l),JSON.stringify(this.localCache[l])!==JSON.stringify(u)&&(this.notifyListeners(l,u),i.push(l));for(const l of Object.keys(this.localCache))this.localCache[l]&&!r.has(l)&&(this.notifyListeners(l,null),i.push(l));return i}notifyListeners(e,i){this.localCache[e]=i;const r=this.listeners[e];if(r)for(const l of Array.from(r))l(i)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),b2)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,i){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(i)}_removeListener(e,i){this.listeners[e]&&(this.listeners[e].delete(i),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}QE.type="LOCAL";const S2=QE;new $l(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function w2(s,e){return e?rs(e):(_e(s._popupRedirectResolver,s,"argument-error"),s._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ep extends Jm{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return no(e,this._buildIdpRequest())}_linkToIdToken(e,i){return no(e,this._buildIdpRequest(i))}_getReauthenticationResolver(e){return no(e,this._buildIdpRequest())}_buildIdpRequest(e){const i={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(i.idToken=e),i}}function x2(s){return PE(s.auth,new ep(s),s.bypassAuthState)}function R2(s){const{auth:e,user:i}=s;return _e(i,e,"internal-error"),e2(i,new ep(s),s.bypassAuthState)}async function I2(s){const{auth:e,user:i}=s;return _e(i,e,"internal-error"),Ww(i,new ep(s),s.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YE{constructor(e,i,r,l,u=!1){this.auth=e,this.resolver=r,this.user=l,this.bypassAuthState=u,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(i)?i:[i]}execute(){return new Promise(async(e,i)=>{this.pendingPromise={resolve:e,reject:i};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:i,sessionId:r,postBody:l,tenantId:u,error:f,type:p}=e;if(f){this.reject(f);return}const y={auth:this.auth,requestUri:i,sessionId:r,tenantId:u||void 0,postBody:l||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(p)(y))}catch(g){this.reject(g)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return x2;case"linkViaPopup":case"linkViaRedirect":return I2;case"reauthViaPopup":case"reauthViaRedirect":return R2;default:ri(this.auth,"internal-error")}}resolve(e){ls(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){ls(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const C2=new $l(2e3,1e4);class Za extends YE{constructor(e,i,r,l,u){super(e,i,l,u),this.provider=r,this.authWindow=null,this.pollId=null,Za.currentPopupAction&&Za.currentPopupAction.cancel(),Za.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return _e(e,this.auth,"internal-error"),e}async onExecution(){ls(this.filter.length===1,"Popup operations only handle one event");const e=Wm();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(i=>{this.reject(i)}),this.resolver._isIframeWebStorageSupported(this.auth,i=>{i||this.reject(Ni(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(Ni(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Za.currentPopupAction=null}pollUserCancellation(){const e=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Ni(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,C2.get())};e()}}Za.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const N2="pendingRedirect",Qc=new Map;class D2 extends YE{constructor(e,i,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],i,void 0,r),this.eventId=null}async execute(){let e=Qc.get(this.auth._key());if(!e){try{const r=await O2(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(i){e=()=>Promise.reject(i)}Qc.set(this.auth._key(),e)}return this.bypassAuthState||Qc.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const i=await this.auth._redirectUserForId(e.eventId);if(i)return this.user=i,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function O2(s,e){const i=k2(e),r=V2(s);if(!await r._isAvailable())return!1;const l=await r._get(i)==="true";return await r._remove(i),l}function M2(s,e){Qc.set(s._key(),e)}function V2(s){return rs(s._redirectPersistence)}function k2(s){return Gc(N2,s.config.apiKey,s.name)}async function j2(s,e,i=!1){if(mn(s.app))return Promise.reject(ii(s));const r=ms(s),l=w2(r,e),f=await new D2(r,l,i).execute();return f&&!i&&(delete f.user._redirectEventId,await r._persistUserIfCurrent(f.user),await r._setRedirectUser(null,e)),f}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const P2=600*1e3;class L2{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let i=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(i=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!U2(e)||(this.hasHandledPotentialRedirect=!0,i||(this.queuedRedirectEvent=e,i=!0)),i}sendToConsumer(e,i){if(e.error&&!KE(e)){const r=e.error.code?.split("auth/")[1]||"internal-error";i.onError(Ni(this.auth,r))}else i.onAuthEvent(e)}isEventForConsumer(e,i){const r=i.eventId===null||!!e.eventId&&e.eventId===i.eventId;return i.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=P2&&this.cachedEventUids.clear(),this.cachedEventUids.has(q0(e))}saveEventToCache(e){this.cachedEventUids.add(q0(e)),this.lastProcessedEventTime=Date.now()}}function q0(s){return[s.type,s.eventId,s.sessionId,s.tenantId].filter(e=>e).join("-")}function KE({type:s,error:e}){return s==="unknown"&&e?.code==="auth/no-auth-event"}function U2(s){switch(s.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return KE(s);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function z2(s,e={}){return dr(s,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const B2=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,q2=/^https?/;async function H2(s){if(s.config.emulator)return;const{authorizedDomains:e}=await z2(s);for(const i of e)try{if(F2(i))return}catch{}ri(s,"unauthorized-domain")}function F2(s){const e=ym(),{protocol:i,hostname:r}=new URL(e);if(s.startsWith("chrome-extension://")){const f=new URL(s);return f.hostname===""&&r===""?i==="chrome-extension:"&&s.replace("chrome-extension://","")===e.replace("chrome-extension://",""):i==="chrome-extension:"&&f.hostname===r}if(!q2.test(i))return!1;if(B2.test(s))return r===s;const l=s.replace(/\./g,"\\.");return new RegExp("^(.+\\."+l+"|"+l+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const G2=new $l(3e4,6e4);function H0(){const s=Di().___jsl;if(s?.H){for(const e of Object.keys(s.H))if(s.H[e].r=s.H[e].r||[],s.H[e].L=s.H[e].L||[],s.H[e].r=[...s.H[e].L],s.CP)for(let i=0;i<s.CP.length;i++)s.CP[i]=null}}function Q2(s){return new Promise((e,i)=>{function r(){H0(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{H0(),i(Ni(s,"network-request-failed"))},timeout:G2.get()})}if(Di().gapi?.iframes?.Iframe)e(gapi.iframes.getContext());else if(Di().gapi?.load)r();else{const l=kw("iframefcb");return Di()[l]=()=>{gapi.load?r():i(Ni(s,"network-request-failed"))},DE(`${Vw()}?onload=${l}`).catch(u=>i(u))}}).catch(e=>{throw Yc=null,e})}let Yc=null;function Y2(s){return Yc=Yc||Q2(s),Yc}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const K2=new $l(5e3,15e3),X2="__/auth/iframe",$2="emulator/auth/iframe",J2={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Z2=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function W2(s){const e=s.config;_e(e.authDomain,s,"auth-domain-config-required");const i=e.emulator?Km(e,$2):`https://${s.config.authDomain}/${X2}`,r={apiKey:e.apiKey,appName:s.name,v:fo},l=Z2.get(s.config.apiHost);l&&(r.eid=l);const u=s._getFrameworks();return u.length&&(r.fw=u.join(",")),`${i}?${Xl(r).slice(1)}`}async function ex(s){const e=await Y2(s),i=Di().gapi;return _e(i,s,"internal-error"),e.open({where:document.body,url:W2(s),messageHandlersFilter:i.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:J2,dontclear:!0},r=>new Promise(async(l,u)=>{await r.restyle({setHideOnLeave:!1});const f=Ni(s,"network-request-failed"),p=Di().setTimeout(()=>{u(f)},K2.get());function y(){Di().clearTimeout(p),l(r)}r.ping(y).then(y,()=>{u(f)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tx={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},nx=500,ix=600,sx="_blank",rx="http://localhost";class F0{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function ax(s,e,i,r=nx,l=ix){const u=Math.max((window.screen.availHeight-l)/2,0).toString(),f=Math.max((window.screen.availWidth-r)/2,0).toString();let p="";const y={...tx,width:r.toString(),height:l.toString(),top:u,left:f},g=tn().toLowerCase();i&&(p=SE(g)?sx:i),bE(g)&&(e=e||rx,y.scrollbars="yes");const T=Object.entries(y).reduce((x,[j,U])=>`${x}${j}=${U},`,"");if(ww(g)&&p!=="_self")return ox(e||"",p),new F0(null);const A=window.open(e||"",p,T);_e(A,s,"popup-blocked");try{A.focus()}catch{}return new F0(A)}function ox(s,e){const i=document.createElement("a");i.href=s,i.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),i.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lx="__/auth/handler",ux="emulator/auth/handler",cx=encodeURIComponent("fac");async function G0(s,e,i,r,l,u){_e(s.config.authDomain,s,"auth-domain-config-required"),_e(s.config.apiKey,s,"invalid-api-key");const f={apiKey:s.config.apiKey,appName:s.name,authType:i,redirectUrl:r,v:fo,eventId:l};if(e instanceof VE){e.setDefaultLanguage(s.languageCode),f.providerId=e.providerId||"",GA(e.getCustomParameters())||(f.customParameters=JSON.stringify(e.getCustomParameters()));for(const[T,A]of Object.entries({}))f[T]=A}if(e instanceof Jl){const T=e.getScopes().filter(A=>A!=="");T.length>0&&(f.scopes=T.join(","))}s.tenantId&&(f.tid=s.tenantId);const p=f;for(const T of Object.keys(p))p[T]===void 0&&delete p[T];const y=await s._getAppCheckToken(),g=y?`#${cx}=${encodeURIComponent(y)}`:"";return`${hx(s)}?${Xl(p).slice(1)}${g}`}function hx({config:s}){return s.emulator?Km(s,ux):`https://${s.authDomain}/${lx}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rm="webStorageSupport";class fx{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=qE,this._completeRedirectFn=j2,this._overrideRedirectResult=M2}async _openPopup(e,i,r,l){ls(this.eventManagers[e._key()]?.manager,"_initialize() not called before _openPopup()");const u=await G0(e,i,r,ym(),l);return ax(e,u,Wm())}async _openRedirect(e,i,r,l){await this._originValidation(e);const u=await G0(e,i,r,ym(),l);return p2(u),new Promise(()=>{})}_initialize(e){const i=e._key();if(this.eventManagers[i]){const{manager:l,promise:u}=this.eventManagers[i];return l?Promise.resolve(l):(ls(u,"If manager is not set, promise should be"),u)}const r=this.initAndGetManager(e);return this.eventManagers[i]={promise:r},r.catch(()=>{delete this.eventManagers[i]}),r}async initAndGetManager(e){const i=await ex(e),r=new L2(e);return i.register("authEvent",l=>(_e(l?.authEvent,e,"invalid-auth-event"),{status:r.onEvent(l.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=i,r}_isIframeWebStorageSupported(e,i){this.iframes[e._key()].send(rm,{type:rm},l=>{const u=l?.[0]?.[rm];u!==void 0&&i(!!u),ri(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const i=e._key();return this.originValidationPromises[i]||(this.originValidationPromises[i]=H2(e)),this.originValidationPromises[i]}get _shouldInitProactively(){return CE()||AE()||$m()}}const dx=fx;var Q0="@firebase/auth",Y0="1.11.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mx{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const i=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,i),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const i=this.internalListeners.get(e);i&&(this.internalListeners.delete(e),i(),this.updateProactiveRefresh())}assertAuthConfigured(){_e(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function px(s){switch(s){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function gx(s){so(new Zr("auth",(e,{options:i})=>{const r=e.getProvider("app").getImmediate(),l=e.getProvider("heartbeat"),u=e.getProvider("app-check-internal"),{apiKey:f,authDomain:p}=r.options;_e(f&&!f.includes(":"),"invalid-api-key",{appName:r.name});const y={apiKey:f,authDomain:p,clientPlatform:s,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:NE(s)},g=new Dw(r,l,u,y);return Bw(g,i),g},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,i,r)=>{e.getProvider("auth-internal").initialize()})),so(new Zr("auth-internal",e=>{const i=ms(e.getProvider("auth").getImmediate());return(r=>new mx(r))(i)},"PRIVATE").setInstantiationMode("EXPLICIT")),ir(Q0,Y0,px(s)),ir(Q0,Y0,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yx=300,_x=rE("authIdTokenMaxAge")||yx;let K0=null;const vx=s=>async e=>{const i=e&&await e.getIdTokenResult(),r=i&&(new Date().getTime()-Date.parse(i.issuedAtTime))/1e3;if(r&&r>_x)return;const l=i?.token;K0!==l&&(K0=l,await fetch(s,{method:l?"POST":"DELETE",headers:l?{Authorization:`Bearer ${l}`}:{}}))};function Ex(s=hE()){const e=Qm(s,"auth");if(e.isInitialized())return e.getImmediate();const i=zw(s,{popupRedirectResolver:dx,persistence:[S2,f2,qE]}),r=rE("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const u=new URL(r,location.origin);if(location.origin===u.origin){const f=vx(u.toString());o2(i,f,()=>f(i.currentUser)),a2(i,p=>f(p))}}const l=iE("auth");return l&&qw(i,`http://${l}`),i}function Tx(){return document.getElementsByTagName("head")?.[0]??document}Ow({loadJS(s){return new Promise((e,i)=>{const r=document.createElement("script");r.setAttribute("src",s),r.onload=e,r.onerror=l=>{const u=Ni("internal-error");u.customData=l,i(u)},r.type="text/javascript",r.charset="UTF-8",Tx().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});gx("Browser");var X0=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var sr,XE;(function(){var s;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(N,w){function I(){}I.prototype=w.prototype,N.F=w.prototype,N.prototype=new I,N.prototype.constructor=N,N.D=function(V,D,k){for(var R=Array(arguments.length-2),be=2;be<arguments.length;be++)R[be-2]=arguments[be];return w.prototype[D].apply(V,R)}}function i(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(r,i),r.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function l(N,w,I){I||(I=0);const V=Array(16);if(typeof w=="string")for(var D=0;D<16;++D)V[D]=w.charCodeAt(I++)|w.charCodeAt(I++)<<8|w.charCodeAt(I++)<<16|w.charCodeAt(I++)<<24;else for(D=0;D<16;++D)V[D]=w[I++]|w[I++]<<8|w[I++]<<16|w[I++]<<24;w=N.g[0],I=N.g[1],D=N.g[2];let k=N.g[3],R;R=w+(k^I&(D^k))+V[0]+3614090360&4294967295,w=I+(R<<7&4294967295|R>>>25),R=k+(D^w&(I^D))+V[1]+3905402710&4294967295,k=w+(R<<12&4294967295|R>>>20),R=D+(I^k&(w^I))+V[2]+606105819&4294967295,D=k+(R<<17&4294967295|R>>>15),R=I+(w^D&(k^w))+V[3]+3250441966&4294967295,I=D+(R<<22&4294967295|R>>>10),R=w+(k^I&(D^k))+V[4]+4118548399&4294967295,w=I+(R<<7&4294967295|R>>>25),R=k+(D^w&(I^D))+V[5]+1200080426&4294967295,k=w+(R<<12&4294967295|R>>>20),R=D+(I^k&(w^I))+V[6]+2821735955&4294967295,D=k+(R<<17&4294967295|R>>>15),R=I+(w^D&(k^w))+V[7]+4249261313&4294967295,I=D+(R<<22&4294967295|R>>>10),R=w+(k^I&(D^k))+V[8]+1770035416&4294967295,w=I+(R<<7&4294967295|R>>>25),R=k+(D^w&(I^D))+V[9]+2336552879&4294967295,k=w+(R<<12&4294967295|R>>>20),R=D+(I^k&(w^I))+V[10]+4294925233&4294967295,D=k+(R<<17&4294967295|R>>>15),R=I+(w^D&(k^w))+V[11]+2304563134&4294967295,I=D+(R<<22&4294967295|R>>>10),R=w+(k^I&(D^k))+V[12]+1804603682&4294967295,w=I+(R<<7&4294967295|R>>>25),R=k+(D^w&(I^D))+V[13]+4254626195&4294967295,k=w+(R<<12&4294967295|R>>>20),R=D+(I^k&(w^I))+V[14]+2792965006&4294967295,D=k+(R<<17&4294967295|R>>>15),R=I+(w^D&(k^w))+V[15]+1236535329&4294967295,I=D+(R<<22&4294967295|R>>>10),R=w+(D^k&(I^D))+V[1]+4129170786&4294967295,w=I+(R<<5&4294967295|R>>>27),R=k+(I^D&(w^I))+V[6]+3225465664&4294967295,k=w+(R<<9&4294967295|R>>>23),R=D+(w^I&(k^w))+V[11]+643717713&4294967295,D=k+(R<<14&4294967295|R>>>18),R=I+(k^w&(D^k))+V[0]+3921069994&4294967295,I=D+(R<<20&4294967295|R>>>12),R=w+(D^k&(I^D))+V[5]+3593408605&4294967295,w=I+(R<<5&4294967295|R>>>27),R=k+(I^D&(w^I))+V[10]+38016083&4294967295,k=w+(R<<9&4294967295|R>>>23),R=D+(w^I&(k^w))+V[15]+3634488961&4294967295,D=k+(R<<14&4294967295|R>>>18),R=I+(k^w&(D^k))+V[4]+3889429448&4294967295,I=D+(R<<20&4294967295|R>>>12),R=w+(D^k&(I^D))+V[9]+568446438&4294967295,w=I+(R<<5&4294967295|R>>>27),R=k+(I^D&(w^I))+V[14]+3275163606&4294967295,k=w+(R<<9&4294967295|R>>>23),R=D+(w^I&(k^w))+V[3]+4107603335&4294967295,D=k+(R<<14&4294967295|R>>>18),R=I+(k^w&(D^k))+V[8]+1163531501&4294967295,I=D+(R<<20&4294967295|R>>>12),R=w+(D^k&(I^D))+V[13]+2850285829&4294967295,w=I+(R<<5&4294967295|R>>>27),R=k+(I^D&(w^I))+V[2]+4243563512&4294967295,k=w+(R<<9&4294967295|R>>>23),R=D+(w^I&(k^w))+V[7]+1735328473&4294967295,D=k+(R<<14&4294967295|R>>>18),R=I+(k^w&(D^k))+V[12]+2368359562&4294967295,I=D+(R<<20&4294967295|R>>>12),R=w+(I^D^k)+V[5]+4294588738&4294967295,w=I+(R<<4&4294967295|R>>>28),R=k+(w^I^D)+V[8]+2272392833&4294967295,k=w+(R<<11&4294967295|R>>>21),R=D+(k^w^I)+V[11]+1839030562&4294967295,D=k+(R<<16&4294967295|R>>>16),R=I+(D^k^w)+V[14]+4259657740&4294967295,I=D+(R<<23&4294967295|R>>>9),R=w+(I^D^k)+V[1]+2763975236&4294967295,w=I+(R<<4&4294967295|R>>>28),R=k+(w^I^D)+V[4]+1272893353&4294967295,k=w+(R<<11&4294967295|R>>>21),R=D+(k^w^I)+V[7]+4139469664&4294967295,D=k+(R<<16&4294967295|R>>>16),R=I+(D^k^w)+V[10]+3200236656&4294967295,I=D+(R<<23&4294967295|R>>>9),R=w+(I^D^k)+V[13]+681279174&4294967295,w=I+(R<<4&4294967295|R>>>28),R=k+(w^I^D)+V[0]+3936430074&4294967295,k=w+(R<<11&4294967295|R>>>21),R=D+(k^w^I)+V[3]+3572445317&4294967295,D=k+(R<<16&4294967295|R>>>16),R=I+(D^k^w)+V[6]+76029189&4294967295,I=D+(R<<23&4294967295|R>>>9),R=w+(I^D^k)+V[9]+3654602809&4294967295,w=I+(R<<4&4294967295|R>>>28),R=k+(w^I^D)+V[12]+3873151461&4294967295,k=w+(R<<11&4294967295|R>>>21),R=D+(k^w^I)+V[15]+530742520&4294967295,D=k+(R<<16&4294967295|R>>>16),R=I+(D^k^w)+V[2]+3299628645&4294967295,I=D+(R<<23&4294967295|R>>>9),R=w+(D^(I|~k))+V[0]+4096336452&4294967295,w=I+(R<<6&4294967295|R>>>26),R=k+(I^(w|~D))+V[7]+1126891415&4294967295,k=w+(R<<10&4294967295|R>>>22),R=D+(w^(k|~I))+V[14]+2878612391&4294967295,D=k+(R<<15&4294967295|R>>>17),R=I+(k^(D|~w))+V[5]+4237533241&4294967295,I=D+(R<<21&4294967295|R>>>11),R=w+(D^(I|~k))+V[12]+1700485571&4294967295,w=I+(R<<6&4294967295|R>>>26),R=k+(I^(w|~D))+V[3]+2399980690&4294967295,k=w+(R<<10&4294967295|R>>>22),R=D+(w^(k|~I))+V[10]+4293915773&4294967295,D=k+(R<<15&4294967295|R>>>17),R=I+(k^(D|~w))+V[1]+2240044497&4294967295,I=D+(R<<21&4294967295|R>>>11),R=w+(D^(I|~k))+V[8]+1873313359&4294967295,w=I+(R<<6&4294967295|R>>>26),R=k+(I^(w|~D))+V[15]+4264355552&4294967295,k=w+(R<<10&4294967295|R>>>22),R=D+(w^(k|~I))+V[6]+2734768916&4294967295,D=k+(R<<15&4294967295|R>>>17),R=I+(k^(D|~w))+V[13]+1309151649&4294967295,I=D+(R<<21&4294967295|R>>>11),R=w+(D^(I|~k))+V[4]+4149444226&4294967295,w=I+(R<<6&4294967295|R>>>26),R=k+(I^(w|~D))+V[11]+3174756917&4294967295,k=w+(R<<10&4294967295|R>>>22),R=D+(w^(k|~I))+V[2]+718787259&4294967295,D=k+(R<<15&4294967295|R>>>17),R=I+(k^(D|~w))+V[9]+3951481745&4294967295,N.g[0]=N.g[0]+w&4294967295,N.g[1]=N.g[1]+(D+(R<<21&4294967295|R>>>11))&4294967295,N.g[2]=N.g[2]+D&4294967295,N.g[3]=N.g[3]+k&4294967295}r.prototype.v=function(N,w){w===void 0&&(w=N.length);const I=w-this.blockSize,V=this.C;let D=this.h,k=0;for(;k<w;){if(D==0)for(;k<=I;)l(this,N,k),k+=this.blockSize;if(typeof N=="string"){for(;k<w;)if(V[D++]=N.charCodeAt(k++),D==this.blockSize){l(this,V),D=0;break}}else for(;k<w;)if(V[D++]=N[k++],D==this.blockSize){l(this,V),D=0;break}}this.h=D,this.o+=w},r.prototype.A=function(){var N=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);N[0]=128;for(var w=1;w<N.length-8;++w)N[w]=0;w=this.o*8;for(var I=N.length-8;I<N.length;++I)N[I]=w&255,w/=256;for(this.v(N),N=Array(16),w=0,I=0;I<4;++I)for(let V=0;V<32;V+=8)N[w++]=this.g[I]>>>V&255;return N};function u(N,w){var I=p;return Object.prototype.hasOwnProperty.call(I,N)?I[N]:I[N]=w(N)}function f(N,w){this.h=w;const I=[];let V=!0;for(let D=N.length-1;D>=0;D--){const k=N[D]|0;V&&k==w||(I[D]=k,V=!1)}this.g=I}var p={};function y(N){return-128<=N&&N<128?u(N,function(w){return new f([w|0],w<0?-1:0)}):new f([N|0],N<0?-1:0)}function g(N){if(isNaN(N)||!isFinite(N))return A;if(N<0)return G(g(-N));const w=[];let I=1;for(let V=0;N>=I;V++)w[V]=N/I|0,I*=4294967296;return new f(w,0)}function T(N,w){if(N.length==0)throw Error("number format error: empty string");if(w=w||10,w<2||36<w)throw Error("radix out of range: "+w);if(N.charAt(0)=="-")return G(T(N.substring(1),w));if(N.indexOf("-")>=0)throw Error('number format error: interior "-" character');const I=g(Math.pow(w,8));let V=A;for(let k=0;k<N.length;k+=8){var D=Math.min(8,N.length-k);const R=parseInt(N.substring(k,k+D),w);D<8?(D=g(Math.pow(w,D)),V=V.j(D).add(g(R))):(V=V.j(I),V=V.add(g(R)))}return V}var A=y(0),x=y(1),j=y(16777216);s=f.prototype,s.m=function(){if(Q(this))return-G(this).m();let N=0,w=1;for(let I=0;I<this.g.length;I++){const V=this.i(I);N+=(V>=0?V:4294967296+V)*w,w*=4294967296}return N},s.toString=function(N){if(N=N||10,N<2||36<N)throw Error("radix out of range: "+N);if(U(this))return"0";if(Q(this))return"-"+G(this).toString(N);const w=g(Math.pow(N,6));var I=this;let V="";for(;;){const D=ue(I,w).g;I=te(I,D.j(w));let k=((I.g.length>0?I.g[0]:I.h)>>>0).toString(N);if(I=D,U(I))return k+V;for(;k.length<6;)k="0"+k;V=k+V}},s.i=function(N){return N<0?0:N<this.g.length?this.g[N]:this.h};function U(N){if(N.h!=0)return!1;for(let w=0;w<N.g.length;w++)if(N.g[w]!=0)return!1;return!0}function Q(N){return N.h==-1}s.l=function(N){return N=te(this,N),Q(N)?-1:U(N)?0:1};function G(N){const w=N.g.length,I=[];for(let V=0;V<w;V++)I[V]=~N.g[V];return new f(I,~N.h).add(x)}s.abs=function(){return Q(this)?G(this):this},s.add=function(N){const w=Math.max(this.g.length,N.g.length),I=[];let V=0;for(let D=0;D<=w;D++){let k=V+(this.i(D)&65535)+(N.i(D)&65535),R=(k>>>16)+(this.i(D)>>>16)+(N.i(D)>>>16);V=R>>>16,k&=65535,R&=65535,I[D]=R<<16|k}return new f(I,I[I.length-1]&-2147483648?-1:0)};function te(N,w){return N.add(G(w))}s.j=function(N){if(U(this)||U(N))return A;if(Q(this))return Q(N)?G(this).j(G(N)):G(G(this).j(N));if(Q(N))return G(this.j(G(N)));if(this.l(j)<0&&N.l(j)<0)return g(this.m()*N.m());const w=this.g.length+N.g.length,I=[];for(var V=0;V<2*w;V++)I[V]=0;for(V=0;V<this.g.length;V++)for(let D=0;D<N.g.length;D++){const k=this.i(V)>>>16,R=this.i(V)&65535,be=N.i(D)>>>16,lt=N.i(D)&65535;I[2*V+2*D]+=R*lt,fe(I,2*V+2*D),I[2*V+2*D+1]+=k*lt,fe(I,2*V+2*D+1),I[2*V+2*D+1]+=R*be,fe(I,2*V+2*D+1),I[2*V+2*D+2]+=k*be,fe(I,2*V+2*D+2)}for(N=0;N<w;N++)I[N]=I[2*N+1]<<16|I[2*N];for(N=w;N<2*w;N++)I[N]=0;return new f(I,0)};function fe(N,w){for(;(N[w]&65535)!=N[w];)N[w+1]+=N[w]>>>16,N[w]&=65535,w++}function ee(N,w){this.g=N,this.h=w}function ue(N,w){if(U(w))throw Error("division by zero");if(U(N))return new ee(A,A);if(Q(N))return w=ue(G(N),w),new ee(G(w.g),G(w.h));if(Q(w))return w=ue(N,G(w)),new ee(G(w.g),w.h);if(N.g.length>30){if(Q(N)||Q(w))throw Error("slowDivide_ only works with positive integers.");for(var I=x,V=w;V.l(N)<=0;)I=ce(I),V=ce(V);var D=Te(I,1),k=Te(V,1);for(V=Te(V,2),I=Te(I,2);!U(V);){var R=k.add(V);R.l(N)<=0&&(D=D.add(I),k=R),V=Te(V,1),I=Te(I,1)}return w=te(N,D.j(w)),new ee(D,w)}for(D=A;N.l(w)>=0;){for(I=Math.max(1,Math.floor(N.m()/w.m())),V=Math.ceil(Math.log(I)/Math.LN2),V=V<=48?1:Math.pow(2,V-48),k=g(I),R=k.j(w);Q(R)||R.l(N)>0;)I-=V,k=g(I),R=k.j(w);U(k)&&(k=x),D=D.add(k),N=te(N,R)}return new ee(D,N)}s.B=function(N){return ue(this,N).h},s.and=function(N){const w=Math.max(this.g.length,N.g.length),I=[];for(let V=0;V<w;V++)I[V]=this.i(V)&N.i(V);return new f(I,this.h&N.h)},s.or=function(N){const w=Math.max(this.g.length,N.g.length),I=[];for(let V=0;V<w;V++)I[V]=this.i(V)|N.i(V);return new f(I,this.h|N.h)},s.xor=function(N){const w=Math.max(this.g.length,N.g.length),I=[];for(let V=0;V<w;V++)I[V]=this.i(V)^N.i(V);return new f(I,this.h^N.h)};function ce(N){const w=N.g.length+1,I=[];for(let V=0;V<w;V++)I[V]=N.i(V)<<1|N.i(V-1)>>>31;return new f(I,N.h)}function Te(N,w){const I=w>>5;w%=32;const V=N.g.length-I,D=[];for(let k=0;k<V;k++)D[k]=w>0?N.i(k+I)>>>w|N.i(k+I+1)<<32-w:N.i(k+I);return new f(D,N.h)}r.prototype.digest=r.prototype.A,r.prototype.reset=r.prototype.u,r.prototype.update=r.prototype.v,XE=r,f.prototype.add=f.prototype.add,f.prototype.multiply=f.prototype.j,f.prototype.modulo=f.prototype.B,f.prototype.compare=f.prototype.l,f.prototype.toNumber=f.prototype.m,f.prototype.toString=f.prototype.toString,f.prototype.getBits=f.prototype.i,f.fromNumber=g,f.fromString=T,sr=f}).apply(typeof X0<"u"?X0:typeof self<"u"?self:typeof window<"u"?window:{});var Uc=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var $E,Il,JE,Kc,Tm,ZE,WE,eT;(function(){var s,e=Object.defineProperty;function i(c){c=[typeof globalThis=="object"&&globalThis,c,typeof window=="object"&&window,typeof self=="object"&&self,typeof Uc=="object"&&Uc];for(var m=0;m<c.length;++m){var v=c[m];if(v&&v.Math==Math)return v}throw Error("Cannot find global object")}var r=i(this);function l(c,m){if(m)e:{var v=r;c=c.split(".");for(var S=0;S<c.length-1;S++){var L=c[S];if(!(L in v))break e;v=v[L]}c=c[c.length-1],S=v[c],m=m(S),m!=S&&m!=null&&e(v,c,{configurable:!0,writable:!0,value:m})}}l("Symbol.dispose",function(c){return c||Symbol("Symbol.dispose")}),l("Array.prototype.values",function(c){return c||function(){return this[Symbol.iterator]()}}),l("Object.entries",function(c){return c||function(m){var v=[],S;for(S in m)Object.prototype.hasOwnProperty.call(m,S)&&v.push([S,m[S]]);return v}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var u=u||{},f=this||self;function p(c){var m=typeof c;return m=="object"&&c!=null||m=="function"}function y(c,m,v){return c.call.apply(c.bind,arguments)}function g(c,m,v){return g=y,g.apply(null,arguments)}function T(c,m){var v=Array.prototype.slice.call(arguments,1);return function(){var S=v.slice();return S.push.apply(S,arguments),c.apply(this,S)}}function A(c,m){function v(){}v.prototype=m.prototype,c.Z=m.prototype,c.prototype=new v,c.prototype.constructor=c,c.Ob=function(S,L,H){for(var ne=Array(arguments.length-2),xe=2;xe<arguments.length;xe++)ne[xe-2]=arguments[xe];return m.prototype[L].apply(S,ne)}}var x=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?c=>c&&AsyncContext.Snapshot.wrap(c):c=>c;function j(c){const m=c.length;if(m>0){const v=Array(m);for(let S=0;S<m;S++)v[S]=c[S];return v}return[]}function U(c,m){for(let S=1;S<arguments.length;S++){const L=arguments[S];var v=typeof L;if(v=v!="object"?v:L?Array.isArray(L)?"array":v:"null",v=="array"||v=="object"&&typeof L.length=="number"){v=c.length||0;const H=L.length||0;c.length=v+H;for(let ne=0;ne<H;ne++)c[v+ne]=L[ne]}else c.push(L)}}class Q{constructor(m,v){this.i=m,this.j=v,this.h=0,this.g=null}get(){let m;return this.h>0?(this.h--,m=this.g,this.g=m.next,m.next=null):m=this.i(),m}}function G(c){f.setTimeout(()=>{throw c},0)}function te(){var c=N;let m=null;return c.g&&(m=c.g,c.g=c.g.next,c.g||(c.h=null),m.next=null),m}class fe{constructor(){this.h=this.g=null}add(m,v){const S=ee.get();S.set(m,v),this.h?this.h.next=S:this.g=S,this.h=S}}var ee=new Q(()=>new ue,c=>c.reset());class ue{constructor(){this.next=this.g=this.h=null}set(m,v){this.h=m,this.g=v,this.next=null}reset(){this.next=this.g=this.h=null}}let ce,Te=!1,N=new fe,w=()=>{const c=Promise.resolve(void 0);ce=()=>{c.then(I)}};function I(){for(var c;c=te();){try{c.h.call(c.g)}catch(v){G(v)}var m=ee;m.j(c),m.h<100&&(m.h++,c.next=m.g,m.g=c)}Te=!1}function V(){this.u=this.u,this.C=this.C}V.prototype.u=!1,V.prototype.dispose=function(){this.u||(this.u=!0,this.N())},V.prototype[Symbol.dispose]=function(){this.dispose()},V.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function D(c,m){this.type=c,this.g=this.target=m,this.defaultPrevented=!1}D.prototype.h=function(){this.defaultPrevented=!0};var k=(function(){if(!f.addEventListener||!Object.defineProperty)return!1;var c=!1,m=Object.defineProperty({},"passive",{get:function(){c=!0}});try{const v=()=>{};f.addEventListener("test",v,m),f.removeEventListener("test",v,m)}catch{}return c})();function R(c){return/^[\s\xa0]*$/.test(c)}function be(c,m){D.call(this,c?c.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,c&&this.init(c,m)}A(be,D),be.prototype.init=function(c,m){const v=this.type=c.type,S=c.changedTouches&&c.changedTouches.length?c.changedTouches[0]:null;this.target=c.target||c.srcElement,this.g=m,m=c.relatedTarget,m||(v=="mouseover"?m=c.fromElement:v=="mouseout"&&(m=c.toElement)),this.relatedTarget=m,S?(this.clientX=S.clientX!==void 0?S.clientX:S.pageX,this.clientY=S.clientY!==void 0?S.clientY:S.pageY,this.screenX=S.screenX||0,this.screenY=S.screenY||0):(this.clientX=c.clientX!==void 0?c.clientX:c.pageX,this.clientY=c.clientY!==void 0?c.clientY:c.pageY,this.screenX=c.screenX||0,this.screenY=c.screenY||0),this.button=c.button,this.key=c.key||"",this.ctrlKey=c.ctrlKey,this.altKey=c.altKey,this.shiftKey=c.shiftKey,this.metaKey=c.metaKey,this.pointerId=c.pointerId||0,this.pointerType=c.pointerType,this.state=c.state,this.i=c,c.defaultPrevented&&be.Z.h.call(this)},be.prototype.h=function(){be.Z.h.call(this);const c=this.i;c.preventDefault?c.preventDefault():c.returnValue=!1};var lt="closure_listenable_"+(Math.random()*1e6|0),K=0;function se(c,m,v,S,L){this.listener=c,this.proxy=null,this.src=m,this.type=v,this.capture=!!S,this.ha=L,this.key=++K,this.da=this.fa=!1}function ge(c){c.da=!0,c.listener=null,c.proxy=null,c.src=null,c.ha=null}function ze(c,m,v){for(const S in c)m.call(v,c[S],S,c)}function Qe(c,m){for(const v in c)m.call(void 0,c[v],v,c)}function M(c){const m={};for(const v in c)m[v]=c[v];return m}const Z="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function re(c,m){let v,S;for(let L=1;L<arguments.length;L++){S=arguments[L];for(v in S)c[v]=S[v];for(let H=0;H<Z.length;H++)v=Z[H],Object.prototype.hasOwnProperty.call(S,v)&&(c[v]=S[v])}}function le(c){this.src=c,this.g={},this.h=0}le.prototype.add=function(c,m,v,S,L){const H=c.toString();c=this.g[H],c||(c=this.g[H]=[],this.h++);const ne=Ie(c,m,S,L);return ne>-1?(m=c[ne],v||(m.fa=!1)):(m=new se(m,this.src,H,!!S,L),m.fa=v,c.push(m)),m};function Ee(c,m){const v=m.type;if(v in c.g){var S=c.g[v],L=Array.prototype.indexOf.call(S,m,void 0),H;(H=L>=0)&&Array.prototype.splice.call(S,L,1),H&&(ge(m),c.g[v].length==0&&(delete c.g[v],c.h--))}}function Ie(c,m,v,S){for(let L=0;L<c.length;++L){const H=c[L];if(!H.da&&H.listener==m&&H.capture==!!v&&H.ha==S)return L}return-1}var Le="closure_lm_"+(Math.random()*1e6|0),Mt={};function rt(c,m,v,S,L){if(Array.isArray(m)){for(let H=0;H<m.length;H++)rt(c,m[H],v,S,L);return null}return v=bo(v),c&&c[lt]?c.J(m,v,p(S)?!!S.capture:!1,L):gr(c,m,v,!1,S,L)}function gr(c,m,v,S,L,H){if(!m)throw Error("Invalid event type");const ne=p(L)?!!L.capture:!!L;let xe=yr(c);if(xe||(c[Le]=xe=new le(c)),v=xe.add(m,v,S,ne,H),v.proxy)return v;if(S=sa(),v.proxy=S,S.src=c,S.listener=v,c.addEventListener)k||(L=ne),L===void 0&&(L=!1),c.addEventListener(m.toString(),S,L);else if(c.attachEvent)c.attachEvent(oi(m.toString()),S);else if(c.addListener&&c.removeListener)c.addListener(S);else throw Error("addEventListener and attachEvent are unavailable.");return v}function sa(){function c(v){return m.call(c.src,c.listener,v)}const m=Eo;return c}function ra(c,m,v,S,L){if(Array.isArray(m))for(var H=0;H<m.length;H++)ra(c,m[H],v,S,L);else S=p(S)?!!S.capture:!!S,v=bo(v),c&&c[lt]?(c=c.i,H=String(m).toString(),H in c.g&&(m=c.g[H],v=Ie(m,v,S,L),v>-1&&(ge(m[v]),Array.prototype.splice.call(m,v,1),m.length==0&&(delete c.g[H],c.h--)))):c&&(c=yr(c))&&(m=c.g[m.toString()],c=-1,m&&(c=Ie(m,v,S,L)),(v=c>-1?m[c]:null)&&aa(v))}function aa(c){if(typeof c!="number"&&c&&!c.da){var m=c.src;if(m&&m[lt])Ee(m.i,c);else{var v=c.type,S=c.proxy;m.removeEventListener?m.removeEventListener(v,S,c.capture):m.detachEvent?m.detachEvent(oi(v),S):m.addListener&&m.removeListener&&m.removeListener(S),(v=yr(m))?(Ee(v,c),v.h==0&&(v.src=null,m[Le]=null)):ge(c)}}}function oi(c){return c in Mt?Mt[c]:Mt[c]="on"+c}function Eo(c,m){if(c.da)c=!0;else{m=new be(m,this);const v=c.listener,S=c.ha||c.src;c.fa&&aa(c),c=v.call(S,m)}return c}function yr(c){return c=c[Le],c instanceof le?c:null}var To="__closure_events_fn_"+(Math.random()*1e9>>>0);function bo(c){return typeof c=="function"?c:(c[To]||(c[To]=function(m){return c.handleEvent(m)}),c[To])}function Tt(){V.call(this),this.i=new le(this),this.M=this,this.G=null}A(Tt,V),Tt.prototype[lt]=!0,Tt.prototype.removeEventListener=function(c,m,v,S){ra(this,c,m,v,S)};function Vt(c,m){var v,S=c.G;if(S)for(v=[];S;S=S.G)v.push(S);if(c=c.M,S=m.type||m,typeof m=="string")m=new D(m,c);else if(m instanceof D)m.target=m.target||c;else{var L=m;m=new D(S,c),re(m,L)}L=!0;let H,ne;if(v)for(ne=v.length-1;ne>=0;ne--)H=m.g=v[ne],L=gs(H,S,!0,m)&&L;if(H=m.g=c,L=gs(H,S,!0,m)&&L,L=gs(H,S,!1,m)&&L,v)for(ne=0;ne<v.length;ne++)H=m.g=v[ne],L=gs(H,S,!1,m)&&L}Tt.prototype.N=function(){if(Tt.Z.N.call(this),this.i){var c=this.i;for(const m in c.g){const v=c.g[m];for(let S=0;S<v.length;S++)ge(v[S]);delete c.g[m],c.h--}}this.G=null},Tt.prototype.J=function(c,m,v,S){return this.i.add(String(c),m,!1,v,S)},Tt.prototype.K=function(c,m,v,S){return this.i.add(String(c),m,!0,v,S)};function gs(c,m,v,S){if(m=c.i.g[String(m)],!m)return!0;m=m.concat();let L=!0;for(let H=0;H<m.length;++H){const ne=m[H];if(ne&&!ne.da&&ne.capture==v){const xe=ne.listener,yt=ne.ha||ne.src;ne.fa&&Ee(c.i,ne),L=xe.call(yt,S)!==!1&&L}}return L&&!S.defaultPrevented}function Kh(c,m){if(typeof c!="function")if(c&&typeof c.handleEvent=="function")c=g(c.handleEvent,c);else throw Error("Invalid listener argument");return Number(m)>2147483647?-1:f.setTimeout(c,m||0)}function uu(c){c.g=Kh(()=>{c.g=null,c.i&&(c.i=!1,uu(c))},c.l);const m=c.h;c.h=null,c.m.apply(null,m)}class nn extends V{constructor(m,v){super(),this.m=m,this.l=v,this.h=null,this.i=!1,this.g=null}j(m){this.h=arguments,this.g?this.i=!0:uu(this)}N(){super.N(),this.g&&(f.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function _r(c){V.call(this),this.h=c,this.g={}}A(_r,V);var Ao=[];function So(c){ze(c.g,function(m,v){this.g.hasOwnProperty(v)&&aa(m)},c),c.g={}}_r.prototype.N=function(){_r.Z.N.call(this),So(this)},_r.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var ys=f.JSON.stringify,Xh=f.JSON.parse,cu=class{stringify(c){return f.JSON.stringify(c,void 0)}parse(c){return f.JSON.parse(c,void 0)}};function hu(){}function fu(){}var Fn={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function qt(){D.call(this,"d")}A(qt,D);function Rn(){D.call(this,"c")}A(Rn,D);var gt={},du=null;function oa(){return du=du||new Tt}gt.Ia="serverreachability";function mu(c){D.call(this,gt.Ia,c)}A(mu,D);function li(c){const m=oa();Vt(m,new mu(m))}gt.STAT_EVENT="statevent";function vr(c,m){D.call(this,gt.STAT_EVENT,c),this.stat=m}A(vr,D);function bt(c){const m=oa();Vt(m,new vr(m,c))}gt.Ja="timingevent";function ui(c,m){D.call(this,gt.Ja,c),this.size=m}A(ui,D);function ci(c,m){if(typeof c!="function")throw Error("Fn must not be null and must be a function");return f.setTimeout(function(){c()},m)}function Gn(){this.g=!0}Gn.prototype.ua=function(){this.g=!1};function $h(c,m,v,S,L,H){c.info(function(){if(c.g)if(H){var ne="",xe=H.split("&");for(let He=0;He<xe.length;He++){var yt=xe[He].split("=");if(yt.length>1){const at=yt[0];yt=yt[1];const Dn=at.split("_");ne=Dn.length>=2&&Dn[1]=="type"?ne+(at+"="+yt+"&"):ne+(at+"=redacted&")}}}else ne=null;else ne=H;return"XMLHTTP REQ ("+S+") [attempt "+L+"]: "+m+`
`+v+`
`+ne})}function pu(c,m,v,S,L,H,ne){c.info(function(){return"XMLHTTP RESP ("+S+") [ attempt "+L+"]: "+m+`
`+v+`
`+H+" "+ne})}function hi(c,m,v,S){c.info(function(){return"XMLHTTP TEXT ("+m+"): "+Jh(c,v)+(S?" "+S:"")})}function Er(c,m){c.info(function(){return"TIMEOUT: "+m})}Gn.prototype.info=function(){};function Jh(c,m){if(!c.g)return m;if(!m)return null;try{const H=JSON.parse(m);if(H){for(c=0;c<H.length;c++)if(Array.isArray(H[c])){var v=H[c];if(!(v.length<2)){var S=v[1];if(Array.isArray(S)&&!(S.length<1)){var L=S[0];if(L!="noop"&&L!="stop"&&L!="close")for(let ne=1;ne<S.length;ne++)S[ne]=""}}}}return ys(H)}catch{return m}}var Tr={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},wo={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},xo;function br(){}A(br,hu),br.prototype.g=function(){return new XMLHttpRequest},xo=new br;function Ui(c){return encodeURIComponent(String(c))}function gu(c){var m=1;c=c.split(":");const v=[];for(;m>0&&c.length;)v.push(c.shift()),m--;return c.length&&v.push(c.join(":")),v}function Qn(c,m,v,S){this.j=c,this.i=m,this.l=v,this.S=S||1,this.V=new _r(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new Yn}function Yn(){this.i=null,this.g="",this.h=!1}var At={},Lt={};function fi(c,m,v){c.M=1,c.A=Ar(wt(m)),c.u=v,c.R=!0,la(c,null)}function la(c,m){c.F=Date.now(),di(c),c.B=wt(c.A);var v=c.B,S=c.S;Array.isArray(S)||(S=[String(S)]),fa(v.i,"t",S),c.C=0,v=c.j.L,c.h=new Yn,c.g=Du(c.j,v?m:null,!c.u),c.P>0&&(c.O=new nn(g(c.Y,c,c.g),c.P)),m=c.V,v=c.g,S=c.ba;var L="readystatechange";Array.isArray(L)||(L&&(Ao[0]=L.toString()),L=Ao);for(let H=0;H<L.length;H++){const ne=rt(v,L[H],S||m.handleEvent,!1,m.h||m);if(!ne)break;m.g[ne.key]=ne}m=c.J?M(c.J):{},c.u?(c.v||(c.v="POST"),m["Content-Type"]="application/x-www-form-urlencoded",c.g.ea(c.B,c.v,c.u,m)):(c.v="GET",c.g.ea(c.B,c.v,null,m)),li(),$h(c.i,c.v,c.B,c.l,c.S,c.u)}Qn.prototype.ba=function(c){c=c.target;const m=this.O;m&&$n(c)==3?m.j():this.Y(c)},Qn.prototype.Y=function(c){try{if(c==this.g)e:{const xe=$n(this.g),yt=this.g.ya(),He=this.g.ca();if(!(xe<3)&&(xe!=3||this.g&&(this.h.h||this.g.la()||Ht(this.g)))){this.K||xe!=4||yt==7||(yt==8||He<=0?li(3):li(2)),mi(this);var m=this.g.ca();this.X=m;var v=Zh(this);if(this.o=m==200,pu(this.i,this.v,this.B,this.l,this.S,xe,m),this.o){if(this.U&&!this.L){t:{if(this.g){var S,L=this.g;if((S=L.g?L.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!R(S)){var H=S;break t}}H=null}if(c=H)hi(this.i,this.l,c,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,pi(this,c);else{this.o=!1,this.m=3,bt(12),yn(this),In(this);break e}}if(this.R){c=!0;let at;for(;!this.K&&this.C<v.length;)if(at=_u(this,v),at==Lt){xe==4&&(this.m=4,bt(14),c=!1),hi(this.i,this.l,null,"[Incomplete Response]");break}else if(at==At){this.m=4,bt(15),hi(this.i,this.l,v,"[Invalid Chunk]"),c=!1;break}else hi(this.i,this.l,at,null),pi(this,at);if(yu(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),xe!=4||v.length!=0||this.h.h||(this.m=1,bt(16),c=!1),this.o=this.o&&c,!c)hi(this.i,this.l,v,"[Invalid Chunked Response]"),yn(this),In(this);else if(v.length>0&&!this.W){this.W=!0;var ne=this.j;ne.g==this&&ne.aa&&!ne.P&&(ne.j.info("Great, no buffering proxy detected. Bytes received: "+v.length),Bo(ne),ne.P=!0,bt(11))}}else hi(this.i,this.l,v,null),pi(this,v);xe==4&&yn(this),this.o&&!this.K&&(xe==4?Ru(this.j,this):(this.o=!1,di(this)))}else Bi(this.g),m==400&&v.indexOf("Unknown SID")>0?(this.m=3,bt(12)):(this.m=0,bt(13)),yn(this),In(this)}}}catch{}finally{}};function Zh(c){if(!yu(c))return c.g.la();const m=Ht(c.g);if(m==="")return"";let v="";const S=m.length,L=$n(c.g)==4;if(!c.h.i){if(typeof TextDecoder>"u")return yn(c),In(c),"";c.h.i=new f.TextDecoder}for(let H=0;H<S;H++)c.h.h=!0,v+=c.h.i.decode(m[H],{stream:!(L&&H==S-1)});return m.length=0,c.h.g+=v,c.C=0,c.h.g}function yu(c){return c.g?c.v=="GET"&&c.M!=2&&c.j.Aa:!1}function _u(c,m){var v=c.C,S=m.indexOf(`
`,v);return S==-1?Lt:(v=Number(m.substring(v,S)),isNaN(v)?At:(S+=1,S+v>m.length?Lt:(m=m.slice(S,S+v),c.C=S+v,m)))}Qn.prototype.cancel=function(){this.K=!0,yn(this)};function di(c){c.T=Date.now()+c.H,ua(c,c.H)}function ua(c,m){if(c.D!=null)throw Error("WatchDog timer not null");c.D=ci(g(c.aa,c),m)}function mi(c){c.D&&(f.clearTimeout(c.D),c.D=null)}Qn.prototype.aa=function(){this.D=null;const c=Date.now();c-this.T>=0?(Er(this.i,this.B),this.M!=2&&(li(),bt(17)),yn(this),this.m=2,In(this)):ua(this,this.T-c)};function In(c){c.j.I==0||c.K||Ru(c.j,c)}function yn(c){mi(c);var m=c.O;m&&typeof m.dispose=="function"&&m.dispose(),c.O=null,So(c.V),c.g&&(m=c.g,c.g=null,m.abort(),m.dispose())}function pi(c,m){try{var v=c.j;if(v.I!=0&&(v.g==c||yi(v.h,c))){if(!c.L&&yi(v.h,c)&&v.I==3){try{var S=v.Ba.g.parse(m)}catch{S=null}if(Array.isArray(S)&&S.length==3){var L=S;if(L[0]==0){e:if(!v.v){if(v.g)if(v.g.F+3e3<c.F)ya(v),ws(v);else break e;Nr(v),bt(18)}}else v.xa=L[1],0<v.xa-v.K&&L[2]<37500&&v.F&&v.A==0&&!v.C&&(v.C=ci(g(v.Va,v),6e3));gi(v.h)<=1&&v.ta&&(v.ta=void 0)}else Ai(v,11)}else if((c.L||v.g==c)&&ya(v),!R(m))for(L=v.Ba.g.parse(m),m=0;m<L.length;m++){let He=L[m];const at=He[0];if(!(at<=v.K))if(v.K=at,He=He[1],v.I==2)if(He[0]=="c"){v.M=He[1],v.ba=He[2];const Dn=He[3];Dn!=null&&(v.ka=Dn,v.j.info("VER="+v.ka));const Si=He[4];Si!=null&&(v.za=Si,v.j.info("SVER="+v.za));const Jn=He[5];Jn!=null&&typeof Jn=="number"&&Jn>0&&(S=1.5*Jn,v.O=S,v.j.info("backChannelRequestTimeoutMs_="+S)),S=v;const Zn=c.g;if(Zn){const Dr=Zn.g?Zn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Dr){var H=S.h;H.g||Dr.indexOf("spdy")==-1&&Dr.indexOf("quic")==-1&&Dr.indexOf("h2")==-1||(H.j=H.l,H.g=new Set,H.h&&(Co(H,H.h),H.h=null))}if(S.G){const _a=Zn.g?Zn.g.getResponseHeader("X-HTTP-Session-Id"):null;_a&&(S.wa=_a,Ye(S.J,S.G,_a))}}v.I=3,v.l&&v.l.ra(),v.aa&&(v.T=Date.now()-c.F,v.j.info("Handshake RTT: "+v.T+"ms")),S=v;var ne=c;if(S.na=Nu(S,S.L?S.ba:null,S.W),ne.L){No(S.h,ne);var xe=ne,yt=S.O;yt&&(xe.H=yt),xe.D&&(mi(xe),di(xe)),S.g=ne}else wu(S);v.i.length>0&&bi(v)}else He[0]!="stop"&&He[0]!="close"||Ai(v,7);else v.I==3&&(He[0]=="stop"||He[0]=="close"?He[0]=="stop"?Ai(v,7):Uo(v):He[0]!="noop"&&v.l&&v.l.qa(He),v.A=0)}}li(4)}catch{}}var St=class{constructor(c,m){this.g=c,this.map=m}};function Ro(c){this.l=c||10,f.PerformanceNavigationTiming?(c=f.performance.getEntriesByType("navigation"),c=c.length>0&&(c[0].nextHopProtocol=="hq"||c[0].nextHopProtocol=="h2")):c=!!(f.chrome&&f.chrome.loadTimes&&f.chrome.loadTimes()&&f.chrome.loadTimes().wasFetchedViaSpdy),this.j=c?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function Io(c){return c.h?!0:c.g?c.g.size>=c.j:!1}function gi(c){return c.h?1:c.g?c.g.size:0}function yi(c,m){return c.h?c.h==m:c.g?c.g.has(m):!1}function Co(c,m){c.g?c.g.add(m):c.h=m}function No(c,m){c.h&&c.h==m?c.h=null:c.g&&c.g.has(m)&&c.g.delete(m)}Ro.prototype.cancel=function(){if(this.i=Do(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const c of this.g.values())c.cancel();this.g.clear()}};function Do(c){if(c.h!=null)return c.i.concat(c.h.G);if(c.g!=null&&c.g.size!==0){let m=c.i;for(const v of c.g.values())m=m.concat(v.G);return m}return j(c.i)}var vu=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function ca(c,m){if(c){c=c.split("&");for(let v=0;v<c.length;v++){const S=c[v].indexOf("=");let L,H=null;S>=0?(L=c[v].substring(0,S),H=c[v].substring(S+1)):L=c[v],m(L,H?decodeURIComponent(H.replace(/\+/g," ")):"")}}}function _n(c){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let m;c instanceof _n?(this.l=c.l,Ut(this,c.j),this.o=c.o,this.g=c.g,_s(this,c.u),this.h=c.h,Oo(this,Au(c.i)),this.m=c.m):c&&(m=String(c).match(vu))?(this.l=!1,Ut(this,m[1]||"",!0),this.o=_i(m[2]||""),this.g=_i(m[3]||"",!0),_s(this,m[4]),this.h=_i(m[5]||"",!0),Oo(this,m[6]||"",!0),this.m=_i(m[7]||"")):(this.l=!1,this.i=new Es(null,this.l))}_n.prototype.toString=function(){const c=[];var m=this.j;m&&c.push(Sr(m,ha,!0),":");var v=this.g;return(v||m=="file")&&(c.push("//"),(m=this.o)&&c.push(Sr(m,ha,!0),"@"),c.push(Ui(v).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),v=this.u,v!=null&&c.push(":",String(v))),(v=this.h)&&(this.g&&v.charAt(0)!="/"&&c.push("/"),c.push(Sr(v,v.charAt(0)=="/"?Mo:Eu,!0))),(v=this.i.toString())&&c.push("?",v),(v=this.m)&&c.push("#",Sr(v,Tu)),c.join("")},_n.prototype.resolve=function(c){const m=wt(this);let v=!!c.j;v?Ut(m,c.j):v=!!c.o,v?m.o=c.o:v=!!c.g,v?m.g=c.g:v=c.u!=null;var S=c.h;if(v)_s(m,c.u);else if(v=!!c.h){if(S.charAt(0)!="/")if(this.g&&!this.h)S="/"+S;else{var L=m.h.lastIndexOf("/");L!=-1&&(S=m.h.slice(0,L+1)+S)}if(L=S,L==".."||L==".")S="";else if(L.indexOf("./")!=-1||L.indexOf("/.")!=-1){S=L.lastIndexOf("/",0)==0,L=L.split("/");const H=[];for(let ne=0;ne<L.length;){const xe=L[ne++];xe=="."?S&&ne==L.length&&H.push(""):xe==".."?((H.length>1||H.length==1&&H[0]!="")&&H.pop(),S&&ne==L.length&&H.push("")):(H.push(xe),S=!0)}S=H.join("/")}else S=L}return v?m.h=S:v=c.i.toString()!=="",v?Oo(m,Au(c.i)):v=!!c.m,v&&(m.m=c.m),m};function wt(c){return new _n(c)}function Ut(c,m,v){c.j=v?_i(m,!0):m,c.j&&(c.j=c.j.replace(/:$/,""))}function _s(c,m){if(m){if(m=Number(m),isNaN(m)||m<0)throw Error("Bad port number "+m);c.u=m}else c.u=null}function Oo(c,m,v){m instanceof Es?(c.i=m,da(c.i,c.l)):(v||(m=Sr(m,vs)),c.i=new Es(m,c.l))}function Ye(c,m,v){c.i.set(m,v)}function Ar(c){return Ye(c,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),c}function _i(c,m){return c?m?decodeURI(c.replace(/%25/g,"%2525")):decodeURIComponent(c):""}function Sr(c,m,v){return typeof c=="string"?(c=encodeURI(c).replace(m,an),v&&(c=c.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),c):null}function an(c){return c=c.charCodeAt(0),"%"+(c>>4&15).toString(16)+(c&15).toString(16)}var ha=/[#\/\?@]/g,Eu=/[#\?:]/g,Mo=/[#\?]/g,vs=/[#\?@]/g,Tu=/#/g;function Es(c,m){this.h=this.g=null,this.i=c||null,this.j=!!m}function on(c){c.g||(c.g=new Map,c.h=0,c.i&&ca(c.i,function(m,v){c.add(decodeURIComponent(m.replace(/\+/g," ")),v)}))}s=Es.prototype,s.add=function(c,m){on(this),this.i=null,c=Ts(this,c);let v=this.g.get(c);return v||this.g.set(c,v=[]),v.push(m),this.h+=1,this};function bu(c,m){on(c),m=Ts(c,m),c.g.has(m)&&(c.i=null,c.h-=c.g.get(m).length,c.g.delete(m))}function Vo(c,m){return on(c),m=Ts(c,m),c.g.has(m)}s.forEach=function(c,m){on(this),this.g.forEach(function(v,S){v.forEach(function(L){c.call(m,L,S,this)},this)},this)};function ko(c,m){on(c);let v=[];if(typeof m=="string")Vo(c,m)&&(v=v.concat(c.g.get(Ts(c,m))));else for(c=Array.from(c.g.values()),m=0;m<c.length;m++)v=v.concat(c[m]);return v}s.set=function(c,m){return on(this),this.i=null,c=Ts(this,c),Vo(this,c)&&(this.h-=this.g.get(c).length),this.g.set(c,[m]),this.h+=1,this},s.get=function(c,m){return c?(c=ko(this,c),c.length>0?String(c[0]):m):m};function fa(c,m,v){bu(c,m),v.length>0&&(c.i=null,c.g.set(Ts(c,m),j(v)),c.h+=v.length)}s.toString=function(){if(this.i)return this.i;if(!this.g)return"";const c=[],m=Array.from(this.g.keys());for(let S=0;S<m.length;S++){var v=m[S];const L=Ui(v);v=ko(this,v);for(let H=0;H<v.length;H++){let ne=L;v[H]!==""&&(ne+="="+Ui(v[H])),c.push(ne)}}return this.i=c.join("&")};function Au(c){const m=new Es;return m.i=c.i,c.g&&(m.g=new Map(c.g),m.h=c.h),m}function Ts(c,m){return m=String(m),c.j&&(m=m.toLowerCase()),m}function da(c,m){m&&!c.j&&(on(c),c.i=null,c.g.forEach(function(v,S){const L=S.toLowerCase();S!=L&&(bu(this,S),fa(this,L,v))},c)),c.j=m}function Kn(c,m){const v=new Gn;if(f.Image){const S=new Image;S.onload=T(Cn,v,"TestLoadImage: loaded",!0,m,S),S.onerror=T(Cn,v,"TestLoadImage: error",!1,m,S),S.onabort=T(Cn,v,"TestLoadImage: abort",!1,m,S),S.ontimeout=T(Cn,v,"TestLoadImage: timeout",!1,m,S),f.setTimeout(function(){S.ontimeout&&S.ontimeout()},1e4),S.src=c}else m(!1)}function jo(c,m){const v=new Gn,S=new AbortController,L=setTimeout(()=>{S.abort(),Cn(v,"TestPingServer: timeout",!1,m)},1e4);fetch(c,{signal:S.signal}).then(H=>{clearTimeout(L),H.ok?Cn(v,"TestPingServer: ok",!0,m):Cn(v,"TestPingServer: server error",!1,m)}).catch(()=>{clearTimeout(L),Cn(v,"TestPingServer: error",!1,m)})}function Cn(c,m,v,S,L){try{L&&(L.onload=null,L.onerror=null,L.onabort=null,L.ontimeout=null),S(v)}catch{}}function bs(){this.g=new cu}function vi(c){this.i=c.Sb||null,this.h=c.ab||!1}A(vi,hu),vi.prototype.g=function(){return new wr(this.i,this.h)};function wr(c,m){Tt.call(this),this.H=c,this.o=m,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}A(wr,Tt),s=wr.prototype,s.open=function(c,m){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=c,this.D=m,this.readyState=1,Xn(this)},s.send=function(c){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const m={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};c&&(m.body=c),(this.H||f).fetch(new Request(this.D,m)).then(this.Pa.bind(this),this.ga.bind(this))},s.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,As(this)),this.readyState=0},s.Pa=function(c){if(this.g&&(this.l=c,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=c.headers,this.readyState=2,Xn(this)),this.g&&(this.readyState=3,Xn(this),this.g)))if(this.responseType==="arraybuffer")c.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof f.ReadableStream<"u"&&"body"in c){if(this.j=c.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;ma(this)}else c.text().then(this.Oa.bind(this),this.ga.bind(this))};function ma(c){c.j.read().then(c.Ma.bind(c)).catch(c.ga.bind(c))}s.Ma=function(c){if(this.g){if(this.o&&c.value)this.response.push(c.value);else if(!this.o){var m=c.value?c.value:new Uint8Array(0);(m=this.B.decode(m,{stream:!c.done}))&&(this.response=this.responseText+=m)}c.done?As(this):Xn(this),this.readyState==3&&ma(this)}},s.Oa=function(c){this.g&&(this.response=this.responseText=c,As(this))},s.Na=function(c){this.g&&(this.response=c,As(this))},s.ga=function(){this.g&&As(this)};function As(c){c.readyState=4,c.l=null,c.j=null,c.B=null,Xn(c)}s.setRequestHeader=function(c,m){this.A.append(c,m)},s.getResponseHeader=function(c){return this.h&&this.h.get(c.toLowerCase())||""},s.getAllResponseHeaders=function(){if(!this.h)return"";const c=[],m=this.h.entries();for(var v=m.next();!v.done;)v=v.value,c.push(v[0]+": "+v[1]),v=m.next();return c.join(`\r
`)};function Xn(c){c.onreadystatechange&&c.onreadystatechange.call(c)}Object.defineProperty(wr.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(c){this.m=c?"include":"same-origin"}});function Nn(c){let m="";return ze(c,function(v,S){m+=S,m+=":",m+=v,m+=`\r
`}),m}function xr(c,m,v){e:{for(S in v){var S=!1;break e}S=!0}S||(v=Nn(v),typeof c=="string"?v!=null&&Ui(v):Ye(c,m,v))}function $e(c){Tt.call(this),this.headers=new Map,this.L=c||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}A($e,Tt);var Ei=/^https?$/i,Po=["POST","PUT"];s=$e.prototype,s.Fa=function(c){this.H=c},s.ea=function(c,m,v,S){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+c);m=m?m.toUpperCase():"GET",this.D=c,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():xo.g(),this.g.onreadystatechange=x(g(this.Ca,this));try{this.B=!0,this.g.open(m,String(c),!0),this.B=!1}catch(H){Rr(this,H);return}if(c=v||"",v=new Map(this.headers),S)if(Object.getPrototypeOf(S)===Object.prototype)for(var L in S)v.set(L,S[L]);else if(typeof S.keys=="function"&&typeof S.get=="function")for(const H of S.keys())v.set(H,S.get(H));else throw Error("Unknown input type for opt_headers: "+String(S));S=Array.from(v.keys()).find(H=>H.toLowerCase()=="content-type"),L=f.FormData&&c instanceof f.FormData,!(Array.prototype.indexOf.call(Po,m,void 0)>=0)||S||L||v.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[H,ne]of v)this.g.setRequestHeader(H,ne);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(c),this.v=!1}catch(H){Rr(this,H)}};function Rr(c,m){c.h=!1,c.g&&(c.j=!0,c.g.abort(),c.j=!1),c.l=m,c.o=5,Lo(c),zi(c)}function Lo(c){c.A||(c.A=!0,Vt(c,"complete"),Vt(c,"error"))}s.abort=function(c){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=c||7,Vt(this,"complete"),Vt(this,"abort"),zi(this))},s.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),zi(this,!0)),$e.Z.N.call(this)},s.Ca=function(){this.u||(this.B||this.v||this.j?Ir(this):this.Xa())},s.Xa=function(){Ir(this)};function Ir(c){if(c.h&&typeof u<"u"){if(c.v&&$n(c)==4)setTimeout(c.Ca.bind(c),0);else if(Vt(c,"readystatechange"),$n(c)==4){c.h=!1;try{const H=c.ca();e:switch(H){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var m=!0;break e;default:m=!1}var v;if(!(v=m)){var S;if(S=H===0){let ne=String(c.D).match(vu)[1]||null;!ne&&f.self&&f.self.location&&(ne=f.self.location.protocol.slice(0,-1)),S=!Ei.test(ne?ne.toLowerCase():"")}v=S}if(v)Vt(c,"complete"),Vt(c,"success");else{c.o=6;try{var L=$n(c)>2?c.g.statusText:""}catch{L=""}c.l=L+" ["+c.ca()+"]",Lo(c)}}finally{zi(c)}}}}function zi(c,m){if(c.g){c.m&&(clearTimeout(c.m),c.m=null);const v=c.g;c.g=null,m||Vt(c,"ready");try{v.onreadystatechange=null}catch{}}}s.isActive=function(){return!!this.g};function $n(c){return c.g?c.g.readyState:0}s.ca=function(){try{return $n(this)>2?this.g.status:-1}catch{return-1}},s.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},s.La=function(c){if(this.g){var m=this.g.responseText;return c&&m.indexOf(c)==0&&(m=m.substring(c.length)),Xh(m)}};function Ht(c){try{if(!c.g)return null;if("response"in c.g)return c.g.response;switch(c.F){case"":case"text":return c.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in c.g)return c.g.mozResponseArrayBuffer}return null}catch{return null}}function Bi(c){const m={};c=(c.g&&$n(c)>=2&&c.g.getAllResponseHeaders()||"").split(`\r
`);for(let S=0;S<c.length;S++){if(R(c[S]))continue;var v=gu(c[S]);const L=v[0];if(v=v[1],typeof v!="string")continue;v=v.trim();const H=m[L]||[];m[L]=H,H.push(v)}Qe(m,function(S){return S.join(", ")})}s.ya=function(){return this.o},s.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Ti(c,m,v){return v&&v.internalChannelParams&&v.internalChannelParams[c]||m}function Ss(c){this.za=0,this.i=[],this.j=new Gn,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Ti("failFast",!1,c),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Ti("baseRetryDelayMs",5e3,c),this.Za=Ti("retryDelaySeedMs",1e4,c),this.Ta=Ti("forwardChannelMaxRetries",2,c),this.va=Ti("forwardChannelRequestTimeoutMs",2e4,c),this.ma=c&&c.xmlHttpFactory||void 0,this.Ua=c&&c.Rb||void 0,this.Aa=c&&c.useFetchStreams||!1,this.O=void 0,this.L=c&&c.supportsCrossDomainXhr||!1,this.M="",this.h=new Ro(c&&c.concurrentRequestLimit),this.Ba=new bs,this.S=c&&c.fastHandshake||!1,this.R=c&&c.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=c&&c.Pb||!1,c&&c.ua&&this.j.ua(),c&&c.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&c&&c.detectBufferingProxy||!1,this.ia=void 0,c&&c.longPollingTimeout&&c.longPollingTimeout>0&&(this.ia=c.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}s=Ss.prototype,s.ka=8,s.I=1,s.connect=function(c,m,v,S){bt(0),this.W=c,this.H=m||{},v&&S!==void 0&&(this.H.OSID=v,this.H.OAID=S),this.F=this.X,this.J=Nu(this,null,this.W),bi(this)};function Uo(c){if(pa(c),c.I==3){var m=c.V++,v=wt(c.J);if(Ye(v,"SID",c.M),Ye(v,"RID",m),Ye(v,"TYPE","terminate"),Cr(c,v),m=new Qn(c,c.j,m),m.M=2,m.A=Ar(wt(v)),v=!1,f.navigator&&f.navigator.sendBeacon)try{v=f.navigator.sendBeacon(m.A.toString(),"")}catch{}!v&&f.Image&&(new Image().src=m.A,v=!0),v||(m.g=Du(m.j,null),m.g.ea(m.A)),m.F=Date.now(),di(m)}Cu(c)}function ws(c){c.g&&(Bo(c),c.g.cancel(),c.g=null)}function pa(c){ws(c),c.v&&(f.clearTimeout(c.v),c.v=null),ya(c),c.h.cancel(),c.m&&(typeof c.m=="number"&&f.clearTimeout(c.m),c.m=null)}function bi(c){if(!Io(c.h)&&!c.m){c.m=!0;var m=c.Ea;ce||w(),Te||(ce(),Te=!0),N.add(m,c),c.D=0}}function ga(c,m){return gi(c.h)>=c.h.j-(c.m?1:0)?!1:c.m?(c.i=m.G.concat(c.i),!0):c.I==1||c.I==2||c.D>=(c.Sa?0:c.Ta)?!1:(c.m=ci(g(c.Ea,c,m),Iu(c,c.D)),c.D++,!0)}s.Ea=function(c){if(this.m)if(this.m=null,this.I==1){if(!c){this.V=Math.floor(Math.random()*1e5),c=this.V++;const L=new Qn(this,this.j,c);let H=this.o;if(this.U&&(H?(H=M(H),re(H,this.U)):H=this.U),this.u!==null||this.R||(L.J=H,H=null),this.S)e:{for(var m=0,v=0;v<this.i.length;v++){t:{var S=this.i[v];if("__data__"in S.map&&(S=S.map.__data__,typeof S=="string")){S=S.length;break t}S=void 0}if(S===void 0)break;if(m+=S,m>4096){m=v;break e}if(m===4096||v===this.i.length-1){m=v+1;break e}}m=1e3}else m=1e3;m=Su(this,L,m),v=wt(this.J),Ye(v,"RID",c),Ye(v,"CVER",22),this.G&&Ye(v,"X-HTTP-Session-Id",this.G),Cr(this,v),H&&(this.R?m="headers="+Ui(Nn(H))+"&"+m:this.u&&xr(v,this.u,H)),Co(this.h,L),this.Ra&&Ye(v,"TYPE","init"),this.S?(Ye(v,"$req",m),Ye(v,"SID","null"),L.U=!0,fi(L,v,null)):fi(L,v,m),this.I=2}}else this.I==3&&(c?zo(this,c):this.i.length==0||Io(this.h)||zo(this))};function zo(c,m){var v;m?v=m.l:v=c.V++;const S=wt(c.J);Ye(S,"SID",c.M),Ye(S,"RID",v),Ye(S,"AID",c.K),Cr(c,S),c.u&&c.o&&xr(S,c.u,c.o),v=new Qn(c,c.j,v,c.D+1),c.u===null&&(v.J=c.o),m&&(c.i=m.G.concat(c.i)),m=Su(c,v,1e3),v.H=Math.round(c.va*.5)+Math.round(c.va*.5*Math.random()),Co(c.h,v),fi(v,S,m)}function Cr(c,m){c.H&&ze(c.H,function(v,S){Ye(m,S,v)}),c.l&&ze({},function(v,S){Ye(m,S,v)})}function Su(c,m,v){v=Math.min(c.i.length,v);const S=c.l?g(c.l.Ka,c.l,c):null;e:{var L=c.i;let xe=-1;for(;;){const yt=["count="+v];xe==-1?v>0?(xe=L[0].g,yt.push("ofs="+xe)):xe=0:yt.push("ofs="+xe);let He=!0;for(let at=0;at<v;at++){var H=L[at].g;const Dn=L[at].map;if(H-=xe,H<0)xe=Math.max(0,L[at].g-100),He=!1;else try{H="req"+H+"_"||"";try{var ne=Dn instanceof Map?Dn:Object.entries(Dn);for(const[Si,Jn]of ne){let Zn=Jn;p(Jn)&&(Zn=ys(Jn)),yt.push(H+Si+"="+encodeURIComponent(Zn))}}catch(Si){throw yt.push(H+"type="+encodeURIComponent("_badmap")),Si}}catch{S&&S(Dn)}}if(He){ne=yt.join("&");break e}}ne=void 0}return c=c.i.splice(0,v),m.G=c,ne}function wu(c){if(!c.g&&!c.v){c.Y=1;var m=c.Da;ce||w(),Te||(ce(),Te=!0),N.add(m,c),c.A=0}}function Nr(c){return c.g||c.v||c.A>=3?!1:(c.Y++,c.v=ci(g(c.Da,c),Iu(c,c.A)),c.A++,!0)}s.Da=function(){if(this.v=null,xu(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var c=4*this.T;this.j.info("BP detection timer enabled: "+c),this.B=ci(g(this.Wa,this),c)}},s.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,bt(10),ws(this),xu(this))};function Bo(c){c.B!=null&&(f.clearTimeout(c.B),c.B=null)}function xu(c){c.g=new Qn(c,c.j,"rpc",c.Y),c.u===null&&(c.g.J=c.o),c.g.P=0;var m=wt(c.na);Ye(m,"RID","rpc"),Ye(m,"SID",c.M),Ye(m,"AID",c.K),Ye(m,"CI",c.F?"0":"1"),!c.F&&c.ia&&Ye(m,"TO",c.ia),Ye(m,"TYPE","xmlhttp"),Cr(c,m),c.u&&c.o&&xr(m,c.u,c.o),c.O&&(c.g.H=c.O);var v=c.g;c=c.ba,v.M=1,v.A=Ar(wt(m)),v.u=null,v.R=!0,la(v,c)}s.Va=function(){this.C!=null&&(this.C=null,ws(this),Nr(this),bt(19))};function ya(c){c.C!=null&&(f.clearTimeout(c.C),c.C=null)}function Ru(c,m){var v=null;if(c.g==m){ya(c),Bo(c),c.g=null;var S=2}else if(yi(c.h,m))v=m.G,No(c.h,m),S=1;else return;if(c.I!=0){if(m.o)if(S==1){v=m.u?m.u.length:0,m=Date.now()-m.F;var L=c.D;S=oa(),Vt(S,new ui(S,v)),bi(c)}else wu(c);else if(L=m.m,L==3||L==0&&m.X>0||!(S==1&&ga(c,m)||S==2&&Nr(c)))switch(v&&v.length>0&&(m=c.h,m.i=m.i.concat(v)),L){case 1:Ai(c,5);break;case 4:Ai(c,10);break;case 3:Ai(c,6);break;default:Ai(c,2)}}}function Iu(c,m){let v=c.Qa+Math.floor(Math.random()*c.Za);return c.isActive()||(v*=2),v*m}function Ai(c,m){if(c.j.info("Error code "+m),m==2){var v=g(c.bb,c),S=c.Ua;const L=!S;S=new _n(S||"//www.google.com/images/cleardot.gif"),f.location&&f.location.protocol=="http"||Ut(S,"https"),Ar(S),L?Kn(S.toString(),v):jo(S.toString(),v)}else bt(2);c.I=0,c.l&&c.l.pa(m),Cu(c),pa(c)}s.bb=function(c){c?(this.j.info("Successfully pinged google.com"),bt(2)):(this.j.info("Failed to ping google.com"),bt(1))};function Cu(c){if(c.I=0,c.ja=[],c.l){const m=Do(c.h);(m.length!=0||c.i.length!=0)&&(U(c.ja,m),U(c.ja,c.i),c.h.i.length=0,j(c.i),c.i.length=0),c.l.oa()}}function Nu(c,m,v){var S=v instanceof _n?wt(v):new _n(v);if(S.g!="")m&&(S.g=m+"."+S.g),_s(S,S.u);else{var L=f.location;S=L.protocol,m=m?m+"."+L.hostname:L.hostname,L=+L.port;const H=new _n(null);S&&Ut(H,S),m&&(H.g=m),L&&_s(H,L),v&&(H.h=v),S=H}return v=c.G,m=c.wa,v&&m&&Ye(S,v,m),Ye(S,"VER",c.ka),Cr(c,S),S}function Du(c,m,v){if(m&&!c.L)throw Error("Can't create secondary domain capable XhrIo object.");return m=c.Aa&&!c.ma?new $e(new vi({ab:v})):new $e(c.ma),m.Fa(c.L),m}s.isActive=function(){return!!this.l&&this.l.isActive(this)};function Ou(){}s=Ou.prototype,s.ra=function(){},s.qa=function(){},s.pa=function(){},s.oa=function(){},s.isActive=function(){return!0},s.Ka=function(){};function xs(){}xs.prototype.g=function(c,m){return new sn(c,m)};function sn(c,m){Tt.call(this),this.g=new Ss(m),this.l=c,this.h=m&&m.messageUrlParams||null,c=m&&m.messageHeaders||null,m&&m.clientProtocolHeaderRequired&&(c?c["X-Client-Protocol"]="webchannel":c={"X-Client-Protocol":"webchannel"}),this.g.o=c,c=m&&m.initMessageHeaders||null,m&&m.messageContentType&&(c?c["X-WebChannel-Content-Type"]=m.messageContentType:c={"X-WebChannel-Content-Type":m.messageContentType}),m&&m.sa&&(c?c["X-WebChannel-Client-Profile"]=m.sa:c={"X-WebChannel-Client-Profile":m.sa}),this.g.U=c,(c=m&&m.Qb)&&!R(c)&&(this.g.u=c),this.A=m&&m.supportsCrossDomainXhr||!1,this.v=m&&m.sendRawJson||!1,(m=m&&m.httpSessionIdParam)&&!R(m)&&(this.g.G=m,c=this.h,c!==null&&m in c&&(c=this.h,m in c&&delete c[m])),this.j=new qi(this)}A(sn,Tt),sn.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},sn.prototype.close=function(){Uo(this.g)},sn.prototype.o=function(c){var m=this.g;if(typeof c=="string"){var v={};v.__data__=c,c=v}else this.v&&(v={},v.__data__=ys(c),c=v);m.i.push(new St(m.Ya++,c)),m.I==3&&bi(m)},sn.prototype.N=function(){this.g.l=null,delete this.j,Uo(this.g),delete this.g,sn.Z.N.call(this)};function Mu(c){qt.call(this),c.__headers__&&(this.headers=c.__headers__,this.statusCode=c.__status__,delete c.__headers__,delete c.__status__);var m=c.__sm__;if(m){e:{for(const v in m){c=v;break e}c=void 0}(this.i=c)&&(c=this.i,m=m!==null&&c in m?m[c]:void 0),this.data=m}else this.data=c}A(Mu,qt);function Vu(){Rn.call(this),this.status=1}A(Vu,Rn);function qi(c){this.g=c}A(qi,Ou),qi.prototype.ra=function(){Vt(this.g,"a")},qi.prototype.qa=function(c){Vt(this.g,new Mu(c))},qi.prototype.pa=function(c){Vt(this.g,new Vu)},qi.prototype.oa=function(){Vt(this.g,"b")},xs.prototype.createWebChannel=xs.prototype.g,sn.prototype.send=sn.prototype.o,sn.prototype.open=sn.prototype.m,sn.prototype.close=sn.prototype.close,eT=function(){return new xs},WE=function(){return oa()},ZE=gt,Tm={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Tr.NO_ERROR=0,Tr.TIMEOUT=8,Tr.HTTP_ERROR=6,Kc=Tr,wo.COMPLETE="complete",JE=wo,fu.EventType=Fn,Fn.OPEN="a",Fn.CLOSE="b",Fn.ERROR="c",Fn.MESSAGE="d",Tt.prototype.listen=Tt.prototype.J,Il=fu,$e.prototype.listenOnce=$e.prototype.K,$e.prototype.getLastError=$e.prototype.Ha,$e.prototype.getLastErrorCode=$e.prototype.ya,$e.prototype.getStatus=$e.prototype.ca,$e.prototype.getResponseJson=$e.prototype.La,$e.prototype.getResponseText=$e.prototype.la,$e.prototype.send=$e.prototype.ea,$e.prototype.setWithCredentials=$e.prototype.Fa,$E=$e}).apply(typeof Uc<"u"?Uc:typeof self<"u"?self:typeof window<"u"?window:{});const $0="@firebase/firestore",J0="4.9.2";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Wt=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};Wt.UNAUTHENTICATED=new Wt(null),Wt.GOOGLE_CREDENTIALS=new Wt("google-credentials-uid"),Wt.FIRST_PARTY=new Wt("first-party-uid"),Wt.MOCK_USER=new Wt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let go="12.3.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ar=new Fm("@firebase/firestore");function Ka(){return ar.logLevel}function bx(s){ar.setLogLevel(s)}function oe(s,...e){if(ar.logLevel<=Ve.DEBUG){const i=e.map(tp);ar.debug(`Firestore (${go}): ${s}`,...i)}}function us(s,...e){if(ar.logLevel<=Ve.ERROR){const i=e.map(tp);ar.error(`Firestore (${go}): ${s}`,...i)}}function ro(s,...e){if(ar.logLevel<=Ve.WARN){const i=e.map(tp);ar.warn(`Firestore (${go}): ${s}`,...i)}}function tp(s){if(typeof s=="string")return s;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(i){return JSON.stringify(i)})(s)}catch{return s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ve(s,e,i){let r="Unexpected state";typeof e=="string"?r=e:i=e,tT(s,r,i)}function tT(s,e,i){let r=`FIRESTORE (${go}) INTERNAL ASSERTION FAILED: ${e} (ID: ${s.toString(16)})`;if(i!==void 0)try{r+=" CONTEXT: "+JSON.stringify(i)}catch{r+=" CONTEXT: "+i}throw us(r),new Error(r)}function Ge(s,e,i,r){let l="Unexpected state";typeof i=="string"?l=i:r=i,s||tT(e,l,r)}function we(s,e){return s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const J={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ae extends fs{constructor(e,i){super(e,i),this.code=e,this.message=i,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class as{constructor(){this.promise=new Promise(((e,i)=>{this.resolve=e,this.reject=i}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nT{constructor(e,i){this.user=i,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class Ax{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,i){e.enqueueRetryable((()=>i(Wt.UNAUTHENTICATED)))}shutdown(){}}class Sx{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,i){this.changeListener=i,e.enqueueRetryable((()=>i(this.token.user)))}shutdown(){this.changeListener=null}}class wx{constructor(e){this.t=e,this.currentUser=Wt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,i){Ge(this.o===void 0,42304);let r=this.i;const l=y=>this.i!==r?(r=this.i,i(y)):Promise.resolve();let u=new as;this.o=()=>{this.i++,this.currentUser=this.u(),u.resolve(),u=new as,e.enqueueRetryable((()=>l(this.currentUser)))};const f=()=>{const y=u;e.enqueueRetryable((async()=>{await y.promise,await l(this.currentUser)}))},p=y=>{oe("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=y,this.o&&(this.auth.addAuthTokenListener(this.o),f())};this.t.onInit((y=>p(y))),setTimeout((()=>{if(!this.auth){const y=this.t.getImmediate({optional:!0});y?p(y):(oe("FirebaseAuthCredentialsProvider","Auth not yet detected"),u.resolve(),u=new as)}}),0),f()}getToken(){const e=this.i,i=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(i).then((r=>this.i!==e?(oe("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Ge(typeof r.accessToken=="string",31837,{l:r}),new nT(r.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Ge(e===null||typeof e=="string",2055,{h:e}),new Wt(e)}}class xx{constructor(e,i,r){this.P=e,this.T=i,this.I=r,this.type="FirstParty",this.user=Wt.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class Rx{constructor(e,i,r){this.P=e,this.T=i,this.I=r}getToken(){return Promise.resolve(new xx(this.P,this.T,this.I))}start(e,i){e.enqueueRetryable((()=>i(Wt.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class Z0{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Ix{constructor(e,i){this.V=i,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,mn(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,i){Ge(this.o===void 0,3512);const r=u=>{u.error!=null&&oe("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${u.error.message}`);const f=u.token!==this.m;return this.m=u.token,oe("FirebaseAppCheckTokenProvider",`Received ${f?"new":"existing"} token.`),f?i(u.token):Promise.resolve()};this.o=u=>{e.enqueueRetryable((()=>r(u)))};const l=u=>{oe("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=u,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((u=>l(u))),setTimeout((()=>{if(!this.appCheck){const u=this.V.getImmediate({optional:!0});u?l(u):oe("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new Z0(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((i=>i?(Ge(typeof i.token=="string",44558,{tokenResult:i}),this.m=i.token,new Z0(i.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cx(s){const e=typeof self<"u"&&(self.crypto||self.msCrypto),i=new Uint8Array(s);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(i);else for(let r=0;r<s;r++)i[r]=Math.floor(256*Math.random());return i}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class np{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",i=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const l=Cx(40);for(let u=0;u<l.length;++u)r.length<20&&l[u]<i&&(r+=e.charAt(l[u]%62))}return r}}function ke(s,e){return s<e?-1:s>e?1:0}function bm(s,e){const i=Math.min(s.length,e.length);for(let r=0;r<i;r++){const l=s.charAt(r),u=e.charAt(r);if(l!==u)return am(l)===am(u)?ke(l,u):am(l)?1:-1}return ke(s.length,e.length)}const Nx=55296,Dx=57343;function am(s){const e=s.charCodeAt(0);return e>=Nx&&e<=Dx}function ao(s,e,i){return s.length===e.length&&s.every(((r,l)=>i(r,e[l])))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const W0="__name__";class Ci{constructor(e,i,r){i===void 0?i=0:i>e.length&&ve(637,{offset:i,range:e.length}),r===void 0?r=e.length-i:r>e.length-i&&ve(1746,{length:r,range:e.length-i}),this.segments=e,this.offset=i,this.len=r}get length(){return this.len}isEqual(e){return Ci.comparator(this,e)===0}child(e){const i=this.segments.slice(this.offset,this.limit());return e instanceof Ci?e.forEach((r=>{i.push(r)})):i.push(e),this.construct(i)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let i=0;i<this.length;i++)if(this.get(i)!==e.get(i))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let i=0;i<this.length;i++)if(this.get(i)!==e.get(i))return!1;return!0}forEach(e){for(let i=this.offset,r=this.limit();i<r;i++)e(this.segments[i])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,i){const r=Math.min(e.length,i.length);for(let l=0;l<r;l++){const u=Ci.compareSegments(e.get(l),i.get(l));if(u!==0)return u}return ke(e.length,i.length)}static compareSegments(e,i){const r=Ci.isNumericId(e),l=Ci.isNumericId(i);return r&&!l?-1:!r&&l?1:r&&l?Ci.extractNumericId(e).compare(Ci.extractNumericId(i)):bm(e,i)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return sr.fromString(e.substring(4,e.length-2))}}class tt extends Ci{construct(e,i,r){return new tt(e,i,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const i=[];for(const r of e){if(r.indexOf("//")>=0)throw new ae(J.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);i.push(...r.split("/").filter((l=>l.length>0)))}return new tt(i)}static emptyPath(){return new tt([])}}const Ox=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Xt extends Ci{construct(e,i,r){return new Xt(e,i,r)}static isValidIdentifier(e){return Ox.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Xt.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===W0}static keyField(){return new Xt([W0])}static fromServerFormat(e){const i=[];let r="",l=0;const u=()=>{if(r.length===0)throw new ae(J.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);i.push(r),r=""};let f=!1;for(;l<e.length;){const p=e[l];if(p==="\\"){if(l+1===e.length)throw new ae(J.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const y=e[l+1];if(y!=="\\"&&y!=="."&&y!=="`")throw new ae(J.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=y,l+=2}else p==="`"?(f=!f,l++):p!=="."||f?(r+=p,l++):(u(),l++)}if(u(),f)throw new ae(J.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Xt(i)}static emptyPath(){return new Xt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pe{constructor(e){this.path=e}static fromPath(e){return new pe(tt.fromString(e))}static fromName(e){return new pe(tt.fromString(e).popFirst(5))}static empty(){return new pe(tt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&tt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,i){return tt.comparator(e.path,i.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new pe(new tt(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iT(s,e,i){if(!i)throw new ae(J.INVALID_ARGUMENT,`Function ${s}() cannot be called with an empty ${e}.`)}function Mx(s,e,i,r){if(e===!0&&r===!0)throw new ae(J.INVALID_ARGUMENT,`${s} and ${i} cannot be used together.`)}function ev(s){if(!pe.isDocumentKey(s))throw new ae(J.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${s} has ${s.length}.`)}function tv(s){if(pe.isDocumentKey(s))throw new ae(J.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${s} has ${s.length}.`)}function sT(s){return typeof s=="object"&&s!==null&&(Object.getPrototypeOf(s)===Object.prototype||Object.getPrototypeOf(s)===null)}function xh(s){if(s===void 0)return"undefined";if(s===null)return"null";if(typeof s=="string")return s.length>20&&(s=`${s.substring(0,20)}...`),JSON.stringify(s);if(typeof s=="number"||typeof s=="boolean")return""+s;if(typeof s=="object"){if(s instanceof Array)return"an array";{const e=(function(r){return r.constructor?r.constructor.name:null})(s);return e?`a custom ${e} object`:"an object"}}return typeof s=="function"?"a function":ve(12329,{type:typeof s})}function gn(s,e){if("_delegate"in s&&(s=s._delegate),!(s instanceof e)){if(e.name===s.constructor.name)throw new ae(J.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const i=xh(s);throw new ae(J.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${i}`)}}return s}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ot(s,e){const i={typeString:s};return e&&(i.value=e),i}function Wl(s,e){if(!sT(s))throw new ae(J.INVALID_ARGUMENT,"JSON must be an object");let i;for(const r in e)if(e[r]){const l=e[r].typeString,u="value"in e[r]?{value:e[r].value}:void 0;if(!(r in s)){i=`JSON missing required field: '${r}'`;break}const f=s[r];if(l&&typeof f!==l){i=`JSON field '${r}' must be a ${l}.`;break}if(u!==void 0&&f!==u.value){i=`Expected '${r}' field to equal '${u.value}'`;break}}if(i)throw new ae(J.INVALID_ARGUMENT,i);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nv=-62135596800,iv=1e6;class st{static now(){return st.fromMillis(Date.now())}static fromDate(e){return st.fromMillis(e.getTime())}static fromMillis(e){const i=Math.floor(e/1e3),r=Math.floor((e-1e3*i)*iv);return new st(i,r)}constructor(e,i){if(this.seconds=e,this.nanoseconds=i,i<0)throw new ae(J.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+i);if(i>=1e9)throw new ae(J.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+i);if(e<nv)throw new ae(J.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ae(J.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/iv}_compareTo(e){return this.seconds===e.seconds?ke(this.nanoseconds,e.nanoseconds):ke(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:st._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Wl(e,st._jsonSchema))return new st(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-nv;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}st._jsonSchemaVersion="firestore/timestamp/1.0",st._jsonSchema={type:Ot("string",st._jsonSchemaVersion),seconds:Ot("number"),nanoseconds:Ot("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ae{static fromTimestamp(e){return new Ae(e)}static min(){return new Ae(new st(0,0))}static max(){return new Ae(new st(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bl=-1;function Vx(s,e){const i=s.toTimestamp().seconds,r=s.toTimestamp().nanoseconds+1,l=Ae.fromTimestamp(r===1e9?new st(i+1,0):new st(i,r));return new or(l,pe.empty(),e)}function kx(s){return new or(s.readTime,s.key,Bl)}class or{constructor(e,i,r){this.readTime=e,this.documentKey=i,this.largestBatchId=r}static min(){return new or(Ae.min(),pe.empty(),Bl)}static max(){return new or(Ae.max(),pe.empty(),Bl)}}function jx(s,e){let i=s.readTime.compareTo(e.readTime);return i!==0?i:(i=pe.comparator(s.documentKey,e.documentKey),i!==0?i:ke(s.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Px="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Lx{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function yo(s){if(s.code!==J.FAILED_PRECONDITION||s.message!==Px)throw s;oe("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((i=>{this.isDone=!0,this.result=i,this.nextCallback&&this.nextCallback(i)}),(i=>{this.isDone=!0,this.error=i,this.catchCallback&&this.catchCallback(i)}))}catch(e){return this.next(void 0,e)}next(e,i){return this.callbackAttached&&ve(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(i,this.error):this.wrapSuccess(e,this.result):new W(((r,l)=>{this.nextCallback=u=>{this.wrapSuccess(e,u).next(r,l)},this.catchCallback=u=>{this.wrapFailure(i,u).next(r,l)}}))}toPromise(){return new Promise(((e,i)=>{this.next(e,i)}))}wrapUserFunction(e){try{const i=e();return i instanceof W?i:W.resolve(i)}catch(i){return W.reject(i)}}wrapSuccess(e,i){return e?this.wrapUserFunction((()=>e(i))):W.resolve(i)}wrapFailure(e,i){return e?this.wrapUserFunction((()=>e(i))):W.reject(i)}static resolve(e){return new W(((i,r)=>{i(e)}))}static reject(e){return new W(((i,r)=>{r(e)}))}static waitFor(e){return new W(((i,r)=>{let l=0,u=0,f=!1;e.forEach((p=>{++l,p.next((()=>{++u,f&&u===l&&i()}),(y=>r(y)))})),f=!0,u===l&&i()}))}static or(e){let i=W.resolve(!1);for(const r of e)i=i.next((l=>l?W.resolve(l):r()));return i}static forEach(e,i){const r=[];return e.forEach(((l,u)=>{r.push(i.call(this,l,u))})),this.waitFor(r)}static mapArray(e,i){return new W(((r,l)=>{const u=e.length,f=new Array(u);let p=0;for(let y=0;y<u;y++){const g=y;i(e[g]).next((T=>{f[g]=T,++p,p===u&&r(f)}),(T=>l(T)))}}))}static doWhile(e,i){return new W(((r,l)=>{const u=()=>{e()===!0?i().next((()=>{u()}),l):r()};u()}))}}function Ux(s){const e=s.match(/Android ([\d.]+)/i),i=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(i)}function _o(s){return s.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rh{constructor(e,i){this.previousValue=e,i&&(i.sequenceNumberHandler=r=>this.ae(r),this.ue=r=>i.writeSequenceNumber(r))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Rh.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ip=-1;function Ih(s){return s==null}function lh(s){return s===0&&1/s==-1/0}function zx(s){return typeof s=="number"&&Number.isInteger(s)&&!lh(s)&&s<=Number.MAX_SAFE_INTEGER&&s>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rT="";function Bx(s){let e="";for(let i=0;i<s.length;i++)e.length>0&&(e=sv(e)),e=qx(s.get(i),e);return sv(e)}function qx(s,e){let i=e;const r=s.length;for(let l=0;l<r;l++){const u=s.charAt(l);switch(u){case"\0":i+="";break;case rT:i+="";break;default:i+=u}}return i}function sv(s){return s+rT+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rv(s){let e=0;for(const i in s)Object.prototype.hasOwnProperty.call(s,i)&&e++;return e}function mr(s,e){for(const i in s)Object.prototype.hasOwnProperty.call(s,i)&&e(i,s[i])}function aT(s){for(const e in s)if(Object.prototype.hasOwnProperty.call(s,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ut{constructor(e,i){this.comparator=e,this.root=i||Kt.EMPTY}insert(e,i){return new ut(this.comparator,this.root.insert(e,i,this.comparator).copy(null,null,Kt.BLACK,null,null))}remove(e){return new ut(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Kt.BLACK,null,null))}get(e){let i=this.root;for(;!i.isEmpty();){const r=this.comparator(e,i.key);if(r===0)return i.value;r<0?i=i.left:r>0&&(i=i.right)}return null}indexOf(e){let i=0,r=this.root;for(;!r.isEmpty();){const l=this.comparator(e,r.key);if(l===0)return i+r.left.size;l<0?r=r.left:(i+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((i,r)=>(e(i,r),!1)))}toString(){const e=[];return this.inorderTraversal(((i,r)=>(e.push(`${i}:${r}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new zc(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new zc(this.root,e,this.comparator,!1)}getReverseIterator(){return new zc(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new zc(this.root,e,this.comparator,!0)}}class zc{constructor(e,i,r,l){this.isReverse=l,this.nodeStack=[];let u=1;for(;!e.isEmpty();)if(u=i?r(e.key,i):1,i&&l&&(u*=-1),u<0)e=this.isReverse?e.left:e.right;else{if(u===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const i={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return i}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Kt{constructor(e,i,r,l,u){this.key=e,this.value=i,this.color=r??Kt.RED,this.left=l??Kt.EMPTY,this.right=u??Kt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,i,r,l,u){return new Kt(e??this.key,i??this.value,r??this.color,l??this.left,u??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,i,r){let l=this;const u=r(e,l.key);return l=u<0?l.copy(null,null,null,l.left.insert(e,i,r),null):u===0?l.copy(null,i,null,null,null):l.copy(null,null,null,null,l.right.insert(e,i,r)),l.fixUp()}removeMin(){if(this.left.isEmpty())return Kt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,i){let r,l=this;if(i(e,l.key)<0)l.left.isEmpty()||l.left.isRed()||l.left.left.isRed()||(l=l.moveRedLeft()),l=l.copy(null,null,null,l.left.remove(e,i),null);else{if(l.left.isRed()&&(l=l.rotateRight()),l.right.isEmpty()||l.right.isRed()||l.right.left.isRed()||(l=l.moveRedRight()),i(e,l.key)===0){if(l.right.isEmpty())return Kt.EMPTY;r=l.right.min(),l=l.copy(r.key,r.value,null,null,l.right.removeMin())}l=l.copy(null,null,null,null,l.right.remove(e,i))}return l.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Kt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Kt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),i=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,i)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw ve(43730,{key:this.key,value:this.value});if(this.right.isRed())throw ve(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw ve(27949);return e+(this.isRed()?0:1)}}Kt.EMPTY=null,Kt.RED=!0,Kt.BLACK=!1;Kt.EMPTY=new class{constructor(){this.size=0}get key(){throw ve(57766)}get value(){throw ve(16141)}get color(){throw ve(16727)}get left(){throw ve(29726)}get right(){throw ve(36894)}copy(e,i,r,l,u){return this}insert(e,i,r){return new Kt(e,i)}remove(e,i){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jt{constructor(e){this.comparator=e,this.data=new ut(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((i,r)=>(e(i),!1)))}forEachInRange(e,i){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const l=r.getNext();if(this.comparator(l.key,e[1])>=0)return;i(l.key)}}forEachWhile(e,i){let r;for(r=i!==void 0?this.data.getIteratorFrom(i):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const i=this.data.getIteratorFrom(e);return i.hasNext()?i.getNext().key:null}getIterator(){return new av(this.data.getIterator())}getIteratorFrom(e){return new av(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let i=this;return i.size<e.size&&(i=e,e=this),e.forEach((r=>{i=i.add(r)})),i}isEqual(e){if(!(e instanceof jt)||this.size!==e.size)return!1;const i=this.data.getIterator(),r=e.data.getIterator();for(;i.hasNext();){const l=i.getNext().key,u=r.getNext().key;if(this.comparator(l,u)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((i=>{e.push(i)})),e}toString(){const e=[];return this.forEach((i=>e.push(i))),"SortedSet("+e.toString()+")"}copy(e){const i=new jt(this.comparator);return i.data=e,i}}class av{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xn{constructor(e){this.fields=e,e.sort(Xt.comparator)}static empty(){return new xn([])}unionWith(e){let i=new jt(Xt.comparator);for(const r of this.fields)i=i.add(r);for(const r of e)i=i.add(r);return new xn(i.toArray())}covers(e){for(const i of this.fields)if(i.isPrefixOf(e))return!0;return!1}isEqual(e){return ao(this.fields,e.fields,((i,r)=>i.isEqual(r)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oT extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $t{constructor(e){this.binaryString=e}static fromBase64String(e){const i=(function(l){try{return atob(l)}catch(u){throw typeof DOMException<"u"&&u instanceof DOMException?new oT("Invalid base64 string: "+u):u}})(e);return new $t(i)}static fromUint8Array(e){const i=(function(l){let u="";for(let f=0;f<l.length;++f)u+=String.fromCharCode(l[f]);return u})(e);return new $t(i)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(i){return btoa(i)})(this.binaryString)}toUint8Array(){return(function(i){const r=new Uint8Array(i.length);for(let l=0;l<i.length;l++)r[l]=i.charCodeAt(l);return r})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ke(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}$t.EMPTY_BYTE_STRING=new $t("");const Hx=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function lr(s){if(Ge(!!s,39018),typeof s=="string"){let e=0;const i=Hx.exec(s);if(Ge(!!i,46558,{timestamp:s}),i[1]){let l=i[1];l=(l+"000000000").substr(0,9),e=Number(l)}const r=new Date(s);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Et(s.seconds),nanos:Et(s.nanos)}}function Et(s){return typeof s=="number"?s:typeof s=="string"?Number(s):0}function ur(s){return typeof s=="string"?$t.fromBase64String(s):$t.fromUint8Array(s)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lT="server_timestamp",uT="__type__",cT="__previous_value__",hT="__local_write_time__";function sp(s){return(s?.mapValue?.fields||{})[uT]?.stringValue===lT}function Ch(s){const e=s.mapValue.fields[cT];return sp(e)?Ch(e):e}function ql(s){const e=lr(s.mapValue.fields[hT].timestampValue);return new st(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fx{constructor(e,i,r,l,u,f,p,y,g,T){this.databaseId=e,this.appId=i,this.persistenceKey=r,this.host=l,this.ssl=u,this.forceLongPolling=f,this.autoDetectLongPolling=p,this.longPollingOptions=y,this.useFetchStreams=g,this.isUsingEmulator=T}}const uh="(default)";class Hl{constructor(e,i){this.projectId=e,this.database=i||uh}static empty(){return new Hl("","")}get isDefaultDatabase(){return this.database===uh}isEqual(e){return e instanceof Hl&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fT="__type__",Gx="__max__",Bc={mapValue:{}},dT="__vector__",ch="value";function cr(s){return"nullValue"in s?0:"booleanValue"in s?1:"integerValue"in s||"doubleValue"in s?2:"timestampValue"in s?3:"stringValue"in s?5:"bytesValue"in s?6:"referenceValue"in s?7:"geoPointValue"in s?8:"arrayValue"in s?9:"mapValue"in s?sp(s)?4:Yx(s)?9007199254740991:Qx(s)?10:11:ve(28295,{value:s})}function Pi(s,e){if(s===e)return!0;const i=cr(s);if(i!==cr(e))return!1;switch(i){case 0:case 9007199254740991:return!0;case 1:return s.booleanValue===e.booleanValue;case 4:return ql(s).isEqual(ql(e));case 3:return(function(l,u){if(typeof l.timestampValue=="string"&&typeof u.timestampValue=="string"&&l.timestampValue.length===u.timestampValue.length)return l.timestampValue===u.timestampValue;const f=lr(l.timestampValue),p=lr(u.timestampValue);return f.seconds===p.seconds&&f.nanos===p.nanos})(s,e);case 5:return s.stringValue===e.stringValue;case 6:return(function(l,u){return ur(l.bytesValue).isEqual(ur(u.bytesValue))})(s,e);case 7:return s.referenceValue===e.referenceValue;case 8:return(function(l,u){return Et(l.geoPointValue.latitude)===Et(u.geoPointValue.latitude)&&Et(l.geoPointValue.longitude)===Et(u.geoPointValue.longitude)})(s,e);case 2:return(function(l,u){if("integerValue"in l&&"integerValue"in u)return Et(l.integerValue)===Et(u.integerValue);if("doubleValue"in l&&"doubleValue"in u){const f=Et(l.doubleValue),p=Et(u.doubleValue);return f===p?lh(f)===lh(p):isNaN(f)&&isNaN(p)}return!1})(s,e);case 9:return ao(s.arrayValue.values||[],e.arrayValue.values||[],Pi);case 10:case 11:return(function(l,u){const f=l.mapValue.fields||{},p=u.mapValue.fields||{};if(rv(f)!==rv(p))return!1;for(const y in f)if(f.hasOwnProperty(y)&&(p[y]===void 0||!Pi(f[y],p[y])))return!1;return!0})(s,e);default:return ve(52216,{left:s})}}function Fl(s,e){return(s.values||[]).find((i=>Pi(i,e)))!==void 0}function oo(s,e){if(s===e)return 0;const i=cr(s),r=cr(e);if(i!==r)return ke(i,r);switch(i){case 0:case 9007199254740991:return 0;case 1:return ke(s.booleanValue,e.booleanValue);case 2:return(function(u,f){const p=Et(u.integerValue||u.doubleValue),y=Et(f.integerValue||f.doubleValue);return p<y?-1:p>y?1:p===y?0:isNaN(p)?isNaN(y)?0:-1:1})(s,e);case 3:return ov(s.timestampValue,e.timestampValue);case 4:return ov(ql(s),ql(e));case 5:return bm(s.stringValue,e.stringValue);case 6:return(function(u,f){const p=ur(u),y=ur(f);return p.compareTo(y)})(s.bytesValue,e.bytesValue);case 7:return(function(u,f){const p=u.split("/"),y=f.split("/");for(let g=0;g<p.length&&g<y.length;g++){const T=ke(p[g],y[g]);if(T!==0)return T}return ke(p.length,y.length)})(s.referenceValue,e.referenceValue);case 8:return(function(u,f){const p=ke(Et(u.latitude),Et(f.latitude));return p!==0?p:ke(Et(u.longitude),Et(f.longitude))})(s.geoPointValue,e.geoPointValue);case 9:return lv(s.arrayValue,e.arrayValue);case 10:return(function(u,f){const p=u.fields||{},y=f.fields||{},g=p[ch]?.arrayValue,T=y[ch]?.arrayValue,A=ke(g?.values?.length||0,T?.values?.length||0);return A!==0?A:lv(g,T)})(s.mapValue,e.mapValue);case 11:return(function(u,f){if(u===Bc.mapValue&&f===Bc.mapValue)return 0;if(u===Bc.mapValue)return 1;if(f===Bc.mapValue)return-1;const p=u.fields||{},y=Object.keys(p),g=f.fields||{},T=Object.keys(g);y.sort(),T.sort();for(let A=0;A<y.length&&A<T.length;++A){const x=bm(y[A],T[A]);if(x!==0)return x;const j=oo(p[y[A]],g[T[A]]);if(j!==0)return j}return ke(y.length,T.length)})(s.mapValue,e.mapValue);default:throw ve(23264,{he:i})}}function ov(s,e){if(typeof s=="string"&&typeof e=="string"&&s.length===e.length)return ke(s,e);const i=lr(s),r=lr(e),l=ke(i.seconds,r.seconds);return l!==0?l:ke(i.nanos,r.nanos)}function lv(s,e){const i=s.values||[],r=e.values||[];for(let l=0;l<i.length&&l<r.length;++l){const u=oo(i[l],r[l]);if(u)return u}return ke(i.length,r.length)}function lo(s){return Am(s)}function Am(s){return"nullValue"in s?"null":"booleanValue"in s?""+s.booleanValue:"integerValue"in s?""+s.integerValue:"doubleValue"in s?""+s.doubleValue:"timestampValue"in s?(function(i){const r=lr(i);return`time(${r.seconds},${r.nanos})`})(s.timestampValue):"stringValue"in s?s.stringValue:"bytesValue"in s?(function(i){return ur(i).toBase64()})(s.bytesValue):"referenceValue"in s?(function(i){return pe.fromName(i).toString()})(s.referenceValue):"geoPointValue"in s?(function(i){return`geo(${i.latitude},${i.longitude})`})(s.geoPointValue):"arrayValue"in s?(function(i){let r="[",l=!0;for(const u of i.values||[])l?l=!1:r+=",",r+=Am(u);return r+"]"})(s.arrayValue):"mapValue"in s?(function(i){const r=Object.keys(i.fields||{}).sort();let l="{",u=!0;for(const f of r)u?u=!1:l+=",",l+=`${f}:${Am(i.fields[f])}`;return l+"}"})(s.mapValue):ve(61005,{value:s})}function Xc(s){switch(cr(s)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Ch(s);return e?16+Xc(e):16;case 5:return 2*s.stringValue.length;case 6:return ur(s.bytesValue).approximateByteSize();case 7:return s.referenceValue.length;case 9:return(function(r){return(r.values||[]).reduce(((l,u)=>l+Xc(u)),0)})(s.arrayValue);case 10:case 11:return(function(r){let l=0;return mr(r.fields,((u,f)=>{l+=u.length+Xc(f)})),l})(s.mapValue);default:throw ve(13486,{value:s})}}function uv(s,e){return{referenceValue:`projects/${s.projectId}/databases/${s.database}/documents/${e.path.canonicalString()}`}}function Sm(s){return!!s&&"integerValue"in s}function rp(s){return!!s&&"arrayValue"in s}function cv(s){return!!s&&"nullValue"in s}function hv(s){return!!s&&"doubleValue"in s&&isNaN(Number(s.doubleValue))}function $c(s){return!!s&&"mapValue"in s}function Qx(s){return(s?.mapValue?.fields||{})[fT]?.stringValue===dT}function Vl(s){if(s.geoPointValue)return{geoPointValue:{...s.geoPointValue}};if(s.timestampValue&&typeof s.timestampValue=="object")return{timestampValue:{...s.timestampValue}};if(s.mapValue){const e={mapValue:{fields:{}}};return mr(s.mapValue.fields,((i,r)=>e.mapValue.fields[i]=Vl(r))),e}if(s.arrayValue){const e={arrayValue:{values:[]}};for(let i=0;i<(s.arrayValue.values||[]).length;++i)e.arrayValue.values[i]=Vl(s.arrayValue.values[i]);return e}return{...s}}function Yx(s){return(((s.mapValue||{}).fields||{}).__type__||{}).stringValue===Gx}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pn{constructor(e){this.value=e}static empty(){return new pn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let i=this.value;for(let r=0;r<e.length-1;++r)if(i=(i.mapValue.fields||{})[e.get(r)],!$c(i))return null;return i=(i.mapValue.fields||{})[e.lastSegment()],i||null}}set(e,i){this.getFieldsMap(e.popLast())[e.lastSegment()]=Vl(i)}setAll(e){let i=Xt.emptyPath(),r={},l=[];e.forEach(((f,p)=>{if(!i.isImmediateParentOf(p)){const y=this.getFieldsMap(i);this.applyChanges(y,r,l),r={},l=[],i=p.popLast()}f?r[p.lastSegment()]=Vl(f):l.push(p.lastSegment())}));const u=this.getFieldsMap(i);this.applyChanges(u,r,l)}delete(e){const i=this.field(e.popLast());$c(i)&&i.mapValue.fields&&delete i.mapValue.fields[e.lastSegment()]}isEqual(e){return Pi(this.value,e.value)}getFieldsMap(e){let i=this.value;i.mapValue.fields||(i.mapValue={fields:{}});for(let r=0;r<e.length;++r){let l=i.mapValue.fields[e.get(r)];$c(l)&&l.mapValue.fields||(l={mapValue:{fields:{}}},i.mapValue.fields[e.get(r)]=l),i=l}return i.mapValue.fields}applyChanges(e,i,r){mr(i,((l,u)=>e[l]=u));for(const l of r)delete e[l]}clone(){return new pn(Vl(this.value))}}function mT(s){const e=[];return mr(s.fields,((i,r)=>{const l=new Xt([i]);if($c(r)){const u=mT(r.mapValue).fields;if(u.length===0)e.push(l);else for(const f of u)e.push(l.child(f))}else e.push(l)})),new xn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class en{constructor(e,i,r,l,u,f,p){this.key=e,this.documentType=i,this.version=r,this.readTime=l,this.createTime=u,this.data=f,this.documentState=p}static newInvalidDocument(e){return new en(e,0,Ae.min(),Ae.min(),Ae.min(),pn.empty(),0)}static newFoundDocument(e,i,r,l){return new en(e,1,i,Ae.min(),r,l,0)}static newNoDocument(e,i){return new en(e,2,i,Ae.min(),Ae.min(),pn.empty(),0)}static newUnknownDocument(e,i){return new en(e,3,i,Ae.min(),Ae.min(),pn.empty(),2)}convertToFoundDocument(e,i){return!this.createTime.isEqual(Ae.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=i,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=pn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=pn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ae.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof en&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new en(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hh{constructor(e,i){this.position=e,this.inclusive=i}}function fv(s,e,i){let r=0;for(let l=0;l<s.position.length;l++){const u=e[l],f=s.position[l];if(u.field.isKeyField()?r=pe.comparator(pe.fromName(f.referenceValue),i.key):r=oo(f,i.data.field(u.field)),u.dir==="desc"&&(r*=-1),r!==0)break}return r}function dv(s,e){if(s===null)return e===null;if(e===null||s.inclusive!==e.inclusive||s.position.length!==e.position.length)return!1;for(let i=0;i<s.position.length;i++)if(!Pi(s.position[i],e.position[i]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fh{constructor(e,i="asc"){this.field=e,this.dir=i}}function Kx(s,e){return s.dir===e.dir&&s.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pT{}class Dt extends pT{constructor(e,i,r){super(),this.field=e,this.op=i,this.value=r}static create(e,i,r){return e.isKeyField()?i==="in"||i==="not-in"?this.createKeyFieldInFilter(e,i,r):new $x(e,i,r):i==="array-contains"?new Wx(e,r):i==="in"?new eR(e,r):i==="not-in"?new tR(e,r):i==="array-contains-any"?new nR(e,r):new Dt(e,i,r)}static createKeyFieldInFilter(e,i,r){return i==="in"?new Jx(e,r):new Zx(e,r)}matches(e){const i=e.data.field(this.field);return this.op==="!="?i!==null&&i.nullValue===void 0&&this.matchesComparison(oo(i,this.value)):i!==null&&cr(this.value)===cr(i)&&this.matchesComparison(oo(i,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return ve(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class ai extends pT{constructor(e,i){super(),this.filters=e,this.op=i,this.Pe=null}static create(e,i){return new ai(e,i)}matches(e){return gT(this)?this.filters.find((i=>!i.matches(e)))===void 0:this.filters.find((i=>i.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,i)=>e.concat(i.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function gT(s){return s.op==="and"}function yT(s){return Xx(s)&&gT(s)}function Xx(s){for(const e of s.filters)if(e instanceof ai)return!1;return!0}function wm(s){if(s instanceof Dt)return s.field.canonicalString()+s.op.toString()+lo(s.value);if(yT(s))return s.filters.map((e=>wm(e))).join(",");{const e=s.filters.map((i=>wm(i))).join(",");return`${s.op}(${e})`}}function _T(s,e){return s instanceof Dt?(function(r,l){return l instanceof Dt&&r.op===l.op&&r.field.isEqual(l.field)&&Pi(r.value,l.value)})(s,e):s instanceof ai?(function(r,l){return l instanceof ai&&r.op===l.op&&r.filters.length===l.filters.length?r.filters.reduce(((u,f,p)=>u&&_T(f,l.filters[p])),!0):!1})(s,e):void ve(19439)}function vT(s){return s instanceof Dt?(function(i){return`${i.field.canonicalString()} ${i.op} ${lo(i.value)}`})(s):s instanceof ai?(function(i){return i.op.toString()+" {"+i.getFilters().map(vT).join(" ,")+"}"})(s):"Filter"}class $x extends Dt{constructor(e,i,r){super(e,i,r),this.key=pe.fromName(r.referenceValue)}matches(e){const i=pe.comparator(e.key,this.key);return this.matchesComparison(i)}}class Jx extends Dt{constructor(e,i){super(e,"in",i),this.keys=ET("in",i)}matches(e){return this.keys.some((i=>i.isEqual(e.key)))}}class Zx extends Dt{constructor(e,i){super(e,"not-in",i),this.keys=ET("not-in",i)}matches(e){return!this.keys.some((i=>i.isEqual(e.key)))}}function ET(s,e){return(e.arrayValue?.values||[]).map((i=>pe.fromName(i.referenceValue)))}class Wx extends Dt{constructor(e,i){super(e,"array-contains",i)}matches(e){const i=e.data.field(this.field);return rp(i)&&Fl(i.arrayValue,this.value)}}class eR extends Dt{constructor(e,i){super(e,"in",i)}matches(e){const i=e.data.field(this.field);return i!==null&&Fl(this.value.arrayValue,i)}}class tR extends Dt{constructor(e,i){super(e,"not-in",i)}matches(e){if(Fl(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const i=e.data.field(this.field);return i!==null&&i.nullValue===void 0&&!Fl(this.value.arrayValue,i)}}class nR extends Dt{constructor(e,i){super(e,"array-contains-any",i)}matches(e){const i=e.data.field(this.field);return!(!rp(i)||!i.arrayValue.values)&&i.arrayValue.values.some((r=>Fl(this.value.arrayValue,r)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iR{constructor(e,i=null,r=[],l=[],u=null,f=null,p=null){this.path=e,this.collectionGroup=i,this.orderBy=r,this.filters=l,this.limit=u,this.startAt=f,this.endAt=p,this.Te=null}}function mv(s,e=null,i=[],r=[],l=null,u=null,f=null){return new iR(s,e,i,r,l,u,f)}function ap(s){const e=we(s);if(e.Te===null){let i=e.path.canonicalString();e.collectionGroup!==null&&(i+="|cg:"+e.collectionGroup),i+="|f:",i+=e.filters.map((r=>wm(r))).join(","),i+="|ob:",i+=e.orderBy.map((r=>(function(u){return u.field.canonicalString()+u.dir})(r))).join(","),Ih(e.limit)||(i+="|l:",i+=e.limit),e.startAt&&(i+="|lb:",i+=e.startAt.inclusive?"b:":"a:",i+=e.startAt.position.map((r=>lo(r))).join(",")),e.endAt&&(i+="|ub:",i+=e.endAt.inclusive?"a:":"b:",i+=e.endAt.position.map((r=>lo(r))).join(",")),e.Te=i}return e.Te}function op(s,e){if(s.limit!==e.limit||s.orderBy.length!==e.orderBy.length)return!1;for(let i=0;i<s.orderBy.length;i++)if(!Kx(s.orderBy[i],e.orderBy[i]))return!1;if(s.filters.length!==e.filters.length)return!1;for(let i=0;i<s.filters.length;i++)if(!_T(s.filters[i],e.filters[i]))return!1;return s.collectionGroup===e.collectionGroup&&!!s.path.isEqual(e.path)&&!!dv(s.startAt,e.startAt)&&dv(s.endAt,e.endAt)}function xm(s){return pe.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eu{constructor(e,i=null,r=[],l=[],u=null,f="F",p=null,y=null){this.path=e,this.collectionGroup=i,this.explicitOrderBy=r,this.filters=l,this.limit=u,this.limitType=f,this.startAt=p,this.endAt=y,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function sR(s,e,i,r,l,u,f,p){return new eu(s,e,i,r,l,u,f,p)}function Nh(s){return new eu(s)}function pv(s){return s.filters.length===0&&s.limit===null&&s.startAt==null&&s.endAt==null&&(s.explicitOrderBy.length===0||s.explicitOrderBy.length===1&&s.explicitOrderBy[0].field.isKeyField())}function TT(s){return s.collectionGroup!==null}function kl(s){const e=we(s);if(e.Ie===null){e.Ie=[];const i=new Set;for(const u of e.explicitOrderBy)e.Ie.push(u),i.add(u.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(f){let p=new jt(Xt.comparator);return f.filters.forEach((y=>{y.getFlattenedFilters().forEach((g=>{g.isInequality()&&(p=p.add(g.field))}))})),p})(e).forEach((u=>{i.has(u.canonicalString())||u.isKeyField()||e.Ie.push(new fh(u,r))})),i.has(Xt.keyField().canonicalString())||e.Ie.push(new fh(Xt.keyField(),r))}return e.Ie}function Oi(s){const e=we(s);return e.Ee||(e.Ee=rR(e,kl(s))),e.Ee}function rR(s,e){if(s.limitType==="F")return mv(s.path,s.collectionGroup,e,s.filters,s.limit,s.startAt,s.endAt);{e=e.map((l=>{const u=l.dir==="desc"?"asc":"desc";return new fh(l.field,u)}));const i=s.endAt?new hh(s.endAt.position,s.endAt.inclusive):null,r=s.startAt?new hh(s.startAt.position,s.startAt.inclusive):null;return mv(s.path,s.collectionGroup,e,s.filters,s.limit,i,r)}}function Rm(s,e){const i=s.filters.concat([e]);return new eu(s.path,s.collectionGroup,s.explicitOrderBy.slice(),i,s.limit,s.limitType,s.startAt,s.endAt)}function Im(s,e,i){return new eu(s.path,s.collectionGroup,s.explicitOrderBy.slice(),s.filters.slice(),e,i,s.startAt,s.endAt)}function Dh(s,e){return op(Oi(s),Oi(e))&&s.limitType===e.limitType}function bT(s){return`${ap(Oi(s))}|lt:${s.limitType}`}function Xa(s){return`Query(target=${(function(i){let r=i.path.canonicalString();return i.collectionGroup!==null&&(r+=" collectionGroup="+i.collectionGroup),i.filters.length>0&&(r+=`, filters: [${i.filters.map((l=>vT(l))).join(", ")}]`),Ih(i.limit)||(r+=", limit: "+i.limit),i.orderBy.length>0&&(r+=`, orderBy: [${i.orderBy.map((l=>(function(f){return`${f.field.canonicalString()} (${f.dir})`})(l))).join(", ")}]`),i.startAt&&(r+=", startAt: ",r+=i.startAt.inclusive?"b:":"a:",r+=i.startAt.position.map((l=>lo(l))).join(",")),i.endAt&&(r+=", endAt: ",r+=i.endAt.inclusive?"a:":"b:",r+=i.endAt.position.map((l=>lo(l))).join(",")),`Target(${r})`})(Oi(s))}; limitType=${s.limitType})`}function Oh(s,e){return e.isFoundDocument()&&(function(r,l){const u=l.key.path;return r.collectionGroup!==null?l.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(u):pe.isDocumentKey(r.path)?r.path.isEqual(u):r.path.isImmediateParentOf(u)})(s,e)&&(function(r,l){for(const u of kl(r))if(!u.field.isKeyField()&&l.data.field(u.field)===null)return!1;return!0})(s,e)&&(function(r,l){for(const u of r.filters)if(!u.matches(l))return!1;return!0})(s,e)&&(function(r,l){return!(r.startAt&&!(function(f,p,y){const g=fv(f,p,y);return f.inclusive?g<=0:g<0})(r.startAt,kl(r),l)||r.endAt&&!(function(f,p,y){const g=fv(f,p,y);return f.inclusive?g>=0:g>0})(r.endAt,kl(r),l))})(s,e)}function aR(s){return s.collectionGroup||(s.path.length%2==1?s.path.lastSegment():s.path.get(s.path.length-2))}function AT(s){return(e,i)=>{let r=!1;for(const l of kl(s)){const u=oR(l,e,i);if(u!==0)return u;r=r||l.field.isKeyField()}return 0}}function oR(s,e,i){const r=s.field.isKeyField()?pe.comparator(e.key,i.key):(function(u,f,p){const y=f.data.field(u),g=p.data.field(u);return y!==null&&g!==null?oo(y,g):ve(42886)})(s.field,e,i);switch(s.dir){case"asc":return r;case"desc":return-1*r;default:return ve(19790,{direction:s.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ta{constructor(e,i){this.mapKeyFn=e,this.equalsFn=i,this.inner={},this.innerSize=0}get(e){const i=this.mapKeyFn(e),r=this.inner[i];if(r!==void 0){for(const[l,u]of r)if(this.equalsFn(l,e))return u}}has(e){return this.get(e)!==void 0}set(e,i){const r=this.mapKeyFn(e),l=this.inner[r];if(l===void 0)return this.inner[r]=[[e,i]],void this.innerSize++;for(let u=0;u<l.length;u++)if(this.equalsFn(l[u][0],e))return void(l[u]=[e,i]);l.push([e,i]),this.innerSize++}delete(e){const i=this.mapKeyFn(e),r=this.inner[i];if(r===void 0)return!1;for(let l=0;l<r.length;l++)if(this.equalsFn(r[l][0],e))return r.length===1?delete this.inner[i]:r.splice(l,1),this.innerSize--,!0;return!1}forEach(e){mr(this.inner,((i,r)=>{for(const[l,u]of r)e(l,u)}))}isEmpty(){return aT(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lR=new ut(pe.comparator);function cs(){return lR}const ST=new ut(pe.comparator);function Cl(...s){let e=ST;for(const i of s)e=e.insert(i.key,i);return e}function wT(s){let e=ST;return s.forEach(((i,r)=>e=e.insert(i,r.overlayedDocument))),e}function Kr(){return jl()}function xT(){return jl()}function jl(){return new ta((s=>s.toString()),((s,e)=>s.isEqual(e)))}const uR=new ut(pe.comparator),cR=new jt(pe.comparator);function je(...s){let e=cR;for(const i of s)e=e.add(i);return e}const hR=new jt(ke);function fR(){return hR}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lp(s,e){if(s.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:lh(e)?"-0":e}}function RT(s){return{integerValue:""+s}}function dR(s,e){return zx(e)?RT(e):lp(s,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mh{constructor(){this._=void 0}}function mR(s,e,i){return s instanceof Gl?(function(l,u){const f={fields:{[uT]:{stringValue:lT},[hT]:{timestampValue:{seconds:l.seconds,nanos:l.nanoseconds}}}};return u&&sp(u)&&(u=Ch(u)),u&&(f.fields[cT]=u),{mapValue:f}})(i,e):s instanceof Ql?CT(s,e):s instanceof Yl?NT(s,e):(function(l,u){const f=IT(l,u),p=gv(f)+gv(l.Ae);return Sm(f)&&Sm(l.Ae)?RT(p):lp(l.serializer,p)})(s,e)}function pR(s,e,i){return s instanceof Ql?CT(s,e):s instanceof Yl?NT(s,e):i}function IT(s,e){return s instanceof dh?(function(r){return Sm(r)||(function(u){return!!u&&"doubleValue"in u})(r)})(e)?e:{integerValue:0}:null}class Gl extends Mh{}class Ql extends Mh{constructor(e){super(),this.elements=e}}function CT(s,e){const i=DT(e);for(const r of s.elements)i.some((l=>Pi(l,r)))||i.push(r);return{arrayValue:{values:i}}}class Yl extends Mh{constructor(e){super(),this.elements=e}}function NT(s,e){let i=DT(e);for(const r of s.elements)i=i.filter((l=>!Pi(l,r)));return{arrayValue:{values:i}}}class dh extends Mh{constructor(e,i){super(),this.serializer=e,this.Ae=i}}function gv(s){return Et(s.integerValue||s.doubleValue)}function DT(s){return rp(s)&&s.arrayValue.values?s.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gR{constructor(e,i){this.field=e,this.transform=i}}function yR(s,e){return s.field.isEqual(e.field)&&(function(r,l){return r instanceof Ql&&l instanceof Ql||r instanceof Yl&&l instanceof Yl?ao(r.elements,l.elements,Pi):r instanceof dh&&l instanceof dh?Pi(r.Ae,l.Ae):r instanceof Gl&&l instanceof Gl})(s.transform,e.transform)}class _R{constructor(e,i){this.version=e,this.transformResults=i}}class Bn{constructor(e,i){this.updateTime=e,this.exists=i}static none(){return new Bn}static exists(e){return new Bn(void 0,e)}static updateTime(e){return new Bn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Jc(s,e){return s.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(s.updateTime):s.exists===void 0||s.exists===e.isFoundDocument()}class Vh{}function OT(s,e){if(!s.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return s.isNoDocument()?new up(s.key,Bn.none()):new tu(s.key,s.data,Bn.none());{const i=s.data,r=pn.empty();let l=new jt(Xt.comparator);for(let u of e.fields)if(!l.has(u)){let f=i.field(u);f===null&&u.length>1&&(u=u.popLast(),f=i.field(u)),f===null?r.delete(u):r.set(u,f),l=l.add(u)}return new pr(s.key,r,new xn(l.toArray()),Bn.none())}}function vR(s,e,i){s instanceof tu?(function(l,u,f){const p=l.value.clone(),y=_v(l.fieldTransforms,u,f.transformResults);p.setAll(y),u.convertToFoundDocument(f.version,p).setHasCommittedMutations()})(s,e,i):s instanceof pr?(function(l,u,f){if(!Jc(l.precondition,u))return void u.convertToUnknownDocument(f.version);const p=_v(l.fieldTransforms,u,f.transformResults),y=u.data;y.setAll(MT(l)),y.setAll(p),u.convertToFoundDocument(f.version,y).setHasCommittedMutations()})(s,e,i):(function(l,u,f){u.convertToNoDocument(f.version).setHasCommittedMutations()})(0,e,i)}function Pl(s,e,i,r){return s instanceof tu?(function(u,f,p,y){if(!Jc(u.precondition,f))return p;const g=u.value.clone(),T=vv(u.fieldTransforms,y,f);return g.setAll(T),f.convertToFoundDocument(f.version,g).setHasLocalMutations(),null})(s,e,i,r):s instanceof pr?(function(u,f,p,y){if(!Jc(u.precondition,f))return p;const g=vv(u.fieldTransforms,y,f),T=f.data;return T.setAll(MT(u)),T.setAll(g),f.convertToFoundDocument(f.version,T).setHasLocalMutations(),p===null?null:p.unionWith(u.fieldMask.fields).unionWith(u.fieldTransforms.map((A=>A.field)))})(s,e,i,r):(function(u,f,p){return Jc(u.precondition,f)?(f.convertToNoDocument(f.version).setHasLocalMutations(),null):p})(s,e,i)}function ER(s,e){let i=null;for(const r of s.fieldTransforms){const l=e.data.field(r.field),u=IT(r.transform,l||null);u!=null&&(i===null&&(i=pn.empty()),i.set(r.field,u))}return i||null}function yv(s,e){return s.type===e.type&&!!s.key.isEqual(e.key)&&!!s.precondition.isEqual(e.precondition)&&!!(function(r,l){return r===void 0&&l===void 0||!(!r||!l)&&ao(r,l,((u,f)=>yR(u,f)))})(s.fieldTransforms,e.fieldTransforms)&&(s.type===0?s.value.isEqual(e.value):s.type!==1||s.data.isEqual(e.data)&&s.fieldMask.isEqual(e.fieldMask))}class tu extends Vh{constructor(e,i,r,l=[]){super(),this.key=e,this.value=i,this.precondition=r,this.fieldTransforms=l,this.type=0}getFieldMask(){return null}}class pr extends Vh{constructor(e,i,r,l,u=[]){super(),this.key=e,this.data=i,this.fieldMask=r,this.precondition=l,this.fieldTransforms=u,this.type=1}getFieldMask(){return this.fieldMask}}function MT(s){const e=new Map;return s.fieldMask.fields.forEach((i=>{if(!i.isEmpty()){const r=s.data.field(i);e.set(i,r)}})),e}function _v(s,e,i){const r=new Map;Ge(s.length===i.length,32656,{Re:i.length,Ve:s.length});for(let l=0;l<i.length;l++){const u=s[l],f=u.transform,p=e.data.field(u.field);r.set(u.field,pR(f,p,i[l]))}return r}function vv(s,e,i){const r=new Map;for(const l of s){const u=l.transform,f=i.data.field(l.field);r.set(l.field,mR(u,f,e))}return r}class up extends Vh{constructor(e,i){super(),this.key=e,this.precondition=i,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class TR extends Vh{constructor(e,i){super(),this.key=e,this.precondition=i,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bR{constructor(e,i,r,l){this.batchId=e,this.localWriteTime=i,this.baseMutations=r,this.mutations=l}applyToRemoteDocument(e,i){const r=i.mutationResults;for(let l=0;l<this.mutations.length;l++){const u=this.mutations[l];u.key.isEqual(e.key)&&vR(u,e,r[l])}}applyToLocalView(e,i){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(i=Pl(r,e,i,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(i=Pl(r,e,i,this.localWriteTime));return i}applyToLocalDocumentSet(e,i){const r=xT();return this.mutations.forEach((l=>{const u=e.get(l.key),f=u.overlayedDocument;let p=this.applyToLocalView(f,u.mutatedFields);p=i.has(l.key)?null:p;const y=OT(f,p);y!==null&&r.set(l.key,y),f.isValidDocument()||f.convertToNoDocument(Ae.min())})),r}keys(){return this.mutations.reduce(((e,i)=>e.add(i.key)),je())}isEqual(e){return this.batchId===e.batchId&&ao(this.mutations,e.mutations,((i,r)=>yv(i,r)))&&ao(this.baseMutations,e.baseMutations,((i,r)=>yv(i,r)))}}class cp{constructor(e,i,r,l){this.batch=e,this.commitVersion=i,this.mutationResults=r,this.docVersions=l}static from(e,i,r){Ge(e.mutations.length===r.length,58842,{me:e.mutations.length,fe:r.length});let l=(function(){return uR})();const u=e.mutations;for(let f=0;f<u.length;f++)l=l.insert(u[f].key,r[f].version);return new cp(e,i,r,l)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AR{constructor(e,i){this.largestBatchId=e,this.mutation=i}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SR{constructor(e,i){this.count=e,this.unchangedNames=i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Nt,Ue;function wR(s){switch(s){case J.OK:return ve(64938);case J.CANCELLED:case J.UNKNOWN:case J.DEADLINE_EXCEEDED:case J.RESOURCE_EXHAUSTED:case J.INTERNAL:case J.UNAVAILABLE:case J.UNAUTHENTICATED:return!1;case J.INVALID_ARGUMENT:case J.NOT_FOUND:case J.ALREADY_EXISTS:case J.PERMISSION_DENIED:case J.FAILED_PRECONDITION:case J.ABORTED:case J.OUT_OF_RANGE:case J.UNIMPLEMENTED:case J.DATA_LOSS:return!0;default:return ve(15467,{code:s})}}function VT(s){if(s===void 0)return us("GRPC error has no .code"),J.UNKNOWN;switch(s){case Nt.OK:return J.OK;case Nt.CANCELLED:return J.CANCELLED;case Nt.UNKNOWN:return J.UNKNOWN;case Nt.DEADLINE_EXCEEDED:return J.DEADLINE_EXCEEDED;case Nt.RESOURCE_EXHAUSTED:return J.RESOURCE_EXHAUSTED;case Nt.INTERNAL:return J.INTERNAL;case Nt.UNAVAILABLE:return J.UNAVAILABLE;case Nt.UNAUTHENTICATED:return J.UNAUTHENTICATED;case Nt.INVALID_ARGUMENT:return J.INVALID_ARGUMENT;case Nt.NOT_FOUND:return J.NOT_FOUND;case Nt.ALREADY_EXISTS:return J.ALREADY_EXISTS;case Nt.PERMISSION_DENIED:return J.PERMISSION_DENIED;case Nt.FAILED_PRECONDITION:return J.FAILED_PRECONDITION;case Nt.ABORTED:return J.ABORTED;case Nt.OUT_OF_RANGE:return J.OUT_OF_RANGE;case Nt.UNIMPLEMENTED:return J.UNIMPLEMENTED;case Nt.DATA_LOSS:return J.DATA_LOSS;default:return ve(39323,{code:s})}}(Ue=Nt||(Nt={}))[Ue.OK=0]="OK",Ue[Ue.CANCELLED=1]="CANCELLED",Ue[Ue.UNKNOWN=2]="UNKNOWN",Ue[Ue.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ue[Ue.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ue[Ue.NOT_FOUND=5]="NOT_FOUND",Ue[Ue.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ue[Ue.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ue[Ue.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ue[Ue.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ue[Ue.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ue[Ue.ABORTED=10]="ABORTED",Ue[Ue.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ue[Ue.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ue[Ue.INTERNAL=13]="INTERNAL",Ue[Ue.UNAVAILABLE=14]="UNAVAILABLE",Ue[Ue.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xR(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RR=new sr([4294967295,4294967295],0);function Ev(s){const e=xR().encode(s),i=new XE;return i.update(e),new Uint8Array(i.digest())}function Tv(s){const e=new DataView(s.buffer),i=e.getUint32(0,!0),r=e.getUint32(4,!0),l=e.getUint32(8,!0),u=e.getUint32(12,!0);return[new sr([i,r],0),new sr([l,u],0)]}class hp{constructor(e,i,r){if(this.bitmap=e,this.padding=i,this.hashCount=r,i<0||i>=8)throw new Nl(`Invalid padding: ${i}`);if(r<0)throw new Nl(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Nl(`Invalid hash count: ${r}`);if(e.length===0&&i!==0)throw new Nl(`Invalid padding when bitmap length is 0: ${i}`);this.ge=8*e.length-i,this.pe=sr.fromNumber(this.ge)}ye(e,i,r){let l=e.add(i.multiply(sr.fromNumber(r)));return l.compare(RR)===1&&(l=new sr([l.getBits(0),l.getBits(1)],0)),l.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const i=Ev(e),[r,l]=Tv(i);for(let u=0;u<this.hashCount;u++){const f=this.ye(r,l,u);if(!this.we(f))return!1}return!0}static create(e,i,r){const l=e%8==0?0:8-e%8,u=new Uint8Array(Math.ceil(e/8)),f=new hp(u,l,i);return r.forEach((p=>f.insert(p))),f}insert(e){if(this.ge===0)return;const i=Ev(e),[r,l]=Tv(i);for(let u=0;u<this.hashCount;u++){const f=this.ye(r,l,u);this.Se(f)}}Se(e){const i=Math.floor(e/8),r=e%8;this.bitmap[i]|=1<<r}}class Nl extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kh{constructor(e,i,r,l,u){this.snapshotVersion=e,this.targetChanges=i,this.targetMismatches=r,this.documentUpdates=l,this.resolvedLimboDocuments=u}static createSynthesizedRemoteEventForCurrentChange(e,i,r){const l=new Map;return l.set(e,nu.createSynthesizedTargetChangeForCurrentChange(e,i,r)),new kh(Ae.min(),l,new ut(ke),cs(),je())}}class nu{constructor(e,i,r,l,u){this.resumeToken=e,this.current=i,this.addedDocuments=r,this.modifiedDocuments=l,this.removedDocuments=u}static createSynthesizedTargetChangeForCurrentChange(e,i,r){return new nu(r,i,je(),je(),je())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zc{constructor(e,i,r,l){this.be=e,this.removedTargetIds=i,this.key=r,this.De=l}}class kT{constructor(e,i){this.targetId=e,this.Ce=i}}class jT{constructor(e,i,r=$t.EMPTY_BYTE_STRING,l=null){this.state=e,this.targetIds=i,this.resumeToken=r,this.cause=l}}class bv{constructor(){this.ve=0,this.Fe=Av(),this.Me=$t.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=je(),i=je(),r=je();return this.Fe.forEach(((l,u)=>{switch(u){case 0:e=e.add(l);break;case 2:i=i.add(l);break;case 1:r=r.add(l);break;default:ve(38017,{changeType:u})}})),new nu(this.Me,this.xe,e,i,r)}qe(){this.Oe=!1,this.Fe=Av()}Qe(e,i){this.Oe=!0,this.Fe=this.Fe.insert(e,i)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,Ge(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class IR{constructor(e){this.Ge=e,this.ze=new Map,this.je=cs(),this.Je=qc(),this.He=qc(),this.Ye=new ut(ke)}Ze(e){for(const i of e.be)e.De&&e.De.isFoundDocument()?this.Xe(i,e.De):this.et(i,e.key,e.De);for(const i of e.removedTargetIds)this.et(i,e.key,e.De)}tt(e){this.forEachTarget(e,(i=>{const r=this.nt(i);switch(e.state){case 0:this.rt(i)&&r.Le(e.resumeToken);break;case 1:r.Ke(),r.Ne||r.qe(),r.Le(e.resumeToken);break;case 2:r.Ke(),r.Ne||this.removeTarget(i);break;case 3:this.rt(i)&&(r.We(),r.Le(e.resumeToken));break;case 4:this.rt(i)&&(this.it(i),r.Le(e.resumeToken));break;default:ve(56790,{state:e.state})}}))}forEachTarget(e,i){e.targetIds.length>0?e.targetIds.forEach(i):this.ze.forEach(((r,l)=>{this.rt(l)&&i(l)}))}st(e){const i=e.targetId,r=e.Ce.count,l=this.ot(i);if(l){const u=l.target;if(xm(u))if(r===0){const f=new pe(u.path);this.et(i,f,en.newNoDocument(f,Ae.min()))}else Ge(r===1,20013,{expectedCount:r});else{const f=this._t(i);if(f!==r){const p=this.ut(e),y=p?this.ct(p,e,f):1;if(y!==0){this.it(i);const g=y===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(i,g)}}}}}ut(e){const i=e.Ce.unchangedNames;if(!i||!i.bits)return null;const{bits:{bitmap:r="",padding:l=0},hashCount:u=0}=i;let f,p;try{f=ur(r).toUint8Array()}catch(y){if(y instanceof oT)return ro("Decoding the base64 bloom filter in existence filter failed ("+y.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw y}try{p=new hp(f,l,u)}catch(y){return ro(y instanceof Nl?"BloomFilter error: ":"Applying bloom filter failed: ",y),null}return p.ge===0?null:p}ct(e,i,r){return i.Ce.count===r-this.Pt(e,i.targetId)?0:2}Pt(e,i){const r=this.Ge.getRemoteKeysForTarget(i);let l=0;return r.forEach((u=>{const f=this.Ge.ht(),p=`projects/${f.projectId}/databases/${f.database}/documents/${u.path.canonicalString()}`;e.mightContain(p)||(this.et(i,u,null),l++)})),l}Tt(e){const i=new Map;this.ze.forEach(((u,f)=>{const p=this.ot(f);if(p){if(u.current&&xm(p.target)){const y=new pe(p.target.path);this.It(y).has(f)||this.Et(f,y)||this.et(f,y,en.newNoDocument(y,e))}u.Be&&(i.set(f,u.ke()),u.qe())}}));let r=je();this.He.forEach(((u,f)=>{let p=!0;f.forEachWhile((y=>{const g=this.ot(y);return!g||g.purpose==="TargetPurposeLimboResolution"||(p=!1,!1)})),p&&(r=r.add(u))})),this.je.forEach(((u,f)=>f.setReadTime(e)));const l=new kh(e,i,this.Ye,this.je,r);return this.je=cs(),this.Je=qc(),this.He=qc(),this.Ye=new ut(ke),l}Xe(e,i){if(!this.rt(e))return;const r=this.Et(e,i.key)?2:0;this.nt(e).Qe(i.key,r),this.je=this.je.insert(i.key,i),this.Je=this.Je.insert(i.key,this.It(i.key).add(e)),this.He=this.He.insert(i.key,this.dt(i.key).add(e))}et(e,i,r){if(!this.rt(e))return;const l=this.nt(e);this.Et(e,i)?l.Qe(i,1):l.$e(i),this.He=this.He.insert(i,this.dt(i).delete(e)),this.He=this.He.insert(i,this.dt(i).add(e)),r&&(this.je=this.je.insert(i,r))}removeTarget(e){this.ze.delete(e)}_t(e){const i=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+i.addedDocuments.size-i.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let i=this.ze.get(e);return i||(i=new bv,this.ze.set(e,i)),i}dt(e){let i=this.He.get(e);return i||(i=new jt(ke),this.He=this.He.insert(e,i)),i}It(e){let i=this.Je.get(e);return i||(i=new jt(ke),this.Je=this.Je.insert(e,i)),i}rt(e){const i=this.ot(e)!==null;return i||oe("WatchChangeAggregator","Detected inactive target",e),i}ot(e){const i=this.ze.get(e);return i&&i.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new bv),this.Ge.getRemoteKeysForTarget(e).forEach((i=>{this.et(e,i,null)}))}Et(e,i){return this.Ge.getRemoteKeysForTarget(e).has(i)}}function qc(){return new ut(pe.comparator)}function Av(){return new ut(pe.comparator)}const CR={asc:"ASCENDING",desc:"DESCENDING"},NR={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},DR={and:"AND",or:"OR"};class OR{constructor(e,i){this.databaseId=e,this.useProto3Json=i}}function Cm(s,e){return s.useProto3Json||Ih(e)?e:{value:e}}function mh(s,e){return s.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function PT(s,e){return s.useProto3Json?e.toBase64():e.toUint8Array()}function MR(s,e){return mh(s,e.toTimestamp())}function Mi(s){return Ge(!!s,49232),Ae.fromTimestamp((function(i){const r=lr(i);return new st(r.seconds,r.nanos)})(s))}function fp(s,e){return Nm(s,e).canonicalString()}function Nm(s,e){const i=(function(l){return new tt(["projects",l.projectId,"databases",l.database])})(s).child("documents");return e===void 0?i:i.child(e)}function LT(s){const e=tt.fromString(s);return Ge(HT(e),10190,{key:e.toString()}),e}function Dm(s,e){return fp(s.databaseId,e.path)}function om(s,e){const i=LT(e);if(i.get(1)!==s.databaseId.projectId)throw new ae(J.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+i.get(1)+" vs "+s.databaseId.projectId);if(i.get(3)!==s.databaseId.database)throw new ae(J.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+i.get(3)+" vs "+s.databaseId.database);return new pe(zT(i))}function UT(s,e){return fp(s.databaseId,e)}function VR(s){const e=LT(s);return e.length===4?tt.emptyPath():zT(e)}function Om(s){return new tt(["projects",s.databaseId.projectId,"databases",s.databaseId.database]).canonicalString()}function zT(s){return Ge(s.length>4&&s.get(4)==="documents",29091,{key:s.toString()}),s.popFirst(5)}function Sv(s,e,i){return{name:Dm(s,e),fields:i.value.mapValue.fields}}function kR(s,e){let i;if("targetChange"in e){e.targetChange;const r=(function(g){return g==="NO_CHANGE"?0:g==="ADD"?1:g==="REMOVE"?2:g==="CURRENT"?3:g==="RESET"?4:ve(39313,{state:g})})(e.targetChange.targetChangeType||"NO_CHANGE"),l=e.targetChange.targetIds||[],u=(function(g,T){return g.useProto3Json?(Ge(T===void 0||typeof T=="string",58123),$t.fromBase64String(T||"")):(Ge(T===void 0||T instanceof Buffer||T instanceof Uint8Array,16193),$t.fromUint8Array(T||new Uint8Array))})(s,e.targetChange.resumeToken),f=e.targetChange.cause,p=f&&(function(g){const T=g.code===void 0?J.UNKNOWN:VT(g.code);return new ae(T,g.message||"")})(f);i=new jT(r,l,u,p||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const l=om(s,r.document.name),u=Mi(r.document.updateTime),f=r.document.createTime?Mi(r.document.createTime):Ae.min(),p=new pn({mapValue:{fields:r.document.fields}}),y=en.newFoundDocument(l,u,f,p),g=r.targetIds||[],T=r.removedTargetIds||[];i=new Zc(g,T,y.key,y)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const l=om(s,r.document),u=r.readTime?Mi(r.readTime):Ae.min(),f=en.newNoDocument(l,u),p=r.removedTargetIds||[];i=new Zc([],p,f.key,f)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const l=om(s,r.document),u=r.removedTargetIds||[];i=new Zc([],u,l,null)}else{if(!("filter"in e))return ve(11601,{Rt:e});{e.filter;const r=e.filter;r.targetId;const{count:l=0,unchangedNames:u}=r,f=new SR(l,u),p=r.targetId;i=new kT(p,f)}}return i}function jR(s,e){let i;if(e instanceof tu)i={update:Sv(s,e.key,e.value)};else if(e instanceof up)i={delete:Dm(s,e.key)};else if(e instanceof pr)i={update:Sv(s,e.key,e.data),updateMask:GR(e.fieldMask)};else{if(!(e instanceof TR))return ve(16599,{Vt:e.type});i={verify:Dm(s,e.key)}}return e.fieldTransforms.length>0&&(i.updateTransforms=e.fieldTransforms.map((r=>(function(u,f){const p=f.transform;if(p instanceof Gl)return{fieldPath:f.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(p instanceof Ql)return{fieldPath:f.field.canonicalString(),appendMissingElements:{values:p.elements}};if(p instanceof Yl)return{fieldPath:f.field.canonicalString(),removeAllFromArray:{values:p.elements}};if(p instanceof dh)return{fieldPath:f.field.canonicalString(),increment:p.Ae};throw ve(20930,{transform:f.transform})})(0,r)))),e.precondition.isNone||(i.currentDocument=(function(l,u){return u.updateTime!==void 0?{updateTime:MR(l,u.updateTime)}:u.exists!==void 0?{exists:u.exists}:ve(27497)})(s,e.precondition)),i}function PR(s,e){return s&&s.length>0?(Ge(e!==void 0,14353),s.map((i=>(function(l,u){let f=l.updateTime?Mi(l.updateTime):Mi(u);return f.isEqual(Ae.min())&&(f=Mi(u)),new _R(f,l.transformResults||[])})(i,e)))):[]}function LR(s,e){return{documents:[UT(s,e.path)]}}function UR(s,e){const i={structuredQuery:{}},r=e.path;let l;e.collectionGroup!==null?(l=r,i.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(l=r.popLast(),i.structuredQuery.from=[{collectionId:r.lastSegment()}]),i.parent=UT(s,l);const u=(function(g){if(g.length!==0)return qT(ai.create(g,"and"))})(e.filters);u&&(i.structuredQuery.where=u);const f=(function(g){if(g.length!==0)return g.map((T=>(function(x){return{field:$a(x.field),direction:qR(x.dir)}})(T)))})(e.orderBy);f&&(i.structuredQuery.orderBy=f);const p=Cm(s,e.limit);return p!==null&&(i.structuredQuery.limit=p),e.startAt&&(i.structuredQuery.startAt=(function(g){return{before:g.inclusive,values:g.position}})(e.startAt)),e.endAt&&(i.structuredQuery.endAt=(function(g){return{before:!g.inclusive,values:g.position}})(e.endAt)),{ft:i,parent:l}}function zR(s){let e=VR(s.parent);const i=s.structuredQuery,r=i.from?i.from.length:0;let l=null;if(r>0){Ge(r===1,65062);const T=i.from[0];T.allDescendants?l=T.collectionId:e=e.child(T.collectionId)}let u=[];i.where&&(u=(function(A){const x=BT(A);return x instanceof ai&&yT(x)?x.getFilters():[x]})(i.where));let f=[];i.orderBy&&(f=(function(A){return A.map((x=>(function(U){return new fh(Ja(U.field),(function(G){switch(G){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(U.direction))})(x)))})(i.orderBy));let p=null;i.limit&&(p=(function(A){let x;return x=typeof A=="object"?A.value:A,Ih(x)?null:x})(i.limit));let y=null;i.startAt&&(y=(function(A){const x=!!A.before,j=A.values||[];return new hh(j,x)})(i.startAt));let g=null;return i.endAt&&(g=(function(A){const x=!A.before,j=A.values||[];return new hh(j,x)})(i.endAt)),sR(e,l,f,u,p,"F",y,g)}function BR(s,e){const i=(function(l){switch(l){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ve(28987,{purpose:l})}})(e.purpose);return i==null?null:{"goog-listen-tags":i}}function BT(s){return s.unaryFilter!==void 0?(function(i){switch(i.unaryFilter.op){case"IS_NAN":const r=Ja(i.unaryFilter.field);return Dt.create(r,"==",{doubleValue:NaN});case"IS_NULL":const l=Ja(i.unaryFilter.field);return Dt.create(l,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const u=Ja(i.unaryFilter.field);return Dt.create(u,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const f=Ja(i.unaryFilter.field);return Dt.create(f,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return ve(61313);default:return ve(60726)}})(s):s.fieldFilter!==void 0?(function(i){return Dt.create(Ja(i.fieldFilter.field),(function(l){switch(l){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return ve(58110);default:return ve(50506)}})(i.fieldFilter.op),i.fieldFilter.value)})(s):s.compositeFilter!==void 0?(function(i){return ai.create(i.compositeFilter.filters.map((r=>BT(r))),(function(l){switch(l){case"AND":return"and";case"OR":return"or";default:return ve(1026)}})(i.compositeFilter.op))})(s):ve(30097,{filter:s})}function qR(s){return CR[s]}function HR(s){return NR[s]}function FR(s){return DR[s]}function $a(s){return{fieldPath:s.canonicalString()}}function Ja(s){return Xt.fromServerFormat(s.fieldPath)}function qT(s){return s instanceof Dt?(function(i){if(i.op==="=="){if(hv(i.value))return{unaryFilter:{field:$a(i.field),op:"IS_NAN"}};if(cv(i.value))return{unaryFilter:{field:$a(i.field),op:"IS_NULL"}}}else if(i.op==="!="){if(hv(i.value))return{unaryFilter:{field:$a(i.field),op:"IS_NOT_NAN"}};if(cv(i.value))return{unaryFilter:{field:$a(i.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:$a(i.field),op:HR(i.op),value:i.value}}})(s):s instanceof ai?(function(i){const r=i.getFilters().map((l=>qT(l)));return r.length===1?r[0]:{compositeFilter:{op:FR(i.op),filters:r}}})(s):ve(54877,{filter:s})}function GR(s){const e=[];return s.fields.forEach((i=>e.push(i.canonicalString()))),{fieldPaths:e}}function HT(s){return s.length>=4&&s.get(0)==="projects"&&s.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class er{constructor(e,i,r,l,u=Ae.min(),f=Ae.min(),p=$t.EMPTY_BYTE_STRING,y=null){this.target=e,this.targetId=i,this.purpose=r,this.sequenceNumber=l,this.snapshotVersion=u,this.lastLimboFreeSnapshotVersion=f,this.resumeToken=p,this.expectedCount=y}withSequenceNumber(e){return new er(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,i){return new er(this.target,this.targetId,this.purpose,this.sequenceNumber,i,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new er(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new er(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QR{constructor(e){this.yt=e}}function YR(s){const e=zR({parent:s.parent,structuredQuery:s.structuredQuery});return s.limitType==="LAST"?Im(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KR{constructor(){this.Cn=new XR}addToCollectionParentIndex(e,i){return this.Cn.add(i),W.resolve()}getCollectionParents(e,i){return W.resolve(this.Cn.getEntries(i))}addFieldIndex(e,i){return W.resolve()}deleteFieldIndex(e,i){return W.resolve()}deleteAllFieldIndexes(e){return W.resolve()}createTargetIndexes(e,i){return W.resolve()}getDocumentsMatchingTarget(e,i){return W.resolve(null)}getIndexType(e,i){return W.resolve(0)}getFieldIndexes(e,i){return W.resolve([])}getNextCollectionGroupToUpdate(e){return W.resolve(null)}getMinOffset(e,i){return W.resolve(or.min())}getMinOffsetFromCollectionGroup(e,i){return W.resolve(or.min())}updateCollectionGroup(e,i,r){return W.resolve()}updateIndexEntries(e,i){return W.resolve()}}class XR{constructor(){this.index={}}add(e){const i=e.lastSegment(),r=e.popLast(),l=this.index[i]||new jt(tt.comparator),u=!l.has(r);return this.index[i]=l.add(r),u}has(e){const i=e.lastSegment(),r=e.popLast(),l=this.index[i];return l&&l.has(r)}getEntries(e){return(this.index[e]||new jt(tt.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wv={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},FT=41943040;class dn{static withCacheSize(e){return new dn(e,dn.DEFAULT_COLLECTION_PERCENTILE,dn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,i,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=i,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */dn.DEFAULT_COLLECTION_PERCENTILE=10,dn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,dn.DEFAULT=new dn(FT,dn.DEFAULT_COLLECTION_PERCENTILE,dn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),dn.DISABLED=new dn(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uo{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new uo(0)}static cr(){return new uo(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xv="LruGarbageCollector",$R=1048576;function Rv([s,e],[i,r]){const l=ke(s,i);return l===0?ke(e,r):l}class JR{constructor(e){this.Ir=e,this.buffer=new jt(Rv),this.Er=0}dr(){return++this.Er}Ar(e){const i=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(i);else{const r=this.buffer.last();Rv(i,r)<0&&(this.buffer=this.buffer.delete(r).add(i))}}get maxValue(){return this.buffer.last()[0]}}class ZR{constructor(e,i,r){this.garbageCollector=e,this.asyncQueue=i,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){oe(xv,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(i){_o(i)?oe(xv,"Ignoring IndexedDB error during garbage collection: ",i):await yo(i)}await this.Vr(3e5)}))}}class WR{constructor(e,i){this.mr=e,this.params=i}calculateTargetCount(e,i){return this.mr.gr(e).next((r=>Math.floor(i/100*r)))}nthSequenceNumber(e,i){if(i===0)return W.resolve(Rh.ce);const r=new JR(i);return this.mr.forEachTarget(e,(l=>r.Ar(l.sequenceNumber))).next((()=>this.mr.pr(e,(l=>r.Ar(l))))).next((()=>r.maxValue))}removeTargets(e,i,r){return this.mr.removeTargets(e,i,r)}removeOrphanedDocuments(e,i){return this.mr.removeOrphanedDocuments(e,i)}collect(e,i){return this.params.cacheSizeCollectionThreshold===-1?(oe("LruGarbageCollector","Garbage collection skipped; disabled"),W.resolve(wv)):this.getCacheSize(e).next((r=>r<this.params.cacheSizeCollectionThreshold?(oe("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),wv):this.yr(e,i)))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,i){let r,l,u,f,p,y,g;const T=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((A=>(A>this.params.maximumSequenceNumbersToCollect?(oe("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${A}`),l=this.params.maximumSequenceNumbersToCollect):l=A,f=Date.now(),this.nthSequenceNumber(e,l)))).next((A=>(r=A,p=Date.now(),this.removeTargets(e,r,i)))).next((A=>(u=A,y=Date.now(),this.removeOrphanedDocuments(e,r)))).next((A=>(g=Date.now(),Ka()<=Ve.DEBUG&&oe("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${f-T}ms
	Determined least recently used ${l} in `+(p-f)+`ms
	Removed ${u} targets in `+(y-p)+`ms
	Removed ${A} documents in `+(g-y)+`ms
Total Duration: ${g-T}ms`),W.resolve({didRun:!0,sequenceNumbersCollected:l,targetsRemoved:u,documentsRemoved:A}))))}}function eI(s,e){return new WR(s,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tI{constructor(){this.changes=new ta((e=>e.toString()),((e,i)=>e.isEqual(i))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,i){this.assertNotApplied(),this.changes.set(e,en.newInvalidDocument(e).setReadTime(i))}getEntry(e,i){this.assertNotApplied();const r=this.changes.get(i);return r!==void 0?W.resolve(r):this.getFromCache(e,i)}getEntries(e,i){return this.getAllFromCache(e,i)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nI{constructor(e,i){this.overlayedDocument=e,this.mutatedFields=i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iI{constructor(e,i,r,l){this.remoteDocumentCache=e,this.mutationQueue=i,this.documentOverlayCache=r,this.indexManager=l}getDocument(e,i){let r=null;return this.documentOverlayCache.getOverlay(e,i).next((l=>(r=l,this.remoteDocumentCache.getEntry(e,i)))).next((l=>(r!==null&&Pl(r.mutation,l,xn.empty(),st.now()),l)))}getDocuments(e,i){return this.remoteDocumentCache.getEntries(e,i).next((r=>this.getLocalViewOfDocuments(e,r,je()).next((()=>r))))}getLocalViewOfDocuments(e,i,r=je()){const l=Kr();return this.populateOverlays(e,l,i).next((()=>this.computeViews(e,i,l,r).next((u=>{let f=Cl();return u.forEach(((p,y)=>{f=f.insert(p,y.overlayedDocument)})),f}))))}getOverlayedDocuments(e,i){const r=Kr();return this.populateOverlays(e,r,i).next((()=>this.computeViews(e,i,r,je())))}populateOverlays(e,i,r){const l=[];return r.forEach((u=>{i.has(u)||l.push(u)})),this.documentOverlayCache.getOverlays(e,l).next((u=>{u.forEach(((f,p)=>{i.set(f,p)}))}))}computeViews(e,i,r,l){let u=cs();const f=jl(),p=(function(){return jl()})();return i.forEach(((y,g)=>{const T=r.get(g.key);l.has(g.key)&&(T===void 0||T.mutation instanceof pr)?u=u.insert(g.key,g):T!==void 0?(f.set(g.key,T.mutation.getFieldMask()),Pl(T.mutation,g,T.mutation.getFieldMask(),st.now())):f.set(g.key,xn.empty())})),this.recalculateAndSaveOverlays(e,u).next((y=>(y.forEach(((g,T)=>f.set(g,T))),i.forEach(((g,T)=>p.set(g,new nI(T,f.get(g)??null)))),p)))}recalculateAndSaveOverlays(e,i){const r=jl();let l=new ut(((f,p)=>f-p)),u=je();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,i).next((f=>{for(const p of f)p.keys().forEach((y=>{const g=i.get(y);if(g===null)return;let T=r.get(y)||xn.empty();T=p.applyToLocalView(g,T),r.set(y,T);const A=(l.get(p.batchId)||je()).add(y);l=l.insert(p.batchId,A)}))})).next((()=>{const f=[],p=l.getReverseIterator();for(;p.hasNext();){const y=p.getNext(),g=y.key,T=y.value,A=xT();T.forEach((x=>{if(!u.has(x)){const j=OT(i.get(x),r.get(x));j!==null&&A.set(x,j),u=u.add(x)}})),f.push(this.documentOverlayCache.saveOverlays(e,g,A))}return W.waitFor(f)})).next((()=>r))}recalculateAndSaveOverlaysForDocumentKeys(e,i){return this.remoteDocumentCache.getEntries(e,i).next((r=>this.recalculateAndSaveOverlays(e,r)))}getDocumentsMatchingQuery(e,i,r,l){return(function(f){return pe.isDocumentKey(f.path)&&f.collectionGroup===null&&f.filters.length===0})(i)?this.getDocumentsMatchingDocumentQuery(e,i.path):TT(i)?this.getDocumentsMatchingCollectionGroupQuery(e,i,r,l):this.getDocumentsMatchingCollectionQuery(e,i,r,l)}getNextDocuments(e,i,r,l){return this.remoteDocumentCache.getAllFromCollectionGroup(e,i,r,l).next((u=>{const f=l-u.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,i,r.largestBatchId,l-u.size):W.resolve(Kr());let p=Bl,y=u;return f.next((g=>W.forEach(g,((T,A)=>(p<A.largestBatchId&&(p=A.largestBatchId),u.get(T)?W.resolve():this.remoteDocumentCache.getEntry(e,T).next((x=>{y=y.insert(T,x)}))))).next((()=>this.populateOverlays(e,g,u))).next((()=>this.computeViews(e,y,g,je()))).next((T=>({batchId:p,changes:wT(T)})))))}))}getDocumentsMatchingDocumentQuery(e,i){return this.getDocument(e,new pe(i)).next((r=>{let l=Cl();return r.isFoundDocument()&&(l=l.insert(r.key,r)),l}))}getDocumentsMatchingCollectionGroupQuery(e,i,r,l){const u=i.collectionGroup;let f=Cl();return this.indexManager.getCollectionParents(e,u).next((p=>W.forEach(p,(y=>{const g=(function(A,x){return new eu(x,null,A.explicitOrderBy.slice(),A.filters.slice(),A.limit,A.limitType,A.startAt,A.endAt)})(i,y.child(u));return this.getDocumentsMatchingCollectionQuery(e,g,r,l).next((T=>{T.forEach(((A,x)=>{f=f.insert(A,x)}))}))})).next((()=>f))))}getDocumentsMatchingCollectionQuery(e,i,r,l){let u;return this.documentOverlayCache.getOverlaysForCollection(e,i.path,r.largestBatchId).next((f=>(u=f,this.remoteDocumentCache.getDocumentsMatchingQuery(e,i,r,u,l)))).next((f=>{u.forEach(((y,g)=>{const T=g.getKey();f.get(T)===null&&(f=f.insert(T,en.newInvalidDocument(T)))}));let p=Cl();return f.forEach(((y,g)=>{const T=u.get(y);T!==void 0&&Pl(T.mutation,g,xn.empty(),st.now()),Oh(i,g)&&(p=p.insert(y,g))})),p}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sI{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,i){return W.resolve(this.Lr.get(i))}saveBundleMetadata(e,i){return this.Lr.set(i.id,(function(l){return{id:l.id,version:l.version,createTime:Mi(l.createTime)}})(i)),W.resolve()}getNamedQuery(e,i){return W.resolve(this.kr.get(i))}saveNamedQuery(e,i){return this.kr.set(i.name,(function(l){return{name:l.name,query:YR(l.bundledQuery),readTime:Mi(l.readTime)}})(i)),W.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rI{constructor(){this.overlays=new ut(pe.comparator),this.qr=new Map}getOverlay(e,i){return W.resolve(this.overlays.get(i))}getOverlays(e,i){const r=Kr();return W.forEach(i,(l=>this.getOverlay(e,l).next((u=>{u!==null&&r.set(l,u)})))).next((()=>r))}saveOverlays(e,i,r){return r.forEach(((l,u)=>{this.St(e,i,u)})),W.resolve()}removeOverlaysForBatchId(e,i,r){const l=this.qr.get(r);return l!==void 0&&(l.forEach((u=>this.overlays=this.overlays.remove(u))),this.qr.delete(r)),W.resolve()}getOverlaysForCollection(e,i,r){const l=Kr(),u=i.length+1,f=new pe(i.child("")),p=this.overlays.getIteratorFrom(f);for(;p.hasNext();){const y=p.getNext().value,g=y.getKey();if(!i.isPrefixOf(g.path))break;g.path.length===u&&y.largestBatchId>r&&l.set(y.getKey(),y)}return W.resolve(l)}getOverlaysForCollectionGroup(e,i,r,l){let u=new ut(((g,T)=>g-T));const f=this.overlays.getIterator();for(;f.hasNext();){const g=f.getNext().value;if(g.getKey().getCollectionGroup()===i&&g.largestBatchId>r){let T=u.get(g.largestBatchId);T===null&&(T=Kr(),u=u.insert(g.largestBatchId,T)),T.set(g.getKey(),g)}}const p=Kr(),y=u.getIterator();for(;y.hasNext()&&(y.getNext().value.forEach(((g,T)=>p.set(g,T))),!(p.size()>=l)););return W.resolve(p)}St(e,i,r){const l=this.overlays.get(r.key);if(l!==null){const f=this.qr.get(l.largestBatchId).delete(r.key);this.qr.set(l.largestBatchId,f)}this.overlays=this.overlays.insert(r.key,new AR(i,r));let u=this.qr.get(i);u===void 0&&(u=je(),this.qr.set(i,u)),this.qr.set(i,u.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aI{constructor(){this.sessionToken=$t.EMPTY_BYTE_STRING}getSessionToken(e){return W.resolve(this.sessionToken)}setSessionToken(e,i){return this.sessionToken=i,W.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dp{constructor(){this.Qr=new jt(Bt.$r),this.Ur=new jt(Bt.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,i){const r=new Bt(e,i);this.Qr=this.Qr.add(r),this.Ur=this.Ur.add(r)}Wr(e,i){e.forEach((r=>this.addReference(r,i)))}removeReference(e,i){this.Gr(new Bt(e,i))}zr(e,i){e.forEach((r=>this.removeReference(r,i)))}jr(e){const i=new pe(new tt([])),r=new Bt(i,e),l=new Bt(i,e+1),u=[];return this.Ur.forEachInRange([r,l],(f=>{this.Gr(f),u.push(f.key)})),u}Jr(){this.Qr.forEach((e=>this.Gr(e)))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const i=new pe(new tt([])),r=new Bt(i,e),l=new Bt(i,e+1);let u=je();return this.Ur.forEachInRange([r,l],(f=>{u=u.add(f.key)})),u}containsKey(e){const i=new Bt(e,0),r=this.Qr.firstAfterOrEqual(i);return r!==null&&e.isEqual(r.key)}}class Bt{constructor(e,i){this.key=e,this.Yr=i}static $r(e,i){return pe.comparator(e.key,i.key)||ke(e.Yr,i.Yr)}static Kr(e,i){return ke(e.Yr,i.Yr)||pe.comparator(e.key,i.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oI{constructor(e,i){this.indexManager=e,this.referenceDelegate=i,this.mutationQueue=[],this.tr=1,this.Zr=new jt(Bt.$r)}checkEmpty(e){return W.resolve(this.mutationQueue.length===0)}addMutationBatch(e,i,r,l){const u=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const f=new bR(u,i,r,l);this.mutationQueue.push(f);for(const p of l)this.Zr=this.Zr.add(new Bt(p.key,u)),this.indexManager.addToCollectionParentIndex(e,p.key.path.popLast());return W.resolve(f)}lookupMutationBatch(e,i){return W.resolve(this.Xr(i))}getNextMutationBatchAfterBatchId(e,i){const r=i+1,l=this.ei(r),u=l<0?0:l;return W.resolve(this.mutationQueue.length>u?this.mutationQueue[u]:null)}getHighestUnacknowledgedBatchId(){return W.resolve(this.mutationQueue.length===0?ip:this.tr-1)}getAllMutationBatches(e){return W.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,i){const r=new Bt(i,0),l=new Bt(i,Number.POSITIVE_INFINITY),u=[];return this.Zr.forEachInRange([r,l],(f=>{const p=this.Xr(f.Yr);u.push(p)})),W.resolve(u)}getAllMutationBatchesAffectingDocumentKeys(e,i){let r=new jt(ke);return i.forEach((l=>{const u=new Bt(l,0),f=new Bt(l,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([u,f],(p=>{r=r.add(p.Yr)}))})),W.resolve(this.ti(r))}getAllMutationBatchesAffectingQuery(e,i){const r=i.path,l=r.length+1;let u=r;pe.isDocumentKey(u)||(u=u.child(""));const f=new Bt(new pe(u),0);let p=new jt(ke);return this.Zr.forEachWhile((y=>{const g=y.key.path;return!!r.isPrefixOf(g)&&(g.length===l&&(p=p.add(y.Yr)),!0)}),f),W.resolve(this.ti(p))}ti(e){const i=[];return e.forEach((r=>{const l=this.Xr(r);l!==null&&i.push(l)})),i}removeMutationBatch(e,i){Ge(this.ni(i.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Zr;return W.forEach(i.mutations,(l=>{const u=new Bt(l.key,i.batchId);return r=r.delete(u),this.referenceDelegate.markPotentiallyOrphaned(e,l.key)})).next((()=>{this.Zr=r}))}ir(e){}containsKey(e,i){const r=new Bt(i,0),l=this.Zr.firstAfterOrEqual(r);return W.resolve(i.isEqual(l&&l.key))}performConsistencyCheck(e){return this.mutationQueue.length,W.resolve()}ni(e,i){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const i=this.ei(e);return i<0||i>=this.mutationQueue.length?null:this.mutationQueue[i]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lI{constructor(e){this.ri=e,this.docs=(function(){return new ut(pe.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,i){const r=i.key,l=this.docs.get(r),u=l?l.size:0,f=this.ri(i);return this.docs=this.docs.insert(r,{document:i.mutableCopy(),size:f}),this.size+=f-u,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const i=this.docs.get(e);i&&(this.docs=this.docs.remove(e),this.size-=i.size)}getEntry(e,i){const r=this.docs.get(i);return W.resolve(r?r.document.mutableCopy():en.newInvalidDocument(i))}getEntries(e,i){let r=cs();return i.forEach((l=>{const u=this.docs.get(l);r=r.insert(l,u?u.document.mutableCopy():en.newInvalidDocument(l))})),W.resolve(r)}getDocumentsMatchingQuery(e,i,r,l){let u=cs();const f=i.path,p=new pe(f.child("__id-9223372036854775808__")),y=this.docs.getIteratorFrom(p);for(;y.hasNext();){const{key:g,value:{document:T}}=y.getNext();if(!f.isPrefixOf(g.path))break;g.path.length>f.length+1||jx(kx(T),r)<=0||(l.has(T.key)||Oh(i,T))&&(u=u.insert(T.key,T.mutableCopy()))}return W.resolve(u)}getAllFromCollectionGroup(e,i,r,l){ve(9500)}ii(e,i){return W.forEach(this.docs,(r=>i(r)))}newChangeBuffer(e){return new uI(this)}getSize(e){return W.resolve(this.size)}}class uI extends tI{constructor(e){super(),this.Nr=e}applyChanges(e){const i=[];return this.changes.forEach(((r,l)=>{l.isValidDocument()?i.push(this.Nr.addEntry(e,l)):this.Nr.removeEntry(r)})),W.waitFor(i)}getFromCache(e,i){return this.Nr.getEntry(e,i)}getAllFromCache(e,i){return this.Nr.getEntries(e,i)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cI{constructor(e){this.persistence=e,this.si=new ta((i=>ap(i)),op),this.lastRemoteSnapshotVersion=Ae.min(),this.highestTargetId=0,this.oi=0,this._i=new dp,this.targetCount=0,this.ai=uo.ur()}forEachTarget(e,i){return this.si.forEach(((r,l)=>i(l))),W.resolve()}getLastRemoteSnapshotVersion(e){return W.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return W.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),W.resolve(this.highestTargetId)}setTargetsMetadata(e,i,r){return r&&(this.lastRemoteSnapshotVersion=r),i>this.oi&&(this.oi=i),W.resolve()}Pr(e){this.si.set(e.target,e);const i=e.targetId;i>this.highestTargetId&&(this.ai=new uo(i),this.highestTargetId=i),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,i){return this.Pr(i),this.targetCount+=1,W.resolve()}updateTargetData(e,i){return this.Pr(i),W.resolve()}removeTargetData(e,i){return this.si.delete(i.target),this._i.jr(i.targetId),this.targetCount-=1,W.resolve()}removeTargets(e,i,r){let l=0;const u=[];return this.si.forEach(((f,p)=>{p.sequenceNumber<=i&&r.get(p.targetId)===null&&(this.si.delete(f),u.push(this.removeMatchingKeysForTargetId(e,p.targetId)),l++)})),W.waitFor(u).next((()=>l))}getTargetCount(e){return W.resolve(this.targetCount)}getTargetData(e,i){const r=this.si.get(i)||null;return W.resolve(r)}addMatchingKeys(e,i,r){return this._i.Wr(i,r),W.resolve()}removeMatchingKeys(e,i,r){this._i.zr(i,r);const l=this.persistence.referenceDelegate,u=[];return l&&i.forEach((f=>{u.push(l.markPotentiallyOrphaned(e,f))})),W.waitFor(u)}removeMatchingKeysForTargetId(e,i){return this._i.jr(i),W.resolve()}getMatchingKeysForTargetId(e,i){const r=this._i.Hr(i);return W.resolve(r)}containsKey(e,i){return W.resolve(this._i.containsKey(i))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GT{constructor(e,i){this.ui={},this.overlays={},this.ci=new Rh(0),this.li=!1,this.li=!0,this.hi=new aI,this.referenceDelegate=e(this),this.Pi=new cI(this),this.indexManager=new KR,this.remoteDocumentCache=(function(l){return new lI(l)})((r=>this.referenceDelegate.Ti(r))),this.serializer=new QR(i),this.Ii=new sI(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let i=this.overlays[e.toKey()];return i||(i=new rI,this.overlays[e.toKey()]=i),i}getMutationQueue(e,i){let r=this.ui[e.toKey()];return r||(r=new oI(i,this.referenceDelegate),this.ui[e.toKey()]=r),r}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,i,r){oe("MemoryPersistence","Starting transaction:",e);const l=new hI(this.ci.next());return this.referenceDelegate.Ei(),r(l).next((u=>this.referenceDelegate.di(l).next((()=>u)))).toPromise().then((u=>(l.raiseOnCommittedEvent(),u)))}Ai(e,i){return W.or(Object.values(this.ui).map((r=>()=>r.containsKey(e,i))))}}class hI extends Lx{constructor(e){super(),this.currentSequenceNumber=e}}class mp{constructor(e){this.persistence=e,this.Ri=new dp,this.Vi=null}static mi(e){return new mp(e)}get fi(){if(this.Vi)return this.Vi;throw ve(60996)}addReference(e,i,r){return this.Ri.addReference(r,i),this.fi.delete(r.toString()),W.resolve()}removeReference(e,i,r){return this.Ri.removeReference(r,i),this.fi.add(r.toString()),W.resolve()}markPotentiallyOrphaned(e,i){return this.fi.add(i.toString()),W.resolve()}removeTarget(e,i){this.Ri.jr(i.targetId).forEach((l=>this.fi.add(l.toString())));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,i.targetId).next((l=>{l.forEach((u=>this.fi.add(u.toString())))})).next((()=>r.removeTargetData(e,i)))}Ei(){this.Vi=new Set}di(e){const i=this.persistence.getRemoteDocumentCache().newChangeBuffer();return W.forEach(this.fi,(r=>{const l=pe.fromPath(r);return this.gi(e,l).next((u=>{u||i.removeEntry(l,Ae.min())}))})).next((()=>(this.Vi=null,i.apply(e))))}updateLimboDocument(e,i){return this.gi(e,i).next((r=>{r?this.fi.delete(i.toString()):this.fi.add(i.toString())}))}Ti(e){return 0}gi(e,i){return W.or([()=>W.resolve(this.Ri.containsKey(i)),()=>this.persistence.getTargetCache().containsKey(e,i),()=>this.persistence.Ai(e,i)])}}class ph{constructor(e,i){this.persistence=e,this.pi=new ta((r=>Bx(r.path)),((r,l)=>r.isEqual(l))),this.garbageCollector=eI(this,i)}static mi(e,i){return new ph(e,i)}Ei(){}di(e){return W.resolve()}forEachTarget(e,i){return this.persistence.getTargetCache().forEachTarget(e,i)}gr(e){const i=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next((r=>i.next((l=>r+l))))}wr(e){let i=0;return this.pr(e,(r=>{i++})).next((()=>i))}pr(e,i){return W.forEach(this.pi,((r,l)=>this.br(e,r,l).next((u=>u?W.resolve():i(l)))))}removeTargets(e,i,r){return this.persistence.getTargetCache().removeTargets(e,i,r)}removeOrphanedDocuments(e,i){let r=0;const l=this.persistence.getRemoteDocumentCache(),u=l.newChangeBuffer();return l.ii(e,(f=>this.br(e,f,i).next((p=>{p||(r++,u.removeEntry(f,Ae.min()))})))).next((()=>u.apply(e))).next((()=>r))}markPotentiallyOrphaned(e,i){return this.pi.set(i,e.currentSequenceNumber),W.resolve()}removeTarget(e,i){const r=i.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,i,r){return this.pi.set(r,e.currentSequenceNumber),W.resolve()}removeReference(e,i,r){return this.pi.set(r,e.currentSequenceNumber),W.resolve()}updateLimboDocument(e,i){return this.pi.set(i,e.currentSequenceNumber),W.resolve()}Ti(e){let i=e.key.toString().length;return e.isFoundDocument()&&(i+=Xc(e.data.value)),i}br(e,i,r){return W.or([()=>this.persistence.Ai(e,i),()=>this.persistence.getTargetCache().containsKey(e,i),()=>{const l=this.pi.get(i);return W.resolve(l!==void 0&&l>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pp{constructor(e,i,r,l){this.targetId=e,this.fromCache=i,this.Es=r,this.ds=l}static As(e,i){let r=je(),l=je();for(const u of i.docChanges)switch(u.type){case 0:r=r.add(u.doc.key);break;case 1:l=l.add(u.doc.key)}return new pp(e,i.fromCache,r,l)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fI{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dI{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return UA()?8:Ux(tn())>0?6:4})()}initialize(e,i){this.ps=e,this.indexManager=i,this.Rs=!0}getDocumentsMatchingQuery(e,i,r,l){const u={result:null};return this.ys(e,i).next((f=>{u.result=f})).next((()=>{if(!u.result)return this.ws(e,i,l,r).next((f=>{u.result=f}))})).next((()=>{if(u.result)return;const f=new fI;return this.Ss(e,i,f).next((p=>{if(u.result=p,this.Vs)return this.bs(e,i,f,p.size)}))})).next((()=>u.result))}bs(e,i,r,l){return r.documentReadCount<this.fs?(Ka()<=Ve.DEBUG&&oe("QueryEngine","SDK will not create cache indexes for query:",Xa(i),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),W.resolve()):(Ka()<=Ve.DEBUG&&oe("QueryEngine","Query:",Xa(i),"scans",r.documentReadCount,"local documents and returns",l,"documents as results."),r.documentReadCount>this.gs*l?(Ka()<=Ve.DEBUG&&oe("QueryEngine","The SDK decides to create cache indexes for query:",Xa(i),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Oi(i))):W.resolve())}ys(e,i){if(pv(i))return W.resolve(null);let r=Oi(i);return this.indexManager.getIndexType(e,r).next((l=>l===0?null:(i.limit!==null&&l===1&&(i=Im(i,null,"F"),r=Oi(i)),this.indexManager.getDocumentsMatchingTarget(e,r).next((u=>{const f=je(...u);return this.ps.getDocuments(e,f).next((p=>this.indexManager.getMinOffset(e,r).next((y=>{const g=this.Ds(i,p);return this.Cs(i,g,f,y.readTime)?this.ys(e,Im(i,null,"F")):this.vs(e,g,i,y)}))))})))))}ws(e,i,r,l){return pv(i)||l.isEqual(Ae.min())?W.resolve(null):this.ps.getDocuments(e,r).next((u=>{const f=this.Ds(i,u);return this.Cs(i,f,r,l)?W.resolve(null):(Ka()<=Ve.DEBUG&&oe("QueryEngine","Re-using previous result from %s to execute query: %s",l.toString(),Xa(i)),this.vs(e,f,i,Vx(l,Bl)).next((p=>p)))}))}Ds(e,i){let r=new jt(AT(e));return i.forEach(((l,u)=>{Oh(e,u)&&(r=r.add(u))})),r}Cs(e,i,r,l){if(e.limit===null)return!1;if(r.size!==i.size)return!0;const u=e.limitType==="F"?i.last():i.first();return!!u&&(u.hasPendingWrites||u.version.compareTo(l)>0)}Ss(e,i,r){return Ka()<=Ve.DEBUG&&oe("QueryEngine","Using full collection scan to execute query:",Xa(i)),this.ps.getDocumentsMatchingQuery(e,i,or.min(),r)}vs(e,i,r,l){return this.ps.getDocumentsMatchingQuery(e,r,l).next((u=>(i.forEach((f=>{u=u.insert(f.key,f)})),u)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gp="LocalStore",mI=3e8;class pI{constructor(e,i,r,l){this.persistence=e,this.Fs=i,this.serializer=l,this.Ms=new ut(ke),this.xs=new ta((u=>ap(u)),op),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(r)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new iI(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(i=>e.collect(i,this.Ms)))}}function gI(s,e,i,r){return new pI(s,e,i,r)}async function QT(s,e){const i=we(s);return await i.persistence.runTransaction("Handle user change","readonly",(r=>{let l;return i.mutationQueue.getAllMutationBatches(r).next((u=>(l=u,i.Bs(e),i.mutationQueue.getAllMutationBatches(r)))).next((u=>{const f=[],p=[];let y=je();for(const g of l){f.push(g.batchId);for(const T of g.mutations)y=y.add(T.key)}for(const g of u){p.push(g.batchId);for(const T of g.mutations)y=y.add(T.key)}return i.localDocuments.getDocuments(r,y).next((g=>({Ls:g,removedBatchIds:f,addedBatchIds:p})))}))}))}function yI(s,e){const i=we(s);return i.persistence.runTransaction("Acknowledge batch","readwrite-primary",(r=>{const l=e.batch.keys(),u=i.Ns.newChangeBuffer({trackRemovals:!0});return(function(p,y,g,T){const A=g.batch,x=A.keys();let j=W.resolve();return x.forEach((U=>{j=j.next((()=>T.getEntry(y,U))).next((Q=>{const G=g.docVersions.get(U);Ge(G!==null,48541),Q.version.compareTo(G)<0&&(A.applyToRemoteDocument(Q,g),Q.isValidDocument()&&(Q.setReadTime(g.commitVersion),T.addEntry(Q)))}))})),j.next((()=>p.mutationQueue.removeMutationBatch(y,A)))})(i,r,e,u).next((()=>u.apply(r))).next((()=>i.mutationQueue.performConsistencyCheck(r))).next((()=>i.documentOverlayCache.removeOverlaysForBatchId(r,l,e.batch.batchId))).next((()=>i.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,(function(p){let y=je();for(let g=0;g<p.mutationResults.length;++g)p.mutationResults[g].transformResults.length>0&&(y=y.add(p.batch.mutations[g].key));return y})(e)))).next((()=>i.localDocuments.getDocuments(r,l)))}))}function YT(s){const e=we(s);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(i=>e.Pi.getLastRemoteSnapshotVersion(i)))}function _I(s,e){const i=we(s),r=e.snapshotVersion;let l=i.Ms;return i.persistence.runTransaction("Apply remote event","readwrite-primary",(u=>{const f=i.Ns.newChangeBuffer({trackRemovals:!0});l=i.Ms;const p=[];e.targetChanges.forEach(((T,A)=>{const x=l.get(A);if(!x)return;p.push(i.Pi.removeMatchingKeys(u,T.removedDocuments,A).next((()=>i.Pi.addMatchingKeys(u,T.addedDocuments,A))));let j=x.withSequenceNumber(u.currentSequenceNumber);e.targetMismatches.get(A)!==null?j=j.withResumeToken($t.EMPTY_BYTE_STRING,Ae.min()).withLastLimboFreeSnapshotVersion(Ae.min()):T.resumeToken.approximateByteSize()>0&&(j=j.withResumeToken(T.resumeToken,r)),l=l.insert(A,j),(function(Q,G,te){return Q.resumeToken.approximateByteSize()===0||G.snapshotVersion.toMicroseconds()-Q.snapshotVersion.toMicroseconds()>=mI?!0:te.addedDocuments.size+te.modifiedDocuments.size+te.removedDocuments.size>0})(x,j,T)&&p.push(i.Pi.updateTargetData(u,j))}));let y=cs(),g=je();if(e.documentUpdates.forEach((T=>{e.resolvedLimboDocuments.has(T)&&p.push(i.persistence.referenceDelegate.updateLimboDocument(u,T))})),p.push(vI(u,f,e.documentUpdates).next((T=>{y=T.ks,g=T.qs}))),!r.isEqual(Ae.min())){const T=i.Pi.getLastRemoteSnapshotVersion(u).next((A=>i.Pi.setTargetsMetadata(u,u.currentSequenceNumber,r)));p.push(T)}return W.waitFor(p).next((()=>f.apply(u))).next((()=>i.localDocuments.getLocalViewOfDocuments(u,y,g))).next((()=>y))})).then((u=>(i.Ms=l,u)))}function vI(s,e,i){let r=je(),l=je();return i.forEach((u=>r=r.add(u))),e.getEntries(s,r).next((u=>{let f=cs();return i.forEach(((p,y)=>{const g=u.get(p);y.isFoundDocument()!==g.isFoundDocument()&&(l=l.add(p)),y.isNoDocument()&&y.version.isEqual(Ae.min())?(e.removeEntry(p,y.readTime),f=f.insert(p,y)):!g.isValidDocument()||y.version.compareTo(g.version)>0||y.version.compareTo(g.version)===0&&g.hasPendingWrites?(e.addEntry(y),f=f.insert(p,y)):oe(gp,"Ignoring outdated watch update for ",p,". Current version:",g.version," Watch version:",y.version)})),{ks:f,qs:l}}))}function EI(s,e){const i=we(s);return i.persistence.runTransaction("Get next mutation batch","readonly",(r=>(e===void 0&&(e=ip),i.mutationQueue.getNextMutationBatchAfterBatchId(r,e))))}function TI(s,e){const i=we(s);return i.persistence.runTransaction("Allocate target","readwrite",(r=>{let l;return i.Pi.getTargetData(r,e).next((u=>u?(l=u,W.resolve(l)):i.Pi.allocateTargetId(r).next((f=>(l=new er(e,f,"TargetPurposeListen",r.currentSequenceNumber),i.Pi.addTargetData(r,l).next((()=>l)))))))})).then((r=>{const l=i.Ms.get(r.targetId);return(l===null||r.snapshotVersion.compareTo(l.snapshotVersion)>0)&&(i.Ms=i.Ms.insert(r.targetId,r),i.xs.set(e,r.targetId)),r}))}async function Mm(s,e,i){const r=we(s),l=r.Ms.get(e),u=i?"readwrite":"readwrite-primary";try{i||await r.persistence.runTransaction("Release target",u,(f=>r.persistence.referenceDelegate.removeTarget(f,l)))}catch(f){if(!_o(f))throw f;oe(gp,`Failed to update sequence numbers for target ${e}: ${f}`)}r.Ms=r.Ms.remove(e),r.xs.delete(l.target)}function Iv(s,e,i){const r=we(s);let l=Ae.min(),u=je();return r.persistence.runTransaction("Execute query","readwrite",(f=>(function(y,g,T){const A=we(y),x=A.xs.get(T);return x!==void 0?W.resolve(A.Ms.get(x)):A.Pi.getTargetData(g,T)})(r,f,Oi(e)).next((p=>{if(p)return l=p.lastLimboFreeSnapshotVersion,r.Pi.getMatchingKeysForTargetId(f,p.targetId).next((y=>{u=y}))})).next((()=>r.Fs.getDocumentsMatchingQuery(f,e,i?l:Ae.min(),i?u:je()))).next((p=>(bI(r,aR(e),p),{documents:p,Qs:u})))))}function bI(s,e,i){let r=s.Os.get(e)||Ae.min();i.forEach(((l,u)=>{u.readTime.compareTo(r)>0&&(r=u.readTime)})),s.Os.set(e,r)}class Cv{constructor(){this.activeTargetIds=fR()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class AI{constructor(){this.Mo=new Cv,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,i,r){}addLocalQueryTarget(e,i=!0){return i&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,i,r){this.xo[e]=i}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new Cv,Promise.resolve()}handleUserChange(e,i,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SI{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nv="ConnectivityMonitor";class Dv{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){oe(Nv,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){oe(Nv,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Hc=null;function Vm(){return Hc===null?Hc=(function(){return 268435456+Math.round(2147483648*Math.random())})():Hc++,"0x"+Hc.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lm="RestConnection",wI={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class xI{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const i=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),l=encodeURIComponent(this.databaseId.database);this.Uo=i+"://"+e.host,this.Ko=`projects/${r}/databases/${l}`,this.Wo=this.databaseId.database===uh?`project_id=${r}`:`project_id=${r}&database_id=${l}`}Go(e,i,r,l,u){const f=Vm(),p=this.zo(e,i.toUriEncodedString());oe(lm,`Sending RPC '${e}' ${f}:`,p,r);const y={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(y,l,u);const{host:g}=new URL(p),T=ho(g);return this.Jo(e,p,y,r,T).then((A=>(oe(lm,`Received RPC '${e}' ${f}: `,A),A)),(A=>{throw ro(lm,`RPC '${e}' ${f} failed with error: `,A,"url: ",p,"request:",r),A}))}Ho(e,i,r,l,u,f){return this.Go(e,i,r,l,u)}jo(e,i,r){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+go})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),i&&i.headers.forEach(((l,u)=>e[u]=l)),r&&r.headers.forEach(((l,u)=>e[u]=l))}zo(e,i){const r=wI[e];return`${this.Uo}/v1/${i}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RI{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zt="WebChannelConnection";class II extends xI{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,i,r,l,u){const f=Vm();return new Promise(((p,y)=>{const g=new $E;g.setWithCredentials(!0),g.listenOnce(JE.COMPLETE,(()=>{try{switch(g.getLastErrorCode()){case Kc.NO_ERROR:const A=g.getResponseJson();oe(Zt,`XHR for RPC '${e}' ${f} received:`,JSON.stringify(A)),p(A);break;case Kc.TIMEOUT:oe(Zt,`RPC '${e}' ${f} timed out`),y(new ae(J.DEADLINE_EXCEEDED,"Request time out"));break;case Kc.HTTP_ERROR:const x=g.getStatus();if(oe(Zt,`RPC '${e}' ${f} failed with status:`,x,"response text:",g.getResponseText()),x>0){let j=g.getResponseJson();Array.isArray(j)&&(j=j[0]);const U=j?.error;if(U&&U.status&&U.message){const Q=(function(te){const fe=te.toLowerCase().replace(/_/g,"-");return Object.values(J).indexOf(fe)>=0?fe:J.UNKNOWN})(U.status);y(new ae(Q,U.message))}else y(new ae(J.UNKNOWN,"Server responded with status "+g.getStatus()))}else y(new ae(J.UNAVAILABLE,"Connection failed."));break;default:ve(9055,{l_:e,streamId:f,h_:g.getLastErrorCode(),P_:g.getLastError()})}}finally{oe(Zt,`RPC '${e}' ${f} completed.`)}}));const T=JSON.stringify(l);oe(Zt,`RPC '${e}' ${f} sending request:`,l),g.send(i,"POST",T,r,15)}))}T_(e,i,r){const l=Vm(),u=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],f=eT(),p=WE(),y={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},g=this.longPollingOptions.timeoutSeconds;g!==void 0&&(y.longPollingTimeout=Math.round(1e3*g)),this.useFetchStreams&&(y.useFetchStreams=!0),this.jo(y.initMessageHeaders,i,r),y.encodeInitMessageHeaders=!0;const T=u.join("");oe(Zt,`Creating RPC '${e}' stream ${l}: ${T}`,y);const A=f.createWebChannel(T,y);this.I_(A);let x=!1,j=!1;const U=new RI({Yo:G=>{j?oe(Zt,`Not sending because RPC '${e}' stream ${l} is closed:`,G):(x||(oe(Zt,`Opening RPC '${e}' stream ${l} transport.`),A.open(),x=!0),oe(Zt,`RPC '${e}' stream ${l} sending:`,G),A.send(G))},Zo:()=>A.close()}),Q=(G,te,fe)=>{G.listen(te,(ee=>{try{fe(ee)}catch(ue){setTimeout((()=>{throw ue}),0)}}))};return Q(A,Il.EventType.OPEN,(()=>{j||(oe(Zt,`RPC '${e}' stream ${l} transport opened.`),U.o_())})),Q(A,Il.EventType.CLOSE,(()=>{j||(j=!0,oe(Zt,`RPC '${e}' stream ${l} transport closed`),U.a_(),this.E_(A))})),Q(A,Il.EventType.ERROR,(G=>{j||(j=!0,ro(Zt,`RPC '${e}' stream ${l} transport errored. Name:`,G.name,"Message:",G.message),U.a_(new ae(J.UNAVAILABLE,"The operation could not be completed")))})),Q(A,Il.EventType.MESSAGE,(G=>{if(!j){const te=G.data[0];Ge(!!te,16349);const fe=te,ee=fe?.error||fe[0]?.error;if(ee){oe(Zt,`RPC '${e}' stream ${l} received error:`,ee);const ue=ee.status;let ce=(function(w){const I=Nt[w];if(I!==void 0)return VT(I)})(ue),Te=ee.message;ce===void 0&&(ce=J.INTERNAL,Te="Unknown error status: "+ue+" with message "+ee.message),j=!0,U.a_(new ae(ce,Te)),A.close()}else oe(Zt,`RPC '${e}' stream ${l} received:`,te),U.u_(te)}})),Q(p,ZE.STAT_EVENT,(G=>{G.stat===Tm.PROXY?oe(Zt,`RPC '${e}' stream ${l} detected buffering proxy`):G.stat===Tm.NOPROXY&&oe(Zt,`RPC '${e}' stream ${l} detected no buffering proxy`)})),setTimeout((()=>{U.__()}),0),U}terminate(){this.c_.forEach((e=>e.close())),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter((i=>i===e))}}function um(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jh(s){return new OR(s,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KT{constructor(e,i,r=1e3,l=1.5,u=6e4){this.Mi=e,this.timerId=i,this.d_=r,this.A_=l,this.R_=u,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const i=Math.floor(this.V_+this.y_()),r=Math.max(0,Date.now()-this.f_),l=Math.max(0,i-r);l>0&&oe("ExponentialBackoff",`Backing off for ${l} ms (base delay: ${this.V_} ms, delay with jitter: ${i} ms, last attempt: ${r} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,l,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ov="PersistentStream";class XT{constructor(e,i,r,l,u,f,p,y){this.Mi=e,this.S_=r,this.b_=l,this.connection=u,this.authCredentialsProvider=f,this.appCheckCredentialsProvider=p,this.listener=y,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new KT(e,i)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,i){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():i&&i.code===J.RESOURCE_EXHAUSTED?(us(i.toString()),us("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):i&&i.code===J.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(i)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),i=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([r,l])=>{this.D_===i&&this.G_(r,l)}),(r=>{e((()=>{const l=new ae(J.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(l)}))}))}G_(e,i){const r=this.W_(this.D_);this.stream=this.j_(e,i),this.stream.Xo((()=>{r((()=>this.listener.Xo()))})),this.stream.t_((()=>{r((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((l=>{r((()=>this.z_(l)))})),this.stream.onMessage((l=>{r((()=>++this.F_==1?this.J_(l):this.onNext(l)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return oe(Ov,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return i=>{this.Mi.enqueueAndForget((()=>this.D_===e?i():(oe(Ov,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class CI extends XT{constructor(e,i,r,l,u,f){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",i,r,l,f),this.serializer=u}j_(e,i){return this.connection.T_("Listen",e,i)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const i=kR(this.serializer,e),r=(function(u){if(!("targetChange"in u))return Ae.min();const f=u.targetChange;return f.targetIds&&f.targetIds.length?Ae.min():f.readTime?Mi(f.readTime):Ae.min()})(e);return this.listener.H_(i,r)}Y_(e){const i={};i.database=Om(this.serializer),i.addTarget=(function(u,f){let p;const y=f.target;if(p=xm(y)?{documents:LR(u,y)}:{query:UR(u,y).ft},p.targetId=f.targetId,f.resumeToken.approximateByteSize()>0){p.resumeToken=PT(u,f.resumeToken);const g=Cm(u,f.expectedCount);g!==null&&(p.expectedCount=g)}else if(f.snapshotVersion.compareTo(Ae.min())>0){p.readTime=mh(u,f.snapshotVersion.toTimestamp());const g=Cm(u,f.expectedCount);g!==null&&(p.expectedCount=g)}return p})(this.serializer,e);const r=BR(this.serializer,e);r&&(i.labels=r),this.q_(i)}Z_(e){const i={};i.database=Om(this.serializer),i.removeTarget=e,this.q_(i)}}class NI extends XT{constructor(e,i,r,l,u,f){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",i,r,l,f),this.serializer=u}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,i){return this.connection.T_("Write",e,i)}J_(e){return Ge(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Ge(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){Ge(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const i=PR(e.writeResults,e.commitTime),r=Mi(e.commitTime);return this.listener.na(r,i)}ra(){const e={};e.database=Om(this.serializer),this.q_(e)}ea(e){const i={streamToken:this.lastStreamToken,writes:e.map((r=>jR(this.serializer,r)))};this.q_(i)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DI{}class OI extends DI{constructor(e,i,r,l){super(),this.authCredentials=e,this.appCheckCredentials=i,this.connection=r,this.serializer=l,this.ia=!1}sa(){if(this.ia)throw new ae(J.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,i,r,l){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([u,f])=>this.connection.Go(e,Nm(i,r),l,u,f))).catch((u=>{throw u.name==="FirebaseError"?(u.code===J.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new ae(J.UNKNOWN,u.toString())}))}Ho(e,i,r,l,u){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([f,p])=>this.connection.Ho(e,Nm(i,r),l,f,p,u))).catch((f=>{throw f.name==="FirebaseError"?(f.code===J.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),f):new ae(J.UNKNOWN,f.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class MI{constructor(e,i){this.asyncQueue=e,this.onlineStateHandler=i,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const i=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(us(i),this.aa=!1):oe("OnlineStateTracker",i)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ea="RemoteStore";class VI{constructor(e,i,r,l,u){this.localStore=e,this.datastore=i,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=u,this.Aa.Oo((f=>{r.enqueueAndForget((async()=>{na(this)&&(oe(ea,"Restarting streams for network reachability change."),await(async function(y){const g=we(y);g.Ea.add(4),await iu(g),g.Ra.set("Unknown"),g.Ea.delete(4),await Ph(g)})(this))}))})),this.Ra=new MI(r,l)}}async function Ph(s){if(na(s))for(const e of s.da)await e(!0)}async function iu(s){for(const e of s.da)await e(!1)}function $T(s,e){const i=we(s);i.Ia.has(e.targetId)||(i.Ia.set(e.targetId,e),Ep(i)?vp(i):vo(i).O_()&&_p(i,e))}function yp(s,e){const i=we(s),r=vo(i);i.Ia.delete(e),r.O_()&&JT(i,e),i.Ia.size===0&&(r.O_()?r.L_():na(i)&&i.Ra.set("Unknown"))}function _p(s,e){if(s.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Ae.min())>0){const i=s.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(i)}vo(s).Y_(e)}function JT(s,e){s.Va.Ue(e),vo(s).Z_(e)}function vp(s){s.Va=new IR({getRemoteKeysForTarget:e=>s.remoteSyncer.getRemoteKeysForTarget(e),At:e=>s.Ia.get(e)||null,ht:()=>s.datastore.serializer.databaseId}),vo(s).start(),s.Ra.ua()}function Ep(s){return na(s)&&!vo(s).x_()&&s.Ia.size>0}function na(s){return we(s).Ea.size===0}function ZT(s){s.Va=void 0}async function kI(s){s.Ra.set("Online")}async function jI(s){s.Ia.forEach(((e,i)=>{_p(s,e)}))}async function PI(s,e){ZT(s),Ep(s)?(s.Ra.ha(e),vp(s)):s.Ra.set("Unknown")}async function LI(s,e,i){if(s.Ra.set("Online"),e instanceof jT&&e.state===2&&e.cause)try{await(async function(l,u){const f=u.cause;for(const p of u.targetIds)l.Ia.has(p)&&(await l.remoteSyncer.rejectListen(p,f),l.Ia.delete(p),l.Va.removeTarget(p))})(s,e)}catch(r){oe(ea,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await gh(s,r)}else if(e instanceof Zc?s.Va.Ze(e):e instanceof kT?s.Va.st(e):s.Va.tt(e),!i.isEqual(Ae.min()))try{const r=await YT(s.localStore);i.compareTo(r)>=0&&await(function(u,f){const p=u.Va.Tt(f);return p.targetChanges.forEach(((y,g)=>{if(y.resumeToken.approximateByteSize()>0){const T=u.Ia.get(g);T&&u.Ia.set(g,T.withResumeToken(y.resumeToken,f))}})),p.targetMismatches.forEach(((y,g)=>{const T=u.Ia.get(y);if(!T)return;u.Ia.set(y,T.withResumeToken($t.EMPTY_BYTE_STRING,T.snapshotVersion)),JT(u,y);const A=new er(T.target,y,g,T.sequenceNumber);_p(u,A)})),u.remoteSyncer.applyRemoteEvent(p)})(s,i)}catch(r){oe(ea,"Failed to raise snapshot:",r),await gh(s,r)}}async function gh(s,e,i){if(!_o(e))throw e;s.Ea.add(1),await iu(s),s.Ra.set("Offline"),i||(i=()=>YT(s.localStore)),s.asyncQueue.enqueueRetryable((async()=>{oe(ea,"Retrying IndexedDB access"),await i(),s.Ea.delete(1),await Ph(s)}))}function WT(s,e){return e().catch((i=>gh(s,i,e)))}async function Lh(s){const e=we(s),i=hr(e);let r=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:ip;for(;UI(e);)try{const l=await EI(e.localStore,r);if(l===null){e.Ta.length===0&&i.L_();break}r=l.batchId,zI(e,l)}catch(l){await gh(e,l)}e1(e)&&t1(e)}function UI(s){return na(s)&&s.Ta.length<10}function zI(s,e){s.Ta.push(e);const i=hr(s);i.O_()&&i.X_&&i.ea(e.mutations)}function e1(s){return na(s)&&!hr(s).x_()&&s.Ta.length>0}function t1(s){hr(s).start()}async function BI(s){hr(s).ra()}async function qI(s){const e=hr(s);for(const i of s.Ta)e.ea(i.mutations)}async function HI(s,e,i){const r=s.Ta.shift(),l=cp.from(r,e,i);await WT(s,(()=>s.remoteSyncer.applySuccessfulWrite(l))),await Lh(s)}async function FI(s,e){e&&hr(s).X_&&await(async function(r,l){if((function(f){return wR(f)&&f!==J.ABORTED})(l.code)){const u=r.Ta.shift();hr(r).B_(),await WT(r,(()=>r.remoteSyncer.rejectFailedWrite(u.batchId,l))),await Lh(r)}})(s,e),e1(s)&&t1(s)}async function Mv(s,e){const i=we(s);i.asyncQueue.verifyOperationInProgress(),oe(ea,"RemoteStore received new credentials");const r=na(i);i.Ea.add(3),await iu(i),r&&i.Ra.set("Unknown"),await i.remoteSyncer.handleCredentialChange(e),i.Ea.delete(3),await Ph(i)}async function GI(s,e){const i=we(s);e?(i.Ea.delete(2),await Ph(i)):e||(i.Ea.add(2),await iu(i),i.Ra.set("Unknown"))}function vo(s){return s.ma||(s.ma=(function(i,r,l){const u=we(i);return u.sa(),new CI(r,u.connection,u.authCredentials,u.appCheckCredentials,u.serializer,l)})(s.datastore,s.asyncQueue,{Xo:kI.bind(null,s),t_:jI.bind(null,s),r_:PI.bind(null,s),H_:LI.bind(null,s)}),s.da.push((async e=>{e?(s.ma.B_(),Ep(s)?vp(s):s.Ra.set("Unknown")):(await s.ma.stop(),ZT(s))}))),s.ma}function hr(s){return s.fa||(s.fa=(function(i,r,l){const u=we(i);return u.sa(),new NI(r,u.connection,u.authCredentials,u.appCheckCredentials,u.serializer,l)})(s.datastore,s.asyncQueue,{Xo:()=>Promise.resolve(),t_:BI.bind(null,s),r_:FI.bind(null,s),ta:qI.bind(null,s),na:HI.bind(null,s)}),s.da.push((async e=>{e?(s.fa.B_(),await Lh(s)):(await s.fa.stop(),s.Ta.length>0&&(oe(ea,`Stopping write stream with ${s.Ta.length} pending writes`),s.Ta=[]))}))),s.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tp{constructor(e,i,r,l,u){this.asyncQueue=e,this.timerId=i,this.targetTimeMs=r,this.op=l,this.removalCallback=u,this.deferred=new as,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((f=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,i,r,l,u){const f=Date.now()+r,p=new Tp(e,i,f,l,u);return p.start(r),p}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ae(J.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function bp(s,e){if(us("AsyncQueue",`${e}: ${s}`),_o(s))return new ae(J.UNAVAILABLE,`${e}: ${s}`);throw s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class io{static emptySet(e){return new io(e.comparator)}constructor(e){this.comparator=e?(i,r)=>e(i,r)||pe.comparator(i.key,r.key):(i,r)=>pe.comparator(i.key,r.key),this.keyedMap=Cl(),this.sortedSet=new ut(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const i=this.keyedMap.get(e);return i?this.sortedSet.indexOf(i):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((i,r)=>(e(i),!1)))}add(e){const i=this.delete(e.key);return i.copy(i.keyedMap.insert(e.key,e),i.sortedSet.insert(e,null))}delete(e){const i=this.get(e);return i?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(i)):this}isEqual(e){if(!(e instanceof io)||this.size!==e.size)return!1;const i=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;i.hasNext();){const l=i.getNext().key,u=r.getNext().key;if(!l.isEqual(u))return!1}return!0}toString(){const e=[];return this.forEach((i=>{e.push(i.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,i){const r=new io;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=i,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vv{constructor(){this.ga=new ut(pe.comparator)}track(e){const i=e.doc.key,r=this.ga.get(i);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(i,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(i,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(i,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(i,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(i):e.type===1&&r.type===2?this.ga=this.ga.insert(i,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(i,{type:2,doc:e.doc}):ve(63341,{Rt:e,pa:r}):this.ga=this.ga.insert(i,e)}ya(){const e=[];return this.ga.inorderTraversal(((i,r)=>{e.push(r)})),e}}class co{constructor(e,i,r,l,u,f,p,y,g){this.query=e,this.docs=i,this.oldDocs=r,this.docChanges=l,this.mutatedKeys=u,this.fromCache=f,this.syncStateChanged=p,this.excludesMetadataChanges=y,this.hasCachedResults=g}static fromInitialDocuments(e,i,r,l,u){const f=[];return i.forEach((p=>{f.push({type:0,doc:p})})),new co(e,i,io.emptySet(i),f,r,l,!0,!1,u)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Dh(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const i=this.docChanges,r=e.docChanges;if(i.length!==r.length)return!1;for(let l=0;l<i.length;l++)if(i[l].type!==r[l].type||!i[l].doc.isEqual(r[l].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QI{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((e=>e.Da()))}}class YI{constructor(){this.queries=kv(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(i,r){const l=we(i),u=l.queries;l.queries=kv(),u.forEach(((f,p)=>{for(const y of p.Sa)y.onError(r)}))})(this,new ae(J.ABORTED,"Firestore shutting down"))}}function kv(){return new ta((s=>bT(s)),Dh)}async function Ap(s,e){const i=we(s);let r=3;const l=e.query;let u=i.queries.get(l);u?!u.ba()&&e.Da()&&(r=2):(u=new QI,r=e.Da()?0:1);try{switch(r){case 0:u.wa=await i.onListen(l,!0);break;case 1:u.wa=await i.onListen(l,!1);break;case 2:await i.onFirstRemoteStoreListen(l)}}catch(f){const p=bp(f,`Initialization of query '${Xa(e.query)}' failed`);return void e.onError(p)}i.queries.set(l,u),u.Sa.push(e),e.va(i.onlineState),u.wa&&e.Fa(u.wa)&&wp(i)}async function Sp(s,e){const i=we(s),r=e.query;let l=3;const u=i.queries.get(r);if(u){const f=u.Sa.indexOf(e);f>=0&&(u.Sa.splice(f,1),u.Sa.length===0?l=e.Da()?0:1:!u.ba()&&e.Da()&&(l=2))}switch(l){case 0:return i.queries.delete(r),i.onUnlisten(r,!0);case 1:return i.queries.delete(r),i.onUnlisten(r,!1);case 2:return i.onLastRemoteStoreUnlisten(r);default:return}}function KI(s,e){const i=we(s);let r=!1;for(const l of e){const u=l.query,f=i.queries.get(u);if(f){for(const p of f.Sa)p.Fa(l)&&(r=!0);f.wa=l}}r&&wp(i)}function XI(s,e,i){const r=we(s),l=r.queries.get(e);if(l)for(const u of l.Sa)u.onError(i);r.queries.delete(e)}function wp(s){s.Ca.forEach((e=>{e.next()}))}var km,jv;(jv=km||(km={})).Ma="default",jv.Cache="cache";class xp{constructor(e,i,r){this.query=e,this.xa=i,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){const r=[];for(const l of e.docChanges)l.type!==3&&r.push(l);e=new co(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let i=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),i=!0):this.La(e,this.onlineState)&&(this.ka(e),i=!0),this.Na=e,i}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let i=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),i=!0),i}La(e,i){if(!e.fromCache||!this.Da())return!0;const r=i!=="Offline";return(!this.options.qa||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||i==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const i=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!i)&&this.options.includeMetadataChanges===!0}ka(e){e=co.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==km.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n1{constructor(e){this.key=e}}class i1{constructor(e){this.key=e}}class $I{constructor(e,i){this.query=e,this.Ya=i,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=je(),this.mutatedKeys=je(),this.eu=AT(e),this.tu=new io(this.eu)}get nu(){return this.Ya}ru(e,i){const r=i?i.iu:new Vv,l=i?i.tu:this.tu;let u=i?i.mutatedKeys:this.mutatedKeys,f=l,p=!1;const y=this.query.limitType==="F"&&l.size===this.query.limit?l.last():null,g=this.query.limitType==="L"&&l.size===this.query.limit?l.first():null;if(e.inorderTraversal(((T,A)=>{const x=l.get(T),j=Oh(this.query,A)?A:null,U=!!x&&this.mutatedKeys.has(x.key),Q=!!j&&(j.hasLocalMutations||this.mutatedKeys.has(j.key)&&j.hasCommittedMutations);let G=!1;x&&j?x.data.isEqual(j.data)?U!==Q&&(r.track({type:3,doc:j}),G=!0):this.su(x,j)||(r.track({type:2,doc:j}),G=!0,(y&&this.eu(j,y)>0||g&&this.eu(j,g)<0)&&(p=!0)):!x&&j?(r.track({type:0,doc:j}),G=!0):x&&!j&&(r.track({type:1,doc:x}),G=!0,(y||g)&&(p=!0)),G&&(j?(f=f.add(j),u=Q?u.add(T):u.delete(T)):(f=f.delete(T),u=u.delete(T)))})),this.query.limit!==null)for(;f.size>this.query.limit;){const T=this.query.limitType==="F"?f.last():f.first();f=f.delete(T.key),u=u.delete(T.key),r.track({type:1,doc:T})}return{tu:f,iu:r,Cs:p,mutatedKeys:u}}su(e,i){return e.hasLocalMutations&&i.hasCommittedMutations&&!i.hasLocalMutations}applyChanges(e,i,r,l){const u=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const f=e.iu.ya();f.sort(((T,A)=>(function(j,U){const Q=G=>{switch(G){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ve(20277,{Rt:G})}};return Q(j)-Q(U)})(T.type,A.type)||this.eu(T.doc,A.doc))),this.ou(r),l=l??!1;const p=i&&!l?this._u():[],y=this.Xa.size===0&&this.current&&!l?1:0,g=y!==this.Za;return this.Za=y,f.length!==0||g?{snapshot:new co(this.query,e.tu,u,f,e.mutatedKeys,y===0,g,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:p}:{au:p}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new Vv,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((i=>this.Ya=this.Ya.add(i))),e.modifiedDocuments.forEach((i=>{})),e.removedDocuments.forEach((i=>this.Ya=this.Ya.delete(i))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=je(),this.tu.forEach((r=>{this.uu(r.key)&&(this.Xa=this.Xa.add(r.key))}));const i=[];return e.forEach((r=>{this.Xa.has(r)||i.push(new i1(r))})),this.Xa.forEach((r=>{e.has(r)||i.push(new n1(r))})),i}cu(e){this.Ya=e.Qs,this.Xa=je();const i=this.ru(e.documents);return this.applyChanges(i,!0)}lu(){return co.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const Rp="SyncEngine";class JI{constructor(e,i,r){this.query=e,this.targetId=i,this.view=r}}class ZI{constructor(e){this.key=e,this.hu=!1}}class WI{constructor(e,i,r,l,u,f){this.localStore=e,this.remoteStore=i,this.eventManager=r,this.sharedClientState=l,this.currentUser=u,this.maxConcurrentLimboResolutions=f,this.Pu={},this.Tu=new ta((p=>bT(p)),Dh),this.Iu=new Map,this.Eu=new Set,this.du=new ut(pe.comparator),this.Au=new Map,this.Ru=new dp,this.Vu={},this.mu=new Map,this.fu=uo.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function eC(s,e,i=!0){const r=u1(s);let l;const u=r.Tu.get(e);return u?(r.sharedClientState.addLocalQueryTarget(u.targetId),l=u.view.lu()):l=await s1(r,e,i,!0),l}async function tC(s,e){const i=u1(s);await s1(i,e,!0,!1)}async function s1(s,e,i,r){const l=await TI(s.localStore,Oi(e)),u=l.targetId,f=s.sharedClientState.addLocalQueryTarget(u,i);let p;return r&&(p=await nC(s,e,u,f==="current",l.resumeToken)),s.isPrimaryClient&&i&&$T(s.remoteStore,l),p}async function nC(s,e,i,r,l){s.pu=(A,x,j)=>(async function(Q,G,te,fe){let ee=G.view.ru(te);ee.Cs&&(ee=await Iv(Q.localStore,G.query,!1).then((({documents:N})=>G.view.ru(N,ee))));const ue=fe&&fe.targetChanges.get(G.targetId),ce=fe&&fe.targetMismatches.get(G.targetId)!=null,Te=G.view.applyChanges(ee,Q.isPrimaryClient,ue,ce);return Lv(Q,G.targetId,Te.au),Te.snapshot})(s,A,x,j);const u=await Iv(s.localStore,e,!0),f=new $I(e,u.Qs),p=f.ru(u.documents),y=nu.createSynthesizedTargetChangeForCurrentChange(i,r&&s.onlineState!=="Offline",l),g=f.applyChanges(p,s.isPrimaryClient,y);Lv(s,i,g.au);const T=new JI(e,i,f);return s.Tu.set(e,T),s.Iu.has(i)?s.Iu.get(i).push(e):s.Iu.set(i,[e]),g.snapshot}async function iC(s,e,i){const r=we(s),l=r.Tu.get(e),u=r.Iu.get(l.targetId);if(u.length>1)return r.Iu.set(l.targetId,u.filter((f=>!Dh(f,e)))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(l.targetId),r.sharedClientState.isActiveQueryTarget(l.targetId)||await Mm(r.localStore,l.targetId,!1).then((()=>{r.sharedClientState.clearQueryState(l.targetId),i&&yp(r.remoteStore,l.targetId),jm(r,l.targetId)})).catch(yo)):(jm(r,l.targetId),await Mm(r.localStore,l.targetId,!0))}async function sC(s,e){const i=we(s),r=i.Tu.get(e),l=i.Iu.get(r.targetId);i.isPrimaryClient&&l.length===1&&(i.sharedClientState.removeLocalQueryTarget(r.targetId),yp(i.remoteStore,r.targetId))}async function rC(s,e,i){const r=fC(s);try{const l=await(function(f,p){const y=we(f),g=st.now(),T=p.reduce(((j,U)=>j.add(U.key)),je());let A,x;return y.persistence.runTransaction("Locally write mutations","readwrite",(j=>{let U=cs(),Q=je();return y.Ns.getEntries(j,T).next((G=>{U=G,U.forEach(((te,fe)=>{fe.isValidDocument()||(Q=Q.add(te))}))})).next((()=>y.localDocuments.getOverlayedDocuments(j,U))).next((G=>{A=G;const te=[];for(const fe of p){const ee=ER(fe,A.get(fe.key).overlayedDocument);ee!=null&&te.push(new pr(fe.key,ee,mT(ee.value.mapValue),Bn.exists(!0)))}return y.mutationQueue.addMutationBatch(j,g,te,p)})).next((G=>{x=G;const te=G.applyToLocalDocumentSet(A,Q);return y.documentOverlayCache.saveOverlays(j,G.batchId,te)}))})).then((()=>({batchId:x.batchId,changes:wT(A)})))})(r.localStore,e);r.sharedClientState.addPendingMutation(l.batchId),(function(f,p,y){let g=f.Vu[f.currentUser.toKey()];g||(g=new ut(ke)),g=g.insert(p,y),f.Vu[f.currentUser.toKey()]=g})(r,l.batchId,i),await su(r,l.changes),await Lh(r.remoteStore)}catch(l){const u=bp(l,"Failed to persist write");i.reject(u)}}async function r1(s,e){const i=we(s);try{const r=await _I(i.localStore,e);e.targetChanges.forEach(((l,u)=>{const f=i.Au.get(u);f&&(Ge(l.addedDocuments.size+l.modifiedDocuments.size+l.removedDocuments.size<=1,22616),l.addedDocuments.size>0?f.hu=!0:l.modifiedDocuments.size>0?Ge(f.hu,14607):l.removedDocuments.size>0&&(Ge(f.hu,42227),f.hu=!1))})),await su(i,r,e)}catch(r){await yo(r)}}function Pv(s,e,i){const r=we(s);if(r.isPrimaryClient&&i===0||!r.isPrimaryClient&&i===1){const l=[];r.Tu.forEach(((u,f)=>{const p=f.view.va(e);p.snapshot&&l.push(p.snapshot)})),(function(f,p){const y=we(f);y.onlineState=p;let g=!1;y.queries.forEach(((T,A)=>{for(const x of A.Sa)x.va(p)&&(g=!0)})),g&&wp(y)})(r.eventManager,e),l.length&&r.Pu.H_(l),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function aC(s,e,i){const r=we(s);r.sharedClientState.updateQueryState(e,"rejected",i);const l=r.Au.get(e),u=l&&l.key;if(u){let f=new ut(pe.comparator);f=f.insert(u,en.newNoDocument(u,Ae.min()));const p=je().add(u),y=new kh(Ae.min(),new Map,new ut(ke),f,p);await r1(r,y),r.du=r.du.remove(u),r.Au.delete(e),Ip(r)}else await Mm(r.localStore,e,!1).then((()=>jm(r,e,i))).catch(yo)}async function oC(s,e){const i=we(s),r=e.batch.batchId;try{const l=await yI(i.localStore,e);o1(i,r,null),a1(i,r),i.sharedClientState.updateMutationState(r,"acknowledged"),await su(i,l)}catch(l){await yo(l)}}async function lC(s,e,i){const r=we(s);try{const l=await(function(f,p){const y=we(f);return y.persistence.runTransaction("Reject batch","readwrite-primary",(g=>{let T;return y.mutationQueue.lookupMutationBatch(g,p).next((A=>(Ge(A!==null,37113),T=A.keys(),y.mutationQueue.removeMutationBatch(g,A)))).next((()=>y.mutationQueue.performConsistencyCheck(g))).next((()=>y.documentOverlayCache.removeOverlaysForBatchId(g,T,p))).next((()=>y.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(g,T))).next((()=>y.localDocuments.getDocuments(g,T)))}))})(r.localStore,e);o1(r,e,i),a1(r,e),r.sharedClientState.updateMutationState(e,"rejected",i),await su(r,l)}catch(l){await yo(l)}}function a1(s,e){(s.mu.get(e)||[]).forEach((i=>{i.resolve()})),s.mu.delete(e)}function o1(s,e,i){const r=we(s);let l=r.Vu[r.currentUser.toKey()];if(l){const u=l.get(e);u&&(i?u.reject(i):u.resolve(),l=l.remove(e)),r.Vu[r.currentUser.toKey()]=l}}function jm(s,e,i=null){s.sharedClientState.removeLocalQueryTarget(e);for(const r of s.Iu.get(e))s.Tu.delete(r),i&&s.Pu.yu(r,i);s.Iu.delete(e),s.isPrimaryClient&&s.Ru.jr(e).forEach((r=>{s.Ru.containsKey(r)||l1(s,r)}))}function l1(s,e){s.Eu.delete(e.path.canonicalString());const i=s.du.get(e);i!==null&&(yp(s.remoteStore,i),s.du=s.du.remove(e),s.Au.delete(i),Ip(s))}function Lv(s,e,i){for(const r of i)r instanceof n1?(s.Ru.addReference(r.key,e),uC(s,r)):r instanceof i1?(oe(Rp,"Document no longer in limbo: "+r.key),s.Ru.removeReference(r.key,e),s.Ru.containsKey(r.key)||l1(s,r.key)):ve(19791,{wu:r})}function uC(s,e){const i=e.key,r=i.path.canonicalString();s.du.get(i)||s.Eu.has(r)||(oe(Rp,"New document in limbo: "+i),s.Eu.add(r),Ip(s))}function Ip(s){for(;s.Eu.size>0&&s.du.size<s.maxConcurrentLimboResolutions;){const e=s.Eu.values().next().value;s.Eu.delete(e);const i=new pe(tt.fromString(e)),r=s.fu.next();s.Au.set(r,new ZI(i)),s.du=s.du.insert(i,r),$T(s.remoteStore,new er(Oi(Nh(i.path)),r,"TargetPurposeLimboResolution",Rh.ce))}}async function su(s,e,i){const r=we(s),l=[],u=[],f=[];r.Tu.isEmpty()||(r.Tu.forEach(((p,y)=>{f.push(r.pu(y,e,i).then((g=>{if((g||i)&&r.isPrimaryClient){const T=g?!g.fromCache:i?.targetChanges.get(y.targetId)?.current;r.sharedClientState.updateQueryState(y.targetId,T?"current":"not-current")}if(g){l.push(g);const T=pp.As(y.targetId,g);u.push(T)}})))})),await Promise.all(f),r.Pu.H_(l),await(async function(y,g){const T=we(y);try{await T.persistence.runTransaction("notifyLocalViewChanges","readwrite",(A=>W.forEach(g,(x=>W.forEach(x.Es,(j=>T.persistence.referenceDelegate.addReference(A,x.targetId,j))).next((()=>W.forEach(x.ds,(j=>T.persistence.referenceDelegate.removeReference(A,x.targetId,j)))))))))}catch(A){if(!_o(A))throw A;oe(gp,"Failed to update sequence numbers: "+A)}for(const A of g){const x=A.targetId;if(!A.fromCache){const j=T.Ms.get(x),U=j.snapshotVersion,Q=j.withLastLimboFreeSnapshotVersion(U);T.Ms=T.Ms.insert(x,Q)}}})(r.localStore,u))}async function cC(s,e){const i=we(s);if(!i.currentUser.isEqual(e)){oe(Rp,"User change. New user:",e.toKey());const r=await QT(i.localStore,e);i.currentUser=e,(function(u,f){u.mu.forEach((p=>{p.forEach((y=>{y.reject(new ae(J.CANCELLED,f))}))})),u.mu.clear()})(i,"'waitForPendingWrites' promise is rejected due to a user change."),i.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await su(i,r.Ls)}}function hC(s,e){const i=we(s),r=i.Au.get(e);if(r&&r.hu)return je().add(r.key);{let l=je();const u=i.Iu.get(e);if(!u)return l;for(const f of u){const p=i.Tu.get(f);l=l.unionWith(p.view.nu)}return l}}function u1(s){const e=we(s);return e.remoteStore.remoteSyncer.applyRemoteEvent=r1.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=hC.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=aC.bind(null,e),e.Pu.H_=KI.bind(null,e.eventManager),e.Pu.yu=XI.bind(null,e.eventManager),e}function fC(s){const e=we(s);return e.remoteStore.remoteSyncer.applySuccessfulWrite=oC.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=lC.bind(null,e),e}class yh{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=jh(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,i){return null}Mu(e,i){return null}vu(e){return gI(this.persistence,new dI,e.initialUser,this.serializer)}Cu(e){return new GT(mp.mi,this.serializer)}Du(e){return new AI}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}yh.provider={build:()=>new yh};class dC extends yh{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,i){Ge(this.persistence.referenceDelegate instanceof ph,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new ZR(r,e.asyncQueue,i)}Cu(e){const i=this.cacheSizeBytes!==void 0?dn.withCacheSize(this.cacheSizeBytes):dn.DEFAULT;return new GT((r=>ph.mi(r,i)),this.serializer)}}class Pm{async initialize(e,i){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(i),this.remoteStore=this.createRemoteStore(i),this.eventManager=this.createEventManager(i),this.syncEngine=this.createSyncEngine(i,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>Pv(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=cC.bind(null,this.syncEngine),await GI(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new YI})()}createDatastore(e){const i=jh(e.databaseInfo.databaseId),r=(function(u){return new II(u)})(e.databaseInfo);return(function(u,f,p,y){return new OI(u,f,p,y)})(e.authCredentials,e.appCheckCredentials,r,i)}createRemoteStore(e){return(function(r,l,u,f,p){return new VI(r,l,u,f,p)})(this.localStore,this.datastore,e.asyncQueue,(i=>Pv(this.syncEngine,i,0)),(function(){return Dv.v()?new Dv:new SI})())}createSyncEngine(e,i){return(function(l,u,f,p,y,g,T){const A=new WI(l,u,f,p,y,g);return T&&(A.gu=!0),A})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,i)}async terminate(){await(async function(i){const r=we(i);oe(ea,"RemoteStore shutting down."),r.Ea.add(5),await iu(r),r.Aa.shutdown(),r.Ra.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}Pm.provider={build:()=>new Pm};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cp{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):us("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,i){setTimeout((()=>{this.muted||e(i)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fr="FirestoreClient";class mC{constructor(e,i,r,l,u){this.authCredentials=e,this.appCheckCredentials=i,this.asyncQueue=r,this.databaseInfo=l,this.user=Wt.UNAUTHENTICATED,this.clientId=np.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=u,this.authCredentials.start(r,(async f=>{oe(fr,"Received user=",f.uid),await this.authCredentialListener(f),this.user=f})),this.appCheckCredentials.start(r,(f=>(oe(fr,"Received new app check token=",f),this.appCheckCredentialListener(f,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new as;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(i){const r=bp(i,"Failed to shutdown persistence");e.reject(r)}})),e.promise}}async function cm(s,e){s.asyncQueue.verifyOperationInProgress(),oe(fr,"Initializing OfflineComponentProvider");const i=s.configuration;await e.initialize(i);let r=i.initialUser;s.setCredentialChangeListener((async l=>{r.isEqual(l)||(await QT(e.localStore,l),r=l)})),e.persistence.setDatabaseDeletedListener((()=>s.terminate())),s._offlineComponents=e}async function Uv(s,e){s.asyncQueue.verifyOperationInProgress();const i=await pC(s);oe(fr,"Initializing OnlineComponentProvider"),await e.initialize(i,s.configuration),s.setCredentialChangeListener((r=>Mv(e.remoteStore,r))),s.setAppCheckTokenChangeListener(((r,l)=>Mv(e.remoteStore,l))),s._onlineComponents=e}async function pC(s){if(!s._offlineComponents)if(s._uninitializedComponentsProvider){oe(fr,"Using user provided OfflineComponentProvider");try{await cm(s,s._uninitializedComponentsProvider._offline)}catch(e){const i=e;if(!(function(l){return l.name==="FirebaseError"?l.code===J.FAILED_PRECONDITION||l.code===J.UNIMPLEMENTED:!(typeof DOMException<"u"&&l instanceof DOMException)||l.code===22||l.code===20||l.code===11})(i))throw i;ro("Error using user provided cache. Falling back to memory cache: "+i),await cm(s,new yh)}}else oe(fr,"Using default OfflineComponentProvider"),await cm(s,new dC(void 0));return s._offlineComponents}async function c1(s){return s._onlineComponents||(s._uninitializedComponentsProvider?(oe(fr,"Using user provided OnlineComponentProvider"),await Uv(s,s._uninitializedComponentsProvider._online)):(oe(fr,"Using default OnlineComponentProvider"),await Uv(s,new Pm))),s._onlineComponents}function gC(s){return c1(s).then((e=>e.syncEngine))}async function _h(s){const e=await c1(s),i=e.eventManager;return i.onListen=eC.bind(null,e.syncEngine),i.onUnlisten=iC.bind(null,e.syncEngine),i.onFirstRemoteStoreListen=tC.bind(null,e.syncEngine),i.onLastRemoteStoreUnlisten=sC.bind(null,e.syncEngine),i}function yC(s,e,i={}){const r=new as;return s.asyncQueue.enqueueAndForget((async()=>(function(u,f,p,y,g){const T=new Cp({next:x=>{T.Nu(),f.enqueueAndForget((()=>Sp(u,A)));const j=x.docs.has(p);!j&&x.fromCache?g.reject(new ae(J.UNAVAILABLE,"Failed to get document because the client is offline.")):j&&x.fromCache&&y&&y.source==="server"?g.reject(new ae(J.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):g.resolve(x)},error:x=>g.reject(x)}),A=new xp(Nh(p.path),T,{includeMetadataChanges:!0,qa:!0});return Ap(u,A)})(await _h(s),s.asyncQueue,e,i,r))),r.promise}function _C(s,e,i={}){const r=new as;return s.asyncQueue.enqueueAndForget((async()=>(function(u,f,p,y,g){const T=new Cp({next:x=>{T.Nu(),f.enqueueAndForget((()=>Sp(u,A))),x.fromCache&&y.source==="server"?g.reject(new ae(J.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):g.resolve(x)},error:x=>g.reject(x)}),A=new xp(p,T,{includeMetadataChanges:!0,qa:!0});return Ap(u,A)})(await _h(s),s.asyncQueue,e,i,r))),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function h1(s){const e={};return s.timeoutSeconds!==void 0&&(e.timeoutSeconds=s.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zv=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const f1="firestore.googleapis.com",Bv=!0;class qv{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new ae(J.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=f1,this.ssl=Bv}else this.host=e.host,this.ssl=e.ssl??Bv;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=FT;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<$R)throw new ae(J.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}Mx("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=h1(e.experimentalLongPollingOptions??{}),(function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new ae(J.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new ae(J.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new ae(J.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(r,l){return r.timeoutSeconds===l.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Uh{constructor(e,i,r,l){this._authCredentials=e,this._appCheckCredentials=i,this._databaseId=r,this._app=l,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new qv({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ae(J.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new ae(J.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new qv(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(r){if(!r)return new Ax;switch(r.type){case"firstParty":return new Rx(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new ae(J.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(i){const r=zv.get(i);r&&(oe("ComponentProvider","Removing Datastore"),zv.delete(i),r.terminate())})(this),Promise.resolve()}}function vC(s,e,i,r={}){s=gn(s,Uh);const l=ho(e),u=s._getSettings(),f={...u,emulatorOptions:s._getEmulatorOptions()},p=`${e}:${i}`;l&&(aE(`https://${p}`),oE("Firestore",!0)),u.host!==f1&&u.host!==p&&ro("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const y={...u,host:p,ssl:l,emulatorOptions:r};if(!Jr(y,f)&&(s._setSettings(y),r.mockUserToken)){let g,T;if(typeof r.mockUserToken=="string")g=r.mockUserToken,T=Wt.MOCK_USER;else{g=NA(r.mockUserToken,s._app?.options.projectId);const A=r.mockUserToken.sub||r.mockUserToken.user_id;if(!A)throw new ae(J.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");T=new Wt(A)}s._authCredentials=new Sx(new nT(g,T))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ia{constructor(e,i,r){this.converter=i,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new ia(this.firestore,e,this._query)}}class mt{constructor(e,i,r){this.converter=i,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new rr(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new mt(this.firestore,e,this._key)}toJSON(){return{type:mt._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,i,r){if(Wl(i,mt._jsonSchema))return new mt(e,r||null,new pe(tt.fromString(i.referencePath)))}}mt._jsonSchemaVersion="firestore/documentReference/1.0",mt._jsonSchema={type:Ot("string",mt._jsonSchemaVersion),referencePath:Ot("string")};class rr extends ia{constructor(e,i,r){super(e,i,Nh(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new mt(this.firestore,null,new pe(e))}withConverter(e){return new rr(this.firestore,e,this._path)}}function qn(s,e,...i){if(s=Pt(s),iT("collection","path",e),s instanceof Uh){const r=tt.fromString(e,...i);return tv(r),new rr(s,null,r)}{if(!(s instanceof mt||s instanceof rr))throw new ae(J.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=s._path.child(tt.fromString(e,...i));return tv(r),new rr(s.firestore,null,r)}}function si(s,e,...i){if(s=Pt(s),arguments.length===1&&(e=np.newId()),iT("doc","path",e),s instanceof Uh){const r=tt.fromString(e,...i);return ev(r),new mt(s,null,new pe(r))}{if(!(s instanceof mt||s instanceof rr))throw new ae(J.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=s._path.child(tt.fromString(e,...i));return ev(r),new mt(s.firestore,s instanceof rr?s.converter:null,new pe(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hv="AsyncQueue";class Fv{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new KT(this,"async_queue_retry"),this._c=()=>{const r=um();r&&oe(Hv,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;const i=um();i&&typeof i.addEventListener=="function"&&i.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const i=um();i&&typeof i.removeEventListener=="function"&&i.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const i=new as;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(i.resolve,i.reject),i.promise))).then((()=>i.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!_o(e))throw e;oe(Hv,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const i=this.ac.then((()=>(this.rc=!0,e().catch((r=>{throw this.nc=r,this.rc=!1,us("INTERNAL UNHANDLED ERROR: ",Gv(r)),r})).then((r=>(this.rc=!1,r))))));return this.ac=i,i}enqueueAfterDelay(e,i,r){this.uc(),this.oc.indexOf(e)>-1&&(i=0);const l=Tp.createAndSchedule(this,e,i,r,(u=>this.hc(u)));return this.tc.push(l),l}uc(){this.nc&&ve(47125,{Pc:Gv(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const i of this.tc)if(i.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((i,r)=>i.targetTimeMs-r.targetTimeMs));for(const i of this.tc)if(i.skipDelay(),e!=="all"&&i.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){const i=this.tc.indexOf(e);this.tc.splice(i,1)}}function Gv(s){let e=s.message||"";return s.stack&&(e=s.stack.includes(s.message)?s.stack:s.message+`
`+s.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qv(s){return(function(i,r){if(typeof i!="object"||i===null)return!1;const l=i;for(const u of r)if(u in l&&typeof l[u]=="function")return!0;return!1})(s,["next","error","complete"])}class hs extends Uh{constructor(e,i,r,l){super(e,i,r,l),this.type="firestore",this._queue=new Fv,this._persistenceKey=l?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Fv(e),this._firestoreClient=void 0,await e}}}function EC(s,e){const i=typeof s=="object"?s:hE(),r=typeof s=="string"?s:uh,l=Qm(i,"firestore").getImmediate({identifier:r});if(!l._initialized){const u=IA("firestore");u&&vC(l,...u)}return l}function zh(s){if(s._terminated)throw new ae(J.FAILED_PRECONDITION,"The client has already been terminated.");return s._firestoreClient||TC(s),s._firestoreClient}function TC(s){const e=s._freezeSettings(),i=(function(l,u,f,p){return new Fx(l,u,f,p.host,p.ssl,p.experimentalForceLongPolling,p.experimentalAutoDetectLongPolling,h1(p.experimentalLongPollingOptions),p.useFetchStreams,p.isUsingEmulator)})(s._databaseId,s._app?.options.appId||"",s._persistenceKey,e);s._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(s._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),s._firestoreClient=new mC(s._authCredentials,s._appCheckCredentials,s._queue,i,s._componentsProvider&&(function(l){const u=l?._online.build();return{_offline:l?._offline.build(u),_online:u}})(s._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zn{constructor(e){this._byteString=e}static fromBase64String(e){try{return new zn($t.fromBase64String(e))}catch(i){throw new ae(J.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+i)}}static fromUint8Array(e){return new zn($t.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:zn._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Wl(e,zn._jsonSchema))return zn.fromBase64String(e.bytes)}}zn._jsonSchemaVersion="firestore/bytes/1.0",zn._jsonSchema={type:Ot("string",zn._jsonSchemaVersion),bytes:Ot("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bh{constructor(...e){for(let i=0;i<e.length;++i)if(e[i].length===0)throw new ae(J.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Xt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qh{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vi{constructor(e,i){if(!isFinite(e)||e<-90||e>90)throw new ae(J.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(i)||i<-180||i>180)throw new ae(J.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+i);this._lat=e,this._long=i}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return ke(this._lat,e._lat)||ke(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Vi._jsonSchemaVersion}}static fromJSON(e){if(Wl(e,Vi._jsonSchema))return new Vi(e.latitude,e.longitude)}}Vi._jsonSchemaVersion="firestore/geoPoint/1.0",Vi._jsonSchema={type:Ot("string",Vi._jsonSchemaVersion),latitude:Ot("number"),longitude:Ot("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ki{constructor(e){this._values=(e||[]).map((i=>i))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(r,l){if(r.length!==l.length)return!1;for(let u=0;u<r.length;++u)if(r[u]!==l[u])return!1;return!0})(this._values,e._values)}toJSON(){return{type:ki._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Wl(e,ki._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((i=>typeof i=="number")))return new ki(e.vectorValues);throw new ae(J.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}ki._jsonSchemaVersion="firestore/vectorValue/1.0",ki._jsonSchema={type:Ot("string",ki._jsonSchemaVersion),vectorValues:Ot("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bC=/^__.*__$/;class AC{constructor(e,i,r){this.data=e,this.fieldMask=i,this.fieldTransforms=r}toMutation(e,i){return this.fieldMask!==null?new pr(e,this.data,this.fieldMask,i,this.fieldTransforms):new tu(e,this.data,i,this.fieldTransforms)}}class d1{constructor(e,i,r){this.data=e,this.fieldMask=i,this.fieldTransforms=r}toMutation(e,i){return new pr(e,this.data,this.fieldMask,i,this.fieldTransforms)}}function m1(s){switch(s){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ve(40011,{Ac:s})}}class Np{constructor(e,i,r,l,u,f){this.settings=e,this.databaseId=i,this.serializer=r,this.ignoreUndefinedProperties=l,u===void 0&&this.Rc(),this.fieldTransforms=u||[],this.fieldMask=f||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new Np({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){const i=this.path?.child(e),r=this.Vc({path:i,fc:!1});return r.gc(e),r}yc(e){const i=this.path?.child(e),r=this.Vc({path:i,fc:!1});return r.Rc(),r}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return vh(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find((i=>e.isPrefixOf(i)))!==void 0||this.fieldTransforms.find((i=>e.isPrefixOf(i.field)))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(m1(this.Ac)&&bC.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class SC{constructor(e,i,r){this.databaseId=e,this.ignoreUndefinedProperties=i,this.serializer=r||jh(e)}Cc(e,i,r,l=!1){return new Np({Ac:e,methodName:i,Dc:r,path:Xt.emptyPath(),fc:!1,bc:l},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Hh(s){const e=s._freezeSettings(),i=jh(s._databaseId);return new SC(s._databaseId,!!e.ignoreUndefinedProperties,i)}function p1(s,e,i,r,l,u={}){const f=s.Cc(u.merge||u.mergeFields?2:0,e,i,l);Op("Data must be an object, but it was:",f,r);const p=g1(r,f);let y,g;if(u.merge)y=new xn(f.fieldMask),g=f.fieldTransforms;else if(u.mergeFields){const T=[];for(const A of u.mergeFields){const x=Lm(e,A,i);if(!f.contains(x))throw new ae(J.INVALID_ARGUMENT,`Field '${x}' is specified in your field mask but missing from your input data.`);_1(T,x)||T.push(x)}y=new xn(T),g=f.fieldTransforms.filter((A=>y.covers(A.field)))}else y=null,g=f.fieldTransforms;return new AC(new pn(p),y,g)}class Fh extends qh{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Fh}}class Dp extends qh{_toFieldTransform(e){return new gR(e.path,new Gl)}isEqual(e){return e instanceof Dp}}function wC(s,e,i,r){const l=s.Cc(1,e,i);Op("Data must be an object, but it was:",l,r);const u=[],f=pn.empty();mr(r,((y,g)=>{const T=Mp(e,y,i);g=Pt(g);const A=l.yc(T);if(g instanceof Fh)u.push(T);else{const x=ru(g,A);x!=null&&(u.push(T),f.set(T,x))}}));const p=new xn(u);return new d1(f,p,l.fieldTransforms)}function xC(s,e,i,r,l,u){const f=s.Cc(1,e,i),p=[Lm(e,r,i)],y=[l];if(u.length%2!=0)throw new ae(J.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let x=0;x<u.length;x+=2)p.push(Lm(e,u[x])),y.push(u[x+1]);const g=[],T=pn.empty();for(let x=p.length-1;x>=0;--x)if(!_1(g,p[x])){const j=p[x];let U=y[x];U=Pt(U);const Q=f.yc(j);if(U instanceof Fh)g.push(j);else{const G=ru(U,Q);G!=null&&(g.push(j),T.set(j,G))}}const A=new xn(g);return new d1(T,A,f.fieldTransforms)}function RC(s,e,i,r=!1){return ru(i,s.Cc(r?4:3,e))}function ru(s,e){if(y1(s=Pt(s)))return Op("Unsupported field value:",e,s),g1(s,e);if(s instanceof qh)return(function(r,l){if(!m1(l.Ac))throw l.Sc(`${r._methodName}() can only be used with update() and set()`);if(!l.path)throw l.Sc(`${r._methodName}() is not currently supported inside arrays`);const u=r._toFieldTransform(l);u&&l.fieldTransforms.push(u)})(s,e),null;if(s===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),s instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(r,l){const u=[];let f=0;for(const p of r){let y=ru(p,l.wc(f));y==null&&(y={nullValue:"NULL_VALUE"}),u.push(y),f++}return{arrayValue:{values:u}}})(s,e)}return(function(r,l){if((r=Pt(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return dR(l.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const u=st.fromDate(r);return{timestampValue:mh(l.serializer,u)}}if(r instanceof st){const u=new st(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:mh(l.serializer,u)}}if(r instanceof Vi)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof zn)return{bytesValue:PT(l.serializer,r._byteString)};if(r instanceof mt){const u=l.databaseId,f=r.firestore._databaseId;if(!f.isEqual(u))throw l.Sc(`Document reference is for database ${f.projectId}/${f.database} but should be for database ${u.projectId}/${u.database}`);return{referenceValue:fp(r.firestore._databaseId||l.databaseId,r._key.path)}}if(r instanceof ki)return(function(f,p){return{mapValue:{fields:{[fT]:{stringValue:dT},[ch]:{arrayValue:{values:f.toArray().map((g=>{if(typeof g!="number")throw p.Sc("VectorValues must only contain numeric values.");return lp(p.serializer,g)}))}}}}}})(r,l);throw l.Sc(`Unsupported field value: ${xh(r)}`)})(s,e)}function g1(s,e){const i={};return aT(s)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):mr(s,((r,l)=>{const u=ru(l,e.mc(r));u!=null&&(i[r]=u)})),{mapValue:{fields:i}}}function y1(s){return!(typeof s!="object"||s===null||s instanceof Array||s instanceof Date||s instanceof st||s instanceof Vi||s instanceof zn||s instanceof mt||s instanceof qh||s instanceof ki)}function Op(s,e,i){if(!y1(i)||!sT(i)){const r=xh(i);throw r==="an object"?e.Sc(s+" a custom object"):e.Sc(s+" "+r)}}function Lm(s,e,i){if((e=Pt(e))instanceof Bh)return e._internalPath;if(typeof e=="string")return Mp(s,e);throw vh("Field path arguments must be of type string or ",s,!1,void 0,i)}const IC=new RegExp("[~\\*/\\[\\]]");function Mp(s,e,i){if(e.search(IC)>=0)throw vh(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,s,!1,void 0,i);try{return new Bh(...e.split("."))._internalPath}catch{throw vh(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,s,!1,void 0,i)}}function vh(s,e,i,r,l){const u=r&&!r.isEmpty(),f=l!==void 0;let p=`Function ${e}() called with invalid data`;i&&(p+=" (via `toFirestore()`)"),p+=". ";let y="";return(u||f)&&(y+=" (found",u&&(y+=` in field ${r}`),f&&(y+=` in document ${l}`),y+=")"),new ae(J.INVALID_ARGUMENT,p+s+y)}function _1(s,e){return s.some((i=>i.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v1{constructor(e,i,r,l,u){this._firestore=e,this._userDataWriter=i,this._key=r,this._document=l,this._converter=u}get id(){return this._key.path.lastSegment()}get ref(){return new mt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new CC(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const i=this._document.data.field(E1("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i)}}}class CC extends v1{data(){return super.data()}}function E1(s,e){return typeof e=="string"?Mp(s,e):e instanceof Bh?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function T1(s){if(s.limitType==="L"&&s.explicitOrderBy.length===0)throw new ae(J.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Vp{}class NC extends Vp{}function au(s,e,...i){let r=[];e instanceof Vp&&r.push(e),r=r.concat(i),(function(u){const f=u.filter((y=>y instanceof jp)).length,p=u.filter((y=>y instanceof kp)).length;if(f>1||f>0&&p>0)throw new ae(J.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(r);for(const l of r)s=l._apply(s);return s}class kp extends NC{constructor(e,i,r){super(),this._field=e,this._op=i,this._value=r,this.type="where"}static _create(e,i,r){return new kp(e,i,r)}_apply(e){const i=this._parse(e);return b1(e._query,i),new ia(e.firestore,e.converter,Rm(e._query,i))}_parse(e){const i=Hh(e.firestore);return(function(u,f,p,y,g,T,A){let x;if(g.isKeyField()){if(T==="array-contains"||T==="array-contains-any")throw new ae(J.INVALID_ARGUMENT,`Invalid Query. You can't perform '${T}' queries on documentId().`);if(T==="in"||T==="not-in"){Kv(A,T);const U=[];for(const Q of A)U.push(Yv(y,u,Q));x={arrayValue:{values:U}}}else x=Yv(y,u,A)}else T!=="in"&&T!=="not-in"&&T!=="array-contains-any"||Kv(A,T),x=RC(p,f,A,T==="in"||T==="not-in");return Dt.create(g,T,x)})(e._query,"where",i,e.firestore._databaseId,this._field,this._op,this._value)}}class jp extends Vp{constructor(e,i){super(),this.type=e,this._queryConstraints=i}static _create(e,i){return new jp(e,i)}_parse(e){const i=this._queryConstraints.map((r=>r._parse(e))).filter((r=>r.getFilters().length>0));return i.length===1?i[0]:ai.create(i,this._getOperator())}_apply(e){const i=this._parse(e);return i.getFilters().length===0?e:((function(l,u){let f=l;const p=u.getFlattenedFilters();for(const y of p)b1(f,y),f=Rm(f,y)})(e._query,i),new ia(e.firestore,e.converter,Rm(e._query,i)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}function Yv(s,e,i){if(typeof(i=Pt(i))=="string"){if(i==="")throw new ae(J.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!TT(e)&&i.indexOf("/")!==-1)throw new ae(J.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${i}' contains a '/' character.`);const r=e.path.child(tt.fromString(i));if(!pe.isDocumentKey(r))throw new ae(J.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return uv(s,new pe(r))}if(i instanceof mt)return uv(s,i._key);throw new ae(J.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${xh(i)}.`)}function Kv(s,e){if(!Array.isArray(s)||s.length===0)throw new ae(J.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function b1(s,e){const i=(function(l,u){for(const f of l)for(const p of f.getFlattenedFilters())if(u.indexOf(p.op)>=0)return p.op;return null})(s.filters,(function(l){switch(l){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(i!==null)throw i===e.op?new ae(J.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new ae(J.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${i.toString()}' filters.`)}class DC{convertValue(e,i="none"){switch(cr(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Et(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,i);case 5:return e.stringValue;case 6:return this.convertBytes(ur(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,i);case 11:return this.convertObject(e.mapValue,i);case 10:return this.convertVectorValue(e.mapValue);default:throw ve(62114,{value:e})}}convertObject(e,i){return this.convertObjectMap(e.fields,i)}convertObjectMap(e,i="none"){const r={};return mr(e,((l,u)=>{r[l]=this.convertValue(u,i)})),r}convertVectorValue(e){const i=e.fields?.[ch].arrayValue?.values?.map((r=>Et(r.doubleValue)));return new ki(i)}convertGeoPoint(e){return new Vi(Et(e.latitude),Et(e.longitude))}convertArray(e,i){return(e.values||[]).map((r=>this.convertValue(r,i)))}convertServerTimestamp(e,i){switch(i){case"previous":const r=Ch(e);return r==null?null:this.convertValue(r,i);case"estimate":return this.convertTimestamp(ql(e));default:return null}}convertTimestamp(e){const i=lr(e);return new st(i.seconds,i.nanos)}convertDocumentKey(e,i){const r=tt.fromString(e);Ge(HT(r),9688,{name:e});const l=new Hl(r.get(1),r.get(3)),u=new pe(r.popFirst(5));return l.isEqual(i)||us(`Document ${u} contains a document reference within a different database (${l.projectId}/${l.database}) which is not supported. It will be treated as a reference in the current database (${i.projectId}/${i.database}) instead.`),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function A1(s,e,i){let r;return r=s?s.toFirestore(e):e,r}class Dl{constructor(e,i){this.hasPendingWrites=e,this.fromCache=i}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Xr extends v1{constructor(e,i,r,l,u,f){super(e,i,r,l,f),this._firestore=e,this._firestoreImpl=e,this.metadata=u}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const i=new Wc(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(i,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,i={}){if(this._document){const r=this._document.data.field(E1("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,i.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new ae(J.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,i={};return i.type=Xr._jsonSchemaVersion,i.bundle="",i.bundleSource="DocumentSnapshot",i.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?i:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),i.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),i)}}Xr._jsonSchemaVersion="firestore/documentSnapshot/1.0",Xr._jsonSchema={type:Ot("string",Xr._jsonSchemaVersion),bundleSource:Ot("string","DocumentSnapshot"),bundleName:Ot("string"),bundle:Ot("string")};class Wc extends Xr{data(e={}){return super.data(e)}}class $r{constructor(e,i,r,l){this._firestore=e,this._userDataWriter=i,this._snapshot=l,this.metadata=new Dl(l.hasPendingWrites,l.fromCache),this.query=r}get docs(){const e=[];return this.forEach((i=>e.push(i))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,i){this._snapshot.docs.forEach((r=>{e.call(i,new Wc(this._firestore,this._userDataWriter,r.key,r,new Dl(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const i=!!e.includeMetadataChanges;if(i&&this._snapshot.excludesMetadataChanges)throw new ae(J.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===i||(this._cachedChanges=(function(l,u){if(l._snapshot.oldDocs.isEmpty()){let f=0;return l._snapshot.docChanges.map((p=>{const y=new Wc(l._firestore,l._userDataWriter,p.doc.key,p.doc,new Dl(l._snapshot.mutatedKeys.has(p.doc.key),l._snapshot.fromCache),l.query.converter);return p.doc,{type:"added",doc:y,oldIndex:-1,newIndex:f++}}))}{let f=l._snapshot.oldDocs;return l._snapshot.docChanges.filter((p=>u||p.type!==3)).map((p=>{const y=new Wc(l._firestore,l._userDataWriter,p.doc.key,p.doc,new Dl(l._snapshot.mutatedKeys.has(p.doc.key),l._snapshot.fromCache),l.query.converter);let g=-1,T=-1;return p.type!==0&&(g=f.indexOf(p.doc.key),f=f.delete(p.doc.key)),p.type!==1&&(f=f.add(p.doc),T=f.indexOf(p.doc.key)),{type:OC(p.type),doc:y,oldIndex:g,newIndex:T}}))}})(this,i),this._cachedChangesIncludeMetadataChanges=i),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new ae(J.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=$r._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=np.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const i=[],r=[],l=[];return this.docs.forEach((u=>{u._document!==null&&(i.push(u._document),r.push(this._userDataWriter.convertObjectMap(u._document.data.value.mapValue.fields,"previous")),l.push(u.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function OC(s){switch(s){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ve(61501,{type:s})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Eh(s){s=gn(s,mt);const e=gn(s.firestore,hs);return yC(zh(e),s._key).then((i=>w1(e,s,i)))}$r._jsonSchemaVersion="firestore/querySnapshot/1.0",$r._jsonSchema={type:Ot("string",$r._jsonSchemaVersion),bundleSource:Ot("string","QuerySnapshot"),bundleName:Ot("string"),bundle:Ot("string")};class Pp extends DC{constructor(e){super(),this.firestore=e}convertBytes(e){return new zn(e)}convertReference(e){const i=this.convertDocumentKey(e,this.firestore._databaseId);return new mt(this.firestore,null,i)}}function Lp(s){s=gn(s,ia);const e=gn(s.firestore,hs),i=zh(e),r=new Pp(e);return T1(s._query),_C(i,s._query).then((l=>new $r(e,r,s,l)))}function MC(s,e,i){s=gn(s,mt);const r=gn(s.firestore,hs),l=A1(s.converter,e);return Qh(r,[p1(Hh(r),"setDoc",s._key,l,s.converter!==null,i).toMutation(s._key,Bn.none())])}function Up(s,e,i,...r){s=gn(s,mt);const l=gn(s.firestore,hs),u=Hh(l);let f;return f=typeof(e=Pt(e))=="string"||e instanceof Bh?xC(u,"updateDoc",s._key,e,i,r):wC(u,"updateDoc",s._key,e),Qh(l,[f.toMutation(s._key,Bn.exists(!0))])}function S1(s){return Qh(gn(s.firestore,hs),[new up(s._key,Bn.none())])}function Gh(s,e){const i=gn(s.firestore,hs),r=si(s),l=A1(s.converter,e);return Qh(i,[p1(Hh(s.firestore),"addDoc",r._key,l,s.converter!==null,{}).toMutation(r._key,Bn.exists(!1))]).then((()=>r))}function ou(s,...e){s=Pt(s);let i={includeMetadataChanges:!1,source:"default"},r=0;typeof e[r]!="object"||Qv(e[r])||(i=e[r++]);const l={includeMetadataChanges:i.includeMetadataChanges,source:i.source};if(Qv(e[r])){const y=e[r];e[r]=y.next?.bind(y),e[r+1]=y.error?.bind(y),e[r+2]=y.complete?.bind(y)}let u,f,p;if(s instanceof mt)f=gn(s.firestore,hs),p=Nh(s._key.path),u={next:y=>{e[r]&&e[r](w1(f,s,y))},error:e[r+1],complete:e[r+2]};else{const y=gn(s,ia);f=gn(y.firestore,hs),p=y._query;const g=new Pp(f);u={next:T=>{e[r]&&e[r](new $r(f,g,y,T))},error:e[r+1],complete:e[r+2]},T1(s._query)}return(function(g,T,A,x){const j=new Cp(x),U=new xp(T,j,A);return g.asyncQueue.enqueueAndForget((async()=>Ap(await _h(g),U))),()=>{j.Nu(),g.asyncQueue.enqueueAndForget((async()=>Sp(await _h(g),U)))}})(zh(f),p,l,u)}function Qh(s,e){return(function(r,l){const u=new as;return r.asyncQueue.enqueueAndForget((async()=>rC(await gC(r),l,u))),u.promise})(zh(s),e)}function w1(s,e,i){const r=i.docs.get(e._key),l=new Pp(s);return new Xr(s,l,e._key,r,new Dl(i.hasPendingWrites,i.fromCache),e.converter)}function lu(){return new Dp("serverTimestamp")}(function(e,i=!0){(function(l){go=l})(fo),so(new Zr("firestore",((r,{instanceIdentifier:l,options:u})=>{const f=r.getProvider("app").getImmediate(),p=new hs(new wx(r.getProvider("auth-internal")),new Ix(f,r.getProvider("app-check-internal")),(function(g,T){if(!Object.prototype.hasOwnProperty.apply(g.options,["projectId"]))throw new ae(J.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Hl(g.options.projectId,T)})(f,l),f);return u={useFetchStreams:i,...u},p._setSettings(u),p}),"PUBLIC").setMultipleInstances(!0)),ir($0,J0,e),ir($0,J0,"esm2020")})();/**
 * @license lucide-react v0.548.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VC=s=>s.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),kC=s=>s.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,i,r)=>r?r.toUpperCase():i.toLowerCase()),Xv=s=>{const e=kC(s);return e.charAt(0).toUpperCase()+e.slice(1)},x1=(...s)=>s.filter((e,i,r)=>!!e&&e.trim()!==""&&r.indexOf(e)===i).join(" ").trim(),jC=s=>{for(const e in s)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};/**
 * @license lucide-react v0.548.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var PC={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.548.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LC=ie.forwardRef(({color:s="currentColor",size:e=24,strokeWidth:i=2,absoluteStrokeWidth:r,className:l="",children:u,iconNode:f,...p},y)=>ie.createElement("svg",{ref:y,...PC,width:e,height:e,stroke:s,strokeWidth:r?Number(i)*24/Number(e):i,className:x1("lucide",l),...!u&&!jC(p)&&{"aria-hidden":"true"},...p},[...f.map(([g,T])=>ie.createElement(g,T)),...Array.isArray(u)?u:[u]]));/**
 * @license lucide-react v0.548.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pt=(s,e)=>{const i=ie.forwardRef(({className:r,...l},u)=>ie.createElement(LC,{ref:u,iconNode:e,className:x1(`lucide-${VC(Xv(s))}`,`lucide-${s}`,r),...l}));return i.displayName=Xv(s),i};/**
 * @license lucide-react v0.548.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UC=[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]],$v=pt("award",UC);/**
 * @license lucide-react v0.548.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zC=[["path",{d:"M12 8V4H8",key:"hb8ula"}],["rect",{width:"16",height:"12",x:"4",y:"8",rx:"2",key:"enze0r"}],["path",{d:"M2 14h2",key:"vft8re"}],["path",{d:"M20 14h2",key:"4cs60a"}],["path",{d:"M15 13v2",key:"1xurst"}],["path",{d:"M9 13v2",key:"rq6x2g"}]],Th=pt("bot",zC);/**
 * @license lucide-react v0.548.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BC=[["path",{d:"M12 5a3 3 0 1 0-5.997.125 4 4 0 0 0-2.526 5.77 4 4 0 0 0 .556 6.588A4 4 0 1 0 12 18Z",key:"l5xja"}],["path",{d:"M9 13a4.5 4.5 0 0 0 3-4",key:"10igwf"}],["path",{d:"M6.003 5.125A3 3 0 0 0 6.401 6.5",key:"105sqy"}],["path",{d:"M3.477 10.896a4 4 0 0 1 .585-.396",key:"ql3yin"}],["path",{d:"M6 18a4 4 0 0 1-1.967-.516",key:"2e4loj"}],["path",{d:"M12 13h4",key:"1ku699"}],["path",{d:"M12 18h6a2 2 0 0 1 2 2v1",key:"105ag5"}],["path",{d:"M12 8h8",key:"1lhi5i"}],["path",{d:"M16 8V5a2 2 0 0 1 2-2",key:"u6izg6"}],["circle",{cx:"16",cy:"13",r:".5",key:"ry7gng"}],["circle",{cx:"18",cy:"3",r:".5",key:"1aiba7"}],["circle",{cx:"20",cy:"21",r:".5",key:"yhc1fs"}],["circle",{cx:"20",cy:"8",r:".5",key:"1e43v0"}]],Um=pt("brain-circuit",BC);/**
 * @license lucide-react v0.548.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qC=[["path",{d:"M16 20V4a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"jecpp"}],["rect",{width:"20",height:"14",x:"2",y:"6",rx:"2",key:"i6l2r4"}]],Jv=pt("briefcase",qC);/**
 * @license lucide-react v0.548.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HC=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],zp=pt("file-text",HC);/**
 * @license lucide-react v0.548.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FC=[["polyline",{points:"22 12 16 12 14 15 10 15 8 12 2 12",key:"o97t9d"}],["path",{d:"M5.45 5.11 2 12v6a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-6l-3.45-6.89A2 2 0 0 0 16.76 4H7.24a2 2 0 0 0-1.79 1.11z",key:"oot6mr"}]],Zv=pt("inbox",FC);/**
 * @license lucide-react v0.548.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GC=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],Hn=pt("loader-circle",GC);/**
 * @license lucide-react v0.548.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QC=[["path",{d:"m10 17 5-5-5-5",key:"1bsop3"}],["path",{d:"M15 12H3",key:"6jk70r"}],["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}]],YC=pt("log-in",QC);/**
 * @license lucide-react v0.548.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KC=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],XC=pt("log-out",KC);/**
 * @license lucide-react v0.548.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $C=[["path",{d:"M4 5h16",key:"1tepv9"}],["path",{d:"M4 12h16",key:"1lakjw"}],["path",{d:"M4 19h16",key:"1djgab"}]],JC=pt("menu",$C);/**
 * @license lucide-react v0.548.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZC=[["path",{d:"M2.992 16.342a2 2 0 0 1 .094 1.167l-1.065 3.29a1 1 0 0 0 1.236 1.168l3.413-.998a2 2 0 0 1 1.099.092 10 10 0 1 0-4.777-4.719",key:"1sd12s"}]],WC=pt("message-circle",ZC);/**
 * @license lucide-react v0.548.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eN=[["path",{d:"M22 17a2 2 0 0 1-2 2H6.828a2 2 0 0 0-1.414.586l-2.202 2.202A.71.71 0 0 1 2 21.286V5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2z",key:"18887p"}]],tN=pt("message-square",eN);/**
 * @license lucide-react v0.548.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nN=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],Bp=pt("plus",nN);/**
 * @license lucide-react v0.548.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iN=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],sN=pt("save",iN);/**
 * @license lucide-react v0.548.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rN=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],zm=pt("search",rN);/**
 * @license lucide-react v0.548.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aN=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]],R1=pt("send",aN);/**
 * @license lucide-react v0.548.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oN=[["path",{d:"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z",key:"1s2grr"}],["path",{d:"M20 2v4",key:"1rf3ol"}],["path",{d:"M22 4h-4",key:"gwowj6"}],["circle",{cx:"4",cy:"20",r:"2",key:"6kqj1y"}]],lN=pt("sparkles",oN);/**
 * @license lucide-react v0.548.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uN=[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]],cN=pt("square-pen",uN);/**
 * @license lucide-react v0.548.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hN=[["path",{d:"M7 10v12",key:"1qc93n"}],["path",{d:"M15 5.88 14 10h5.83a2 2 0 0 1 1.92 2.56l-2.33 8A2 2 0 0 1 17.5 22H4a2 2 0 0 1-2-2v-8a2 2 0 0 1 2-2h2.76a2 2 0 0 0 1.79-1.11L12 2a3.13 3.13 0 0 1 3 3.88Z",key:"emmmcr"}]],fN=pt("thumbs-up",hN);/**
 * @license lucide-react v0.548.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dN=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],I1=pt("trash-2",dN);/**
 * @license lucide-react v0.548.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mN=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],Li=pt("user",mN);/**
 * @license lucide-react v0.548.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pN=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],Yh=pt("x",pN),hm="@iilm.edu",C1=["BBA","BBA (Hons) Co-branded","BBA - International Business","BBA - Artificial Intelligence & Data Science","BBA - Entrepreneurship","BBA - Financial Management","B.Tech - CSE","B.Tech - AI & DS","BA - Journalism, Media & Communication","BA (Hons) - Psychology","BA (Hons) - Economics","BA - Liberal Arts","BA - International Relations","B.Com (Hons)","BCA","B.Des - Fashion Design","B.Des - Interior Design","LLB","BBA-LLB","BA-LLB","PGDM","MBA"],N1=["Semester 1","Semester 2","Semester 3","Semester 4","Semester 5","Semester 6","Semester 7","Semester 8"];let Bm;try{Bm=""}catch(s){console.error("Failed to read Gemini API key",s),Bm=""}const gN="gemini-2.5-flash-preview-09-2025",yN=`https://generativelanguage.googleapis.com/v1beta/models/${gN}:generateContent?key=${Bm}`;let qm;try{qm=JSON.parse(typeof __firebase_config<"u"?__firebase_config:"{}")}catch(s){console.error("Failed to parse Firebase config from global variable.",s),qm={}}const ft=typeof __app_id<"u"?__app_id:"default-app-id",D1=cE(qm),Wa=Ex(D1),dt=EC(D1);try{bx("Debug")}catch(s){console.error("Failed to set Firestore log level:",s)}const qp=async(s,e=5)=>{let i=0,r=1e3;for(;i<e;)try{const l=await fetch(yN,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)});if(l.ok){const u=await l.json(),f=u.candidates?.[0]?.content?.parts?.[0]?.text;if(f)return f;throw console.error("Gemini API Error: No text in response",u),new Error("Invalid response from API. Check console for details.")}if(l.status===429||l.status>=500)console.warn(`Gemini API Error: Status ${l.status}. Retrying in ${r}ms...`),await new Promise(u=>setTimeout(u,r)),r*=2,i++;else{const u=await l.json();throw console.error("Gemini API Error:",u),new Error(`API request failed with status ${l.status}. Check console.`)}}catch(l){if(console.error("Error calling Gemini API:",l),i>=e-1)throw l;await new Promise(u=>setTimeout(u,r)),r*=2,i++}throw new Error("Gemini API call failed after all retries.")},ps=({size:s=24})=>E.jsx("div",{className:"flex justify-center items-center p-4",children:E.jsx(Hn,{size:s,className:"animate-spin text-emerald-600"})}),_N=({title:s,message:e,isOpen:i,onClose:r})=>i?E.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-75 backdrop-blur-sm z-50 flex justify-center items-center p-4",children:E.jsxs("div",{className:"bg-white rounded-xl shadow-2xl w-full max-w-md p-6 relative transition-all transform scale-100 opacity-100",children:[E.jsx("button",{onClick:r,className:"absolute top-3 right-3 text-gray-400 hover:text-gray-600",children:E.jsx(Yh,{size:20})}),E.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:s}),E.jsx("p",{className:"text-sm text-gray-700 whitespace-pre-wrap",children:e}),E.jsx("button",{onClick:r,className:"mt-6 w-full bg-emerald-600 text-white py-2 px-4 rounded-md hover:bg-emerald-700 focus:outline-none focus:ring-2 focus:ring-emerald-500 focus:ring-offset-2 transition-colors",children:"Close"})]})}):null,vN=({setPage:s,showModal:e})=>{const[i,r]=ie.useState(""),[l,u]=ie.useState(""),[f,p]=ie.useState(!1),y=async g=>{g.preventDefault(),p(!0);try{await r2(Wa,i,l)}catch(T){console.error("Login Error:",T),e("Login Failed",T.message.replace("Firebase: ",""))}p(!1)};return E.jsx("div",{className:"flex-grow flex items-center justify-center bg-gradient-to-br from-green-50 to-emerald-100 p-4",children:E.jsxs("div",{className:"w-full max-w-md bg-white rounded-xl shadow-2xl p-8 sm:p-10",children:[E.jsxs("div",{className:"flex justify-center items-center mb-6",children:[E.jsx(zp,{className:"h-10 w-10 text-emerald-600"}),E.jsx("span",{className:"ml-2 text-3xl font-bold text-gray-900",children:"CollabNest"})]}),E.jsx("h2",{className:"text-2xl font-bold text-center text-gray-800 mb-6",children:"Welcome Back"}),E.jsxs("form",{onSubmit:y,className:"space-y-6",children:[E.jsxs("div",{children:[E.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700",children:"Email Address"}),E.jsx("input",{id:"email",name:"email",type:"email",autoComplete:"email",required:!0,value:i,onChange:g=>r(g.target.value),className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-emerald-500 focus:border-emerald-500 transition duration-150"})]}),E.jsxs("div",{children:[E.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700",children:"Password"}),E.jsx("input",{id:"password",name:"password",type:"password",autoComplete:"current-password",required:!0,value:l,onChange:g=>u(g.target.value),className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-emerald-500 focus:border-emerald-500 transition duration-150"})]}),E.jsx("button",{type:"submit",disabled:f,className:"w-full flex justify-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-emerald-600 hover:bg-emerald-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-emerald-500 disabled:bg-emerald-300 transition-colors duration-300",children:f?E.jsx(Hn,{className:"animate-spin"}):"Sign In"})]}),E.jsxs("p",{className:"mt-6 text-center text-sm text-gray-600",children:["Don't have an account?"," ",E.jsx("button",{onClick:()=>s({name:"signup"}),className:"font-medium text-emerald-600 hover:text-emerald-500 transition-colors",children:"Sign Up"})]})]})})},EN=({setPage:s,showModal:e})=>{const[i,r]=ie.useState(""),[l,u]=ie.useState(""),[f,p]=ie.useState(""),[y,g]=ie.useState("student"),[T,A]=ie.useState(""),[x,j]=ie.useState(""),[U,Q]=ie.useState(!1),G=async te=>{if(te.preventDefault(),!i.endsWith(hm)){e("Invalid Email",`Sign-up is restricted to ${hm} email addresses.`);return}if(l.length<6){e("Weak Password","Password should be at least 6 characters long.");return}if(y==="student"&&(!T||!x)){e("Missing Information","Please select your course and semester.");return}Q(!0);try{const ee=(await s2(Wa,i,l)).user,ue=si(dt,`artifacts/${ft}/public/data/users`,ee.uid);await MC(ue,{uid:ee.uid,email:ee.email,name:f,role:y,bio:"",skills:[],linkedin:"",github:"",course:y==="student"?T:"",semester:y==="student"?x:"",createdAt:lu()})}catch(fe){console.error("Sign Up Error:",fe),fe.code==="auth/operation-not-allowed"?e("Sign Up Failed","Email/Password sign-up is not enabled in the Firebase project. The administrator must enable it in the Firebase Console (Authentication > Sign-in method)."):e("Sign Up Failed",fe.message.replace("Firebase: ",""))}Q(!1)};return E.jsx("div",{className:"flex-grow flex items-center justify-center bg-gradient-to-br from-green-50 to-emerald-100 p-4",children:E.jsxs("div",{className:"w-full max-w-md bg-white rounded-xl shadow-2xl p-8 sm:p-10",children:[E.jsxs("div",{className:"flex justify-center items-center mb-6",children:[E.jsx(zp,{className:"h-10 w-10 text-emerald-600"}),E.jsx("span",{className:"ml-2 text-3xl font-bold text-gray-900",children:"CollabNest"})]}),E.jsx("h2",{className:"text-2xl font-bold text-center text-gray-800 mb-6",children:"Create Your Account"}),E.jsxs("form",{onSubmit:G,className:"space-y-6",children:[E.jsxs("div",{children:[E.jsx("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-700",children:"Full Name"}),E.jsx("input",{id:"name",name:"name",type:"text",required:!0,value:f,onChange:te=>p(te.target.value),className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-emerald-500 focus:border-emerald-500 transition duration-150"})]}),E.jsxs("div",{children:[E.jsxs("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700",children:["University Email (",hm,")"]}),E.jsx("input",{id:"email",name:"email",type:"email",autoComplete:"email",required:!0,value:i,onChange:te=>r(te.target.value),className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-emerald-500 focus:border-emerald-500 transition duration-150"})]}),E.jsxs("div",{children:[E.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700",children:"Password (min. 6 characters)"}),E.jsx("input",{id:"password",name:"password",type:"password",required:!0,value:l,onChange:te=>u(te.target.value),className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-emerald-500 focus:border-emerald-500 transition duration-150"})]}),E.jsxs("div",{children:[E.jsx("label",{htmlFor:"role",className:"block text-sm font-medium text-gray-700",children:"I am a..."}),E.jsxs("select",{id:"role",name:"role",value:y,onChange:te=>g(te.target.value),className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-emerald-500 focus:border-emerald-500 transition duration-150",children:[E.jsx("option",{value:"student",children:"Student"}),E.jsx("option",{value:"teacher",children:"Teacher"})]})]}),y==="student"&&E.jsxs(E.Fragment,{children:[E.jsxs("div",{children:[E.jsx("label",{htmlFor:"course",className:"block text-sm font-medium text-gray-700",children:"Course"}),E.jsxs("select",{id:"course",name:"course",value:T,onChange:te=>A(te.target.value),required:!0,className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-emerald-500 focus:border-emerald-500 transition duration-150",children:[E.jsx("option",{value:"",disabled:!0,children:"Select your course"}),C1.map(te=>E.jsx("option",{value:te,children:te},te))]})]}),E.jsxs("div",{children:[E.jsx("label",{htmlFor:"semester",className:"block text-sm font-medium text-gray-700",children:"Semester"}),E.jsxs("select",{id:"semester",name:"semester",value:x,onChange:te=>j(te.target.value),required:!0,className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-emerald-500 focus:border-emerald-500 transition duration-150",children:[E.jsx("option",{value:"",disabled:!0,children:"Select your semester"}),N1.map(te=>E.jsx("option",{value:te,children:te},te))]})]})]}),E.jsx("button",{type:"submit",disabled:U,className:"w-full flex justify-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-emerald-600 hover:bg-emerald-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-emerald-500 disabled:bg-emerald-300 transition-colors duration-300",children:U?E.jsx(Hn,{className:"animate-spin"}):"Sign Up"})]}),E.jsxs("p",{className:"mt-6 text-center text-sm text-gray-600",children:["Already have an account?"," ",E.jsx("button",{onClick:()=>s({name:"login"}),className:"font-medium text-emerald-600 hover:text-emerald-500 transition-colors",children:"Sign In"})]})]})})},TN=({user:s,setPage:e,handleLogout:i})=>{const[r,l]=ie.useState(!1),[u,f]=ie.useState(!1);ie.useEffect(()=>{if(s){const g=qn(dt,`artifacts/${ft}/public/data/users`,s.uid,"messages"),T=au(g),A=ou(T,x=>{const j=x.docs.some(U=>!U.data().isRead);f(j)},x=>{console.error("Error checking for new messages:",x)});return()=>A()}},[s]);const p=({pageName:g,icon:T,children:A,hasBadge:x=!1})=>E.jsxs("button",{onClick:()=>{e({name:g,props:{}}),l(!1)},className:"relative flex items-center space-x-2 text-gray-600 hover:text-emerald-600 px-3 py-2 rounded-md text-sm font-medium transition-colors",children:[E.jsx(T,{size:18}),E.jsx("span",{children:A}),x&&E.jsxs("span",{className:"absolute top-1 right-1 flex h-3 w-3",children:[E.jsx("span",{className:"animate-ping absolute inline-flex h-full w-full rounded-full bg-red-400 opacity-75"}),E.jsx("span",{className:"relative inline-flex rounded-full h-3 w-3 bg-red-500"})]})]}),y=({isMobile:g=!1})=>s?E.jsxs("div",{className:`flex items-center ${g?"flex-col space-y-2":"space-x-4"}`,children:[E.jsxs("button",{onClick:()=>{e({name:"profile",props:{profileId:s.uid}}),l(!1)},className:"flex items-center space-x-2 text-gray-600 hover:text-emerald-600 px-3 py-2 rounded-md text-sm font-medium transition-colors",children:[E.jsx(Li,{size:18}),E.jsx("span",{children:"My Profile"})]}),E.jsxs("button",{onClick:i,className:"flex items-center space-x-2 bg-emerald-600 text-white hover:bg-emerald-700 px-3 py-2 rounded-md text-sm font-medium transition-colors",children:[E.jsx(XC,{size:18}),E.jsx("span",{children:"Logout"})]})]}):E.jsxs("div",{className:`flex items-center ${g?"flex-col space-y-2":"space-x-2"}`,children:[E.jsxs("button",{onClick:()=>{e({name:"login"}),l(!1)},className:"flex items-center space-x-2 text-gray-600 hover:text-emerald-600 px-3 py-2 rounded-md text-sm font-medium transition-colors",children:[E.jsx(YC,{size:18}),E.jsx("span",{children:"Login"})]}),E.jsxs("button",{onClick:()=>{e({name:"signup"}),l(!1)},className:"flex items-center space-x-2 bg-emerald-600 text-white hover:bg-emerald-700 px-3 py-2 rounded-md text-sm font-medium transition-colors",children:[E.jsx(Li,{size:18}),E.jsx("span",{children:"Sign Up"})]})]});return E.jsxs("nav",{className:"bg-white/95 backdrop-blur-sm shadow-md sticky top-0 z-40",children:[E.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:E.jsxs("div",{className:"flex justify-between items-center h-16",children:[E.jsxs("div",{className:"flex-shrink-0 flex items-center",children:[E.jsx(zp,{className:"h-8 w-8 text-emerald-600"}),E.jsx("span",{className:"ml-2 text-xl font-bold text-emerald-600",children:"CollabNest"})]}),E.jsx("div",{className:"hidden sm:flex sm:items-center sm:space-x-4",children:s&&E.jsxs(E.Fragment,{children:[E.jsx(p,{pageName:"dashboard",icon:$v,children:"Dashboard"}),E.jsx(p,{pageName:"projects",icon:Jv,children:"Projects"}),E.jsx(p,{pageName:"search",icon:zm,children:"Search"}),E.jsx(p,{pageName:"ai_matcher",icon:Um,children:"AI Matcher"}),E.jsx(p,{pageName:"inbox",icon:Zv,hasBadge:u,children:"Inbox"}),E.jsx(p,{pageName:"ai_assistant",icon:Th,children:"AI Assistant"})]})}),E.jsx("div",{className:"hidden sm:flex sm:items-center",children:E.jsx(y,{})}),E.jsx("div",{className:"sm:hidden flex items-center",children:E.jsx("button",{onClick:()=>l(!r),className:"text-gray-600 hover:text-gray-900 focus:outline-none",children:E.jsx(JC,{size:24})})})]})}),r&&E.jsxs("div",{className:"sm:hidden bg-white shadow-lg absolute top-16 left-0 right-0 z-30 p-4 space-y-2",children:[s&&E.jsxs(E.Fragment,{children:[E.jsx(p,{pageName:"dashboard",icon:$v,children:"Dashboard"}),E.jsx(p,{pageName:"projects",icon:Jv,children:"Projects"}),E.jsx(p,{pageName:"search",icon:zm,children:"Search"}),E.jsx(p,{pageName:"ai_matcher",icon:Um,children:"AI Matcher"}),E.jsx(p,{pageName:"inbox",icon:Zv,hasBadge:u,children:"Inbox"}),E.jsx(p,{pageName:"ai_assistant",icon:Th,children:"AI Assistant"})]}),E.jsx(y,{isMobile:!0})]})]})},bN=({postId:s,userId:e,authorName:i,showModal:r})=>{const[l,u]=ie.useState([]),[f,p]=ie.useState(""),[y,g]=ie.useState(!1),[T,A]=ie.useState(!0),x=U=>{if(!U)return"just now";const Q=Math.floor((new Date-U.toDate())/1e3);let G=Q/31536e3;return G>1?Math.floor(G)+"y":(G=Q/2592e3,G>1?Math.floor(G)+"mo":(G=Q/86400,G>1?Math.floor(G)+"d":(G=Q/3600,G>1?Math.floor(G)+"h":(G=Q/60,G>1?Math.floor(G)+"m":"just now"))))};ie.useEffect(()=>{A(!0);const U=qn(dt,`artifacts/${ft}/public/data/achievements`,s,"comments"),Q=au(U),G=ou(Q,te=>{const fe=[];te.forEach(ee=>{fe.push({id:ee.id,...ee.data()})}),fe.sort((ee,ue)=>{const ce=ee.createdAt?.toDate()||0,Te=ue.createdAt?.toDate()||0;return ce-Te}),u(fe),A(!1)},te=>{console.error("Error fetching comments:",te),r("Error","Could not load comments."),A(!1)});return()=>G()},[s,r]);const j=async U=>{if(U.preventDefault(),f.trim()!==""){g(!0);try{const Q=qn(dt,`artifacts/${ft}/public/data/achievements`,s,"comments");await Gh(Q,{text:f,authorId:e,authorName:i,createdAt:lu()}),p("")}catch(Q){console.error("Error posting comment:",Q),r("Error","Could not post your comment.")}g(!1)}};return E.jsxs("div",{className:"mt-4 pt-4 border-t border-gray-100",children:[E.jsxs("form",{onSubmit:j,className:"flex space-x-2 mb-4",children:[E.jsx("input",{type:"text",value:f,onChange:U=>p(U.target.value),placeholder:"Write a comment...",className:"flex-grow px-3 py-2 border border-gray-300 rounded-md shadow-sm text-sm focus:outline-none focus:ring-1 focus:ring-emerald-500"}),E.jsx("button",{type:"submit",disabled:y,className:"flex-shrink-0 bg-emerald-600 text-white px-3 py-2 rounded-md text-sm hover:bg-emerald-700 disabled:bg-emerald-300 transition-colors",children:y?E.jsx(Hn,{size:18,className:"animate-spin"}):"Post"})]}),E.jsxs("div",{className:"space-y-3",children:[T&&E.jsx(ps,{size:20}),!T&&l.length===0&&E.jsx("p",{className:"text-xs text-gray-500 text-center",children:"No comments yet."}),l.map(U=>E.jsxs("div",{className:"flex items-start space-x-2",children:[E.jsx("div",{className:"flex-shrink-0 bg-gray-100 rounded-full h-8 w-8 flex items-center justify-center",children:E.jsx(Li,{size:16,className:"text-gray-500"})}),E.jsxs("div",{className:"flex-grow bg-gray-50 p-3 rounded-lg",children:[E.jsxs("div",{className:"flex items-center justify-between",children:[E.jsx("span",{className:"text-sm font-semibold text-gray-800",children:U.authorName}),E.jsx("span",{className:"text-xs text-gray-400",children:x(U.createdAt)})]}),E.jsx("p",{className:"text-sm text-gray-700 mt-1",children:U.text})]})]},U.id))]})]})},AN=({showModal:s})=>{const[e,i]=ie.useState([{role:"model",parts:[{text:"Hello! I'm CollabBot. How can I help you with your projects or collaborations today?"}]}]),[r,l]=ie.useState(""),[u,f]=ie.useState(!1),p=fA.useRef(null),y={role:"system",parts:[{text:"You are 'CollabBot,' a helpful AI assistant for the CollabNest college portal. Your goal is to help students connect, find collaborators, and get tips on their projects. Be friendly, encouraging, and concise. Your name is CollabBot. If users need administrative help or support, they can contact collabnest.iilm@gmail.com."}]};ie.useEffect(()=>{p.current?.scrollIntoView({behavior:"smooth"})},[e]);const g=async T=>{if(T.preventDefault(),r.trim()===""||u)return;const A={role:"user",parts:[{text:r}]};i(x=>[...x,A]),l(""),f(!0);try{const x={contents:[...e,A],systemInstruction:y},U={role:"model",parts:[{text:await qp(x)}]};i(Q=>[...Q,U])}catch(x){console.error("Gemini chat error:",x),s("AI Error",`Sorry, I couldn't get a response from the assistant. Please try again.

`+x.message),i(j=>j.slice(0,j.length-1))}f(!1)};return E.jsxs("div",{className:"max-w-4xl mx-auto p-4 sm:p-6 lg:p-8 flex flex-col",style:{height:"calc(100vh - 8rem)"},children:[E.jsx("h2",{className:"text-3xl font-bold text-gray-900 mb-6",children:"AI Assistant"}),E.jsx("div",{className:"flex-grow bg-white p-6 rounded-xl shadow-lg mb-6 overflow-y-auto",children:E.jsxs("div",{className:"space-y-4",children:[e.map((T,A)=>E.jsx("div",{className:`flex ${T.role==="user"?"justify-end":"justify-start"}`,children:E.jsxs("div",{className:`flex items-start space-x-2 max-w-xs lg:max-w-md ${T.role==="user"?"flex-row-reverse space-x-reverse":""}`,children:[E.jsx("div",{className:`flex-shrink-0 h-8 w-8 rounded-full flex items-center justify-center ${T.role==="user"?"bg-emerald-600":"bg-gray-200"}`,children:T.role==="user"?E.jsx(Li,{size:16,className:"text-white"}):E.jsx(Th,{size:16,className:"text-gray-600"})}),E.jsx("div",{className:`px-4 py-2 rounded-lg ${T.role==="user"?"bg-emerald-600 text-white":"bg-gray-100 text-gray-800"}`,children:E.jsx("p",{className:"whitespace-pre-wrap",children:T.parts[0].text})})]})},A)),u&&E.jsx("div",{className:"flex justify-start",children:E.jsxs("div",{className:"flex items-start space-x-2",children:[E.jsx("div",{className:"flex-shrink-0 h-8 w-8 rounded-full flex items-center justify-center bg-gray-200",children:E.jsx(Th,{size:16,className:"text-gray-600"})}),E.jsx("div",{className:"px-4 py-2 rounded-lg bg-gray-100 text-gray-800",children:E.jsx(Hn,{size:16,className:"animate-spin"})})]})}),E.jsx("div",{ref:p})]})}),E.jsxs("form",{onSubmit:g,className:"flex space-x-2",children:[E.jsx("input",{type:"text",value:r,onChange:T=>l(T.target.value),placeholder:"Ask CollabBot anything...",className:"flex-grow px-4 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-emerald-500"}),E.jsx("button",{type:"submit",disabled:u,className:"flex-shrink-0 bg-emerald-600 text-white px-4 py-2 rounded-md hover:bg-emerald-700 flex items-center justify-center transition-colors disabled:bg-emerald-300",children:u?E.jsx(Hn,{size:18,className:"animate-spin"}):E.jsx(R1,{size:18})})]})]})},Wv=({userId:s,user:e,showModal:i})=>{const[r,l]=ie.useState([]),[u,f]=ie.useState(""),[p,y]=ie.useState(!1),[g,T]=ie.useState(!1),[A,x]=ie.useState("..."),[j,U]=ie.useState(null);ie.useEffect(()=>{s&&(async()=>{const ue=si(dt,`artifacts/${ft}/public/data/users`,s),ce=await Eh(ue);ce.exists()&&x(ce.data().name)})()},[s]),ie.useEffect(()=>{y(!0);const ee=qn(dt,`artifacts/${ft}/public/data/achievements`),ue=au(ee),ce=ou(ue,Te=>{const N=[];Te.forEach(I=>{N.push({id:I.id,...I.data()})});const w=N.sort((I,V)=>{const D=I.createdAt?.toDate()||0;return(V.createdAt?.toDate()||0)-D});l(w),y(!1)},Te=>{console.error("Error fetching achievements:",Te),i("Error","Could not load achievements feed."),y(!1)});return()=>ce()},[i]);const Q=async ee=>{if(ee.preventDefault(),u.trim()===""){i("Empty Post","Please write something to post.");return}T(!0);try{const ue=qn(dt,`artifacts/${ft}/public/data/achievements`);await Gh(ue,{content:u,imageUrl:"",authorId:s,authorName:A,authorEmail:e.email,createdAt:lu(),likes:[]}),f("")}catch(ue){console.error("Error posting achievement:",ue),i("Error","Could not post your achievement. Please try again.")}T(!1)},G=async ee=>{try{const ue=si(dt,`artifacts/${ft}/public/data/achievements`,ee);await S1(ue)}catch(ue){console.error("Error deleting post:",ue),i("Error","Could not delete the post.")}},te=async(ee,ue)=>{if(!s){i("Error","You must be logged in to like a post.");return}const ce=si(dt,`artifacts/${ft}/public/data/achievements`,ee),Te=ue.includes(s);let N;Te?N=ue.filter(w=>w!==s):N=[...ue,s];try{await Up(ce,{likes:N})}catch(w){console.error("Error liking post:",w),i("Error","Could not update like.")}},fe=ee=>{if(!ee)return"just now";const ue=Math.floor((new Date-ee.toDate())/1e3);let ce=ue/31536e3;return ce>1?Math.floor(ce)+"y ago":(ce=ue/2592e3,ce>1?Math.floor(ce)+"mo ago":(ce=ue/86400,ce>1?Math.floor(ce)+"d ago":(ce=ue/3600,ce>1?Math.floor(ce)+"h ago":(ce=ue/60,ce>1?Math.floor(ce)+"m ago":"just now"))))};return E.jsxs("div",{className:"max-w-4xl mx-auto p-4 sm:p-6 lg:p-8",children:[E.jsx("h2",{className:"text-3xl font-bold text-gray-900 mb-6",children:"Achievement Feed"}),E.jsxs("form",{onSubmit:Q,className:"bg-white p-6 rounded-xl shadow-lg mb-8",children:[E.jsx("textarea",{value:u,onChange:ee=>f(ee.target.value),placeholder:`What have you achieved today, ${A.split(" ")[0]}?`,className:"w-full p-3 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-emerald-500",rows:"3"}),E.jsx("div",{className:"flex justify-end items-center mt-4",children:E.jsxs("button",{type:"submit",disabled:g,className:"flex items-center justify-center bg-emerald-600 text-white px-5 py-2 rounded-md hover:bg-emerald-700 disabled:bg-emerald-300 shadow-md hover:shadow-lg transition-all",children:[g?E.jsx(Hn,{className:"animate-spin"}):E.jsx(Bp,{size:18,className:"mr-2"}),"Post"]})})]}),E.jsx("div",{className:"space-y-6",children:p?E.jsx(ps,{size:32}):r.length===0?E.jsx("p",{className:"text-center text-gray-500",children:"No achievements yet. Be the first to post!"}):r.map(ee=>{const ue=ee.likes||[],ce=ue.includes(s);return E.jsxs("div",{className:"bg-white p-5 rounded-xl shadow-lg relative",children:[console.log(`Checking post ${ee.id}: authorId (${ee.authorId}) === userId (${s}) ? ${ee.authorId===s}`),ee.authorId===s&&E.jsx("button",{onClick:()=>G(ee.id),className:"absolute top-3 right-3 text-gray-400 hover:text-red-500 transition-colors",title:"Delete post",children:E.jsx(I1,{size:16})}),E.jsxs("div",{className:"flex items-center mb-3",children:[E.jsx("div",{className:"flex-shrink-0 bg-emerald-100 rounded-full h-10 w-10 flex items-center justify-center",children:E.jsx(Li,{size:20,className:"text-emerald-600"})}),E.jsxs("div",{className:"ml-3",children:[E.jsx("p",{className:"text-sm font-semibold text-gray-900",children:ee.authorName}),E.jsx("p",{className:"text-xs text-gray-500",children:fe(ee.createdAt)})]})]}),ee.content&&E.jsx("p",{className:"text-gray-800 whitespace-pre-wrap",children:ee.content}),E.jsx("div",{className:"flex justify-between items-center mt-4 pt-3 border-t border-gray-100",children:E.jsxs("div",{className:"flex space-x-5",children:[E.jsxs("button",{onClick:()=>te(ee.id,ue),className:"flex items-center space-x-1 text-gray-500 hover:text-emerald-600 transition-colors group",children:[E.jsx(fN,{size:18,className:`group-hover:text-emerald-600 ${ce?"text-emerald-600 fill-emerald-600":""}`}),E.jsxs("span",{className:`text-sm group-hover:text-emerald-6D0 ${ce?"text-emerald-600":""}`,children:[ue.length," ",ue.length===1?"Like":"Likes"]})]}),E.jsxs("button",{onClick:()=>U(ee.id===j?null:ee.id),className:"flex items-center space-x-1 text-gray-500 hover:text-emerald-600 transition-colors group",children:[E.jsx(tN,{size:18,className:`group-hover:text-emerald-600 ${j===ee.id?"text-emerald-600":""}`}),E.jsx("span",{className:`text-sm group-hover:text-emerald-600 ${j===ee.id?"text-emerald-600":""}`,children:"Comment"})]})]})}),j===ee.id&&E.jsx(bN,{postId:ee.id,userId:s,authorName:A,showModal:i})]},ee.id)})})]})},SN=({setPage:s})=>{const[e,i]=ie.useState(""),[r,l]=ie.useState([]),[u,f]=ie.useState([]),[p,y]=ie.useState(!1),[g,T]=ie.useState(!1);ie.useEffect(()=>{(async()=>{y(!0);try{const U=qn(dt,`artifacts/${ft}/public/data/users`),G=(await Lp(U)).docs.map(te=>({id:te.id,...te.data()}));f(G)}catch(U){console.error("Error fetching all users:",U)}y(!1)})()},[]);const A=j=>{if(j.preventDefault(),e.trim()===""){l([]),T(!0);return}const U=e.toLowerCase(),Q=u.filter(G=>{const te=G.name.toLowerCase().includes(U),fe=(G.skills||[]).some(ee=>ee.toLowerCase().includes(U));return te||fe});l(Q),T(!0)},x=({user:j})=>E.jsxs("div",{className:"bg-white p-5 rounded-xl shadow-lg flex items-start space-x-4 transition-shadow duration-300 hover:shadow-xl",children:[E.jsx("div",{className:"flex-shrink-0 bg-gray-200 rounded-full h-12 w-12 flex items-center justify-center",children:E.jsx(Li,{size:24,className:"text-gray-600"})}),E.jsxs("div",{className:"flex-grow",children:[E.jsx("h4",{className:"text-lg font-semibold text-gray-900",children:j.name}),E.jsx("p",{className:"text-sm text-gray-600 capitalize",children:j.role}),E.jsxs("div",{className:"mt-2 flex flex-wrap gap-2",children:[(j.skills||[]).slice(0,5).map((U,Q)=>E.jsx("span",{className:"px-2 py-0.5 bg-emerald-100 text-emerald-800 text-xs font-medium rounded-full",children:U},Q)),(j.skills||[]).length>5&&E.jsxs("span",{className:"px-2 py-0.5 bg-gray-100 text-gray-800 text-xs font-medium rounded-full",children:["+",(j.skills||[]).length-5," more"]})]})]}),E.jsx("div",{className:"flex-shrink-0",children:E.jsx("button",{onClick:()=>s({name:"profile",props:{profileId:j.id}}),className:"px-3 py-1 bg-emerald-50 text-emerald-700 text-sm rounded-md hover:bg-emerald-100 transition-colors",children:"View Profile"})})]});return E.jsxs("div",{className:"max-w-4xl mx-auto p-4 sm:p-6 lg:p-8",children:[E.jsx("h2",{className:"text-3xl font-bold text-gray-900 mb-6",children:"Find Collaborators"}),E.jsxs("form",{onSubmit:A,className:"flex space-x-2 mb-8",children:[E.jsx("input",{type:"search",value:e,onChange:j=>i(j.target.value),placeholder:"Search by name or skill (e.g., 'Python', 'Jane Doe')",className:"flex-grow px-4 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-emerald-500"}),E.jsx("button",{type:"submit",className:"flex-shrink-0 bg-emerald-600 text-white px-4 py-2 rounded-md hover:bg-emerald-700 flex items-center justify-center transition-colors",children:E.jsx(zm,{size:18})})]}),E.jsxs("div",{className:"space-y-4",children:[p&&E.jsx(ps,{size:32}),!p&&g&&r.length===0&&E.jsx("p",{className:"text-center text-gray-500",children:"No users found matching your search."}),r.map(j=>E.jsx(x,{user:j},j.id))]})]})},wN=({recipientId:s,recipientName:e,currentUserId:i,authorName:r,showModal:l,onClose:u})=>{const[f,p]=ie.useState(""),[y,g]=ie.useState(!1),T=async A=>{if(A.preventDefault(),f.trim()!==""){g(!0);try{const x=qn(dt,`artifacts/${ft}/public/data/users`,s,"messages");await Gh(x,{text:f,fromId:i,fromName:r,sentAt:lu(),isRead:!1}),l("Message Sent!",`Your message to ${e} has been sent.`),u()}catch(x){console.error("Error sending message:",x),l("Error","Could not send your message. Please try again.")}g(!1)}};return E.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-75 backdrop-blur-sm z-50 flex justify-center items-center p-4",children:E.jsxs("div",{className:"bg-white rounded-xl shadow-2xl w-full max-w-md p-6 relative",children:[E.jsx("button",{onClick:u,className:"absolute top-3 right-3 text-gray-400 hover:text-gray-600",children:E.jsx(Yh,{size:20})}),E.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:["Send Message to ",e]}),E.jsxs("form",{onSubmit:T,children:[E.jsx("textarea",{value:f,onChange:A=>p(A.target.value),placeholder:"Write your message here...",className:"w-full p-3 h-32 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-emerald-500",rows:"4"}),E.jsxs("button",{type:"submit",disabled:y,className:"mt-4 w-full flex items-center justify-center bg-emerald-600 text-white px-5 py-2 rounded-md hover:bg-emerald-700 disabled:bg-emerald-300 shadow-md hover:shadow-lg transition-all",children:[y?E.jsx(Hn,{className:"animate-spin"}):E.jsx(R1,{size:18,className:"mr-2"}),"Send"]})]})]})})},xN=({userId:s,showModal:e,setPage:i})=>{const[r,l]=ie.useState([]),[u,f]=ie.useState(!0),p=g=>{if(!g)return"just now";const T=Math.floor((new Date-g.toDate())/1e3);let A=T/31536e3;return A>1?Math.floor(A)+"y ago":(A=T/2592e3,A>1?Math.floor(A)+"mo ago":(A=T/86400,A>1?Math.floor(A)+"d ago":(A=T/3600,A>1?Math.floor(A)+"h ago":(A=T/60,A>1?Math.floor(A)+"m ago":"just now"))))};ie.useEffect(()=>{if(!s)return;f(!0);const g=qn(dt,`artifacts/${ft}/public/data/users`,s,"messages"),T=au(g),A=ou(T,x=>{const j=[];x.forEach(U=>{j.push({id:U.id,...U.data()})}),j.sort((U,Q)=>{const G=U.sentAt?.toDate()||0;return(Q.sentAt?.toDate()||0)-G}),l(j),f(!1),y(j.filter(U=>!U.isRead))},x=>{console.error("Error fetching messages:",x),e("Error","Could not load your inbox."),f(!1)});return()=>A()},[s,e]);const y=async g=>{if(g.length!==0)try{for(const T of g){const A=si(dt,`artifacts/${ft}/public/data/users`,s,"messages",T.id);await Up(A,{isRead:!0})}}catch(T){console.error("Error marking messages as read:",T)}};return E.jsxs("div",{className:"max-w-4xl mx-auto p-4 sm:p-6 lg:p-8",children:[E.jsx("h2",{className:"text-3xl font-bold text-gray-900 mb-6",children:"Inbox"}),E.jsxs("div",{className:"space-y-4",children:[u&&E.jsx(ps,{size:32}),!u&&r.length===0&&E.jsx("p",{className:"text-center text-gray-500",children:"You have no messages."}),r.map(g=>E.jsxs("div",{className:`bg-white p-5 rounded-xl shadow-lg border-l-4 ${g.isRead?"border-transparent":"border-emerald-500"}`,children:[E.jsxs("div",{className:"flex justify-between items-center mb-2",children:[E.jsxs("button",{onClick:()=>i({name:"profile",props:{profileId:g.fromId}}),className:"flex items-center space-x-2 group",children:[E.jsx("div",{className:"flex-shrink-0 bg-gray-100 rounded-full h-8 w-8 flex items-center justify-center",children:E.jsx(Li,{size:16,className:"text-gray-500"})}),E.jsx("span",{className:"text-sm font-semibold text-gray-900 group-hover:text-emerald-600 group-hover:underline",children:g.fromName})]}),E.jsx("span",{className:"text-xs text-gray-400",children:p(g.sentAt)})]}),E.jsx("p",{className:"text-gray-700 whitespace-pre-wrap ml-10",children:g.text})]},g.id))]})]})},RN=({userId:s,showModal:e,setPage:i})=>{const[r,l]=ie.useState(""),[u,f]=ie.useState(!1),[p,y]=ie.useState([]),g=async A=>{if(A.preventDefault(),r.trim()===""){e("Error","Please describe your project first.");return}f(!0),y([]);try{const x=qn(dt,`artifacts/${ft}/public/data/users`),U=(await Lp(x)).docs.map(ce=>ce.data()).filter(ce=>ce.uid!==s);if(U.length===0){e("No Users","There are no other users in the directory to match with."),f(!1);return}const Q=U.map(ce=>`User ID: ${ce.uid}
Name: ${ce.name}
Role: ${ce.role}
Bio: ${ce.bio||"N/A"}
Skills: ${(ce.skills||[]).join(", ")}
`).join(`
---
`),fe={contents:[{parts:[{text:`Here is my project description:
"${r}"

Here is the list of available users:
${Q}

Return the JSON array of top matches.`}]}],systemInstruction:{parts:[{text:"You are an AI assistant helping a student find project collaborators from a university directory. Your task is to analyze a project description and a list of user profiles. Return a JSON array of the top 3-5 best matches. For each match, provide their `userId`, a brief `reason` (1-2 sentences) why they are a good match, and their `name`. Do not match the user with themselves. If no good matches are found, return an empty array."}]},generationConfig:{responseMimeType:"application/json",responseSchema:{type:"ARRAY",items:{type:"OBJECT",properties:{userId:{type:"STRING"},name:{type:"STRING"},reason:{type:"STRING"}}}}}},ee=await qp(fe),ue=JSON.parse(ee);y(ue)}catch(x){console.error("Error in AI Matcher:",x),e("AI Error",`Could not find matches. Please try again.
`+x.message)}f(!1)},T=({match:A})=>E.jsxs("div",{className:"bg-white p-5 rounded-xl shadow-lg flex items-start space-x-4",children:[E.jsx("div",{className:"flex-shrink-0 bg-emerald-100 rounded-full h-12 w-12 flex items-center justify-center",children:E.jsx(Li,{size:24,className:"text-emerald-700"})}),E.jsxs("div",{className:"flex-grow",children:[E.jsx("h4",{className:"text-lg font-semibold text-gray-900",children:A.name}),E.jsxs("p",{className:"text-sm text-gray-600 italic",children:['"',A.reason,'"']})]}),E.jsx("div",{className:"flex-shrink-0",children:E.jsx("button",{onClick:()=>i({name:"profile",props:{profileId:A.userId}}),className:"px-3 py-1 bg-emerald-50 text-emerald-700 text-sm rounded-md hover:bg-emerald-100 transition-colors",children:"View Profile"})})]});return E.jsxs("div",{className:"max-w-4xl mx-auto p-4 sm:p-6 lg:p-8",children:[E.jsx("h2",{className:"text-3xl font-bold text-gray-900 mb-6",children:"AI Project Matcher"}),E.jsxs("form",{onSubmit:g,className:"bg-white p-6 rounded-xl shadow-lg mb-8",children:[E.jsx("label",{htmlFor:"projectDesc",className:"block text-sm font-medium text-gray-700 mb-2",children:"Describe your project to find the best collaborators:"}),E.jsx("textarea",{id:"projectDesc",value:r,onChange:A=>l(A.target.value),placeholder:"e.g., 'I'm building a website to track club events. I need someone who knows React for the frontend and maybe Firebase for the backend...'",className:"w-full p-3 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-emerald-500",rows:"5"}),E.jsx("div",{className:"flex justify-end items-center mt-4",children:E.jsxs("button",{type:"submit",disabled:u,className:"flex items-center justify-center bg-emerald-600 text-white px-5 py-2 rounded-md hover:bg-emerald-700 disabled:bg-emerald-300 shadow-md hover:shadow-lg transition-all",children:[u?E.jsx(Hn,{className:"animate-spin"}):E.jsx(Um,{size:18,className:"mr-2"}),"Find Matches"]})})]}),E.jsxs("div",{className:"space-y-4",children:[u&&E.jsx(ps,{size:32}),!u&&p.length>0&&E.jsxs(E.Fragment,{children:[E.jsx("h3",{className:"text-2xl font-bold text-gray-800",children:"Top Matches"}),p.map(A=>E.jsx(T,{match:A},A.userId))]}),!u&&!p.length&&r&&E.jsx("p",{className:"text-center text-gray-500",children:"No strong matches found. Try broadening your project description."})]})]})},IN=({userId:s,user:e,showModal:i,setPage:r})=>{const[l,u]=ie.useState([]),[f,p]=ie.useState(!0),[y,g]=ie.useState(!1),[T,A]=ie.useState("...");ie.useEffect(()=>{s&&(async()=>{const Q=si(dt,`artifacts/${ft}/public/data/users`,s),G=await Eh(Q);G.exists()?A(G.data().name):A(e.email)})()},[s,e.email]),ie.useEffect(()=>{p(!0);const U=qn(dt,`artifacts/${ft}/public/data/projects`),Q=au(U),G=ou(Q,te=>{const fe=[];te.forEach(ee=>{fe.push({id:ee.id,...ee.data()})}),fe.sort((ee,ue)=>{const ce=ee.createdAt?.toDate()||0;return(ue.createdAt?.toDate()||0)-ce}),u(fe),p(!1)},te=>{console.error("Error fetching projects:",te),i("Error","Could not load projects."),p(!1)});return()=>G()},[i]);const x=async U=>{try{const Q=si(dt,`artifacts/${ft}/public/data/projects`,U);await S1(Q)}catch(Q){console.error("Error deleting project:",Q),i("Error","Could not delete the project.")}},j=U=>{if(!U)return"just now";const Q=Math.floor((new Date-U.toDate())/1e3);let G=Q/86400;return G>1?Math.floor(G)+"d ago":(G=Q/3600,G>1?Math.floor(G)+"h ago":(G=Q/60,G>1?Math.floor(G)+"m ago":"just now"))};return E.jsxs("div",{className:"max-w-4xl mx-auto p-4 sm:p-6 lg:p-8",children:[E.jsxs("div",{className:"flex justify-between items-center mb-6",children:[E.jsx("h2",{className:"text-3xl font-bold text-gray-900",children:"Projects"}),E.jsxs("button",{onClick:()=>g(!0),className:"flex items-center justify-center bg-emerald-600 text-white px-4 py-2 rounded-md hover:bg-emerald-700 shadow-md hover:shadow-lg transition-all",children:[E.jsx(Bp,{size:18,className:"mr-2"}),"Post a Project"]})]}),E.jsxs("div",{className:"space-y-6",children:[f&&E.jsx(ps,{size:32}),!f&&l.length===0&&E.jsx("p",{className:"text-center text-gray-500",children:"No projects listed yet. Be the first to post!"}),l.map(U=>E.jsxs("div",{className:"bg-white p-5 rounded-xl shadow-lg relative",children:[console.log(`Checking project ${U.id}: authorId (${U.authorId}) === userId (${s}) ? ${U.authorId===s}`),U.authorId===s&&E.jsx("button",{onClick:()=>x(U.id),className:"absolute top-3 right-3 text-gray-400 hover:text-red-500 transition-colors",title:"Delete project",children:E.jsx(I1,{size:16})}),E.jsxs("div",{className:"flex justify-between items-start",children:[E.jsxs("div",{children:[E.jsx("h3",{className:"text-xl font-semibold text-gray-900",children:U.title}),E.jsxs("button",{onClick:()=>r({name:"profile",props:{profileId:U.authorId}}),className:"text-sm text-gray-500 hover:text-emerald-600 hover:underline",children:["by ",U.authorName]})]}),E.jsx("span",{className:"text-xs text-gray-400 flex-shrink-0 ml-2",children:j(U.createdAt)})]}),E.jsx("p",{className:"text-gray-700 whitespace-pre-wrap my-3",children:U.description}),E.jsxs("div",{className:"flex flex-wrap gap-2",children:[E.jsx("span",{className:"text-xs font-semibold text-gray-600",children:"Skills needed:"}),(U.skills||[]).map((Q,G)=>E.jsx("span",{className:"px-2 py-0.5 bg-emerald-100 text-emerald-800 text-xs font-medium rounded-full",children:Q},G))]})]},U.id))]}),y&&E.jsx(CN,{userId:s,authorName:T,showModal:i,onClose:()=>g(!1)})]})},CN=({userId:s,authorName:e,showModal:i,onClose:r})=>{const[l,u]=ie.useState(""),[f,p]=ie.useState(""),[y,g]=ie.useState(""),[T,A]=ie.useState(!1),x=async j=>{if(j.preventDefault(),l.trim()===""||f.trim()===""||y.trim()===""){i("Incomplete Form","Please fill out all fields.");return}A(!0);const U=y.split(",").map(Q=>Q.trim()).filter(Q=>Q);try{const Q=qn(dt,`artifacts/${ft}/public/data/projects`);await Gh(Q,{title:l,description:f,skills:U,authorId:s,authorName:e,createdAt:lu()}),i("Success!","Your project has been posted."),r()}catch(Q){console.error("Error posting project:",Q),i("Error","Could not post your project.")}A(!1)};return E.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-75 backdrop-blur-sm z-50 flex justify-center items-center p-4",children:E.jsxs("div",{className:"bg-white rounded-xl shadow-2xl w-full max-w-lg p-6 relative",children:[E.jsx("button",{onClick:r,className:"absolute top-3 right-3 text-gray-400 hover:text-gray-600",children:E.jsx(Yh,{size:20})}),E.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Post a New Project"}),E.jsxs("form",{onSubmit:x,className:"space-y-4",children:[E.jsxs("div",{children:[E.jsx("label",{htmlFor:"title",className:"block text-sm font-medium text-gray-700",children:"Project Title"}),E.jsx("input",{id:"title",type:"text",value:l,onChange:j=>u(j.target.value),className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-emerald-500 focus:border-emerald-500"})]}),E.jsxs("div",{children:[E.jsx("label",{htmlFor:"description",className:"block text-sm font-medium text-gray-700",children:"Description"}),E.jsx("textarea",{id:"description",value:f,onChange:j=>p(j.target.value),rows:"4",className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-emerald-500 focus:border-emerald-500"})]}),E.jsxs("div",{children:[E.jsx("label",{htmlFor:"skills",className:"block text-sm font-medium text-gray-700",children:"Skills Needed (comma-separated)"}),E.jsx("input",{id:"skills",type:"text",value:y,onChange:j=>g(j.target.value),placeholder:"e.g., React, Python, UI/UX Design",className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-emerald-500 focus:border-emerald-500"})]}),E.jsxs("button",{type:"submit",disabled:T,className:"mt-4 w-full flex items-center justify-center bg-emerald-600 text-white px-5 py-2 rounded-md hover:bg-emerald-700 disabled:bg-emerald-300 shadow-md hover:shadow-lg transition-all",children:[T?E.jsx(Hn,{className:"animate-spin"}):E.jsx(Bp,{size:18,className:"mr-2"}),"Post Project"]})]})]})})},NN=({setPage:s})=>{const[e,i]=ie.useState([]),[r,l]=ie.useState(!0);ie.useEffect(()=>{(async()=>{l(!0);try{const p=qn(dt,`artifacts/${ft}/public/data/users`),g=(await Lp(p)).docs.map(T=>({id:T.id,...T.data()}));g.sort((T,A)=>T.name.localeCompare(A.name)),i(g)}catch(p){console.error("Error fetching user directory:",p)}l(!1)})()},[]);const u=({user:f})=>E.jsxs("li",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-4 p-4 bg-white rounded-xl shadow-lg transition-shadow duration-300 hover:shadow-xl",children:[E.jsxs("div",{className:"flex items-center space-x-3",children:[E.jsx("div",{className:"flex-shrink-0 bg-gray-200 rounded-full h-10 w-10 flex items-center justify-center",children:E.jsx(Li,{size:20,className:"text-gray-600"})}),E.jsxs("div",{children:[E.jsx("p",{className:"text-sm font-semibold text-gray-900",children:f.name}),E.jsx("p",{className:"text-sm text-gray-500",children:f.email})]})]}),E.jsxs("div",{className:"w-full sm:w-auto flex flex-col sm:items-end gap-2",children:[E.jsx("p",{className:"text-sm text-gray-600 capitalize",children:f.role}),E.jsx("button",{onClick:()=>s({name:"profile",props:{profileId:f.id}}),className:"w-full sm:w-auto px-3 py-1 bg-emerald-50 text-emerald-700 text-sm rounded-md hover:bg-emerald-100 transition-colors text-center",children:"View Profile"})]})]});return E.jsxs("div",{className:"max-w-4xl mx-auto p-4 sm:p-6 lg:p-8",children:[E.jsx("h2",{className:"text-3xl font-bold text-gray-900 mb-6",children:"User Directory"}),r?E.jsx(ps,{size:32}):E.jsx("ul",{className:"space-y-3",children:e.map(f=>E.jsx(u,{user:f},f.id))})]})},DN=({currentUserId:s,currentUser:e,showModal:i,setPage:r,profileId:l})=>{const[u,f]=ie.useState(null),[p,y]=ie.useState(!0),[g,T]=ie.useState(!1),[A,x]=ie.useState(!1),[j,U]=ie.useState({name:"",bio:"",skills:"",linkedin:"",github:"",course:"",semester:""}),[Q,G]=ie.useState(""),[te,fe]=ie.useState(!1),[ee,ue]=ie.useState(!1),[ce,Te]=ie.useState("..."),N=s===l;ie.useEffect(()=>{e&&(async()=>{const k=si(dt,`artifacts/${ft}/public/data/users`,s),R=await Eh(k);R.exists()?Te(R.data().name):Te(e.email)})()},[s,e]),ie.useEffect(()=>{if(!l){y(!1);return}y(!0),(async()=>{try{const k=si(dt,`artifacts/${ft}/public/data/users`,l),R=await Eh(k);if(R.exists()){const be=R.data();f(be),U({name:be.name||"",bio:be.bio||"",skills:(be.skills||[]).join(", "),linkedin:be.linkedin||"",github:be.github||"",course:be.course||"",semester:be.semester||""})}else i("Error","Profile not found."),f(null)}catch(k){console.error("Error fetching profile:",k),i("Error","Could not load profile.")}y(!1)})()},[l,i]);const w=D=>{const{name:k,value:R}=D.target;U(be=>({...be,[k]:R}))},I=async D=>{D.preventDefault(),x(!0);const k=j.skills.split(",").map(be=>be.trim()).filter(be=>be!==""),R={name:j.name,bio:j.bio,skills:k,linkedin:j.linkedin,github:j.github,course:j.course,semester:j.semester};try{const be=si(dt,`artifacts/${ft}/public/data/users`,s);await Up(be,R),f(lt=>({...lt,...R})),T(!1),i("Success","Your profile has been updated.")}catch(be){console.error("Error updating profile:",be),i("Error","Could not save your profile.")}x(!1)},V=async()=>{if(Q.trim()===""){i("Keywords Needed","Please enter a few keywords for the AI to write your bio.");return}fe(!0);try{const R={contents:[{parts:[{text:`Generate a bio based on these keywords: "${Q}"`}]}],systemInstruction:{parts:[{text:"You are a helpful assistant writing a professional, first-person bio for a student's profile on a college collaboration portal. The bio should be 2-3 sentences long. Be friendly but professional."}]}},be=await qp(R);U(lt=>({...lt,bio:be.trim()}))}catch(D){console.error("Error generating bio:",D),i("AI Error",`Could not generate bio. Please try again.
`+D.message)}fe(!1)};return p?E.jsx("div",{className:"flex-grow pt-20",children:E.jsx(ps,{size:40})}):u?E.jsxs(E.Fragment,{children:[E.jsx("div",{className:"max-w-4xl mx-auto p-4 sm:p-6 lg:p-8",children:E.jsx("div",{className:"bg-white shadow-2xl rounded-xl overflow-hidden",children:E.jsxs("div",{className:"p-6 sm:p-8",children:[E.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between",children:[E.jsxs("div",{className:"flex items-center space-x-4",children:[E.jsx("div",{className:"flex-shrink-0 bg-gradient-to-br from-green-500 to-emerald-600 rounded-full h-24 w-24 flex items-center justify-center shadow-lg",children:E.jsx(Li,{size:48,className:"text-white"})}),E.jsxs("div",{children:[g?E.jsx("input",{type:"text",name:"name",value:j.name,onChange:w,className:"text-2xl font-bold text-gray-900 border-b-2 border-gray-300 focus:border-emerald-500 outline-none"}):E.jsx("h2",{className:"text-3xl font-bold text-gray-900",children:u.name}),E.jsx("p",{className:"text-md text-gray-600 capitalize",children:u.role}),E.jsx("p",{className:"text-sm text-gray-500",children:u.email}),u.role==="student"&&E.jsxs("p",{className:"text-sm text-gray-500",children:[u.course," - ",u.semester]})]})]}),E.jsx("div",{className:"mt-4 sm:mt-0 flex-shrink-0",children:N?g?E.jsxs("div",{className:"flex space-x-2",children:[E.jsxs("button",{onClick:()=>T(!1),className:"flex items-center bg-gray-100 text-gray-700 px-4 py-2 rounded-md hover:bg-gray-200 transition-colors",children:[E.jsx(Yh,{size:18,className:"mr-1"}),"Cancel"]}),E.jsxs("button",{onClick:I,disabled:A,className:"flex items-center bg-green-600 text-white px-4 py-2 rounded-md hover:bg-green-700 disabled:bg-green-300 transition-colors",children:[A?E.jsx(Hn,{className:"animate-spin"}):E.jsx(sN,{size:18,className:"mr-1"}),"Save"]})]}):E.jsxs("button",{onClick:()=>T(!0),className:"flex items-center bg-emerald-600 text-white px-4 py-2 rounded-md hover:bg-emerald-700 transition-all shadow-md hover:shadow-lg",children:[E.jsx(cN,{size:18,className:"mr-1"}),"Edit Profile"]}):E.jsxs("button",{onClick:()=>ue(!0),className:"flex items-center bg-emerald-600 text-white px-4 py-2 rounded-md hover:bg-emerald-700 transition-all shadow-md hover:shadow-lg",children:[E.jsx(WC,{size:18,className:"mr-1"}),"Send Message"]})})]}),E.jsxs("div",{className:"mt-8 space-y-6",children:[E.jsxs("div",{children:[E.jsx("h4",{className:"text-sm font-semibold text-gray-500 uppercase tracking-wider",children:"Bio"}),g?E.jsxs("div",{className:"space-y-2",children:[E.jsx("textarea",{name:"bio",value:j.bio,onChange:w,placeholder:"Tell everyone a bit about yourself...",className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-emerald-500 focus:border-emerald-500"}),E.jsxs("div",{className:"p-3 bg-emerald-50 rounded-md border border-emerald-200 space-y-2",children:[E.jsx("label",{htmlFor:"bio-keywords",className:"block text-xs font-medium text-emerald-800",children:" Get help from AI"}),E.jsxs("div",{className:"flex space-x-2",children:[E.jsx("input",{id:"bio-keywords",type:"text",value:Q,onChange:D=>G(D.target.value),placeholder:"Keywords: e.g., '3rd year CS, loves React'",className:"flex-grow px-3 py-1.5 border border-gray-300 rounded-md shadow-sm text-sm focus:outline-none focus:ring-1 focus:ring-emerald-500"}),E.jsxs("button",{type:"button",onClick:V,disabled:te,className:"flex-shrink-0 bg-emerald-600 text-white px-3 py-1.5 rounded-md text-sm hover:bg-emerald-700 disabled:bg-emerald-300 transition-colors flex items-center",children:[te?E.jsx(Hn,{size:16,className:"animate-spin mr-1"}):E.jsx(lN,{size:16,className:"mr-1"}),"Generate"]})]})]})]}):E.jsx("p",{className:"mt-1 text-gray-800 whitespace-pre-wrap",children:u.bio||E.jsx("span",{className:"text-gray-400 italic",children:"No bio provided."})})]}),g&&u.role==="student"&&E.jsxs(E.Fragment,{children:[E.jsxs("div",{children:[E.jsx("h4",{className:"text-sm font-semibold text-gray-500 uppercase tracking-wider",children:"Course"}),E.jsxs("select",{name:"course",value:j.course,onChange:w,className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-emerald-500 focus:border-emerald-500 transition duration-150",children:[E.jsx("option",{value:"",disabled:!0,children:"Select your course"}),C1.map(D=>E.jsx("option",{value:D,children:D},D))]})]}),E.jsxs("div",{children:[E.jsx("h4",{className:"text-sm font-semibold text-gray-500 uppercase tracking-wider",children:"Semester"}),E.jsxs("select",{name:"semester",value:j.semester,onChange:w,className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-emerald-500 focus:border-emerald-500 transition duration-150",children:[E.jsx("option",{value:"",disabled:!0,children:"Select your semester"}),N1.map(D=>E.jsx("option",{value:D,children:D},D))]})]})]}),E.jsxs("div",{children:[E.jsx("h4",{className:"text-sm font-semibold text-gray-500 uppercase tracking-wider",children:"Skills"}),g?E.jsx("input",{type:"text",name:"skills",value:j.skills,onChange:w,placeholder:"e.g., Python, React, Data Analysis",className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-emerald-500 focus:border-emerald-500"}):E.jsx("div",{className:"mt-2 flex flex-wrap gap-2",children:u.skills&&u.skills.length>0?u.skills.map((D,k)=>E.jsx("span",{className:"px-3 py-1 bg-emerald-100 text-emerald-800 text-sm font-medium rounded-full",children:D},k)):E.jsx("span",{className:"text-gray-400 italic",children:"No skills listed."})}),g&&E.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Enter skills separated by commas."})]}),E.jsxs("div",{children:[E.jsx("h4",{className:"text-sm font-semibold text-gray-500 uppercase tracking-wider",children:"Links"}),E.jsx("div",{className:"mt-2 space-y-2",children:g?E.jsxs(E.Fragment,{children:[E.jsx("input",{type:"text",name:"github",value:j.github,onChange:w,placeholder:"GitHub URL (e.g., https://github.com/username)",className:"block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-emerald-500 focus:border-emerald-500"}),E.jsx("input",{type:"text",name:"linkedin",value:j.linkedin,onChange:w,placeholder:"LinkedIn URL (e.g., https://linkedin.com/in/username)",className:"block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-emerald-500 focus:border-emerald-500"})]}):E.jsxs(E.Fragment,{children:[E.jsxs("p",{className:"text-gray-800",children:[E.jsx("strong",{children:"GitHub:"})," ",u.github?E.jsx("a",{href:u.github,target:"_blank",rel:"noopener noreferrer",className:"text-emerald-600 hover:underline",children:u.github}):E.jsx("span",{className:"text-gray-400 italic",children:"Not provided"})]}),E.jsxs("p",{className:"text-gray-800",children:[E.jsx("strong",{children:"LinkedIn:"})," ",u.linkedin?E.jsx("a",{href:u.linkedin,target:"_blank",rel:"noopener noreferrer",className:"text-emerald-600 hover:underline",children:u.linkedin}):E.jsx("span",{className:"text-gray-400 italic",children:"Not provided"})]})]})})]})]})]})})}),ee&&E.jsx(wN,{recipientId:l,recipientName:u.name,currentUserId:s,authorName:ce,showModal:i,onClose:()=>ue(!1)})]}):E.jsx("div",{className:"flex-grow flex items-center justify-center",children:E.jsx("p",{className:"text-xl text-gray-600",children:"Profile not found."})})},ON=()=>E.jsx("footer",{className:"w-full bg-gray-100 border-t border-gray-200 mt-12 py-6",children:E.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 text-center text-sm text-gray-500",children:[E.jsxs("p",{children:[" ",new Date().getFullYear()," CollabNest. All rights reserved."]}),E.jsxs("p",{className:"mt-1",children:["For support, contact: ",E.jsx("a",{href:"mailto:collabnest.iilm@gmail.com",className:"font-medium text-emerald-600 hover:text-emerald-500",children:"collabnest.iilm@gmail.com"})]})]})});function MN(){const[s,e]=ie.useState(null),[i,r]=ie.useState(null),[l,u]=ie.useState(!1),[f,p]=ie.useState({name:"login"}),[y,g]=ie.useState({isOpen:!1,title:"",message:""}),T=(U,Q)=>{g({isOpen:!0,title:U,message:Q})},A=()=>{g({isOpen:!1,title:"",message:""})};ie.useEffect(()=>{const U=async()=>{try{typeof __initial_auth_token<"u"&&__initial_auth_token?(console.log("Signing in with custom token..."),await i2(Wa,__initial_auth_token)):(console.log("Signing in anonymously..."),await Zw(Wa))}catch(G){console.error("Firebase initial sign-in error:",G)}},Q=l2(Wa,G=>{G&&!G.isAnonymous?(e(G),r(G.uid),(f.name==="login"||f.name==="signup")&&p({name:"dashboard"})):(e(null),r(null),p({name:"login"})),u(!0)});return(typeof __initial_auth_token<"u"||typeof process<"u"&&!1)&&U(),()=>Q()},[]);const x=async()=>{try{await u2(Wa),p({name:"login"})}catch(U){console.error("Logout Error:",U),T("Logout Failed","An error occurred while logging out.")}},j=()=>{if(!l)return E.jsx("div",{className:"flex-grow flex items-center justify-center",children:E.jsx(ps,{size:40})});if(!s)switch(f.name){case"signup":return E.jsx(EN,{setPage:p,showModal:T});case"login":default:return E.jsx(vN,{setPage:p,showModal:T})}switch(f.name){case"dashboard":return E.jsx(Wv,{userId:i,user:s,showModal:T});case"projects":return E.jsx(IN,{userId:i,user:s,showModal:T,setPage:p});case"search":return E.jsx(SN,{setPage:p});case"ai_matcher":return E.jsx(RN,{userId:i,showModal:T,setPage:p});case"inbox":return E.jsx(xN,{userId:i,showModal:T,setPage:p});case"users":return E.jsx(NN,{setPage:p});case"ai_assistant":return E.jsx(AN,{showModal:T});case"profile":return E.jsx(DN,{currentUserId:i,currentUser:s,profileId:f.props?.profileId||i,showModal:T,setPage:p});default:return E.jsx(Wv,{userId:i,user:s,showModal:T})}};return E.jsxs("div",{className:"min-h-screen flex flex-col bg-slate-50 font-inter",children:[E.jsx(TN,{user:s,setPage:p,handleLogout:x}),E.jsx("main",{className:"flex-grow w-full",children:j()}),E.jsx(ON,{}),E.jsx(_N,{isOpen:y.isOpen,title:y.title,message:y.message,onClose:A})]})}vA.createRoot(document.getElementById("root")).render(E.jsx(ie.StrictMode,{children:E.jsx(MN,{})}));
