(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))r(l);new MutationObserver(l=>{for(const u of l)if(u.type==="childList")for(const f of u.addedNodes)f.tagName==="LINK"&&f.rel==="modulepreload"&&r(f)}).observe(document,{childList:!0,subtree:!0});function i(l){const u={};return l.integrity&&(u.integrity=l.integrity),l.referrerPolicy&&(u.referrerPolicy=l.referrerPolicy),l.crossOrigin==="use-credentials"?u.credentials="include":l.crossOrigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function r(l){if(l.ep)return;l.ep=!0;const u=i(l);fetch(l.href,u)}})();function rA(s){return s&&s.__esModule&&Object.prototype.hasOwnProperty.call(s,"default")?s.default:s}var Yd={exports:{}},bl={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var l0;function aA(){if(l0)return bl;l0=1;var s=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function i(r,l,u){var f=null;if(u!==void 0&&(f=""+u),l.key!==void 0&&(f=""+l.key),"key"in l){u={};for(var p in l)p!=="key"&&(u[p]=l[p])}else u=l;return l=u.ref,{$$typeof:s,type:r,key:f,ref:l!==void 0?l:null,props:u}}return bl.Fragment=e,bl.jsx=i,bl.jsxs=i,bl}var u0;function oA(){return u0||(u0=1,Yd.exports=aA()),Yd.exports}var E=oA(),Kd={exports:{}},Se={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var c0;function lA(){if(c0)return Se;c0=1;var s=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),l=Symbol.for("react.profiler"),u=Symbol.for("react.consumer"),f=Symbol.for("react.context"),p=Symbol.for("react.forward_ref"),y=Symbol.for("react.suspense"),g=Symbol.for("react.memo"),T=Symbol.for("react.lazy"),A=Symbol.for("react.activity"),x=Symbol.iterator;function V(M){return M===null||typeof M!="object"?null:(M=x&&M[x]||M["@@iterator"],typeof M=="function"?M:null)}var q={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},G=Object.assign,K={};function ee(M,Z,ae){this.props=M,this.context=Z,this.refs=K,this.updater=ae||q}ee.prototype.isReactComponent={},ee.prototype.setState=function(M,Z){if(typeof M!="object"&&typeof M!="function"&&M!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,M,Z,"setState")},ee.prototype.forceUpdate=function(M){this.updater.enqueueForceUpdate(this,M,"forceUpdate")};function te(){}te.prototype=ee.prototype;function ne(M,Z,ae){this.props=M,this.context=Z,this.refs=K,this.updater=ae||q}var he=ne.prototype=new te;he.constructor=ne,G(he,ee.prototype),he.isPureReactComponent=!0;var ve=Array.isArray;function Te(){}var N={H:null,A:null,T:null,S:null},w=Object.prototype.hasOwnProperty;function I(M,Z,ae){var ue=ae.ref;return{$$typeof:s,type:M,key:Z,ref:ue!==void 0?ue:null,props:ae}}function k(M,Z){return I(M.type,Z,M.props)}function D(M){return typeof M=="object"&&M!==null&&M.$$typeof===s}function j(M){var Z={"=":"=0",":":"=2"};return"$"+M.replace(/[=:]/g,function(ae){return Z[ae]})}var R=/\/+/g;function be(M,Z){return typeof M=="object"&&M!==null&&M.key!=null?j(""+M.key):Z.toString(36)}function lt(M){switch(M.status){case"fulfilled":return M.value;case"rejected":throw M.reason;default:switch(typeof M.status=="string"?M.then(Te,Te):(M.status="pending",M.then(function(Z){M.status==="pending"&&(M.status="fulfilled",M.value=Z)},function(Z){M.status==="pending"&&(M.status="rejected",M.reason=Z)})),M.status){case"fulfilled":return M.value;case"rejected":throw M.reason}}throw M}function Y(M,Z,ae,ue,Ee){var Ie=typeof M;(Ie==="undefined"||Ie==="boolean")&&(M=null);var Le=!1;if(M===null)Le=!0;else switch(Ie){case"bigint":case"string":case"number":Le=!0;break;case"object":switch(M.$$typeof){case s:case e:Le=!0;break;case T:return Le=M._init,Y(Le(M._payload),Z,ae,ue,Ee)}}if(Le)return Ee=Ee(M),Le=ue===""?"."+be(M,0):ue,ve(Ee)?(ae="",Le!=null&&(ae=Le.replace(R,"$&/")+"/"),Y(Ee,Z,ae,"",function(mr){return mr})):Ee!=null&&(D(Ee)&&(Ee=k(Ee,ae+(Ee.key==null||M&&M.key===Ee.key?"":(""+Ee.key).replace(R,"$&/")+"/")+Le)),Z.push(Ee)),1;Le=0;var Mt=ue===""?".":ue+":";if(ve(M))for(var rt=0;rt<M.length;rt++)ue=M[rt],Ie=Mt+be(ue,rt),Le+=Y(ue,Z,ae,Ie,Ee);else if(rt=V(M),typeof rt=="function")for(M=rt.call(M),rt=0;!(ue=M.next()).done;)ue=ue.value,Ie=Mt+be(ue,rt++),Le+=Y(ue,Z,ae,Ie,Ee);else if(Ie==="object"){if(typeof M.then=="function")return Y(lt(M),Z,ae,ue,Ee);throw Z=String(M),Error("Objects are not valid as a React child (found: "+(Z==="[object Object]"?"object with keys {"+Object.keys(M).join(", ")+"}":Z)+"). If you meant to render a collection of children, use an array instead.")}return Le}function re(M,Z,ae){if(M==null)return M;var ue=[],Ee=0;return Y(M,ue,"","",function(Ie){return Z.call(ae,Ie,Ee++)}),ue}function pe(M){if(M._status===-1){var Z=M._result;Z=Z(),Z.then(function(ae){(M._status===0||M._status===-1)&&(M._status=1,M._result=ae)},function(ae){(M._status===0||M._status===-1)&&(M._status=2,M._result=ae)}),M._status===-1&&(M._status=0,M._result=Z)}if(M._status===1)return M._result.default;throw M._result}var ze=typeof reportError=="function"?reportError:function(M){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var Z=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof M=="object"&&M!==null&&typeof M.message=="string"?String(M.message):String(M),error:M});if(!window.dispatchEvent(Z))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",M);return}console.error(M)},Qe={map:re,forEach:function(M,Z,ae){re(M,function(){Z.apply(this,arguments)},ae)},count:function(M){var Z=0;return re(M,function(){Z++}),Z},toArray:function(M){return re(M,function(Z){return Z})||[]},only:function(M){if(!D(M))throw Error("React.Children.only expected to receive a single React element child.");return M}};return Se.Activity=A,Se.Children=Qe,Se.Component=ee,Se.Fragment=i,Se.Profiler=l,Se.PureComponent=ne,Se.StrictMode=r,Se.Suspense=y,Se.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=N,Se.__COMPILER_RUNTIME={__proto__:null,c:function(M){return N.H.useMemoCache(M)}},Se.cache=function(M){return function(){return M.apply(null,arguments)}},Se.cacheSignal=function(){return null},Se.cloneElement=function(M,Z,ae){if(M==null)throw Error("The argument must be a React element, but you passed "+M+".");var ue=G({},M.props),Ee=M.key;if(Z!=null)for(Ie in Z.key!==void 0&&(Ee=""+Z.key),Z)!w.call(Z,Ie)||Ie==="key"||Ie==="__self"||Ie==="__source"||Ie==="ref"&&Z.ref===void 0||(ue[Ie]=Z[Ie]);var Ie=arguments.length-2;if(Ie===1)ue.children=ae;else if(1<Ie){for(var Le=Array(Ie),Mt=0;Mt<Ie;Mt++)Le[Mt]=arguments[Mt+2];ue.children=Le}return I(M.type,Ee,ue)},Se.createContext=function(M){return M={$$typeof:f,_currentValue:M,_currentValue2:M,_threadCount:0,Provider:null,Consumer:null},M.Provider=M,M.Consumer={$$typeof:u,_context:M},M},Se.createElement=function(M,Z,ae){var ue,Ee={},Ie=null;if(Z!=null)for(ue in Z.key!==void 0&&(Ie=""+Z.key),Z)w.call(Z,ue)&&ue!=="key"&&ue!=="__self"&&ue!=="__source"&&(Ee[ue]=Z[ue]);var Le=arguments.length-2;if(Le===1)Ee.children=ae;else if(1<Le){for(var Mt=Array(Le),rt=0;rt<Le;rt++)Mt[rt]=arguments[rt+2];Ee.children=Mt}if(M&&M.defaultProps)for(ue in Le=M.defaultProps,Le)Ee[ue]===void 0&&(Ee[ue]=Le[ue]);return I(M,Ie,Ee)},Se.createRef=function(){return{current:null}},Se.forwardRef=function(M){return{$$typeof:p,render:M}},Se.isValidElement=D,Se.lazy=function(M){return{$$typeof:T,_payload:{_status:-1,_result:M},_init:pe}},Se.memo=function(M,Z){return{$$typeof:g,type:M,compare:Z===void 0?null:Z}},Se.startTransition=function(M){var Z=N.T,ae={};N.T=ae;try{var ue=M(),Ee=N.S;Ee!==null&&Ee(ae,ue),typeof ue=="object"&&ue!==null&&typeof ue.then=="function"&&ue.then(Te,ze)}catch(Ie){ze(Ie)}finally{Z!==null&&ae.types!==null&&(Z.types=ae.types),N.T=Z}},Se.unstable_useCacheRefresh=function(){return N.H.useCacheRefresh()},Se.use=function(M){return N.H.use(M)},Se.useActionState=function(M,Z,ae){return N.H.useActionState(M,Z,ae)},Se.useCallback=function(M,Z){return N.H.useCallback(M,Z)},Se.useContext=function(M){return N.H.useContext(M)},Se.useDebugValue=function(){},Se.useDeferredValue=function(M,Z){return N.H.useDeferredValue(M,Z)},Se.useEffect=function(M,Z){return N.H.useEffect(M,Z)},Se.useEffectEvent=function(M){return N.H.useEffectEvent(M)},Se.useId=function(){return N.H.useId()},Se.useImperativeHandle=function(M,Z,ae){return N.H.useImperativeHandle(M,Z,ae)},Se.useInsertionEffect=function(M,Z){return N.H.useInsertionEffect(M,Z)},Se.useLayoutEffect=function(M,Z){return N.H.useLayoutEffect(M,Z)},Se.useMemo=function(M,Z){return N.H.useMemo(M,Z)},Se.useOptimistic=function(M,Z){return N.H.useOptimistic(M,Z)},Se.useReducer=function(M,Z,ae){return N.H.useReducer(M,Z,ae)},Se.useRef=function(M){return N.H.useRef(M)},Se.useState=function(M){return N.H.useState(M)},Se.useSyncExternalStore=function(M,Z,ae){return N.H.useSyncExternalStore(M,Z,ae)},Se.useTransition=function(){return N.H.useTransition()},Se.version="19.2.0",Se}var h0;function qm(){return h0||(h0=1,Kd.exports=lA()),Kd.exports}var se=qm();const uA=rA(se);var Xd={exports:{}},Al={},$d={exports:{}},Jd={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var f0;function cA(){return f0||(f0=1,(function(s){function e(Y,re){var pe=Y.length;Y.push(re);e:for(;0<pe;){var ze=pe-1>>>1,Qe=Y[ze];if(0<l(Qe,re))Y[ze]=re,Y[pe]=Qe,pe=ze;else break e}}function i(Y){return Y.length===0?null:Y[0]}function r(Y){if(Y.length===0)return null;var re=Y[0],pe=Y.pop();if(pe!==re){Y[0]=pe;e:for(var ze=0,Qe=Y.length,M=Qe>>>1;ze<M;){var Z=2*(ze+1)-1,ae=Y[Z],ue=Z+1,Ee=Y[ue];if(0>l(ae,pe))ue<Qe&&0>l(Ee,ae)?(Y[ze]=Ee,Y[ue]=pe,ze=ue):(Y[ze]=ae,Y[Z]=pe,ze=Z);else if(ue<Qe&&0>l(Ee,pe))Y[ze]=Ee,Y[ue]=pe,ze=ue;else break e}}return re}function l(Y,re){var pe=Y.sortIndex-re.sortIndex;return pe!==0?pe:Y.id-re.id}if(s.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var u=performance;s.unstable_now=function(){return u.now()}}else{var f=Date,p=f.now();s.unstable_now=function(){return f.now()-p}}var y=[],g=[],T=1,A=null,x=3,V=!1,q=!1,G=!1,K=!1,ee=typeof setTimeout=="function"?setTimeout:null,te=typeof clearTimeout=="function"?clearTimeout:null,ne=typeof setImmediate<"u"?setImmediate:null;function he(Y){for(var re=i(g);re!==null;){if(re.callback===null)r(g);else if(re.startTime<=Y)r(g),re.sortIndex=re.expirationTime,e(y,re);else break;re=i(g)}}function ve(Y){if(G=!1,he(Y),!q)if(i(y)!==null)q=!0,Te||(Te=!0,j());else{var re=i(g);re!==null&&lt(ve,re.startTime-Y)}}var Te=!1,N=-1,w=5,I=-1;function k(){return K?!0:!(s.unstable_now()-I<w)}function D(){if(K=!1,Te){var Y=s.unstable_now();I=Y;var re=!0;try{e:{q=!1,G&&(G=!1,te(N),N=-1),V=!0;var pe=x;try{t:{for(he(Y),A=i(y);A!==null&&!(A.expirationTime>Y&&k());){var ze=A.callback;if(typeof ze=="function"){A.callback=null,x=A.priorityLevel;var Qe=ze(A.expirationTime<=Y);if(Y=s.unstable_now(),typeof Qe=="function"){A.callback=Qe,he(Y),re=!0;break t}A===i(y)&&r(y),he(Y)}else r(y);A=i(y)}if(A!==null)re=!0;else{var M=i(g);M!==null&&lt(ve,M.startTime-Y),re=!1}}break e}finally{A=null,x=pe,V=!1}re=void 0}}finally{re?j():Te=!1}}}var j;if(typeof ne=="function")j=function(){ne(D)};else if(typeof MessageChannel<"u"){var R=new MessageChannel,be=R.port2;R.port1.onmessage=D,j=function(){be.postMessage(null)}}else j=function(){ee(D,0)};function lt(Y,re){N=ee(function(){Y(s.unstable_now())},re)}s.unstable_IdlePriority=5,s.unstable_ImmediatePriority=1,s.unstable_LowPriority=4,s.unstable_NormalPriority=3,s.unstable_Profiling=null,s.unstable_UserBlockingPriority=2,s.unstable_cancelCallback=function(Y){Y.callback=null},s.unstable_forceFrameRate=function(Y){0>Y||125<Y?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):w=0<Y?Math.floor(1e3/Y):5},s.unstable_getCurrentPriorityLevel=function(){return x},s.unstable_next=function(Y){switch(x){case 1:case 2:case 3:var re=3;break;default:re=x}var pe=x;x=re;try{return Y()}finally{x=pe}},s.unstable_requestPaint=function(){K=!0},s.unstable_runWithPriority=function(Y,re){switch(Y){case 1:case 2:case 3:case 4:case 5:break;default:Y=3}var pe=x;x=Y;try{return re()}finally{x=pe}},s.unstable_scheduleCallback=function(Y,re,pe){var ze=s.unstable_now();switch(typeof pe=="object"&&pe!==null?(pe=pe.delay,pe=typeof pe=="number"&&0<pe?ze+pe:ze):pe=ze,Y){case 1:var Qe=-1;break;case 2:Qe=250;break;case 5:Qe=1073741823;break;case 4:Qe=1e4;break;default:Qe=5e3}return Qe=pe+Qe,Y={id:T++,callback:re,priorityLevel:Y,startTime:pe,expirationTime:Qe,sortIndex:-1},pe>ze?(Y.sortIndex=pe,e(g,Y),i(y)===null&&Y===i(g)&&(G?(te(N),N=-1):G=!0,lt(ve,pe-ze))):(Y.sortIndex=Qe,e(y,Y),q||V||(q=!0,Te||(Te=!0,j()))),Y},s.unstable_shouldYield=k,s.unstable_wrapCallback=function(Y){var re=x;return function(){var pe=x;x=re;try{return Y.apply(this,arguments)}finally{x=pe}}}})(Jd)),Jd}var d0;function hA(){return d0||(d0=1,$d.exports=cA()),$d.exports}var Zd={exports:{}},Jt={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var m0;function fA(){if(m0)return Jt;m0=1;var s=qm();function e(y){var g="https://react.dev/errors/"+y;if(1<arguments.length){g+="?args[]="+encodeURIComponent(arguments[1]);for(var T=2;T<arguments.length;T++)g+="&args[]="+encodeURIComponent(arguments[T])}return"Minified React error #"+y+"; visit "+g+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function i(){}var r={d:{f:i,r:function(){throw Error(e(522))},D:i,C:i,L:i,m:i,X:i,S:i,M:i},p:0,findDOMNode:null},l=Symbol.for("react.portal");function u(y,g,T){var A=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:l,key:A==null?null:""+A,children:y,containerInfo:g,implementation:T}}var f=s.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function p(y,g){if(y==="font")return"";if(typeof g=="string")return g==="use-credentials"?g:""}return Jt.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,Jt.createPortal=function(y,g){var T=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!g||g.nodeType!==1&&g.nodeType!==9&&g.nodeType!==11)throw Error(e(299));return u(y,g,null,T)},Jt.flushSync=function(y){var g=f.T,T=r.p;try{if(f.T=null,r.p=2,y)return y()}finally{f.T=g,r.p=T,r.d.f()}},Jt.preconnect=function(y,g){typeof y=="string"&&(g?(g=g.crossOrigin,g=typeof g=="string"?g==="use-credentials"?g:"":void 0):g=null,r.d.C(y,g))},Jt.prefetchDNS=function(y){typeof y=="string"&&r.d.D(y)},Jt.preinit=function(y,g){if(typeof y=="string"&&g&&typeof g.as=="string"){var T=g.as,A=p(T,g.crossOrigin),x=typeof g.integrity=="string"?g.integrity:void 0,V=typeof g.fetchPriority=="string"?g.fetchPriority:void 0;T==="style"?r.d.S(y,typeof g.precedence=="string"?g.precedence:void 0,{crossOrigin:A,integrity:x,fetchPriority:V}):T==="script"&&r.d.X(y,{crossOrigin:A,integrity:x,fetchPriority:V,nonce:typeof g.nonce=="string"?g.nonce:void 0})}},Jt.preinitModule=function(y,g){if(typeof y=="string")if(typeof g=="object"&&g!==null){if(g.as==null||g.as==="script"){var T=p(g.as,g.crossOrigin);r.d.M(y,{crossOrigin:T,integrity:typeof g.integrity=="string"?g.integrity:void 0,nonce:typeof g.nonce=="string"?g.nonce:void 0})}}else g==null&&r.d.M(y)},Jt.preload=function(y,g){if(typeof y=="string"&&typeof g=="object"&&g!==null&&typeof g.as=="string"){var T=g.as,A=p(T,g.crossOrigin);r.d.L(y,T,{crossOrigin:A,integrity:typeof g.integrity=="string"?g.integrity:void 0,nonce:typeof g.nonce=="string"?g.nonce:void 0,type:typeof g.type=="string"?g.type:void 0,fetchPriority:typeof g.fetchPriority=="string"?g.fetchPriority:void 0,referrerPolicy:typeof g.referrerPolicy=="string"?g.referrerPolicy:void 0,imageSrcSet:typeof g.imageSrcSet=="string"?g.imageSrcSet:void 0,imageSizes:typeof g.imageSizes=="string"?g.imageSizes:void 0,media:typeof g.media=="string"?g.media:void 0})}},Jt.preloadModule=function(y,g){if(typeof y=="string")if(g){var T=p(g.as,g.crossOrigin);r.d.m(y,{as:typeof g.as=="string"&&g.as!=="script"?g.as:void 0,crossOrigin:T,integrity:typeof g.integrity=="string"?g.integrity:void 0})}else r.d.m(y)},Jt.requestFormReset=function(y){r.d.r(y)},Jt.unstable_batchedUpdates=function(y,g){return y(g)},Jt.useFormState=function(y,g,T){return f.H.useFormState(y,g,T)},Jt.useFormStatus=function(){return f.H.useHostTransitionStatus()},Jt.version="19.2.0",Jt}var p0;function dA(){if(p0)return Zd.exports;p0=1;function s(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(s)}catch(e){console.error(e)}}return s(),Zd.exports=fA(),Zd.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var g0;function mA(){if(g0)return Al;g0=1;var s=hA(),e=qm(),i=dA();function r(t){var n="https://react.dev/errors/"+t;if(1<arguments.length){n+="?args[]="+encodeURIComponent(arguments[1]);for(var a=2;a<arguments.length;a++)n+="&args[]="+encodeURIComponent(arguments[a])}return"Minified React error #"+t+"; visit "+n+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function l(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function u(t){var n=t,a=t;if(t.alternate)for(;n.return;)n=n.return;else{t=n;do n=t,(n.flags&4098)!==0&&(a=n.return),t=n.return;while(t)}return n.tag===3?a:null}function f(t){if(t.tag===13){var n=t.memoizedState;if(n===null&&(t=t.alternate,t!==null&&(n=t.memoizedState)),n!==null)return n.dehydrated}return null}function p(t){if(t.tag===31){var n=t.memoizedState;if(n===null&&(t=t.alternate,t!==null&&(n=t.memoizedState)),n!==null)return n.dehydrated}return null}function y(t){if(u(t)!==t)throw Error(r(188))}function g(t){var n=t.alternate;if(!n){if(n=u(t),n===null)throw Error(r(188));return n!==t?null:t}for(var a=t,o=n;;){var h=a.return;if(h===null)break;var d=h.alternate;if(d===null){if(o=h.return,o!==null){a=o;continue}break}if(h.child===d.child){for(d=h.child;d;){if(d===a)return y(h),t;if(d===o)return y(h),n;d=d.sibling}throw Error(r(188))}if(a.return!==o.return)a=h,o=d;else{for(var _=!1,b=h.child;b;){if(b===a){_=!0,a=h,o=d;break}if(b===o){_=!0,o=h,a=d;break}b=b.sibling}if(!_){for(b=d.child;b;){if(b===a){_=!0,a=d,o=h;break}if(b===o){_=!0,o=d,a=h;break}b=b.sibling}if(!_)throw Error(r(189))}}if(a.alternate!==o)throw Error(r(190))}if(a.tag!==3)throw Error(r(188));return a.stateNode.current===a?t:n}function T(t){var n=t.tag;if(n===5||n===26||n===27||n===6)return t;for(t=t.child;t!==null;){if(n=T(t),n!==null)return n;t=t.sibling}return null}var A=Object.assign,x=Symbol.for("react.element"),V=Symbol.for("react.transitional.element"),q=Symbol.for("react.portal"),G=Symbol.for("react.fragment"),K=Symbol.for("react.strict_mode"),ee=Symbol.for("react.profiler"),te=Symbol.for("react.consumer"),ne=Symbol.for("react.context"),he=Symbol.for("react.forward_ref"),ve=Symbol.for("react.suspense"),Te=Symbol.for("react.suspense_list"),N=Symbol.for("react.memo"),w=Symbol.for("react.lazy"),I=Symbol.for("react.activity"),k=Symbol.for("react.memo_cache_sentinel"),D=Symbol.iterator;function j(t){return t===null||typeof t!="object"?null:(t=D&&t[D]||t["@@iterator"],typeof t=="function"?t:null)}var R=Symbol.for("react.client.reference");function be(t){if(t==null)return null;if(typeof t=="function")return t.$$typeof===R?null:t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case G:return"Fragment";case ee:return"Profiler";case K:return"StrictMode";case ve:return"Suspense";case Te:return"SuspenseList";case I:return"Activity"}if(typeof t=="object")switch(t.$$typeof){case q:return"Portal";case ne:return t.displayName||"Context";case te:return(t._context.displayName||"Context")+".Consumer";case he:var n=t.render;return t=t.displayName,t||(t=n.displayName||n.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case N:return n=t.displayName||null,n!==null?n:be(t.type)||"Memo";case w:n=t._payload,t=t._init;try{return be(t(n))}catch{}}return null}var lt=Array.isArray,Y=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,re=i.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,pe={pending:!1,data:null,method:null,action:null},ze=[],Qe=-1;function M(t){return{current:t}}function Z(t){0>Qe||(t.current=ze[Qe],ze[Qe]=null,Qe--)}function ae(t,n){Qe++,ze[Qe]=t.current,t.current=n}var ue=M(null),Ee=M(null),Ie=M(null),Le=M(null);function Mt(t,n){switch(ae(Ie,n),ae(Ee,t),ae(ue,null),n.nodeType){case 9:case 11:t=(t=n.documentElement)&&(t=t.namespaceURI)?D_(t):0;break;default:if(t=n.tagName,n=n.namespaceURI)n=D_(n),t=O_(n,t);else switch(t){case"svg":t=1;break;case"math":t=2;break;default:t=0}}Z(ue),ae(ue,t)}function rt(){Z(ue),Z(Ee),Z(Ie)}function mr(t){t.memoizedState!==null&&ae(Le,t);var n=ue.current,a=O_(n,t.type);n!==a&&(ae(Ee,t),ae(ue,a))}function sa(t){Ee.current===t&&(Z(ue),Z(Ee)),Le.current===t&&(Z(Le),_l._currentValue=pe)}var ra,aa;function ri(t){if(ra===void 0)try{throw Error()}catch(a){var n=a.stack.trim().match(/\n( *(at )?)/);ra=n&&n[1]||"",aa=-1<a.stack.indexOf(`
    at`)?" (<anonymous>)":-1<a.stack.indexOf("@")?"@unknown:0:0":""}return`
`+ra+t+aa}var _o=!1;function pr(t,n){if(!t||_o)return"";_o=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var o={DetermineComponentFrameRoot:function(){try{if(n){var $=function(){throw Error()};if(Object.defineProperty($.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct($,[])}catch(F){var B=F}Reflect.construct(t,[],$)}else{try{$.call()}catch(F){B=F}t.call($.prototype)}}else{try{throw Error()}catch(F){B=F}($=t())&&typeof $.catch=="function"&&$.catch(function(){})}}catch(F){if(F&&B&&typeof F.stack=="string")return[F.stack,B.stack]}return[null,null]}};o.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var h=Object.getOwnPropertyDescriptor(o.DetermineComponentFrameRoot,"name");h&&h.configurable&&Object.defineProperty(o.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var d=o.DetermineComponentFrameRoot(),_=d[0],b=d[1];if(_&&b){var C=_.split(`
`),z=b.split(`
`);for(h=o=0;o<C.length&&!C[o].includes("DetermineComponentFrameRoot");)o++;for(;h<z.length&&!z[h].includes("DetermineComponentFrameRoot");)h++;if(o===C.length||h===z.length)for(o=C.length-1,h=z.length-1;1<=o&&0<=h&&C[o]!==z[h];)h--;for(;1<=o&&0<=h;o--,h--)if(C[o]!==z[h]){if(o!==1||h!==1)do if(o--,h--,0>h||C[o]!==z[h]){var Q=`
`+C[o].replace(" at new "," at ");return t.displayName&&Q.includes("<anonymous>")&&(Q=Q.replace("<anonymous>",t.displayName)),Q}while(1<=o&&0<=h);break}}}finally{_o=!1,Error.prepareStackTrace=a}return(a=t?t.displayName||t.name:"")?ri(a):""}function vo(t,n){switch(t.tag){case 26:case 27:case 5:return ri(t.type);case 16:return ri("Lazy");case 13:return t.child!==n&&n!==null?ri("Suspense Fallback"):ri("Suspense");case 19:return ri("SuspenseList");case 0:case 15:return pr(t.type,!1);case 11:return pr(t.type.render,!1);case 1:return pr(t.type,!0);case 31:return ri("Activity");default:return""}}function Eo(t){try{var n="",a=null;do n+=vo(t,a),a=t,t=t.return;while(t);return n}catch(o){return`
Error generating stack: `+o.message+`
`+o.stack}}var vt=Object.prototype.hasOwnProperty,Vt=s.unstable_scheduleCallback,fs=s.unstable_cancelCallback,Kh=s.unstable_shouldYield,lu=s.unstable_requestPaint,nn=s.unstable_now,gr=s.unstable_getCurrentPriorityLevel,To=s.unstable_ImmediatePriority,bo=s.unstable_UserBlockingPriority,ds=s.unstable_NormalPriority,Xh=s.unstable_LowPriority,uu=s.unstable_IdlePriority,cu=s.log,hu=s.unstable_setDisableYieldValue,Hn=null,qt=null;function xn(t){if(typeof cu=="function"&&hu(t),qt&&typeof qt.setStrictMode=="function")try{qt.setStrictMode(Hn,t)}catch{}}var dt=Math.clz32?Math.clz32:du,fu=Math.log,oa=Math.LN2;function du(t){return t>>>=0,t===0?32:31-(fu(t)/oa|0)|0}var ai=256,yr=262144,Et=4194304;function oi(t){var n=t&42;if(n!==0)return n;switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return t&261888;case 262144:case 524288:case 1048576:case 2097152:return t&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return t&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return t}}function li(t,n,a){var o=t.pendingLanes;if(o===0)return 0;var h=0,d=t.suspendedLanes,_=t.pingedLanes;t=t.warmLanes;var b=o&134217727;return b!==0?(o=b&~d,o!==0?h=oi(o):(_&=b,_!==0?h=oi(_):a||(a=b&~t,a!==0&&(h=oi(a))))):(b=o&~d,b!==0?h=oi(b):_!==0?h=oi(_):a||(a=o&~t,a!==0&&(h=oi(a)))),h===0?0:n!==0&&n!==h&&(n&d)===0&&(d=h&-h,a=n&-n,d>=a||d===32&&(a&4194048)!==0)?n:h}function Fn(t,n){return(t.pendingLanes&~(t.suspendedLanes&~t.pingedLanes)&n)===0}function $h(t,n){switch(t){case 1:case 2:case 4:case 8:case 64:return n+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function mu(){var t=Et;return Et<<=1,(Et&62914560)===0&&(Et=4194304),t}function ui(t){for(var n=[],a=0;31>a;a++)n.push(t);return n}function _r(t,n){t.pendingLanes|=n,n!==268435456&&(t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0)}function Jh(t,n,a,o,h,d){var _=t.pendingLanes;t.pendingLanes=a,t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0,t.expiredLanes&=a,t.entangledLanes&=a,t.errorRecoveryDisabledLanes&=a,t.shellSuspendCounter=0;var b=t.entanglements,C=t.expirationTimes,z=t.hiddenUpdates;for(a=_&~a;0<a;){var Q=31-dt(a),$=1<<Q;b[Q]=0,C[Q]=-1;var B=z[Q];if(B!==null)for(z[Q]=null,Q=0;Q<B.length;Q++){var F=B[Q];F!==null&&(F.lane&=-536870913)}a&=~$}o!==0&&vr(t,o,0),d!==0&&h===0&&t.tag!==0&&(t.suspendedLanes|=d&~(_&~n))}function vr(t,n,a){t.pendingLanes|=n,t.suspendedLanes&=~n;var o=31-dt(n);t.entangledLanes|=n,t.entanglements[o]=t.entanglements[o]|1073741824|a&261930}function Ao(t,n){var a=t.entangledLanes|=n;for(t=t.entanglements;a;){var o=31-dt(a),h=1<<o;h&n|t[o]&n&&(t[o]|=n),a&=~h}}function So(t,n){var a=n&-n;return a=(a&42)!==0?1:Er(a),(a&(t.suspendedLanes|n))!==0?0:a}function Er(t){switch(t){case 2:t=1;break;case 8:t=4;break;case 32:t=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:t=128;break;case 268435456:t=134217728;break;default:t=0}return t}function ji(t){return t&=-t,2<t?8<t?(t&134217727)!==0?32:268435456:8:2}function pu(){var t=re.p;return t!==0?t:(t=window.event,t===void 0?32:t0(t.type))}function Gn(t,n){var a=re.p;try{return re.p=t,n()}finally{re.p=a}}var Qn=Math.random().toString(36).slice(2),Tt="__reactFiber$"+Qn,Lt="__reactProps$"+Qn,ci="__reactContainer$"+Qn,la="__reactEvents$"+Qn,Zh="__reactListeners$"+Qn,gu="__reactHandles$"+Qn,yu="__reactResources$"+Qn,hi="__reactMarker$"+Qn;function ua(t){delete t[Tt],delete t[Lt],delete t[la],delete t[Zh],delete t[gu]}function fi(t){var n=t[Tt];if(n)return n;for(var a=t.parentNode;a;){if(n=a[ci]||a[Tt]){if(a=n.alternate,n.child!==null||a!==null&&a.child!==null)for(t=U_(t);t!==null;){if(a=t[Tt])return a;t=U_(t)}return n}t=a,a=t.parentNode}return null}function Rn(t){if(t=t[Tt]||t[ci]){var n=t.tag;if(n===5||n===6||n===13||n===31||n===26||n===27||n===3)return t}return null}function pn(t){var n=t.tag;if(n===5||n===26||n===27||n===6)return t.stateNode;throw Error(r(33))}function di(t){var n=t[yu];return n||(n=t[yu]={hoistableStyles:new Map,hoistableScripts:new Map}),n}function bt(t){t[hi]=!0}var wo=new Set,xo={};function mi(t,n){pi(t,n),pi(t+"Capture",n)}function pi(t,n){for(xo[t]=n,t=0;t<n.length;t++)wo.add(n[t])}var Ro=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Io={},Co={};function _u(t){return vt.call(Co,t)?!0:vt.call(Io,t)?!1:Ro.test(t)?Co[t]=!0:(Io[t]=!0,!1)}function ca(t,n,a){if(_u(n))if(a===null)t.removeAttribute(n);else{switch(typeof a){case"undefined":case"function":case"symbol":t.removeAttribute(n);return;case"boolean":var o=n.toLowerCase().slice(0,5);if(o!=="data-"&&o!=="aria-"){t.removeAttribute(n);return}}t.setAttribute(n,""+a)}}function gn(t,n,a){if(a===null)t.removeAttribute(n);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(n);return}t.setAttribute(n,""+a)}}function At(t,n,a,o){if(o===null)t.removeAttribute(a);else{switch(typeof o){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(a);return}t.setAttributeNS(n,a,""+o)}}function Ut(t){switch(typeof t){case"bigint":case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function ms(t){var n=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(n==="checkbox"||n==="radio")}function No(t,n,a){var o=Object.getOwnPropertyDescriptor(t.constructor.prototype,n);if(!t.hasOwnProperty(n)&&typeof o<"u"&&typeof o.get=="function"&&typeof o.set=="function"){var h=o.get,d=o.set;return Object.defineProperty(t,n,{configurable:!0,get:function(){return h.call(this)},set:function(_){a=""+_,d.call(this,_)}}),Object.defineProperty(t,n,{enumerable:o.enumerable}),{getValue:function(){return a},setValue:function(_){a=""+_},stopTracking:function(){t._valueTracker=null,delete t[n]}}}}function Ye(t){if(!t._valueTracker){var n=ms(t)?"checked":"value";t._valueTracker=No(t,n,""+t[n])}}function Tr(t){if(!t)return!1;var n=t._valueTracker;if(!n)return!0;var a=n.getValue(),o="";return t&&(o=ms(t)?t.checked?"true":"false":t.value),t=o,t!==a?(n.setValue(t),!0):!1}function gi(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}var br=/[\n"\\]/g;function an(t){return t.replace(br,function(n){return"\\"+n.charCodeAt(0).toString(16)+" "})}function ha(t,n,a,o,h,d,_,b){t.name="",_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"?t.type=_:t.removeAttribute("type"),n!=null?_==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+Ut(n)):t.value!==""+Ut(n)&&(t.value=""+Ut(n)):_!=="submit"&&_!=="reset"||t.removeAttribute("value"),n!=null?Do(t,_,Ut(n)):a!=null?Do(t,_,Ut(a)):o!=null&&t.removeAttribute("value"),h==null&&d!=null&&(t.defaultChecked=!!d),h!=null&&(t.checked=h&&typeof h!="function"&&typeof h!="symbol"),b!=null&&typeof b!="function"&&typeof b!="symbol"&&typeof b!="boolean"?t.name=""+Ut(b):t.removeAttribute("name")}function vu(t,n,a,o,h,d,_,b){if(d!=null&&typeof d!="function"&&typeof d!="symbol"&&typeof d!="boolean"&&(t.type=d),n!=null||a!=null){if(!(d!=="submit"&&d!=="reset"||n!=null)){Ye(t);return}a=a!=null?""+Ut(a):"",n=n!=null?""+Ut(n):a,b||n===t.value||(t.value=n),t.defaultValue=n}o=o??h,o=typeof o!="function"&&typeof o!="symbol"&&!!o,t.checked=b?t.checked:!!o,t.defaultChecked=!!o,_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"&&(t.name=_),Ye(t)}function Do(t,n,a){n==="number"&&gi(t.ownerDocument)===t||t.defaultValue===""+a||(t.defaultValue=""+a)}function ps(t,n,a,o){if(t=t.options,n){n={};for(var h=0;h<a.length;h++)n["$"+a[h]]=!0;for(a=0;a<t.length;a++)h=n.hasOwnProperty("$"+t[a].value),t[a].selected!==h&&(t[a].selected=h),h&&o&&(t[a].defaultSelected=!0)}else{for(a=""+Ut(a),n=null,h=0;h<t.length;h++){if(t[h].value===a){t[h].selected=!0,o&&(t[h].defaultSelected=!0);return}n!==null||t[h].disabled||(n=t[h])}n!==null&&(n.selected=!0)}}function Eu(t,n,a){if(n!=null&&(n=""+Ut(n),n!==t.value&&(t.value=n),a==null)){t.defaultValue!==n&&(t.defaultValue=n);return}t.defaultValue=a!=null?""+Ut(a):""}function gs(t,n,a,o){if(n==null){if(o!=null){if(a!=null)throw Error(r(92));if(lt(o)){if(1<o.length)throw Error(r(93));o=o[0]}a=o}a==null&&(a=""),n=a}a=Ut(n),t.defaultValue=a,o=t.textContent,o===a&&o!==""&&o!==null&&(t.value=o),Ye(t)}function on(t,n){if(n){var a=t.firstChild;if(a&&a===t.lastChild&&a.nodeType===3){a.nodeValue=n;return}}t.textContent=n}var Tu=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Oo(t,n,a){var o=n.indexOf("--")===0;a==null||typeof a=="boolean"||a===""?o?t.setProperty(n,""):n==="float"?t.cssFloat="":t[n]="":o?t.setProperty(n,a):typeof a!="number"||a===0||Tu.has(n)?n==="float"?t.cssFloat=a:t[n]=(""+a).trim():t[n]=a+"px"}function Mo(t,n,a){if(n!=null&&typeof n!="object")throw Error(r(62));if(t=t.style,a!=null){for(var o in a)!a.hasOwnProperty(o)||n!=null&&n.hasOwnProperty(o)||(o.indexOf("--")===0?t.setProperty(o,""):o==="float"?t.cssFloat="":t[o]="");for(var h in n)o=n[h],n.hasOwnProperty(h)&&a[h]!==o&&Oo(t,h,o)}else for(var d in n)n.hasOwnProperty(d)&&Oo(t,d,n[d])}function fa(t){if(t.indexOf("-")===-1)return!1;switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var bu=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),ys=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function da(t){return ys.test(""+t)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":t}function Yn(){}var Vo=null;function In(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var _s=null,yi=null;function Ar(t){var n=Rn(t);if(n&&(t=n.stateNode)){var a=t[Lt]||null;e:switch(t=n.stateNode,n.type){case"input":if(ha(t,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name),n=a.name,a.type==="radio"&&n!=null){for(a=t;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll('input[name="'+an(""+n)+'"][type="radio"]'),n=0;n<a.length;n++){var o=a[n];if(o!==t&&o.form===t.form){var h=o[Lt]||null;if(!h)throw Error(r(90));ha(o,h.value,h.defaultValue,h.defaultValue,h.checked,h.defaultChecked,h.type,h.name)}}for(n=0;n<a.length;n++)o=a[n],o.form===t.form&&Tr(o)}break e;case"textarea":Eu(t,a.value,a.defaultValue);break e;case"select":n=a.value,n!=null&&ps(t,!!a.multiple,n,!1)}}}var ma=!1;function vs(t,n,a){if(ma)return t(n,a);ma=!0;try{var o=t(n);return o}finally{if(ma=!1,(_s!==null||yi!==null)&&(pc(),_s&&(n=_s,t=yi,yi=_s=null,Ar(n),t)))for(n=0;n<t.length;n++)Ar(t[n])}}function Kn(t,n){var a=t.stateNode;if(a===null)return null;var o=a[Lt]||null;if(o===null)return null;a=o[n];e:switch(n){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(o=!o.disabled)||(t=t.type,o=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!o;break e;default:t=!1}if(t)return null;if(a&&typeof a!="function")throw Error(r(231,n,typeof a));return a}var Cn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Sr=!1;if(Cn)try{var $e={};Object.defineProperty($e,"passive",{get:function(){Sr=!0}}),window.addEventListener("test",$e,$e),window.removeEventListener("test",$e,$e)}catch{Sr=!1}var _i=null,ko=null,wr=null;function jo(){if(wr)return wr;var t,n=ko,a=n.length,o,h="value"in _i?_i.value:_i.textContent,d=h.length;for(t=0;t<a&&n[t]===h[t];t++);var _=a-t;for(o=1;o<=_&&n[a-o]===h[d-o];o++);return wr=h.slice(t,1<o?1-o:void 0)}function xr(t){var n=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&n===13&&(t=13)):t=n,t===10&&(t=13),32<=t||t===13?t:0}function Pi(){return!0}function Xn(){return!1}function Ht(t){function n(a,o,h,d,_){this._reactName=a,this._targetInst=h,this.type=o,this.nativeEvent=d,this.target=_,this.currentTarget=null;for(var b in t)t.hasOwnProperty(b)&&(a=t[b],this[b]=a?a(d):d[b]);return this.isDefaultPrevented=(d.defaultPrevented!=null?d.defaultPrevented:d.returnValue===!1)?Pi:Xn,this.isPropagationStopped=Xn,this}return A(n.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=Pi)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=Pi)},persist:function(){},isPersistent:Pi}),n}var Li={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},vi=Ht(Li),Es=A({},Li,{view:0,detail:0}),Po=Ht(Es),Ts,pa,Ei,ga=A({},Es,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:bs,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Ei&&(Ei&&t.type==="mousemove"?(Ts=t.screenX-Ei.screenX,pa=t.screenY-Ei.screenY):pa=Ts=0,Ei=t),Ts)},movementY:function(t){return"movementY"in t?t.movementY:pa}}),Lo=Ht(ga),Rr=A({},ga,{dataTransfer:0}),Au=Ht(Rr),Su=A({},Es,{relatedTarget:0}),Ir=Ht(Su),Uo=A({},Li,{animationName:0,elapsedTime:0,pseudoElement:0}),wu=Ht(Uo),ya=A({},Li,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),xu=Ht(ya),Ru=A({},Li,{data:0}),Ti=Ht(Ru),Iu={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Cu={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Nu={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Du(t){var n=this.nativeEvent;return n.getModifierState?n.getModifierState(t):(t=Nu[t])?!!n[t]:!1}function bs(){return Du}var sn=A({},Es,{key:function(t){if(t.key){var n=Iu[t.key]||t.key;if(n!=="Unidentified")return n}return t.type==="keypress"?(t=xr(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?Cu[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:bs,charCode:function(t){return t.type==="keypress"?xr(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?xr(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),Ou=Ht(sn),Mu=A({},ga,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Ui=Ht(Mu),c=A({},Es,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:bs}),m=Ht(c),v=A({},Li,{propertyName:0,elapsedTime:0,pseudoElement:0}),S=Ht(v),L=A({},ga,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),H=Ht(L),ie=A({},Li,{newState:0,oldState:0}),xe=Ht(ie),mt=[9,13,27,32],He=Cn&&"CompositionEvent"in window,at=null;Cn&&"documentMode"in document&&(at=document.documentMode);var Nn=Cn&&"TextEvent"in window&&!at,bi=Cn&&(!He||at&&8<at&&11>=at),$n=" ",Jn=!1;function Cr(t,n){switch(t){case"keyup":return mt.indexOf(n.keyCode)!==-1;case"keydown":return n.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function _a(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var va=!1;function C1(t,n){switch(t){case"compositionend":return _a(n);case"keypress":return n.which!==32?null:(Jn=!0,$n);case"textInput":return t=n.data,t===$n&&Jn?null:t;default:return null}}function N1(t,n){if(va)return t==="compositionend"||!He&&Cr(t,n)?(t=jo(),wr=ko=_i=null,va=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(n.ctrlKey||n.altKey||n.metaKey)||n.ctrlKey&&n.altKey){if(n.char&&1<n.char.length)return n.char;if(n.which)return String.fromCharCode(n.which)}return null;case"compositionend":return bi&&n.locale!=="ko"?null:n.data;default:return null}}var D1={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function qp(t){var n=t&&t.nodeName&&t.nodeName.toLowerCase();return n==="input"?!!D1[t.type]:n==="textarea"}function Hp(t,n,a,o){_s?yi?yi.push(o):yi=[o]:_s=o,n=bc(n,"onChange"),0<n.length&&(a=new vi("onChange","change",null,a,o),t.push({event:a,listeners:n}))}var zo=null,Bo=null;function O1(t){w_(t,0)}function Vu(t){var n=pn(t);if(Tr(n))return t}function Fp(t,n){if(t==="change")return n}var Gp=!1;if(Cn){var Wh;if(Cn){var ef="oninput"in document;if(!ef){var Qp=document.createElement("div");Qp.setAttribute("oninput","return;"),ef=typeof Qp.oninput=="function"}Wh=ef}else Wh=!1;Gp=Wh&&(!document.documentMode||9<document.documentMode)}function Yp(){zo&&(zo.detachEvent("onpropertychange",Kp),Bo=zo=null)}function Kp(t){if(t.propertyName==="value"&&Vu(Bo)){var n=[];Hp(n,Bo,t,In(t)),vs(O1,n)}}function M1(t,n,a){t==="focusin"?(Yp(),zo=n,Bo=a,zo.attachEvent("onpropertychange",Kp)):t==="focusout"&&Yp()}function V1(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Vu(Bo)}function k1(t,n){if(t==="click")return Vu(n)}function j1(t,n){if(t==="input"||t==="change")return Vu(n)}function P1(t,n){return t===n&&(t!==0||1/t===1/n)||t!==t&&n!==n}var yn=typeof Object.is=="function"?Object.is:P1;function qo(t,n){if(yn(t,n))return!0;if(typeof t!="object"||t===null||typeof n!="object"||n===null)return!1;var a=Object.keys(t),o=Object.keys(n);if(a.length!==o.length)return!1;for(o=0;o<a.length;o++){var h=a[o];if(!vt.call(n,h)||!yn(t[h],n[h]))return!1}return!0}function Xp(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function $p(t,n){var a=Xp(t);t=0;for(var o;a;){if(a.nodeType===3){if(o=t+a.textContent.length,t<=n&&o>=n)return{node:a,offset:n-t};t=o}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=Xp(a)}}function Jp(t,n){return t&&n?t===n?!0:t&&t.nodeType===3?!1:n&&n.nodeType===3?Jp(t,n.parentNode):"contains"in t?t.contains(n):t.compareDocumentPosition?!!(t.compareDocumentPosition(n)&16):!1:!1}function Zp(t){t=t!=null&&t.ownerDocument!=null&&t.ownerDocument.defaultView!=null?t.ownerDocument.defaultView:window;for(var n=gi(t.document);n instanceof t.HTMLIFrameElement;){try{var a=typeof n.contentWindow.location.href=="string"}catch{a=!1}if(a)t=n.contentWindow;else break;n=gi(t.document)}return n}function tf(t){var n=t&&t.nodeName&&t.nodeName.toLowerCase();return n&&(n==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||n==="textarea"||t.contentEditable==="true")}var L1=Cn&&"documentMode"in document&&11>=document.documentMode,Ea=null,nf=null,Ho=null,sf=!1;function Wp(t,n,a){var o=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;sf||Ea==null||Ea!==gi(o)||(o=Ea,"selectionStart"in o&&tf(o)?o={start:o.selectionStart,end:o.selectionEnd}:(o=(o.ownerDocument&&o.ownerDocument.defaultView||window).getSelection(),o={anchorNode:o.anchorNode,anchorOffset:o.anchorOffset,focusNode:o.focusNode,focusOffset:o.focusOffset}),Ho&&qo(Ho,o)||(Ho=o,o=bc(nf,"onSelect"),0<o.length&&(n=new vi("onSelect","select",null,n,a),t.push({event:n,listeners:o}),n.target=Ea)))}function Nr(t,n){var a={};return a[t.toLowerCase()]=n.toLowerCase(),a["Webkit"+t]="webkit"+n,a["Moz"+t]="moz"+n,a}var Ta={animationend:Nr("Animation","AnimationEnd"),animationiteration:Nr("Animation","AnimationIteration"),animationstart:Nr("Animation","AnimationStart"),transitionrun:Nr("Transition","TransitionRun"),transitionstart:Nr("Transition","TransitionStart"),transitioncancel:Nr("Transition","TransitionCancel"),transitionend:Nr("Transition","TransitionEnd")},rf={},eg={};Cn&&(eg=document.createElement("div").style,"AnimationEvent"in window||(delete Ta.animationend.animation,delete Ta.animationiteration.animation,delete Ta.animationstart.animation),"TransitionEvent"in window||delete Ta.transitionend.transition);function Dr(t){if(rf[t])return rf[t];if(!Ta[t])return t;var n=Ta[t],a;for(a in n)if(n.hasOwnProperty(a)&&a in eg)return rf[t]=n[a];return t}var tg=Dr("animationend"),ng=Dr("animationiteration"),ig=Dr("animationstart"),U1=Dr("transitionrun"),z1=Dr("transitionstart"),B1=Dr("transitioncancel"),sg=Dr("transitionend"),rg=new Map,af="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");af.push("scrollEnd");function Zn(t,n){rg.set(t,n),mi(n,[t])}var ku=typeof reportError=="function"?reportError:function(t){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var n=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof t=="object"&&t!==null&&typeof t.message=="string"?String(t.message):String(t),error:t});if(!window.dispatchEvent(n))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",t);return}console.error(t)},Dn=[],ba=0,of=0;function ju(){for(var t=ba,n=of=ba=0;n<t;){var a=Dn[n];Dn[n++]=null;var o=Dn[n];Dn[n++]=null;var h=Dn[n];Dn[n++]=null;var d=Dn[n];if(Dn[n++]=null,o!==null&&h!==null){var _=o.pending;_===null?h.next=h:(h.next=_.next,_.next=h),o.pending=h}d!==0&&ag(a,h,d)}}function Pu(t,n,a,o){Dn[ba++]=t,Dn[ba++]=n,Dn[ba++]=a,Dn[ba++]=o,of|=o,t.lanes|=o,t=t.alternate,t!==null&&(t.lanes|=o)}function lf(t,n,a,o){return Pu(t,n,a,o),Lu(t)}function Or(t,n){return Pu(t,null,null,n),Lu(t)}function ag(t,n,a){t.lanes|=a;var o=t.alternate;o!==null&&(o.lanes|=a);for(var h=!1,d=t.return;d!==null;)d.childLanes|=a,o=d.alternate,o!==null&&(o.childLanes|=a),d.tag===22&&(t=d.stateNode,t===null||t._visibility&1||(h=!0)),t=d,d=d.return;return t.tag===3?(d=t.stateNode,h&&n!==null&&(h=31-dt(a),t=d.hiddenUpdates,o=t[h],o===null?t[h]=[n]:o.push(n),n.lane=a|536870912),d):null}function Lu(t){if(50<hl)throw hl=0,yd=null,Error(r(185));for(var n=t.return;n!==null;)t=n,n=t.return;return t.tag===3?t.stateNode:null}var Aa={};function q1(t,n,a,o){this.tag=t,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=n,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=o,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function _n(t,n,a,o){return new q1(t,n,a,o)}function uf(t){return t=t.prototype,!(!t||!t.isReactComponent)}function zi(t,n){var a=t.alternate;return a===null?(a=_n(t.tag,n,t.key,t.mode),a.elementType=t.elementType,a.type=t.type,a.stateNode=t.stateNode,a.alternate=t,t.alternate=a):(a.pendingProps=n,a.type=t.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=t.flags&65011712,a.childLanes=t.childLanes,a.lanes=t.lanes,a.child=t.child,a.memoizedProps=t.memoizedProps,a.memoizedState=t.memoizedState,a.updateQueue=t.updateQueue,n=t.dependencies,a.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext},a.sibling=t.sibling,a.index=t.index,a.ref=t.ref,a.refCleanup=t.refCleanup,a}function og(t,n){t.flags&=65011714;var a=t.alternate;return a===null?(t.childLanes=0,t.lanes=n,t.child=null,t.subtreeFlags=0,t.memoizedProps=null,t.memoizedState=null,t.updateQueue=null,t.dependencies=null,t.stateNode=null):(t.childLanes=a.childLanes,t.lanes=a.lanes,t.child=a.child,t.subtreeFlags=0,t.deletions=null,t.memoizedProps=a.memoizedProps,t.memoizedState=a.memoizedState,t.updateQueue=a.updateQueue,t.type=a.type,n=a.dependencies,t.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),t}function Uu(t,n,a,o,h,d){var _=0;if(o=t,typeof t=="function")uf(t)&&(_=1);else if(typeof t=="string")_=Yb(t,a,ue.current)?26:t==="html"||t==="head"||t==="body"?27:5;else e:switch(t){case I:return t=_n(31,a,n,h),t.elementType=I,t.lanes=d,t;case G:return Mr(a.children,h,d,n);case K:_=8,h|=24;break;case ee:return t=_n(12,a,n,h|2),t.elementType=ee,t.lanes=d,t;case ve:return t=_n(13,a,n,h),t.elementType=ve,t.lanes=d,t;case Te:return t=_n(19,a,n,h),t.elementType=Te,t.lanes=d,t;default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case ne:_=10;break e;case te:_=9;break e;case he:_=11;break e;case N:_=14;break e;case w:_=16,o=null;break e}_=29,a=Error(r(130,t===null?"null":typeof t,"")),o=null}return n=_n(_,a,n,h),n.elementType=t,n.type=o,n.lanes=d,n}function Mr(t,n,a,o){return t=_n(7,t,o,n),t.lanes=a,t}function cf(t,n,a){return t=_n(6,t,null,n),t.lanes=a,t}function lg(t){var n=_n(18,null,null,0);return n.stateNode=t,n}function hf(t,n,a){return n=_n(4,t.children!==null?t.children:[],t.key,n),n.lanes=a,n.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},n}var ug=new WeakMap;function On(t,n){if(typeof t=="object"&&t!==null){var a=ug.get(t);return a!==void 0?a:(n={value:t,source:n,stack:Eo(n)},ug.set(t,n),n)}return{value:t,source:n,stack:Eo(n)}}var Sa=[],wa=0,zu=null,Fo=0,Mn=[],Vn=0,As=null,Ai=1,Si="";function Bi(t,n){Sa[wa++]=Fo,Sa[wa++]=zu,zu=t,Fo=n}function cg(t,n,a){Mn[Vn++]=Ai,Mn[Vn++]=Si,Mn[Vn++]=As,As=t;var o=Ai;t=Si;var h=32-dt(o)-1;o&=~(1<<h),a+=1;var d=32-dt(n)+h;if(30<d){var _=h-h%5;d=(o&(1<<_)-1).toString(32),o>>=_,h-=_,Ai=1<<32-dt(n)+h|a<<h|o,Si=d+t}else Ai=1<<d|a<<h|o,Si=t}function ff(t){t.return!==null&&(Bi(t,1),cg(t,1,0))}function df(t){for(;t===zu;)zu=Sa[--wa],Sa[wa]=null,Fo=Sa[--wa],Sa[wa]=null;for(;t===As;)As=Mn[--Vn],Mn[Vn]=null,Si=Mn[--Vn],Mn[Vn]=null,Ai=Mn[--Vn],Mn[Vn]=null}function hg(t,n){Mn[Vn++]=Ai,Mn[Vn++]=Si,Mn[Vn++]=As,Ai=n.id,Si=n.overflow,As=t}var Ft=null,nt=null,Pe=!1,Ss=null,kn=!1,mf=Error(r(519));function ws(t){var n=Error(r(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Go(On(n,t)),mf}function fg(t){var n=t.stateNode,a=t.type,o=t.memoizedProps;switch(n[Tt]=t,n[Lt]=o,a){case"dialog":De("cancel",n),De("close",n);break;case"iframe":case"object":case"embed":De("load",n);break;case"video":case"audio":for(a=0;a<dl.length;a++)De(dl[a],n);break;case"source":De("error",n);break;case"img":case"image":case"link":De("error",n),De("load",n);break;case"details":De("toggle",n);break;case"input":De("invalid",n),vu(n,o.value,o.defaultValue,o.checked,o.defaultChecked,o.type,o.name,!0);break;case"select":De("invalid",n);break;case"textarea":De("invalid",n),gs(n,o.value,o.defaultValue,o.children)}a=o.children,typeof a!="string"&&typeof a!="number"&&typeof a!="bigint"||n.textContent===""+a||o.suppressHydrationWarning===!0||C_(n.textContent,a)?(o.popover!=null&&(De("beforetoggle",n),De("toggle",n)),o.onScroll!=null&&De("scroll",n),o.onScrollEnd!=null&&De("scrollend",n),o.onClick!=null&&(n.onclick=Yn),n=!0):n=!1,n||ws(t,!0)}function dg(t){for(Ft=t.return;Ft;)switch(Ft.tag){case 5:case 31:case 13:kn=!1;return;case 27:case 3:kn=!0;return;default:Ft=Ft.return}}function xa(t){if(t!==Ft)return!1;if(!Pe)return dg(t),Pe=!0,!1;var n=t.tag,a;if((a=n!==3&&n!==27)&&((a=n===5)&&(a=t.type,a=!(a!=="form"&&a!=="button")||Od(t.type,t.memoizedProps)),a=!a),a&&nt&&ws(t),dg(t),n===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(r(317));nt=L_(t)}else if(n===31){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(r(317));nt=L_(t)}else n===27?(n=nt,Us(t.type)?(t=Pd,Pd=null,nt=t):nt=n):nt=Ft?Pn(t.stateNode.nextSibling):null;return!0}function Vr(){nt=Ft=null,Pe=!1}function pf(){var t=Ss;return t!==null&&(hn===null?hn=t:hn.push.apply(hn,t),Ss=null),t}function Go(t){Ss===null?Ss=[t]:Ss.push(t)}var gf=M(null),kr=null,qi=null;function xs(t,n,a){ae(gf,n._currentValue),n._currentValue=a}function Hi(t){t._currentValue=gf.current,Z(gf)}function yf(t,n,a){for(;t!==null;){var o=t.alternate;if((t.childLanes&n)!==n?(t.childLanes|=n,o!==null&&(o.childLanes|=n)):o!==null&&(o.childLanes&n)!==n&&(o.childLanes|=n),t===a)break;t=t.return}}function _f(t,n,a,o){var h=t.child;for(h!==null&&(h.return=t);h!==null;){var d=h.dependencies;if(d!==null){var _=h.child;d=d.firstContext;e:for(;d!==null;){var b=d;d=h;for(var C=0;C<n.length;C++)if(b.context===n[C]){d.lanes|=a,b=d.alternate,b!==null&&(b.lanes|=a),yf(d.return,a,t),o||(_=null);break e}d=b.next}}else if(h.tag===18){if(_=h.return,_===null)throw Error(r(341));_.lanes|=a,d=_.alternate,d!==null&&(d.lanes|=a),yf(_,a,t),_=null}else _=h.child;if(_!==null)_.return=h;else for(_=h;_!==null;){if(_===t){_=null;break}if(h=_.sibling,h!==null){h.return=_.return,_=h;break}_=_.return}h=_}}function Ra(t,n,a,o){t=null;for(var h=n,d=!1;h!==null;){if(!d){if((h.flags&524288)!==0)d=!0;else if((h.flags&262144)!==0)break}if(h.tag===10){var _=h.alternate;if(_===null)throw Error(r(387));if(_=_.memoizedProps,_!==null){var b=h.type;yn(h.pendingProps.value,_.value)||(t!==null?t.push(b):t=[b])}}else if(h===Le.current){if(_=h.alternate,_===null)throw Error(r(387));_.memoizedState.memoizedState!==h.memoizedState.memoizedState&&(t!==null?t.push(_l):t=[_l])}h=h.return}t!==null&&_f(n,t,a,o),n.flags|=262144}function Bu(t){for(t=t.firstContext;t!==null;){if(!yn(t.context._currentValue,t.memoizedValue))return!0;t=t.next}return!1}function jr(t){kr=t,qi=null,t=t.dependencies,t!==null&&(t.firstContext=null)}function Gt(t){return mg(kr,t)}function qu(t,n){return kr===null&&jr(t),mg(t,n)}function mg(t,n){var a=n._currentValue;if(n={context:n,memoizedValue:a,next:null},qi===null){if(t===null)throw Error(r(308));qi=n,t.dependencies={lanes:0,firstContext:n},t.flags|=524288}else qi=qi.next=n;return a}var H1=typeof AbortController<"u"?AbortController:function(){var t=[],n=this.signal={aborted:!1,addEventListener:function(a,o){t.push(o)}};this.abort=function(){n.aborted=!0,t.forEach(function(a){return a()})}},F1=s.unstable_scheduleCallback,G1=s.unstable_NormalPriority,St={$$typeof:ne,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function vf(){return{controller:new H1,data:new Map,refCount:0}}function Qo(t){t.refCount--,t.refCount===0&&F1(G1,function(){t.controller.abort()})}var Yo=null,Ef=0,Ia=0,Ca=null;function Q1(t,n){if(Yo===null){var a=Yo=[];Ef=0,Ia=Ad(),Ca={status:"pending",value:void 0,then:function(o){a.push(o)}}}return Ef++,n.then(pg,pg),n}function pg(){if(--Ef===0&&Yo!==null){Ca!==null&&(Ca.status="fulfilled");var t=Yo;Yo=null,Ia=0,Ca=null;for(var n=0;n<t.length;n++)(0,t[n])()}}function Y1(t,n){var a=[],o={status:"pending",value:null,reason:null,then:function(h){a.push(h)}};return t.then(function(){o.status="fulfilled",o.value=n;for(var h=0;h<a.length;h++)(0,a[h])(n)},function(h){for(o.status="rejected",o.reason=h,h=0;h<a.length;h++)(0,a[h])(void 0)}),o}var gg=Y.S;Y.S=function(t,n){Wy=nn(),typeof n=="object"&&n!==null&&typeof n.then=="function"&&Q1(t,n),gg!==null&&gg(t,n)};var Pr=M(null);function Tf(){var t=Pr.current;return t!==null?t:et.pooledCache}function Hu(t,n){n===null?ae(Pr,Pr.current):ae(Pr,n.pool)}function yg(){var t=Tf();return t===null?null:{parent:St._currentValue,pool:t}}var Na=Error(r(460)),bf=Error(r(474)),Fu=Error(r(542)),Gu={then:function(){}};function _g(t){return t=t.status,t==="fulfilled"||t==="rejected"}function vg(t,n,a){switch(a=t[a],a===void 0?t.push(n):a!==n&&(n.then(Yn,Yn),n=a),n.status){case"fulfilled":return n.value;case"rejected":throw t=n.reason,Tg(t),t;default:if(typeof n.status=="string")n.then(Yn,Yn);else{if(t=et,t!==null&&100<t.shellSuspendCounter)throw Error(r(482));t=n,t.status="pending",t.then(function(o){if(n.status==="pending"){var h=n;h.status="fulfilled",h.value=o}},function(o){if(n.status==="pending"){var h=n;h.status="rejected",h.reason=o}})}switch(n.status){case"fulfilled":return n.value;case"rejected":throw t=n.reason,Tg(t),t}throw Ur=n,Na}}function Lr(t){try{var n=t._init;return n(t._payload)}catch(a){throw a!==null&&typeof a=="object"&&typeof a.then=="function"?(Ur=a,Na):a}}var Ur=null;function Eg(){if(Ur===null)throw Error(r(459));var t=Ur;return Ur=null,t}function Tg(t){if(t===Na||t===Fu)throw Error(r(483))}var Da=null,Ko=0;function Qu(t){var n=Ko;return Ko+=1,Da===null&&(Da=[]),vg(Da,t,n)}function Xo(t,n){n=n.props.ref,t.ref=n!==void 0?n:null}function Yu(t,n){throw n.$$typeof===x?Error(r(525)):(t=Object.prototype.toString.call(n),Error(r(31,t==="[object Object]"?"object with keys {"+Object.keys(n).join(", ")+"}":t)))}function bg(t){function n(P,O){if(t){var U=P.deletions;U===null?(P.deletions=[O],P.flags|=16):U.push(O)}}function a(P,O){if(!t)return null;for(;O!==null;)n(P,O),O=O.sibling;return null}function o(P){for(var O=new Map;P!==null;)P.key!==null?O.set(P.key,P):O.set(P.index,P),P=P.sibling;return O}function h(P,O){return P=zi(P,O),P.index=0,P.sibling=null,P}function d(P,O,U){return P.index=U,t?(U=P.alternate,U!==null?(U=U.index,U<O?(P.flags|=67108866,O):U):(P.flags|=67108866,O)):(P.flags|=1048576,O)}function _(P){return t&&P.alternate===null&&(P.flags|=67108866),P}function b(P,O,U,X){return O===null||O.tag!==6?(O=cf(U,P.mode,X),O.return=P,O):(O=h(O,U),O.return=P,O)}function C(P,O,U,X){var de=U.type;return de===G?Q(P,O,U.props.children,X,U.key):O!==null&&(O.elementType===de||typeof de=="object"&&de!==null&&de.$$typeof===w&&Lr(de)===O.type)?(O=h(O,U.props),Xo(O,U),O.return=P,O):(O=Uu(U.type,U.key,U.props,null,P.mode,X),Xo(O,U),O.return=P,O)}function z(P,O,U,X){return O===null||O.tag!==4||O.stateNode.containerInfo!==U.containerInfo||O.stateNode.implementation!==U.implementation?(O=hf(U,P.mode,X),O.return=P,O):(O=h(O,U.children||[]),O.return=P,O)}function Q(P,O,U,X,de){return O===null||O.tag!==7?(O=Mr(U,P.mode,X,de),O.return=P,O):(O=h(O,U),O.return=P,O)}function $(P,O,U){if(typeof O=="string"&&O!==""||typeof O=="number"||typeof O=="bigint")return O=cf(""+O,P.mode,U),O.return=P,O;if(typeof O=="object"&&O!==null){switch(O.$$typeof){case V:return U=Uu(O.type,O.key,O.props,null,P.mode,U),Xo(U,O),U.return=P,U;case q:return O=hf(O,P.mode,U),O.return=P,O;case w:return O=Lr(O),$(P,O,U)}if(lt(O)||j(O))return O=Mr(O,P.mode,U,null),O.return=P,O;if(typeof O.then=="function")return $(P,Qu(O),U);if(O.$$typeof===ne)return $(P,qu(P,O),U);Yu(P,O)}return null}function B(P,O,U,X){var de=O!==null?O.key:null;if(typeof U=="string"&&U!==""||typeof U=="number"||typeof U=="bigint")return de!==null?null:b(P,O,""+U,X);if(typeof U=="object"&&U!==null){switch(U.$$typeof){case V:return U.key===de?C(P,O,U,X):null;case q:return U.key===de?z(P,O,U,X):null;case w:return U=Lr(U),B(P,O,U,X)}if(lt(U)||j(U))return de!==null?null:Q(P,O,U,X,null);if(typeof U.then=="function")return B(P,O,Qu(U),X);if(U.$$typeof===ne)return B(P,O,qu(P,U),X);Yu(P,U)}return null}function F(P,O,U,X,de){if(typeof X=="string"&&X!==""||typeof X=="number"||typeof X=="bigint")return P=P.get(U)||null,b(O,P,""+X,de);if(typeof X=="object"&&X!==null){switch(X.$$typeof){case V:return P=P.get(X.key===null?U:X.key)||null,C(O,P,X,de);case q:return P=P.get(X.key===null?U:X.key)||null,z(O,P,X,de);case w:return X=Lr(X),F(P,O,U,X,de)}if(lt(X)||j(X))return P=P.get(U)||null,Q(O,P,X,de,null);if(typeof X.then=="function")return F(P,O,U,Qu(X),de);if(X.$$typeof===ne)return F(P,O,U,qu(O,X),de);Yu(O,X)}return null}function ce(P,O,U,X){for(var de=null,Be=null,fe=O,Ce=O=0,Me=null;fe!==null&&Ce<U.length;Ce++){fe.index>Ce?(Me=fe,fe=null):Me=fe.sibling;var qe=B(P,fe,U[Ce],X);if(qe===null){fe===null&&(fe=Me);break}t&&fe&&qe.alternate===null&&n(P,fe),O=d(qe,O,Ce),Be===null?de=qe:Be.sibling=qe,Be=qe,fe=Me}if(Ce===U.length)return a(P,fe),Pe&&Bi(P,Ce),de;if(fe===null){for(;Ce<U.length;Ce++)fe=$(P,U[Ce],X),fe!==null&&(O=d(fe,O,Ce),Be===null?de=fe:Be.sibling=fe,Be=fe);return Pe&&Bi(P,Ce),de}for(fe=o(fe);Ce<U.length;Ce++)Me=F(fe,P,Ce,U[Ce],X),Me!==null&&(t&&Me.alternate!==null&&fe.delete(Me.key===null?Ce:Me.key),O=d(Me,O,Ce),Be===null?de=Me:Be.sibling=Me,Be=Me);return t&&fe.forEach(function(Fs){return n(P,Fs)}),Pe&&Bi(P,Ce),de}function ge(P,O,U,X){if(U==null)throw Error(r(151));for(var de=null,Be=null,fe=O,Ce=O=0,Me=null,qe=U.next();fe!==null&&!qe.done;Ce++,qe=U.next()){fe.index>Ce?(Me=fe,fe=null):Me=fe.sibling;var Fs=B(P,fe,qe.value,X);if(Fs===null){fe===null&&(fe=Me);break}t&&fe&&Fs.alternate===null&&n(P,fe),O=d(Fs,O,Ce),Be===null?de=Fs:Be.sibling=Fs,Be=Fs,fe=Me}if(qe.done)return a(P,fe),Pe&&Bi(P,Ce),de;if(fe===null){for(;!qe.done;Ce++,qe=U.next())qe=$(P,qe.value,X),qe!==null&&(O=d(qe,O,Ce),Be===null?de=qe:Be.sibling=qe,Be=qe);return Pe&&Bi(P,Ce),de}for(fe=o(fe);!qe.done;Ce++,qe=U.next())qe=F(fe,P,Ce,qe.value,X),qe!==null&&(t&&qe.alternate!==null&&fe.delete(qe.key===null?Ce:qe.key),O=d(qe,O,Ce),Be===null?de=qe:Be.sibling=qe,Be=qe);return t&&fe.forEach(function(sA){return n(P,sA)}),Pe&&Bi(P,Ce),de}function We(P,O,U,X){if(typeof U=="object"&&U!==null&&U.type===G&&U.key===null&&(U=U.props.children),typeof U=="object"&&U!==null){switch(U.$$typeof){case V:e:{for(var de=U.key;O!==null;){if(O.key===de){if(de=U.type,de===G){if(O.tag===7){a(P,O.sibling),X=h(O,U.props.children),X.return=P,P=X;break e}}else if(O.elementType===de||typeof de=="object"&&de!==null&&de.$$typeof===w&&Lr(de)===O.type){a(P,O.sibling),X=h(O,U.props),Xo(X,U),X.return=P,P=X;break e}a(P,O);break}else n(P,O);O=O.sibling}U.type===G?(X=Mr(U.props.children,P.mode,X,U.key),X.return=P,P=X):(X=Uu(U.type,U.key,U.props,null,P.mode,X),Xo(X,U),X.return=P,P=X)}return _(P);case q:e:{for(de=U.key;O!==null;){if(O.key===de)if(O.tag===4&&O.stateNode.containerInfo===U.containerInfo&&O.stateNode.implementation===U.implementation){a(P,O.sibling),X=h(O,U.children||[]),X.return=P,P=X;break e}else{a(P,O);break}else n(P,O);O=O.sibling}X=hf(U,P.mode,X),X.return=P,P=X}return _(P);case w:return U=Lr(U),We(P,O,U,X)}if(lt(U))return ce(P,O,U,X);if(j(U)){if(de=j(U),typeof de!="function")throw Error(r(150));return U=de.call(U),ge(P,O,U,X)}if(typeof U.then=="function")return We(P,O,Qu(U),X);if(U.$$typeof===ne)return We(P,O,qu(P,U),X);Yu(P,U)}return typeof U=="string"&&U!==""||typeof U=="number"||typeof U=="bigint"?(U=""+U,O!==null&&O.tag===6?(a(P,O.sibling),X=h(O,U),X.return=P,P=X):(a(P,O),X=cf(U,P.mode,X),X.return=P,P=X),_(P)):a(P,O)}return function(P,O,U,X){try{Ko=0;var de=We(P,O,U,X);return Da=null,de}catch(fe){if(fe===Na||fe===Fu)throw fe;var Be=_n(29,fe,null,P.mode);return Be.lanes=X,Be.return=P,Be}finally{}}}var zr=bg(!0),Ag=bg(!1),Rs=!1;function Af(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Sf(t,n){t=t.updateQueue,n.updateQueue===t&&(n.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,callbacks:null})}function Is(t){return{lane:t,tag:0,payload:null,callback:null,next:null}}function Cs(t,n,a){var o=t.updateQueue;if(o===null)return null;if(o=o.shared,(Fe&2)!==0){var h=o.pending;return h===null?n.next=n:(n.next=h.next,h.next=n),o.pending=n,n=Lu(t),ag(t,null,a),n}return Pu(t,o,n,a),Lu(t)}function $o(t,n,a){if(n=n.updateQueue,n!==null&&(n=n.shared,(a&4194048)!==0)){var o=n.lanes;o&=t.pendingLanes,a|=o,n.lanes=a,Ao(t,a)}}function wf(t,n){var a=t.updateQueue,o=t.alternate;if(o!==null&&(o=o.updateQueue,a===o)){var h=null,d=null;if(a=a.firstBaseUpdate,a!==null){do{var _={lane:a.lane,tag:a.tag,payload:a.payload,callback:null,next:null};d===null?h=d=_:d=d.next=_,a=a.next}while(a!==null);d===null?h=d=n:d=d.next=n}else h=d=n;a={baseState:o.baseState,firstBaseUpdate:h,lastBaseUpdate:d,shared:o.shared,callbacks:o.callbacks},t.updateQueue=a;return}t=a.lastBaseUpdate,t===null?a.firstBaseUpdate=n:t.next=n,a.lastBaseUpdate=n}var xf=!1;function Jo(){if(xf){var t=Ca;if(t!==null)throw t}}function Zo(t,n,a,o){xf=!1;var h=t.updateQueue;Rs=!1;var d=h.firstBaseUpdate,_=h.lastBaseUpdate,b=h.shared.pending;if(b!==null){h.shared.pending=null;var C=b,z=C.next;C.next=null,_===null?d=z:_.next=z,_=C;var Q=t.alternate;Q!==null&&(Q=Q.updateQueue,b=Q.lastBaseUpdate,b!==_&&(b===null?Q.firstBaseUpdate=z:b.next=z,Q.lastBaseUpdate=C))}if(d!==null){var $=h.baseState;_=0,Q=z=C=null,b=d;do{var B=b.lane&-536870913,F=B!==b.lane;if(F?(Oe&B)===B:(o&B)===B){B!==0&&B===Ia&&(xf=!0),Q!==null&&(Q=Q.next={lane:0,tag:b.tag,payload:b.payload,callback:null,next:null});e:{var ce=t,ge=b;B=n;var We=a;switch(ge.tag){case 1:if(ce=ge.payload,typeof ce=="function"){$=ce.call(We,$,B);break e}$=ce;break e;case 3:ce.flags=ce.flags&-65537|128;case 0:if(ce=ge.payload,B=typeof ce=="function"?ce.call(We,$,B):ce,B==null)break e;$=A({},$,B);break e;case 2:Rs=!0}}B=b.callback,B!==null&&(t.flags|=64,F&&(t.flags|=8192),F=h.callbacks,F===null?h.callbacks=[B]:F.push(B))}else F={lane:B,tag:b.tag,payload:b.payload,callback:b.callback,next:null},Q===null?(z=Q=F,C=$):Q=Q.next=F,_|=B;if(b=b.next,b===null){if(b=h.shared.pending,b===null)break;F=b,b=F.next,F.next=null,h.lastBaseUpdate=F,h.shared.pending=null}}while(!0);Q===null&&(C=$),h.baseState=C,h.firstBaseUpdate=z,h.lastBaseUpdate=Q,d===null&&(h.shared.lanes=0),Vs|=_,t.lanes=_,t.memoizedState=$}}function Sg(t,n){if(typeof t!="function")throw Error(r(191,t));t.call(n)}function wg(t,n){var a=t.callbacks;if(a!==null)for(t.callbacks=null,t=0;t<a.length;t++)Sg(a[t],n)}var Oa=M(null),Ku=M(0);function xg(t,n){t=Zi,ae(Ku,t),ae(Oa,n),Zi=t|n.baseLanes}function Rf(){ae(Ku,Zi),ae(Oa,Oa.current)}function If(){Zi=Ku.current,Z(Oa),Z(Ku)}var vn=M(null),jn=null;function Ns(t){var n=t.alternate;ae(pt,pt.current&1),ae(vn,t),jn===null&&(n===null||Oa.current!==null||n.memoizedState!==null)&&(jn=t)}function Cf(t){ae(pt,pt.current),ae(vn,t),jn===null&&(jn=t)}function Rg(t){t.tag===22?(ae(pt,pt.current),ae(vn,t),jn===null&&(jn=t)):Ds()}function Ds(){ae(pt,pt.current),ae(vn,vn.current)}function En(t){Z(vn),jn===t&&(jn=null),Z(pt)}var pt=M(0);function Xu(t){for(var n=t;n!==null;){if(n.tag===13){var a=n.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||kd(a)||jd(a)))return n}else if(n.tag===19&&(n.memoizedProps.revealOrder==="forwards"||n.memoizedProps.revealOrder==="backwards"||n.memoizedProps.revealOrder==="unstable_legacy-backwards"||n.memoizedProps.revealOrder==="together")){if((n.flags&128)!==0)return n}else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return null;n=n.return}n.sibling.return=n.return,n=n.sibling}return null}var Fi=0,Re=null,Je=null,wt=null,$u=!1,Ma=!1,Br=!1,Ju=0,Wo=0,Va=null,K1=0;function ct(){throw Error(r(321))}function Nf(t,n){if(n===null)return!1;for(var a=0;a<n.length&&a<t.length;a++)if(!yn(t[a],n[a]))return!1;return!0}function Df(t,n,a,o,h,d){return Fi=d,Re=n,n.memoizedState=null,n.updateQueue=null,n.lanes=0,Y.H=t===null||t.memoizedState===null?cy:Qf,Br=!1,d=a(o,h),Br=!1,Ma&&(d=Cg(n,a,o,h)),Ig(t),d}function Ig(t){Y.H=nl;var n=Je!==null&&Je.next!==null;if(Fi=0,wt=Je=Re=null,$u=!1,Wo=0,Va=null,n)throw Error(r(300));t===null||xt||(t=t.dependencies,t!==null&&Bu(t)&&(xt=!0))}function Cg(t,n,a,o){Re=t;var h=0;do{if(Ma&&(Va=null),Wo=0,Ma=!1,25<=h)throw Error(r(301));if(h+=1,wt=Je=null,t.updateQueue!=null){var d=t.updateQueue;d.lastEffect=null,d.events=null,d.stores=null,d.memoCache!=null&&(d.memoCache.index=0)}Y.H=hy,d=n(a,o)}while(Ma);return d}function X1(){var t=Y.H,n=t.useState()[0];return n=typeof n.then=="function"?el(n):n,t=t.useState()[0],(Je!==null?Je.memoizedState:null)!==t&&(Re.flags|=1024),n}function Of(){var t=Ju!==0;return Ju=0,t}function Mf(t,n,a){n.updateQueue=t.updateQueue,n.flags&=-2053,t.lanes&=~a}function Vf(t){if($u){for(t=t.memoizedState;t!==null;){var n=t.queue;n!==null&&(n.pending=null),t=t.next}$u=!1}Fi=0,wt=Je=Re=null,Ma=!1,Wo=Ju=0,Va=null}function rn(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return wt===null?Re.memoizedState=wt=t:wt=wt.next=t,wt}function gt(){if(Je===null){var t=Re.alternate;t=t!==null?t.memoizedState:null}else t=Je.next;var n=wt===null?Re.memoizedState:wt.next;if(n!==null)wt=n,Je=t;else{if(t===null)throw Re.alternate===null?Error(r(467)):Error(r(310));Je=t,t={memoizedState:Je.memoizedState,baseState:Je.baseState,baseQueue:Je.baseQueue,queue:Je.queue,next:null},wt===null?Re.memoizedState=wt=t:wt=wt.next=t}return wt}function Zu(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function el(t){var n=Wo;return Wo+=1,Va===null&&(Va=[]),t=vg(Va,t,n),n=Re,(wt===null?n.memoizedState:wt.next)===null&&(n=n.alternate,Y.H=n===null||n.memoizedState===null?cy:Qf),t}function Wu(t){if(t!==null&&typeof t=="object"){if(typeof t.then=="function")return el(t);if(t.$$typeof===ne)return Gt(t)}throw Error(r(438,String(t)))}function kf(t){var n=null,a=Re.updateQueue;if(a!==null&&(n=a.memoCache),n==null){var o=Re.alternate;o!==null&&(o=o.updateQueue,o!==null&&(o=o.memoCache,o!=null&&(n={data:o.data.map(function(h){return h.slice()}),index:0})))}if(n==null&&(n={data:[],index:0}),a===null&&(a=Zu(),Re.updateQueue=a),a.memoCache=n,a=n.data[n.index],a===void 0)for(a=n.data[n.index]=Array(t),o=0;o<t;o++)a[o]=k;return n.index++,a}function Gi(t,n){return typeof n=="function"?n(t):n}function ec(t){var n=gt();return jf(n,Je,t)}function jf(t,n,a){var o=t.queue;if(o===null)throw Error(r(311));o.lastRenderedReducer=a;var h=t.baseQueue,d=o.pending;if(d!==null){if(h!==null){var _=h.next;h.next=d.next,d.next=_}n.baseQueue=h=d,o.pending=null}if(d=t.baseState,h===null)t.memoizedState=d;else{n=h.next;var b=_=null,C=null,z=n,Q=!1;do{var $=z.lane&-536870913;if($!==z.lane?(Oe&$)===$:(Fi&$)===$){var B=z.revertLane;if(B===0)C!==null&&(C=C.next={lane:0,revertLane:0,gesture:null,action:z.action,hasEagerState:z.hasEagerState,eagerState:z.eagerState,next:null}),$===Ia&&(Q=!0);else if((Fi&B)===B){z=z.next,B===Ia&&(Q=!0);continue}else $={lane:0,revertLane:z.revertLane,gesture:null,action:z.action,hasEagerState:z.hasEagerState,eagerState:z.eagerState,next:null},C===null?(b=C=$,_=d):C=C.next=$,Re.lanes|=B,Vs|=B;$=z.action,Br&&a(d,$),d=z.hasEagerState?z.eagerState:a(d,$)}else B={lane:$,revertLane:z.revertLane,gesture:z.gesture,action:z.action,hasEagerState:z.hasEagerState,eagerState:z.eagerState,next:null},C===null?(b=C=B,_=d):C=C.next=B,Re.lanes|=$,Vs|=$;z=z.next}while(z!==null&&z!==n);if(C===null?_=d:C.next=b,!yn(d,t.memoizedState)&&(xt=!0,Q&&(a=Ca,a!==null)))throw a;t.memoizedState=d,t.baseState=_,t.baseQueue=C,o.lastRenderedState=d}return h===null&&(o.lanes=0),[t.memoizedState,o.dispatch]}function Pf(t){var n=gt(),a=n.queue;if(a===null)throw Error(r(311));a.lastRenderedReducer=t;var o=a.dispatch,h=a.pending,d=n.memoizedState;if(h!==null){a.pending=null;var _=h=h.next;do d=t(d,_.action),_=_.next;while(_!==h);yn(d,n.memoizedState)||(xt=!0),n.memoizedState=d,n.baseQueue===null&&(n.baseState=d),a.lastRenderedState=d}return[d,o]}function Ng(t,n,a){var o=Re,h=gt(),d=Pe;if(d){if(a===void 0)throw Error(r(407));a=a()}else a=n();var _=!yn((Je||h).memoizedState,a);if(_&&(h.memoizedState=a,xt=!0),h=h.queue,zf(Mg.bind(null,o,h,t),[t]),h.getSnapshot!==n||_||wt!==null&&wt.memoizedState.tag&1){if(o.flags|=2048,ka(9,{destroy:void 0},Og.bind(null,o,h,a,n),null),et===null)throw Error(r(349));d||(Fi&127)!==0||Dg(o,n,a)}return a}function Dg(t,n,a){t.flags|=16384,t={getSnapshot:n,value:a},n=Re.updateQueue,n===null?(n=Zu(),Re.updateQueue=n,n.stores=[t]):(a=n.stores,a===null?n.stores=[t]:a.push(t))}function Og(t,n,a,o){n.value=a,n.getSnapshot=o,Vg(n)&&kg(t)}function Mg(t,n,a){return a(function(){Vg(n)&&kg(t)})}function Vg(t){var n=t.getSnapshot;t=t.value;try{var a=n();return!yn(t,a)}catch{return!0}}function kg(t){var n=Or(t,2);n!==null&&fn(n,t,2)}function Lf(t){var n=rn();if(typeof t=="function"){var a=t;if(t=a(),Br){xn(!0);try{a()}finally{xn(!1)}}}return n.memoizedState=n.baseState=t,n.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Gi,lastRenderedState:t},n}function jg(t,n,a,o){return t.baseState=a,jf(t,Je,typeof o=="function"?o:Gi)}function $1(t,n,a,o,h){if(ic(t))throw Error(r(485));if(t=n.action,t!==null){var d={payload:h,action:t,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(_){d.listeners.push(_)}};Y.T!==null?a(!0):d.isTransition=!1,o(d),a=n.pending,a===null?(d.next=n.pending=d,Pg(n,d)):(d.next=a.next,n.pending=a.next=d)}}function Pg(t,n){var a=n.action,o=n.payload,h=t.state;if(n.isTransition){var d=Y.T,_={};Y.T=_;try{var b=a(h,o),C=Y.S;C!==null&&C(_,b),Lg(t,n,b)}catch(z){Uf(t,n,z)}finally{d!==null&&_.types!==null&&(d.types=_.types),Y.T=d}}else try{d=a(h,o),Lg(t,n,d)}catch(z){Uf(t,n,z)}}function Lg(t,n,a){a!==null&&typeof a=="object"&&typeof a.then=="function"?a.then(function(o){Ug(t,n,o)},function(o){return Uf(t,n,o)}):Ug(t,n,a)}function Ug(t,n,a){n.status="fulfilled",n.value=a,zg(n),t.state=a,n=t.pending,n!==null&&(a=n.next,a===n?t.pending=null:(a=a.next,n.next=a,Pg(t,a)))}function Uf(t,n,a){var o=t.pending;if(t.pending=null,o!==null){o=o.next;do n.status="rejected",n.reason=a,zg(n),n=n.next;while(n!==o)}t.action=null}function zg(t){t=t.listeners;for(var n=0;n<t.length;n++)(0,t[n])()}function Bg(t,n){return n}function qg(t,n){if(Pe){var a=et.formState;if(a!==null){e:{var o=Re;if(Pe){if(nt){t:{for(var h=nt,d=kn;h.nodeType!==8;){if(!d){h=null;break t}if(h=Pn(h.nextSibling),h===null){h=null;break t}}d=h.data,h=d==="F!"||d==="F"?h:null}if(h){nt=Pn(h.nextSibling),o=h.data==="F!";break e}}ws(o)}o=!1}o&&(n=a[0])}}return a=rn(),a.memoizedState=a.baseState=n,o={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Bg,lastRenderedState:n},a.queue=o,a=oy.bind(null,Re,o),o.dispatch=a,o=Lf(!1),d=Gf.bind(null,Re,!1,o.queue),o=rn(),h={state:n,dispatch:null,action:t,pending:null},o.queue=h,a=$1.bind(null,Re,h,d,a),h.dispatch=a,o.memoizedState=t,[n,a,!1]}function Hg(t){var n=gt();return Fg(n,Je,t)}function Fg(t,n,a){if(n=jf(t,n,Bg)[0],t=ec(Gi)[0],typeof n=="object"&&n!==null&&typeof n.then=="function")try{var o=el(n)}catch(_){throw _===Na?Fu:_}else o=n;n=gt();var h=n.queue,d=h.dispatch;return a!==n.memoizedState&&(Re.flags|=2048,ka(9,{destroy:void 0},J1.bind(null,h,a),null)),[o,d,t]}function J1(t,n){t.action=n}function Gg(t){var n=gt(),a=Je;if(a!==null)return Fg(n,a,t);gt(),n=n.memoizedState,a=gt();var o=a.queue.dispatch;return a.memoizedState=t,[n,o,!1]}function ka(t,n,a,o){return t={tag:t,create:a,deps:o,inst:n,next:null},n=Re.updateQueue,n===null&&(n=Zu(),Re.updateQueue=n),a=n.lastEffect,a===null?n.lastEffect=t.next=t:(o=a.next,a.next=t,t.next=o,n.lastEffect=t),t}function Qg(){return gt().memoizedState}function tc(t,n,a,o){var h=rn();Re.flags|=t,h.memoizedState=ka(1|n,{destroy:void 0},a,o===void 0?null:o)}function nc(t,n,a,o){var h=gt();o=o===void 0?null:o;var d=h.memoizedState.inst;Je!==null&&o!==null&&Nf(o,Je.memoizedState.deps)?h.memoizedState=ka(n,d,a,o):(Re.flags|=t,h.memoizedState=ka(1|n,d,a,o))}function Yg(t,n){tc(8390656,8,t,n)}function zf(t,n){nc(2048,8,t,n)}function Z1(t){Re.flags|=4;var n=Re.updateQueue;if(n===null)n=Zu(),Re.updateQueue=n,n.events=[t];else{var a=n.events;a===null?n.events=[t]:a.push(t)}}function Kg(t){var n=gt().memoizedState;return Z1({ref:n,nextImpl:t}),function(){if((Fe&2)!==0)throw Error(r(440));return n.impl.apply(void 0,arguments)}}function Xg(t,n){return nc(4,2,t,n)}function $g(t,n){return nc(4,4,t,n)}function Jg(t,n){if(typeof n=="function"){t=t();var a=n(t);return function(){typeof a=="function"?a():n(null)}}if(n!=null)return t=t(),n.current=t,function(){n.current=null}}function Zg(t,n,a){a=a!=null?a.concat([t]):null,nc(4,4,Jg.bind(null,n,t),a)}function Bf(){}function Wg(t,n){var a=gt();n=n===void 0?null:n;var o=a.memoizedState;return n!==null&&Nf(n,o[1])?o[0]:(a.memoizedState=[t,n],t)}function ey(t,n){var a=gt();n=n===void 0?null:n;var o=a.memoizedState;if(n!==null&&Nf(n,o[1]))return o[0];if(o=t(),Br){xn(!0);try{t()}finally{xn(!1)}}return a.memoizedState=[o,n],o}function qf(t,n,a){return a===void 0||(Fi&1073741824)!==0&&(Oe&261930)===0?t.memoizedState=n:(t.memoizedState=a,t=t_(),Re.lanes|=t,Vs|=t,a)}function ty(t,n,a,o){return yn(a,n)?a:Oa.current!==null?(t=qf(t,a,o),yn(t,n)||(xt=!0),t):(Fi&42)===0||(Fi&1073741824)!==0&&(Oe&261930)===0?(xt=!0,t.memoizedState=a):(t=t_(),Re.lanes|=t,Vs|=t,n)}function ny(t,n,a,o,h){var d=re.p;re.p=d!==0&&8>d?d:8;var _=Y.T,b={};Y.T=b,Gf(t,!1,n,a);try{var C=h(),z=Y.S;if(z!==null&&z(b,C),C!==null&&typeof C=="object"&&typeof C.then=="function"){var Q=Y1(C,o);tl(t,n,Q,An(t))}else tl(t,n,o,An(t))}catch($){tl(t,n,{then:function(){},status:"rejected",reason:$},An())}finally{re.p=d,_!==null&&b.types!==null&&(_.types=b.types),Y.T=_}}function W1(){}function Hf(t,n,a,o){if(t.tag!==5)throw Error(r(476));var h=iy(t).queue;ny(t,h,n,pe,a===null?W1:function(){return sy(t),a(o)})}function iy(t){var n=t.memoizedState;if(n!==null)return n;n={memoizedState:pe,baseState:pe,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Gi,lastRenderedState:pe},next:null};var a={};return n.next={memoizedState:a,baseState:a,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Gi,lastRenderedState:a},next:null},t.memoizedState=n,t=t.alternate,t!==null&&(t.memoizedState=n),n}function sy(t){var n=iy(t);n.next===null&&(n=t.alternate.memoizedState),tl(t,n.next.queue,{},An())}function Ff(){return Gt(_l)}function ry(){return gt().memoizedState}function ay(){return gt().memoizedState}function eb(t){for(var n=t.return;n!==null;){switch(n.tag){case 24:case 3:var a=An();t=Is(a);var o=Cs(n,t,a);o!==null&&(fn(o,n,a),$o(o,n,a)),n={cache:vf()},t.payload=n;return}n=n.return}}function tb(t,n,a){var o=An();a={lane:o,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null},ic(t)?ly(n,a):(a=lf(t,n,a,o),a!==null&&(fn(a,t,o),uy(a,n,o)))}function oy(t,n,a){var o=An();tl(t,n,a,o)}function tl(t,n,a,o){var h={lane:o,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null};if(ic(t))ly(n,h);else{var d=t.alternate;if(t.lanes===0&&(d===null||d.lanes===0)&&(d=n.lastRenderedReducer,d!==null))try{var _=n.lastRenderedState,b=d(_,a);if(h.hasEagerState=!0,h.eagerState=b,yn(b,_))return Pu(t,n,h,0),et===null&&ju(),!1}catch{}finally{}if(a=lf(t,n,h,o),a!==null)return fn(a,t,o),uy(a,n,o),!0}return!1}function Gf(t,n,a,o){if(o={lane:2,revertLane:Ad(),gesture:null,action:o,hasEagerState:!1,eagerState:null,next:null},ic(t)){if(n)throw Error(r(479))}else n=lf(t,a,o,2),n!==null&&fn(n,t,2)}function ic(t){var n=t.alternate;return t===Re||n!==null&&n===Re}function ly(t,n){Ma=$u=!0;var a=t.pending;a===null?n.next=n:(n.next=a.next,a.next=n),t.pending=n}function uy(t,n,a){if((a&4194048)!==0){var o=n.lanes;o&=t.pendingLanes,a|=o,n.lanes=a,Ao(t,a)}}var nl={readContext:Gt,use:Wu,useCallback:ct,useContext:ct,useEffect:ct,useImperativeHandle:ct,useLayoutEffect:ct,useInsertionEffect:ct,useMemo:ct,useReducer:ct,useRef:ct,useState:ct,useDebugValue:ct,useDeferredValue:ct,useTransition:ct,useSyncExternalStore:ct,useId:ct,useHostTransitionStatus:ct,useFormState:ct,useActionState:ct,useOptimistic:ct,useMemoCache:ct,useCacheRefresh:ct};nl.useEffectEvent=ct;var cy={readContext:Gt,use:Wu,useCallback:function(t,n){return rn().memoizedState=[t,n===void 0?null:n],t},useContext:Gt,useEffect:Yg,useImperativeHandle:function(t,n,a){a=a!=null?a.concat([t]):null,tc(4194308,4,Jg.bind(null,n,t),a)},useLayoutEffect:function(t,n){return tc(4194308,4,t,n)},useInsertionEffect:function(t,n){tc(4,2,t,n)},useMemo:function(t,n){var a=rn();n=n===void 0?null:n;var o=t();if(Br){xn(!0);try{t()}finally{xn(!1)}}return a.memoizedState=[o,n],o},useReducer:function(t,n,a){var o=rn();if(a!==void 0){var h=a(n);if(Br){xn(!0);try{a(n)}finally{xn(!1)}}}else h=n;return o.memoizedState=o.baseState=h,t={pending:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:h},o.queue=t,t=t.dispatch=tb.bind(null,Re,t),[o.memoizedState,t]},useRef:function(t){var n=rn();return t={current:t},n.memoizedState=t},useState:function(t){t=Lf(t);var n=t.queue,a=oy.bind(null,Re,n);return n.dispatch=a,[t.memoizedState,a]},useDebugValue:Bf,useDeferredValue:function(t,n){var a=rn();return qf(a,t,n)},useTransition:function(){var t=Lf(!1);return t=ny.bind(null,Re,t.queue,!0,!1),rn().memoizedState=t,[!1,t]},useSyncExternalStore:function(t,n,a){var o=Re,h=rn();if(Pe){if(a===void 0)throw Error(r(407));a=a()}else{if(a=n(),et===null)throw Error(r(349));(Oe&127)!==0||Dg(o,n,a)}h.memoizedState=a;var d={value:a,getSnapshot:n};return h.queue=d,Yg(Mg.bind(null,o,d,t),[t]),o.flags|=2048,ka(9,{destroy:void 0},Og.bind(null,o,d,a,n),null),a},useId:function(){var t=rn(),n=et.identifierPrefix;if(Pe){var a=Si,o=Ai;a=(o&~(1<<32-dt(o)-1)).toString(32)+a,n="_"+n+"R_"+a,a=Ju++,0<a&&(n+="H"+a.toString(32)),n+="_"}else a=K1++,n="_"+n+"r_"+a.toString(32)+"_";return t.memoizedState=n},useHostTransitionStatus:Ff,useFormState:qg,useActionState:qg,useOptimistic:function(t){var n=rn();n.memoizedState=n.baseState=t;var a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return n.queue=a,n=Gf.bind(null,Re,!0,a),a.dispatch=n,[t,n]},useMemoCache:kf,useCacheRefresh:function(){return rn().memoizedState=eb.bind(null,Re)},useEffectEvent:function(t){var n=rn(),a={impl:t};return n.memoizedState=a,function(){if((Fe&2)!==0)throw Error(r(440));return a.impl.apply(void 0,arguments)}}},Qf={readContext:Gt,use:Wu,useCallback:Wg,useContext:Gt,useEffect:zf,useImperativeHandle:Zg,useInsertionEffect:Xg,useLayoutEffect:$g,useMemo:ey,useReducer:ec,useRef:Qg,useState:function(){return ec(Gi)},useDebugValue:Bf,useDeferredValue:function(t,n){var a=gt();return ty(a,Je.memoizedState,t,n)},useTransition:function(){var t=ec(Gi)[0],n=gt().memoizedState;return[typeof t=="boolean"?t:el(t),n]},useSyncExternalStore:Ng,useId:ry,useHostTransitionStatus:Ff,useFormState:Hg,useActionState:Hg,useOptimistic:function(t,n){var a=gt();return jg(a,Je,t,n)},useMemoCache:kf,useCacheRefresh:ay};Qf.useEffectEvent=Kg;var hy={readContext:Gt,use:Wu,useCallback:Wg,useContext:Gt,useEffect:zf,useImperativeHandle:Zg,useInsertionEffect:Xg,useLayoutEffect:$g,useMemo:ey,useReducer:Pf,useRef:Qg,useState:function(){return Pf(Gi)},useDebugValue:Bf,useDeferredValue:function(t,n){var a=gt();return Je===null?qf(a,t,n):ty(a,Je.memoizedState,t,n)},useTransition:function(){var t=Pf(Gi)[0],n=gt().memoizedState;return[typeof t=="boolean"?t:el(t),n]},useSyncExternalStore:Ng,useId:ry,useHostTransitionStatus:Ff,useFormState:Gg,useActionState:Gg,useOptimistic:function(t,n){var a=gt();return Je!==null?jg(a,Je,t,n):(a.baseState=t,[t,a.queue.dispatch])},useMemoCache:kf,useCacheRefresh:ay};hy.useEffectEvent=Kg;function Yf(t,n,a,o){n=t.memoizedState,a=a(o,n),a=a==null?n:A({},n,a),t.memoizedState=a,t.lanes===0&&(t.updateQueue.baseState=a)}var Kf={enqueueSetState:function(t,n,a){t=t._reactInternals;var o=An(),h=Is(o);h.payload=n,a!=null&&(h.callback=a),n=Cs(t,h,o),n!==null&&(fn(n,t,o),$o(n,t,o))},enqueueReplaceState:function(t,n,a){t=t._reactInternals;var o=An(),h=Is(o);h.tag=1,h.payload=n,a!=null&&(h.callback=a),n=Cs(t,h,o),n!==null&&(fn(n,t,o),$o(n,t,o))},enqueueForceUpdate:function(t,n){t=t._reactInternals;var a=An(),o=Is(a);o.tag=2,n!=null&&(o.callback=n),n=Cs(t,o,a),n!==null&&(fn(n,t,a),$o(n,t,a))}};function fy(t,n,a,o,h,d,_){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(o,d,_):n.prototype&&n.prototype.isPureReactComponent?!qo(a,o)||!qo(h,d):!0}function dy(t,n,a,o){t=n.state,typeof n.componentWillReceiveProps=="function"&&n.componentWillReceiveProps(a,o),typeof n.UNSAFE_componentWillReceiveProps=="function"&&n.UNSAFE_componentWillReceiveProps(a,o),n.state!==t&&Kf.enqueueReplaceState(n,n.state,null)}function qr(t,n){var a=n;if("ref"in n){a={};for(var o in n)o!=="ref"&&(a[o]=n[o])}if(t=t.defaultProps){a===n&&(a=A({},a));for(var h in t)a[h]===void 0&&(a[h]=t[h])}return a}function my(t){ku(t)}function py(t){console.error(t)}function gy(t){ku(t)}function sc(t,n){try{var a=t.onUncaughtError;a(n.value,{componentStack:n.stack})}catch(o){setTimeout(function(){throw o})}}function yy(t,n,a){try{var o=t.onCaughtError;o(a.value,{componentStack:a.stack,errorBoundary:n.tag===1?n.stateNode:null})}catch(h){setTimeout(function(){throw h})}}function Xf(t,n,a){return a=Is(a),a.tag=3,a.payload={element:null},a.callback=function(){sc(t,n)},a}function _y(t){return t=Is(t),t.tag=3,t}function vy(t,n,a,o){var h=a.type.getDerivedStateFromError;if(typeof h=="function"){var d=o.value;t.payload=function(){return h(d)},t.callback=function(){yy(n,a,o)}}var _=a.stateNode;_!==null&&typeof _.componentDidCatch=="function"&&(t.callback=function(){yy(n,a,o),typeof h!="function"&&(ks===null?ks=new Set([this]):ks.add(this));var b=o.stack;this.componentDidCatch(o.value,{componentStack:b!==null?b:""})})}function nb(t,n,a,o,h){if(a.flags|=32768,o!==null&&typeof o=="object"&&typeof o.then=="function"){if(n=a.alternate,n!==null&&Ra(n,a,h,!0),a=vn.current,a!==null){switch(a.tag){case 31:case 13:return jn===null?gc():a.alternate===null&&ht===0&&(ht=3),a.flags&=-257,a.flags|=65536,a.lanes=h,o===Gu?a.flags|=16384:(n=a.updateQueue,n===null?a.updateQueue=new Set([o]):n.add(o),Ed(t,o,h)),!1;case 22:return a.flags|=65536,o===Gu?a.flags|=16384:(n=a.updateQueue,n===null?(n={transitions:null,markerInstances:null,retryQueue:new Set([o])},a.updateQueue=n):(a=n.retryQueue,a===null?n.retryQueue=new Set([o]):a.add(o)),Ed(t,o,h)),!1}throw Error(r(435,a.tag))}return Ed(t,o,h),gc(),!1}if(Pe)return n=vn.current,n!==null?((n.flags&65536)===0&&(n.flags|=256),n.flags|=65536,n.lanes=h,o!==mf&&(t=Error(r(422),{cause:o}),Go(On(t,a)))):(o!==mf&&(n=Error(r(423),{cause:o}),Go(On(n,a))),t=t.current.alternate,t.flags|=65536,h&=-h,t.lanes|=h,o=On(o,a),h=Xf(t.stateNode,o,h),wf(t,h),ht!==4&&(ht=2)),!1;var d=Error(r(520),{cause:o});if(d=On(d,a),cl===null?cl=[d]:cl.push(d),ht!==4&&(ht=2),n===null)return!0;o=On(o,a),a=n;do{switch(a.tag){case 3:return a.flags|=65536,t=h&-h,a.lanes|=t,t=Xf(a.stateNode,o,t),wf(a,t),!1;case 1:if(n=a.type,d=a.stateNode,(a.flags&128)===0&&(typeof n.getDerivedStateFromError=="function"||d!==null&&typeof d.componentDidCatch=="function"&&(ks===null||!ks.has(d))))return a.flags|=65536,h&=-h,a.lanes|=h,h=_y(h),vy(h,t,a,o),wf(a,h),!1}a=a.return}while(a!==null);return!1}var $f=Error(r(461)),xt=!1;function Qt(t,n,a,o){n.child=t===null?Ag(n,null,a,o):zr(n,t.child,a,o)}function Ey(t,n,a,o,h){a=a.render;var d=n.ref;if("ref"in o){var _={};for(var b in o)b!=="ref"&&(_[b]=o[b])}else _=o;return jr(n),o=Df(t,n,a,_,d,h),b=Of(),t!==null&&!xt?(Mf(t,n,h),Qi(t,n,h)):(Pe&&b&&ff(n),n.flags|=1,Qt(t,n,o,h),n.child)}function Ty(t,n,a,o,h){if(t===null){var d=a.type;return typeof d=="function"&&!uf(d)&&d.defaultProps===void 0&&a.compare===null?(n.tag=15,n.type=d,by(t,n,d,o,h)):(t=Uu(a.type,null,o,n,n.mode,h),t.ref=n.ref,t.return=n,n.child=t)}if(d=t.child,!sd(t,h)){var _=d.memoizedProps;if(a=a.compare,a=a!==null?a:qo,a(_,o)&&t.ref===n.ref)return Qi(t,n,h)}return n.flags|=1,t=zi(d,o),t.ref=n.ref,t.return=n,n.child=t}function by(t,n,a,o,h){if(t!==null){var d=t.memoizedProps;if(qo(d,o)&&t.ref===n.ref)if(xt=!1,n.pendingProps=o=d,sd(t,h))(t.flags&131072)!==0&&(xt=!0);else return n.lanes=t.lanes,Qi(t,n,h)}return Jf(t,n,a,o,h)}function Ay(t,n,a,o){var h=o.children,d=t!==null?t.memoizedState:null;if(t===null&&n.stateNode===null&&(n.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),o.mode==="hidden"){if((n.flags&128)!==0){if(d=d!==null?d.baseLanes|a:a,t!==null){for(o=n.child=t.child,h=0;o!==null;)h=h|o.lanes|o.childLanes,o=o.sibling;o=h&~d}else o=0,n.child=null;return Sy(t,n,d,a,o)}if((a&536870912)!==0)n.memoizedState={baseLanes:0,cachePool:null},t!==null&&Hu(n,d!==null?d.cachePool:null),d!==null?xg(n,d):Rf(),Rg(n);else return o=n.lanes=536870912,Sy(t,n,d!==null?d.baseLanes|a:a,a,o)}else d!==null?(Hu(n,d.cachePool),xg(n,d),Ds(),n.memoizedState=null):(t!==null&&Hu(n,null),Rf(),Ds());return Qt(t,n,h,a),n.child}function il(t,n){return t!==null&&t.tag===22||n.stateNode!==null||(n.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),n.sibling}function Sy(t,n,a,o,h){var d=Tf();return d=d===null?null:{parent:St._currentValue,pool:d},n.memoizedState={baseLanes:a,cachePool:d},t!==null&&Hu(n,null),Rf(),Rg(n),t!==null&&Ra(t,n,o,!0),n.childLanes=h,null}function rc(t,n){return n=oc({mode:n.mode,children:n.children},t.mode),n.ref=t.ref,t.child=n,n.return=t,n}function wy(t,n,a){return zr(n,t.child,null,a),t=rc(n,n.pendingProps),t.flags|=2,En(n),n.memoizedState=null,t}function ib(t,n,a){var o=n.pendingProps,h=(n.flags&128)!==0;if(n.flags&=-129,t===null){if(Pe){if(o.mode==="hidden")return t=rc(n,o),n.lanes=536870912,il(null,t);if(Cf(n),(t=nt)?(t=P_(t,kn),t=t!==null&&t.data==="&"?t:null,t!==null&&(n.memoizedState={dehydrated:t,treeContext:As!==null?{id:Ai,overflow:Si}:null,retryLane:536870912,hydrationErrors:null},a=lg(t),a.return=n,n.child=a,Ft=n,nt=null)):t=null,t===null)throw ws(n);return n.lanes=536870912,null}return rc(n,o)}var d=t.memoizedState;if(d!==null){var _=d.dehydrated;if(Cf(n),h)if(n.flags&256)n.flags&=-257,n=wy(t,n,a);else if(n.memoizedState!==null)n.child=t.child,n.flags|=128,n=null;else throw Error(r(558));else if(xt||Ra(t,n,a,!1),h=(a&t.childLanes)!==0,xt||h){if(o=et,o!==null&&(_=So(o,a),_!==0&&_!==d.retryLane))throw d.retryLane=_,Or(t,_),fn(o,t,_),$f;gc(),n=wy(t,n,a)}else t=d.treeContext,nt=Pn(_.nextSibling),Ft=n,Pe=!0,Ss=null,kn=!1,t!==null&&hg(n,t),n=rc(n,o),n.flags|=4096;return n}return t=zi(t.child,{mode:o.mode,children:o.children}),t.ref=n.ref,n.child=t,t.return=n,t}function ac(t,n){var a=n.ref;if(a===null)t!==null&&t.ref!==null&&(n.flags|=4194816);else{if(typeof a!="function"&&typeof a!="object")throw Error(r(284));(t===null||t.ref!==a)&&(n.flags|=4194816)}}function Jf(t,n,a,o,h){return jr(n),a=Df(t,n,a,o,void 0,h),o=Of(),t!==null&&!xt?(Mf(t,n,h),Qi(t,n,h)):(Pe&&o&&ff(n),n.flags|=1,Qt(t,n,a,h),n.child)}function xy(t,n,a,o,h,d){return jr(n),n.updateQueue=null,a=Cg(n,o,a,h),Ig(t),o=Of(),t!==null&&!xt?(Mf(t,n,d),Qi(t,n,d)):(Pe&&o&&ff(n),n.flags|=1,Qt(t,n,a,d),n.child)}function Ry(t,n,a,o,h){if(jr(n),n.stateNode===null){var d=Aa,_=a.contextType;typeof _=="object"&&_!==null&&(d=Gt(_)),d=new a(o,d),n.memoizedState=d.state!==null&&d.state!==void 0?d.state:null,d.updater=Kf,n.stateNode=d,d._reactInternals=n,d=n.stateNode,d.props=o,d.state=n.memoizedState,d.refs={},Af(n),_=a.contextType,d.context=typeof _=="object"&&_!==null?Gt(_):Aa,d.state=n.memoizedState,_=a.getDerivedStateFromProps,typeof _=="function"&&(Yf(n,a,_,o),d.state=n.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof d.getSnapshotBeforeUpdate=="function"||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(_=d.state,typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount(),_!==d.state&&Kf.enqueueReplaceState(d,d.state,null),Zo(n,o,d,h),Jo(),d.state=n.memoizedState),typeof d.componentDidMount=="function"&&(n.flags|=4194308),o=!0}else if(t===null){d=n.stateNode;var b=n.memoizedProps,C=qr(a,b);d.props=C;var z=d.context,Q=a.contextType;_=Aa,typeof Q=="object"&&Q!==null&&(_=Gt(Q));var $=a.getDerivedStateFromProps;Q=typeof $=="function"||typeof d.getSnapshotBeforeUpdate=="function",b=n.pendingProps!==b,Q||typeof d.UNSAFE_componentWillReceiveProps!="function"&&typeof d.componentWillReceiveProps!="function"||(b||z!==_)&&dy(n,d,o,_),Rs=!1;var B=n.memoizedState;d.state=B,Zo(n,o,d,h),Jo(),z=n.memoizedState,b||B!==z||Rs?(typeof $=="function"&&(Yf(n,a,$,o),z=n.memoizedState),(C=Rs||fy(n,a,C,o,B,z,_))?(Q||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount()),typeof d.componentDidMount=="function"&&(n.flags|=4194308)):(typeof d.componentDidMount=="function"&&(n.flags|=4194308),n.memoizedProps=o,n.memoizedState=z),d.props=o,d.state=z,d.context=_,o=C):(typeof d.componentDidMount=="function"&&(n.flags|=4194308),o=!1)}else{d=n.stateNode,Sf(t,n),_=n.memoizedProps,Q=qr(a,_),d.props=Q,$=n.pendingProps,B=d.context,z=a.contextType,C=Aa,typeof z=="object"&&z!==null&&(C=Gt(z)),b=a.getDerivedStateFromProps,(z=typeof b=="function"||typeof d.getSnapshotBeforeUpdate=="function")||typeof d.UNSAFE_componentWillReceiveProps!="function"&&typeof d.componentWillReceiveProps!="function"||(_!==$||B!==C)&&dy(n,d,o,C),Rs=!1,B=n.memoizedState,d.state=B,Zo(n,o,d,h),Jo();var F=n.memoizedState;_!==$||B!==F||Rs||t!==null&&t.dependencies!==null&&Bu(t.dependencies)?(typeof b=="function"&&(Yf(n,a,b,o),F=n.memoizedState),(Q=Rs||fy(n,a,Q,o,B,F,C)||t!==null&&t.dependencies!==null&&Bu(t.dependencies))?(z||typeof d.UNSAFE_componentWillUpdate!="function"&&typeof d.componentWillUpdate!="function"||(typeof d.componentWillUpdate=="function"&&d.componentWillUpdate(o,F,C),typeof d.UNSAFE_componentWillUpdate=="function"&&d.UNSAFE_componentWillUpdate(o,F,C)),typeof d.componentDidUpdate=="function"&&(n.flags|=4),typeof d.getSnapshotBeforeUpdate=="function"&&(n.flags|=1024)):(typeof d.componentDidUpdate!="function"||_===t.memoizedProps&&B===t.memoizedState||(n.flags|=4),typeof d.getSnapshotBeforeUpdate!="function"||_===t.memoizedProps&&B===t.memoizedState||(n.flags|=1024),n.memoizedProps=o,n.memoizedState=F),d.props=o,d.state=F,d.context=C,o=Q):(typeof d.componentDidUpdate!="function"||_===t.memoizedProps&&B===t.memoizedState||(n.flags|=4),typeof d.getSnapshotBeforeUpdate!="function"||_===t.memoizedProps&&B===t.memoizedState||(n.flags|=1024),o=!1)}return d=o,ac(t,n),o=(n.flags&128)!==0,d||o?(d=n.stateNode,a=o&&typeof a.getDerivedStateFromError!="function"?null:d.render(),n.flags|=1,t!==null&&o?(n.child=zr(n,t.child,null,h),n.child=zr(n,null,a,h)):Qt(t,n,a,h),n.memoizedState=d.state,t=n.child):t=Qi(t,n,h),t}function Iy(t,n,a,o){return Vr(),n.flags|=256,Qt(t,n,a,o),n.child}var Zf={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Wf(t){return{baseLanes:t,cachePool:yg()}}function ed(t,n,a){return t=t!==null?t.childLanes&~a:0,n&&(t|=bn),t}function Cy(t,n,a){var o=n.pendingProps,h=!1,d=(n.flags&128)!==0,_;if((_=d)||(_=t!==null&&t.memoizedState===null?!1:(pt.current&2)!==0),_&&(h=!0,n.flags&=-129),_=(n.flags&32)!==0,n.flags&=-33,t===null){if(Pe){if(h?Ns(n):Ds(),(t=nt)?(t=P_(t,kn),t=t!==null&&t.data!=="&"?t:null,t!==null&&(n.memoizedState={dehydrated:t,treeContext:As!==null?{id:Ai,overflow:Si}:null,retryLane:536870912,hydrationErrors:null},a=lg(t),a.return=n,n.child=a,Ft=n,nt=null)):t=null,t===null)throw ws(n);return jd(t)?n.lanes=32:n.lanes=536870912,null}var b=o.children;return o=o.fallback,h?(Ds(),h=n.mode,b=oc({mode:"hidden",children:b},h),o=Mr(o,h,a,null),b.return=n,o.return=n,b.sibling=o,n.child=b,o=n.child,o.memoizedState=Wf(a),o.childLanes=ed(t,_,a),n.memoizedState=Zf,il(null,o)):(Ns(n),td(n,b))}var C=t.memoizedState;if(C!==null&&(b=C.dehydrated,b!==null)){if(d)n.flags&256?(Ns(n),n.flags&=-257,n=nd(t,n,a)):n.memoizedState!==null?(Ds(),n.child=t.child,n.flags|=128,n=null):(Ds(),b=o.fallback,h=n.mode,o=oc({mode:"visible",children:o.children},h),b=Mr(b,h,a,null),b.flags|=2,o.return=n,b.return=n,o.sibling=b,n.child=o,zr(n,t.child,null,a),o=n.child,o.memoizedState=Wf(a),o.childLanes=ed(t,_,a),n.memoizedState=Zf,n=il(null,o));else if(Ns(n),jd(b)){if(_=b.nextSibling&&b.nextSibling.dataset,_)var z=_.dgst;_=z,o=Error(r(419)),o.stack="",o.digest=_,Go({value:o,source:null,stack:null}),n=nd(t,n,a)}else if(xt||Ra(t,n,a,!1),_=(a&t.childLanes)!==0,xt||_){if(_=et,_!==null&&(o=So(_,a),o!==0&&o!==C.retryLane))throw C.retryLane=o,Or(t,o),fn(_,t,o),$f;kd(b)||gc(),n=nd(t,n,a)}else kd(b)?(n.flags|=192,n.child=t.child,n=null):(t=C.treeContext,nt=Pn(b.nextSibling),Ft=n,Pe=!0,Ss=null,kn=!1,t!==null&&hg(n,t),n=td(n,o.children),n.flags|=4096);return n}return h?(Ds(),b=o.fallback,h=n.mode,C=t.child,z=C.sibling,o=zi(C,{mode:"hidden",children:o.children}),o.subtreeFlags=C.subtreeFlags&65011712,z!==null?b=zi(z,b):(b=Mr(b,h,a,null),b.flags|=2),b.return=n,o.return=n,o.sibling=b,n.child=o,il(null,o),o=n.child,b=t.child.memoizedState,b===null?b=Wf(a):(h=b.cachePool,h!==null?(C=St._currentValue,h=h.parent!==C?{parent:C,pool:C}:h):h=yg(),b={baseLanes:b.baseLanes|a,cachePool:h}),o.memoizedState=b,o.childLanes=ed(t,_,a),n.memoizedState=Zf,il(t.child,o)):(Ns(n),a=t.child,t=a.sibling,a=zi(a,{mode:"visible",children:o.children}),a.return=n,a.sibling=null,t!==null&&(_=n.deletions,_===null?(n.deletions=[t],n.flags|=16):_.push(t)),n.child=a,n.memoizedState=null,a)}function td(t,n){return n=oc({mode:"visible",children:n},t.mode),n.return=t,t.child=n}function oc(t,n){return t=_n(22,t,null,n),t.lanes=0,t}function nd(t,n,a){return zr(n,t.child,null,a),t=td(n,n.pendingProps.children),t.flags|=2,n.memoizedState=null,t}function Ny(t,n,a){t.lanes|=n;var o=t.alternate;o!==null&&(o.lanes|=n),yf(t.return,n,a)}function id(t,n,a,o,h,d){var _=t.memoizedState;_===null?t.memoizedState={isBackwards:n,rendering:null,renderingStartTime:0,last:o,tail:a,tailMode:h,treeForkCount:d}:(_.isBackwards=n,_.rendering=null,_.renderingStartTime=0,_.last=o,_.tail=a,_.tailMode=h,_.treeForkCount=d)}function Dy(t,n,a){var o=n.pendingProps,h=o.revealOrder,d=o.tail;o=o.children;var _=pt.current,b=(_&2)!==0;if(b?(_=_&1|2,n.flags|=128):_&=1,ae(pt,_),Qt(t,n,o,a),o=Pe?Fo:0,!b&&t!==null&&(t.flags&128)!==0)e:for(t=n.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Ny(t,a,n);else if(t.tag===19)Ny(t,a,n);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===n)break e;for(;t.sibling===null;){if(t.return===null||t.return===n)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}switch(h){case"forwards":for(a=n.child,h=null;a!==null;)t=a.alternate,t!==null&&Xu(t)===null&&(h=a),a=a.sibling;a=h,a===null?(h=n.child,n.child=null):(h=a.sibling,a.sibling=null),id(n,!1,h,a,d,o);break;case"backwards":case"unstable_legacy-backwards":for(a=null,h=n.child,n.child=null;h!==null;){if(t=h.alternate,t!==null&&Xu(t)===null){n.child=h;break}t=h.sibling,h.sibling=a,a=h,h=t}id(n,!0,a,null,d,o);break;case"together":id(n,!1,null,null,void 0,o);break;default:n.memoizedState=null}return n.child}function Qi(t,n,a){if(t!==null&&(n.dependencies=t.dependencies),Vs|=n.lanes,(a&n.childLanes)===0)if(t!==null){if(Ra(t,n,a,!1),(a&n.childLanes)===0)return null}else return null;if(t!==null&&n.child!==t.child)throw Error(r(153));if(n.child!==null){for(t=n.child,a=zi(t,t.pendingProps),n.child=a,a.return=n;t.sibling!==null;)t=t.sibling,a=a.sibling=zi(t,t.pendingProps),a.return=n;a.sibling=null}return n.child}function sd(t,n){return(t.lanes&n)!==0?!0:(t=t.dependencies,!!(t!==null&&Bu(t)))}function sb(t,n,a){switch(n.tag){case 3:Mt(n,n.stateNode.containerInfo),xs(n,St,t.memoizedState.cache),Vr();break;case 27:case 5:mr(n);break;case 4:Mt(n,n.stateNode.containerInfo);break;case 10:xs(n,n.type,n.memoizedProps.value);break;case 31:if(n.memoizedState!==null)return n.flags|=128,Cf(n),null;break;case 13:var o=n.memoizedState;if(o!==null)return o.dehydrated!==null?(Ns(n),n.flags|=128,null):(a&n.child.childLanes)!==0?Cy(t,n,a):(Ns(n),t=Qi(t,n,a),t!==null?t.sibling:null);Ns(n);break;case 19:var h=(t.flags&128)!==0;if(o=(a&n.childLanes)!==0,o||(Ra(t,n,a,!1),o=(a&n.childLanes)!==0),h){if(o)return Dy(t,n,a);n.flags|=128}if(h=n.memoizedState,h!==null&&(h.rendering=null,h.tail=null,h.lastEffect=null),ae(pt,pt.current),o)break;return null;case 22:return n.lanes=0,Ay(t,n,a,n.pendingProps);case 24:xs(n,St,t.memoizedState.cache)}return Qi(t,n,a)}function Oy(t,n,a){if(t!==null)if(t.memoizedProps!==n.pendingProps)xt=!0;else{if(!sd(t,a)&&(n.flags&128)===0)return xt=!1,sb(t,n,a);xt=(t.flags&131072)!==0}else xt=!1,Pe&&(n.flags&1048576)!==0&&cg(n,Fo,n.index);switch(n.lanes=0,n.tag){case 16:e:{var o=n.pendingProps;if(t=Lr(n.elementType),n.type=t,typeof t=="function")uf(t)?(o=qr(t,o),n.tag=1,n=Ry(null,n,t,o,a)):(n.tag=0,n=Jf(null,n,t,o,a));else{if(t!=null){var h=t.$$typeof;if(h===he){n.tag=11,n=Ey(null,n,t,o,a);break e}else if(h===N){n.tag=14,n=Ty(null,n,t,o,a);break e}}throw n=be(t)||t,Error(r(306,n,""))}}return n;case 0:return Jf(t,n,n.type,n.pendingProps,a);case 1:return o=n.type,h=qr(o,n.pendingProps),Ry(t,n,o,h,a);case 3:e:{if(Mt(n,n.stateNode.containerInfo),t===null)throw Error(r(387));o=n.pendingProps;var d=n.memoizedState;h=d.element,Sf(t,n),Zo(n,o,null,a);var _=n.memoizedState;if(o=_.cache,xs(n,St,o),o!==d.cache&&_f(n,[St],a,!0),Jo(),o=_.element,d.isDehydrated)if(d={element:o,isDehydrated:!1,cache:_.cache},n.updateQueue.baseState=d,n.memoizedState=d,n.flags&256){n=Iy(t,n,o,a);break e}else if(o!==h){h=On(Error(r(424)),n),Go(h),n=Iy(t,n,o,a);break e}else{switch(t=n.stateNode.containerInfo,t.nodeType){case 9:t=t.body;break;default:t=t.nodeName==="HTML"?t.ownerDocument.body:t}for(nt=Pn(t.firstChild),Ft=n,Pe=!0,Ss=null,kn=!0,a=Ag(n,null,o,a),n.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling}else{if(Vr(),o===h){n=Qi(t,n,a);break e}Qt(t,n,o,a)}n=n.child}return n;case 26:return ac(t,n),t===null?(a=H_(n.type,null,n.pendingProps,null))?n.memoizedState=a:Pe||(a=n.type,t=n.pendingProps,o=Ac(Ie.current).createElement(a),o[Tt]=n,o[Lt]=t,Yt(o,a,t),bt(o),n.stateNode=o):n.memoizedState=H_(n.type,t.memoizedProps,n.pendingProps,t.memoizedState),null;case 27:return mr(n),t===null&&Pe&&(o=n.stateNode=z_(n.type,n.pendingProps,Ie.current),Ft=n,kn=!0,h=nt,Us(n.type)?(Pd=h,nt=Pn(o.firstChild)):nt=h),Qt(t,n,n.pendingProps.children,a),ac(t,n),t===null&&(n.flags|=4194304),n.child;case 5:return t===null&&Pe&&((h=o=nt)&&(o=Vb(o,n.type,n.pendingProps,kn),o!==null?(n.stateNode=o,Ft=n,nt=Pn(o.firstChild),kn=!1,h=!0):h=!1),h||ws(n)),mr(n),h=n.type,d=n.pendingProps,_=t!==null?t.memoizedProps:null,o=d.children,Od(h,d)?o=null:_!==null&&Od(h,_)&&(n.flags|=32),n.memoizedState!==null&&(h=Df(t,n,X1,null,null,a),_l._currentValue=h),ac(t,n),Qt(t,n,o,a),n.child;case 6:return t===null&&Pe&&((t=a=nt)&&(a=kb(a,n.pendingProps,kn),a!==null?(n.stateNode=a,Ft=n,nt=null,t=!0):t=!1),t||ws(n)),null;case 13:return Cy(t,n,a);case 4:return Mt(n,n.stateNode.containerInfo),o=n.pendingProps,t===null?n.child=zr(n,null,o,a):Qt(t,n,o,a),n.child;case 11:return Ey(t,n,n.type,n.pendingProps,a);case 7:return Qt(t,n,n.pendingProps,a),n.child;case 8:return Qt(t,n,n.pendingProps.children,a),n.child;case 12:return Qt(t,n,n.pendingProps.children,a),n.child;case 10:return o=n.pendingProps,xs(n,n.type,o.value),Qt(t,n,o.children,a),n.child;case 9:return h=n.type._context,o=n.pendingProps.children,jr(n),h=Gt(h),o=o(h),n.flags|=1,Qt(t,n,o,a),n.child;case 14:return Ty(t,n,n.type,n.pendingProps,a);case 15:return by(t,n,n.type,n.pendingProps,a);case 19:return Dy(t,n,a);case 31:return ib(t,n,a);case 22:return Ay(t,n,a,n.pendingProps);case 24:return jr(n),o=Gt(St),t===null?(h=Tf(),h===null&&(h=et,d=vf(),h.pooledCache=d,d.refCount++,d!==null&&(h.pooledCacheLanes|=a),h=d),n.memoizedState={parent:o,cache:h},Af(n),xs(n,St,h)):((t.lanes&a)!==0&&(Sf(t,n),Zo(n,null,null,a),Jo()),h=t.memoizedState,d=n.memoizedState,h.parent!==o?(h={parent:o,cache:o},n.memoizedState=h,n.lanes===0&&(n.memoizedState=n.updateQueue.baseState=h),xs(n,St,o)):(o=d.cache,xs(n,St,o),o!==h.cache&&_f(n,[St],a,!0))),Qt(t,n,n.pendingProps.children,a),n.child;case 29:throw n.pendingProps}throw Error(r(156,n.tag))}function Yi(t){t.flags|=4}function rd(t,n,a,o,h){if((n=(t.mode&32)!==0)&&(n=!1),n){if(t.flags|=16777216,(h&335544128)===h)if(t.stateNode.complete)t.flags|=8192;else if(r_())t.flags|=8192;else throw Ur=Gu,bf}else t.flags&=-16777217}function My(t,n){if(n.type!=="stylesheet"||(n.state.loading&4)!==0)t.flags&=-16777217;else if(t.flags|=16777216,!K_(n))if(r_())t.flags|=8192;else throw Ur=Gu,bf}function lc(t,n){n!==null&&(t.flags|=4),t.flags&16384&&(n=t.tag!==22?mu():536870912,t.lanes|=n,Ua|=n)}function sl(t,n){if(!Pe)switch(t.tailMode){case"hidden":n=t.tail;for(var a=null;n!==null;)n.alternate!==null&&(a=n),n=n.sibling;a===null?t.tail=null:a.sibling=null;break;case"collapsed":a=t.tail;for(var o=null;a!==null;)a.alternate!==null&&(o=a),a=a.sibling;o===null?n||t.tail===null?t.tail=null:t.tail.sibling=null:o.sibling=null}}function it(t){var n=t.alternate!==null&&t.alternate.child===t.child,a=0,o=0;if(n)for(var h=t.child;h!==null;)a|=h.lanes|h.childLanes,o|=h.subtreeFlags&65011712,o|=h.flags&65011712,h.return=t,h=h.sibling;else for(h=t.child;h!==null;)a|=h.lanes|h.childLanes,o|=h.subtreeFlags,o|=h.flags,h.return=t,h=h.sibling;return t.subtreeFlags|=o,t.childLanes=a,n}function rb(t,n,a){var o=n.pendingProps;switch(df(n),n.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return it(n),null;case 1:return it(n),null;case 3:return a=n.stateNode,o=null,t!==null&&(o=t.memoizedState.cache),n.memoizedState.cache!==o&&(n.flags|=2048),Hi(St),rt(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(t===null||t.child===null)&&(xa(n)?Yi(n):t===null||t.memoizedState.isDehydrated&&(n.flags&256)===0||(n.flags|=1024,pf())),it(n),null;case 26:var h=n.type,d=n.memoizedState;return t===null?(Yi(n),d!==null?(it(n),My(n,d)):(it(n),rd(n,h,null,o,a))):d?d!==t.memoizedState?(Yi(n),it(n),My(n,d)):(it(n),n.flags&=-16777217):(t=t.memoizedProps,t!==o&&Yi(n),it(n),rd(n,h,t,o,a)),null;case 27:if(sa(n),a=Ie.current,h=n.type,t!==null&&n.stateNode!=null)t.memoizedProps!==o&&Yi(n);else{if(!o){if(n.stateNode===null)throw Error(r(166));return it(n),null}t=ue.current,xa(n)?fg(n):(t=z_(h,o,a),n.stateNode=t,Yi(n))}return it(n),null;case 5:if(sa(n),h=n.type,t!==null&&n.stateNode!=null)t.memoizedProps!==o&&Yi(n);else{if(!o){if(n.stateNode===null)throw Error(r(166));return it(n),null}if(d=ue.current,xa(n))fg(n);else{var _=Ac(Ie.current);switch(d){case 1:d=_.createElementNS("http://www.w3.org/2000/svg",h);break;case 2:d=_.createElementNS("http://www.w3.org/1998/Math/MathML",h);break;default:switch(h){case"svg":d=_.createElementNS("http://www.w3.org/2000/svg",h);break;case"math":d=_.createElementNS("http://www.w3.org/1998/Math/MathML",h);break;case"script":d=_.createElement("div"),d.innerHTML="<script><\/script>",d=d.removeChild(d.firstChild);break;case"select":d=typeof o.is=="string"?_.createElement("select",{is:o.is}):_.createElement("select"),o.multiple?d.multiple=!0:o.size&&(d.size=o.size);break;default:d=typeof o.is=="string"?_.createElement(h,{is:o.is}):_.createElement(h)}}d[Tt]=n,d[Lt]=o;e:for(_=n.child;_!==null;){if(_.tag===5||_.tag===6)d.appendChild(_.stateNode);else if(_.tag!==4&&_.tag!==27&&_.child!==null){_.child.return=_,_=_.child;continue}if(_===n)break e;for(;_.sibling===null;){if(_.return===null||_.return===n)break e;_=_.return}_.sibling.return=_.return,_=_.sibling}n.stateNode=d;e:switch(Yt(d,h,o),h){case"button":case"input":case"select":case"textarea":o=!!o.autoFocus;break e;case"img":o=!0;break e;default:o=!1}o&&Yi(n)}}return it(n),rd(n,n.type,t===null?null:t.memoizedProps,n.pendingProps,a),null;case 6:if(t&&n.stateNode!=null)t.memoizedProps!==o&&Yi(n);else{if(typeof o!="string"&&n.stateNode===null)throw Error(r(166));if(t=Ie.current,xa(n)){if(t=n.stateNode,a=n.memoizedProps,o=null,h=Ft,h!==null)switch(h.tag){case 27:case 5:o=h.memoizedProps}t[Tt]=n,t=!!(t.nodeValue===a||o!==null&&o.suppressHydrationWarning===!0||C_(t.nodeValue,a)),t||ws(n,!0)}else t=Ac(t).createTextNode(o),t[Tt]=n,n.stateNode=t}return it(n),null;case 31:if(a=n.memoizedState,t===null||t.memoizedState!==null){if(o=xa(n),a!==null){if(t===null){if(!o)throw Error(r(318));if(t=n.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(r(557));t[Tt]=n}else Vr(),(n.flags&128)===0&&(n.memoizedState=null),n.flags|=4;it(n),t=!1}else a=pf(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=a),t=!0;if(!t)return n.flags&256?(En(n),n):(En(n),null);if((n.flags&128)!==0)throw Error(r(558))}return it(n),null;case 13:if(o=n.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(h=xa(n),o!==null&&o.dehydrated!==null){if(t===null){if(!h)throw Error(r(318));if(h=n.memoizedState,h=h!==null?h.dehydrated:null,!h)throw Error(r(317));h[Tt]=n}else Vr(),(n.flags&128)===0&&(n.memoizedState=null),n.flags|=4;it(n),h=!1}else h=pf(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=h),h=!0;if(!h)return n.flags&256?(En(n),n):(En(n),null)}return En(n),(n.flags&128)!==0?(n.lanes=a,n):(a=o!==null,t=t!==null&&t.memoizedState!==null,a&&(o=n.child,h=null,o.alternate!==null&&o.alternate.memoizedState!==null&&o.alternate.memoizedState.cachePool!==null&&(h=o.alternate.memoizedState.cachePool.pool),d=null,o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(d=o.memoizedState.cachePool.pool),d!==h&&(o.flags|=2048)),a!==t&&a&&(n.child.flags|=8192),lc(n,n.updateQueue),it(n),null);case 4:return rt(),t===null&&Rd(n.stateNode.containerInfo),it(n),null;case 10:return Hi(n.type),it(n),null;case 19:if(Z(pt),o=n.memoizedState,o===null)return it(n),null;if(h=(n.flags&128)!==0,d=o.rendering,d===null)if(h)sl(o,!1);else{if(ht!==0||t!==null&&(t.flags&128)!==0)for(t=n.child;t!==null;){if(d=Xu(t),d!==null){for(n.flags|=128,sl(o,!1),t=d.updateQueue,n.updateQueue=t,lc(n,t),n.subtreeFlags=0,t=a,a=n.child;a!==null;)og(a,t),a=a.sibling;return ae(pt,pt.current&1|2),Pe&&Bi(n,o.treeForkCount),n.child}t=t.sibling}o.tail!==null&&nn()>dc&&(n.flags|=128,h=!0,sl(o,!1),n.lanes=4194304)}else{if(!h)if(t=Xu(d),t!==null){if(n.flags|=128,h=!0,t=t.updateQueue,n.updateQueue=t,lc(n,t),sl(o,!0),o.tail===null&&o.tailMode==="hidden"&&!d.alternate&&!Pe)return it(n),null}else 2*nn()-o.renderingStartTime>dc&&a!==536870912&&(n.flags|=128,h=!0,sl(o,!1),n.lanes=4194304);o.isBackwards?(d.sibling=n.child,n.child=d):(t=o.last,t!==null?t.sibling=d:n.child=d,o.last=d)}return o.tail!==null?(t=o.tail,o.rendering=t,o.tail=t.sibling,o.renderingStartTime=nn(),t.sibling=null,a=pt.current,ae(pt,h?a&1|2:a&1),Pe&&Bi(n,o.treeForkCount),t):(it(n),null);case 22:case 23:return En(n),If(),o=n.memoizedState!==null,t!==null?t.memoizedState!==null!==o&&(n.flags|=8192):o&&(n.flags|=8192),o?(a&536870912)!==0&&(n.flags&128)===0&&(it(n),n.subtreeFlags&6&&(n.flags|=8192)):it(n),a=n.updateQueue,a!==null&&lc(n,a.retryQueue),a=null,t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(a=t.memoizedState.cachePool.pool),o=null,n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(o=n.memoizedState.cachePool.pool),o!==a&&(n.flags|=2048),t!==null&&Z(Pr),null;case 24:return a=null,t!==null&&(a=t.memoizedState.cache),n.memoizedState.cache!==a&&(n.flags|=2048),Hi(St),it(n),null;case 25:return null;case 30:return null}throw Error(r(156,n.tag))}function ab(t,n){switch(df(n),n.tag){case 1:return t=n.flags,t&65536?(n.flags=t&-65537|128,n):null;case 3:return Hi(St),rt(),t=n.flags,(t&65536)!==0&&(t&128)===0?(n.flags=t&-65537|128,n):null;case 26:case 27:case 5:return sa(n),null;case 31:if(n.memoizedState!==null){if(En(n),n.alternate===null)throw Error(r(340));Vr()}return t=n.flags,t&65536?(n.flags=t&-65537|128,n):null;case 13:if(En(n),t=n.memoizedState,t!==null&&t.dehydrated!==null){if(n.alternate===null)throw Error(r(340));Vr()}return t=n.flags,t&65536?(n.flags=t&-65537|128,n):null;case 19:return Z(pt),null;case 4:return rt(),null;case 10:return Hi(n.type),null;case 22:case 23:return En(n),If(),t!==null&&Z(Pr),t=n.flags,t&65536?(n.flags=t&-65537|128,n):null;case 24:return Hi(St),null;case 25:return null;default:return null}}function Vy(t,n){switch(df(n),n.tag){case 3:Hi(St),rt();break;case 26:case 27:case 5:sa(n);break;case 4:rt();break;case 31:n.memoizedState!==null&&En(n);break;case 13:En(n);break;case 19:Z(pt);break;case 10:Hi(n.type);break;case 22:case 23:En(n),If(),t!==null&&Z(Pr);break;case 24:Hi(St)}}function rl(t,n){try{var a=n.updateQueue,o=a!==null?a.lastEffect:null;if(o!==null){var h=o.next;a=h;do{if((a.tag&t)===t){o=void 0;var d=a.create,_=a.inst;o=d(),_.destroy=o}a=a.next}while(a!==h)}}catch(b){Xe(n,n.return,b)}}function Os(t,n,a){try{var o=n.updateQueue,h=o!==null?o.lastEffect:null;if(h!==null){var d=h.next;o=d;do{if((o.tag&t)===t){var _=o.inst,b=_.destroy;if(b!==void 0){_.destroy=void 0,h=n;var C=a,z=b;try{z()}catch(Q){Xe(h,C,Q)}}}o=o.next}while(o!==d)}}catch(Q){Xe(n,n.return,Q)}}function ky(t){var n=t.updateQueue;if(n!==null){var a=t.stateNode;try{wg(n,a)}catch(o){Xe(t,t.return,o)}}}function jy(t,n,a){a.props=qr(t.type,t.memoizedProps),a.state=t.memoizedState;try{a.componentWillUnmount()}catch(o){Xe(t,n,o)}}function al(t,n){try{var a=t.ref;if(a!==null){switch(t.tag){case 26:case 27:case 5:var o=t.stateNode;break;case 30:o=t.stateNode;break;default:o=t.stateNode}typeof a=="function"?t.refCleanup=a(o):a.current=o}}catch(h){Xe(t,n,h)}}function wi(t,n){var a=t.ref,o=t.refCleanup;if(a!==null)if(typeof o=="function")try{o()}catch(h){Xe(t,n,h)}finally{t.refCleanup=null,t=t.alternate,t!=null&&(t.refCleanup=null)}else if(typeof a=="function")try{a(null)}catch(h){Xe(t,n,h)}else a.current=null}function Py(t){var n=t.type,a=t.memoizedProps,o=t.stateNode;try{e:switch(n){case"button":case"input":case"select":case"textarea":a.autoFocus&&o.focus();break e;case"img":a.src?o.src=a.src:a.srcSet&&(o.srcset=a.srcSet)}}catch(h){Xe(t,t.return,h)}}function ad(t,n,a){try{var o=t.stateNode;Ib(o,t.type,a,n),o[Lt]=n}catch(h){Xe(t,t.return,h)}}function Ly(t){return t.tag===5||t.tag===3||t.tag===26||t.tag===27&&Us(t.type)||t.tag===4}function od(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||Ly(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.tag===27&&Us(t.type)||t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function ld(t,n,a){var o=t.tag;if(o===5||o===6)t=t.stateNode,n?(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a).insertBefore(t,n):(n=a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,n.appendChild(t),a=a._reactRootContainer,a!=null||n.onclick!==null||(n.onclick=Yn));else if(o!==4&&(o===27&&Us(t.type)&&(a=t.stateNode,n=null),t=t.child,t!==null))for(ld(t,n,a),t=t.sibling;t!==null;)ld(t,n,a),t=t.sibling}function uc(t,n,a){var o=t.tag;if(o===5||o===6)t=t.stateNode,n?a.insertBefore(t,n):a.appendChild(t);else if(o!==4&&(o===27&&Us(t.type)&&(a=t.stateNode),t=t.child,t!==null))for(uc(t,n,a),t=t.sibling;t!==null;)uc(t,n,a),t=t.sibling}function Uy(t){var n=t.stateNode,a=t.memoizedProps;try{for(var o=t.type,h=n.attributes;h.length;)n.removeAttributeNode(h[0]);Yt(n,o,a),n[Tt]=t,n[Lt]=a}catch(d){Xe(t,t.return,d)}}var Ki=!1,Rt=!1,ud=!1,zy=typeof WeakSet=="function"?WeakSet:Set,zt=null;function ob(t,n){if(t=t.containerInfo,Nd=Nc,t=Zp(t),tf(t)){if("selectionStart"in t)var a={start:t.selectionStart,end:t.selectionEnd};else e:{a=(a=t.ownerDocument)&&a.defaultView||window;var o=a.getSelection&&a.getSelection();if(o&&o.rangeCount!==0){a=o.anchorNode;var h=o.anchorOffset,d=o.focusNode;o=o.focusOffset;try{a.nodeType,d.nodeType}catch{a=null;break e}var _=0,b=-1,C=-1,z=0,Q=0,$=t,B=null;t:for(;;){for(var F;$!==a||h!==0&&$.nodeType!==3||(b=_+h),$!==d||o!==0&&$.nodeType!==3||(C=_+o),$.nodeType===3&&(_+=$.nodeValue.length),(F=$.firstChild)!==null;)B=$,$=F;for(;;){if($===t)break t;if(B===a&&++z===h&&(b=_),B===d&&++Q===o&&(C=_),(F=$.nextSibling)!==null)break;$=B,B=$.parentNode}$=F}a=b===-1||C===-1?null:{start:b,end:C}}else a=null}a=a||{start:0,end:0}}else a=null;for(Dd={focusedElem:t,selectionRange:a},Nc=!1,zt=n;zt!==null;)if(n=zt,t=n.child,(n.subtreeFlags&1028)!==0&&t!==null)t.return=n,zt=t;else for(;zt!==null;){switch(n=zt,d=n.alternate,t=n.flags,n.tag){case 0:if((t&4)!==0&&(t=n.updateQueue,t=t!==null?t.events:null,t!==null))for(a=0;a<t.length;a++)h=t[a],h.ref.impl=h.nextImpl;break;case 11:case 15:break;case 1:if((t&1024)!==0&&d!==null){t=void 0,a=n,h=d.memoizedProps,d=d.memoizedState,o=a.stateNode;try{var ce=qr(a.type,h);t=o.getSnapshotBeforeUpdate(ce,d),o.__reactInternalSnapshotBeforeUpdate=t}catch(ge){Xe(a,a.return,ge)}}break;case 3:if((t&1024)!==0){if(t=n.stateNode.containerInfo,a=t.nodeType,a===9)Vd(t);else if(a===1)switch(t.nodeName){case"HEAD":case"HTML":case"BODY":Vd(t);break;default:t.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((t&1024)!==0)throw Error(r(163))}if(t=n.sibling,t!==null){t.return=n.return,zt=t;break}zt=n.return}}function By(t,n,a){var o=a.flags;switch(a.tag){case 0:case 11:case 15:$i(t,a),o&4&&rl(5,a);break;case 1:if($i(t,a),o&4)if(t=a.stateNode,n===null)try{t.componentDidMount()}catch(_){Xe(a,a.return,_)}else{var h=qr(a.type,n.memoizedProps);n=n.memoizedState;try{t.componentDidUpdate(h,n,t.__reactInternalSnapshotBeforeUpdate)}catch(_){Xe(a,a.return,_)}}o&64&&ky(a),o&512&&al(a,a.return);break;case 3:if($i(t,a),o&64&&(t=a.updateQueue,t!==null)){if(n=null,a.child!==null)switch(a.child.tag){case 27:case 5:n=a.child.stateNode;break;case 1:n=a.child.stateNode}try{wg(t,n)}catch(_){Xe(a,a.return,_)}}break;case 27:n===null&&o&4&&Uy(a);case 26:case 5:$i(t,a),n===null&&o&4&&Py(a),o&512&&al(a,a.return);break;case 12:$i(t,a);break;case 31:$i(t,a),o&4&&Fy(t,a);break;case 13:$i(t,a),o&4&&Gy(t,a),o&64&&(t=a.memoizedState,t!==null&&(t=t.dehydrated,t!==null&&(a=gb.bind(null,a),jb(t,a))));break;case 22:if(o=a.memoizedState!==null||Ki,!o){n=n!==null&&n.memoizedState!==null||Rt,h=Ki;var d=Rt;Ki=o,(Rt=n)&&!d?Ji(t,a,(a.subtreeFlags&8772)!==0):$i(t,a),Ki=h,Rt=d}break;case 30:break;default:$i(t,a)}}function qy(t){var n=t.alternate;n!==null&&(t.alternate=null,qy(n)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(n=t.stateNode,n!==null&&ua(n)),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}var ot=null,ln=!1;function Xi(t,n,a){for(a=a.child;a!==null;)Hy(t,n,a),a=a.sibling}function Hy(t,n,a){if(qt&&typeof qt.onCommitFiberUnmount=="function")try{qt.onCommitFiberUnmount(Hn,a)}catch{}switch(a.tag){case 26:Rt||wi(a,n),Xi(t,n,a),a.memoizedState?a.memoizedState.count--:a.stateNode&&(a=a.stateNode,a.parentNode.removeChild(a));break;case 27:Rt||wi(a,n);var o=ot,h=ln;Us(a.type)&&(ot=a.stateNode,ln=!1),Xi(t,n,a),pl(a.stateNode),ot=o,ln=h;break;case 5:Rt||wi(a,n);case 6:if(o=ot,h=ln,ot=null,Xi(t,n,a),ot=o,ln=h,ot!==null)if(ln)try{(ot.nodeType===9?ot.body:ot.nodeName==="HTML"?ot.ownerDocument.body:ot).removeChild(a.stateNode)}catch(d){Xe(a,n,d)}else try{ot.removeChild(a.stateNode)}catch(d){Xe(a,n,d)}break;case 18:ot!==null&&(ln?(t=ot,k_(t.nodeType===9?t.body:t.nodeName==="HTML"?t.ownerDocument.body:t,a.stateNode),Ya(t)):k_(ot,a.stateNode));break;case 4:o=ot,h=ln,ot=a.stateNode.containerInfo,ln=!0,Xi(t,n,a),ot=o,ln=h;break;case 0:case 11:case 14:case 15:Os(2,a,n),Rt||Os(4,a,n),Xi(t,n,a);break;case 1:Rt||(wi(a,n),o=a.stateNode,typeof o.componentWillUnmount=="function"&&jy(a,n,o)),Xi(t,n,a);break;case 21:Xi(t,n,a);break;case 22:Rt=(o=Rt)||a.memoizedState!==null,Xi(t,n,a),Rt=o;break;default:Xi(t,n,a)}}function Fy(t,n){if(n.memoizedState===null&&(t=n.alternate,t!==null&&(t=t.memoizedState,t!==null))){t=t.dehydrated;try{Ya(t)}catch(a){Xe(n,n.return,a)}}}function Gy(t,n){if(n.memoizedState===null&&(t=n.alternate,t!==null&&(t=t.memoizedState,t!==null&&(t=t.dehydrated,t!==null))))try{Ya(t)}catch(a){Xe(n,n.return,a)}}function lb(t){switch(t.tag){case 31:case 13:case 19:var n=t.stateNode;return n===null&&(n=t.stateNode=new zy),n;case 22:return t=t.stateNode,n=t._retryCache,n===null&&(n=t._retryCache=new zy),n;default:throw Error(r(435,t.tag))}}function cc(t,n){var a=lb(t);n.forEach(function(o){if(!a.has(o)){a.add(o);var h=yb.bind(null,t,o);o.then(h,h)}})}function un(t,n){var a=n.deletions;if(a!==null)for(var o=0;o<a.length;o++){var h=a[o],d=t,_=n,b=_;e:for(;b!==null;){switch(b.tag){case 27:if(Us(b.type)){ot=b.stateNode,ln=!1;break e}break;case 5:ot=b.stateNode,ln=!1;break e;case 3:case 4:ot=b.stateNode.containerInfo,ln=!0;break e}b=b.return}if(ot===null)throw Error(r(160));Hy(d,_,h),ot=null,ln=!1,d=h.alternate,d!==null&&(d.return=null),h.return=null}if(n.subtreeFlags&13886)for(n=n.child;n!==null;)Qy(n,t),n=n.sibling}var Wn=null;function Qy(t,n){var a=t.alternate,o=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:un(n,t),cn(t),o&4&&(Os(3,t,t.return),rl(3,t),Os(5,t,t.return));break;case 1:un(n,t),cn(t),o&512&&(Rt||a===null||wi(a,a.return)),o&64&&Ki&&(t=t.updateQueue,t!==null&&(o=t.callbacks,o!==null&&(a=t.shared.hiddenCallbacks,t.shared.hiddenCallbacks=a===null?o:a.concat(o))));break;case 26:var h=Wn;if(un(n,t),cn(t),o&512&&(Rt||a===null||wi(a,a.return)),o&4){var d=a!==null?a.memoizedState:null;if(o=t.memoizedState,a===null)if(o===null)if(t.stateNode===null){e:{o=t.type,a=t.memoizedProps,h=h.ownerDocument||h;t:switch(o){case"title":d=h.getElementsByTagName("title")[0],(!d||d[hi]||d[Tt]||d.namespaceURI==="http://www.w3.org/2000/svg"||d.hasAttribute("itemprop"))&&(d=h.createElement(o),h.head.insertBefore(d,h.querySelector("head > title"))),Yt(d,o,a),d[Tt]=t,bt(d),o=d;break e;case"link":var _=Q_("link","href",h).get(o+(a.href||""));if(_){for(var b=0;b<_.length;b++)if(d=_[b],d.getAttribute("href")===(a.href==null||a.href===""?null:a.href)&&d.getAttribute("rel")===(a.rel==null?null:a.rel)&&d.getAttribute("title")===(a.title==null?null:a.title)&&d.getAttribute("crossorigin")===(a.crossOrigin==null?null:a.crossOrigin)){_.splice(b,1);break t}}d=h.createElement(o),Yt(d,o,a),h.head.appendChild(d);break;case"meta":if(_=Q_("meta","content",h).get(o+(a.content||""))){for(b=0;b<_.length;b++)if(d=_[b],d.getAttribute("content")===(a.content==null?null:""+a.content)&&d.getAttribute("name")===(a.name==null?null:a.name)&&d.getAttribute("property")===(a.property==null?null:a.property)&&d.getAttribute("http-equiv")===(a.httpEquiv==null?null:a.httpEquiv)&&d.getAttribute("charset")===(a.charSet==null?null:a.charSet)){_.splice(b,1);break t}}d=h.createElement(o),Yt(d,o,a),h.head.appendChild(d);break;default:throw Error(r(468,o))}d[Tt]=t,bt(d),o=d}t.stateNode=o}else Y_(h,t.type,t.stateNode);else t.stateNode=G_(h,o,t.memoizedProps);else d!==o?(d===null?a.stateNode!==null&&(a=a.stateNode,a.parentNode.removeChild(a)):d.count--,o===null?Y_(h,t.type,t.stateNode):G_(h,o,t.memoizedProps)):o===null&&t.stateNode!==null&&ad(t,t.memoizedProps,a.memoizedProps)}break;case 27:un(n,t),cn(t),o&512&&(Rt||a===null||wi(a,a.return)),a!==null&&o&4&&ad(t,t.memoizedProps,a.memoizedProps);break;case 5:if(un(n,t),cn(t),o&512&&(Rt||a===null||wi(a,a.return)),t.flags&32){h=t.stateNode;try{on(h,"")}catch(ce){Xe(t,t.return,ce)}}o&4&&t.stateNode!=null&&(h=t.memoizedProps,ad(t,h,a!==null?a.memoizedProps:h)),o&1024&&(ud=!0);break;case 6:if(un(n,t),cn(t),o&4){if(t.stateNode===null)throw Error(r(162));o=t.memoizedProps,a=t.stateNode;try{a.nodeValue=o}catch(ce){Xe(t,t.return,ce)}}break;case 3:if(xc=null,h=Wn,Wn=Sc(n.containerInfo),un(n,t),Wn=h,cn(t),o&4&&a!==null&&a.memoizedState.isDehydrated)try{Ya(n.containerInfo)}catch(ce){Xe(t,t.return,ce)}ud&&(ud=!1,Yy(t));break;case 4:o=Wn,Wn=Sc(t.stateNode.containerInfo),un(n,t),cn(t),Wn=o;break;case 12:un(n,t),cn(t);break;case 31:un(n,t),cn(t),o&4&&(o=t.updateQueue,o!==null&&(t.updateQueue=null,cc(t,o)));break;case 13:un(n,t),cn(t),t.child.flags&8192&&t.memoizedState!==null!=(a!==null&&a.memoizedState!==null)&&(fc=nn()),o&4&&(o=t.updateQueue,o!==null&&(t.updateQueue=null,cc(t,o)));break;case 22:h=t.memoizedState!==null;var C=a!==null&&a.memoizedState!==null,z=Ki,Q=Rt;if(Ki=z||h,Rt=Q||C,un(n,t),Rt=Q,Ki=z,cn(t),o&8192)e:for(n=t.stateNode,n._visibility=h?n._visibility&-2:n._visibility|1,h&&(a===null||C||Ki||Rt||Hr(t)),a=null,n=t;;){if(n.tag===5||n.tag===26){if(a===null){C=a=n;try{if(d=C.stateNode,h)_=d.style,typeof _.setProperty=="function"?_.setProperty("display","none","important"):_.display="none";else{b=C.stateNode;var $=C.memoizedProps.style,B=$!=null&&$.hasOwnProperty("display")?$.display:null;b.style.display=B==null||typeof B=="boolean"?"":(""+B).trim()}}catch(ce){Xe(C,C.return,ce)}}}else if(n.tag===6){if(a===null){C=n;try{C.stateNode.nodeValue=h?"":C.memoizedProps}catch(ce){Xe(C,C.return,ce)}}}else if(n.tag===18){if(a===null){C=n;try{var F=C.stateNode;h?j_(F,!0):j_(C.stateNode,!1)}catch(ce){Xe(C,C.return,ce)}}}else if((n.tag!==22&&n.tag!==23||n.memoizedState===null||n===t)&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break e;for(;n.sibling===null;){if(n.return===null||n.return===t)break e;a===n&&(a=null),n=n.return}a===n&&(a=null),n.sibling.return=n.return,n=n.sibling}o&4&&(o=t.updateQueue,o!==null&&(a=o.retryQueue,a!==null&&(o.retryQueue=null,cc(t,a))));break;case 19:un(n,t),cn(t),o&4&&(o=t.updateQueue,o!==null&&(t.updateQueue=null,cc(t,o)));break;case 30:break;case 21:break;default:un(n,t),cn(t)}}function cn(t){var n=t.flags;if(n&2){try{for(var a,o=t.return;o!==null;){if(Ly(o)){a=o;break}o=o.return}if(a==null)throw Error(r(160));switch(a.tag){case 27:var h=a.stateNode,d=od(t);uc(t,d,h);break;case 5:var _=a.stateNode;a.flags&32&&(on(_,""),a.flags&=-33);var b=od(t);uc(t,b,_);break;case 3:case 4:var C=a.stateNode.containerInfo,z=od(t);ld(t,z,C);break;default:throw Error(r(161))}}catch(Q){Xe(t,t.return,Q)}t.flags&=-3}n&4096&&(t.flags&=-4097)}function Yy(t){if(t.subtreeFlags&1024)for(t=t.child;t!==null;){var n=t;Yy(n),n.tag===5&&n.flags&1024&&n.stateNode.reset(),t=t.sibling}}function $i(t,n){if(n.subtreeFlags&8772)for(n=n.child;n!==null;)By(t,n.alternate,n),n=n.sibling}function Hr(t){for(t=t.child;t!==null;){var n=t;switch(n.tag){case 0:case 11:case 14:case 15:Os(4,n,n.return),Hr(n);break;case 1:wi(n,n.return);var a=n.stateNode;typeof a.componentWillUnmount=="function"&&jy(n,n.return,a),Hr(n);break;case 27:pl(n.stateNode);case 26:case 5:wi(n,n.return),Hr(n);break;case 22:n.memoizedState===null&&Hr(n);break;case 30:Hr(n);break;default:Hr(n)}t=t.sibling}}function Ji(t,n,a){for(a=a&&(n.subtreeFlags&8772)!==0,n=n.child;n!==null;){var o=n.alternate,h=t,d=n,_=d.flags;switch(d.tag){case 0:case 11:case 15:Ji(h,d,a),rl(4,d);break;case 1:if(Ji(h,d,a),o=d,h=o.stateNode,typeof h.componentDidMount=="function")try{h.componentDidMount()}catch(z){Xe(o,o.return,z)}if(o=d,h=o.updateQueue,h!==null){var b=o.stateNode;try{var C=h.shared.hiddenCallbacks;if(C!==null)for(h.shared.hiddenCallbacks=null,h=0;h<C.length;h++)Sg(C[h],b)}catch(z){Xe(o,o.return,z)}}a&&_&64&&ky(d),al(d,d.return);break;case 27:Uy(d);case 26:case 5:Ji(h,d,a),a&&o===null&&_&4&&Py(d),al(d,d.return);break;case 12:Ji(h,d,a);break;case 31:Ji(h,d,a),a&&_&4&&Fy(h,d);break;case 13:Ji(h,d,a),a&&_&4&&Gy(h,d);break;case 22:d.memoizedState===null&&Ji(h,d,a),al(d,d.return);break;case 30:break;default:Ji(h,d,a)}n=n.sibling}}function cd(t,n){var a=null;t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(a=t.memoizedState.cachePool.pool),t=null,n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(t=n.memoizedState.cachePool.pool),t!==a&&(t!=null&&t.refCount++,a!=null&&Qo(a))}function hd(t,n){t=null,n.alternate!==null&&(t=n.alternate.memoizedState.cache),n=n.memoizedState.cache,n!==t&&(n.refCount++,t!=null&&Qo(t))}function ei(t,n,a,o){if(n.subtreeFlags&10256)for(n=n.child;n!==null;)Ky(t,n,a,o),n=n.sibling}function Ky(t,n,a,o){var h=n.flags;switch(n.tag){case 0:case 11:case 15:ei(t,n,a,o),h&2048&&rl(9,n);break;case 1:ei(t,n,a,o);break;case 3:ei(t,n,a,o),h&2048&&(t=null,n.alternate!==null&&(t=n.alternate.memoizedState.cache),n=n.memoizedState.cache,n!==t&&(n.refCount++,t!=null&&Qo(t)));break;case 12:if(h&2048){ei(t,n,a,o),t=n.stateNode;try{var d=n.memoizedProps,_=d.id,b=d.onPostCommit;typeof b=="function"&&b(_,n.alternate===null?"mount":"update",t.passiveEffectDuration,-0)}catch(C){Xe(n,n.return,C)}}else ei(t,n,a,o);break;case 31:ei(t,n,a,o);break;case 13:ei(t,n,a,o);break;case 23:break;case 22:d=n.stateNode,_=n.alternate,n.memoizedState!==null?d._visibility&2?ei(t,n,a,o):ol(t,n):d._visibility&2?ei(t,n,a,o):(d._visibility|=2,ja(t,n,a,o,(n.subtreeFlags&10256)!==0||!1)),h&2048&&cd(_,n);break;case 24:ei(t,n,a,o),h&2048&&hd(n.alternate,n);break;default:ei(t,n,a,o)}}function ja(t,n,a,o,h){for(h=h&&((n.subtreeFlags&10256)!==0||!1),n=n.child;n!==null;){var d=t,_=n,b=a,C=o,z=_.flags;switch(_.tag){case 0:case 11:case 15:ja(d,_,b,C,h),rl(8,_);break;case 23:break;case 22:var Q=_.stateNode;_.memoizedState!==null?Q._visibility&2?ja(d,_,b,C,h):ol(d,_):(Q._visibility|=2,ja(d,_,b,C,h)),h&&z&2048&&cd(_.alternate,_);break;case 24:ja(d,_,b,C,h),h&&z&2048&&hd(_.alternate,_);break;default:ja(d,_,b,C,h)}n=n.sibling}}function ol(t,n){if(n.subtreeFlags&10256)for(n=n.child;n!==null;){var a=t,o=n,h=o.flags;switch(o.tag){case 22:ol(a,o),h&2048&&cd(o.alternate,o);break;case 24:ol(a,o),h&2048&&hd(o.alternate,o);break;default:ol(a,o)}n=n.sibling}}var ll=8192;function Pa(t,n,a){if(t.subtreeFlags&ll)for(t=t.child;t!==null;)Xy(t,n,a),t=t.sibling}function Xy(t,n,a){switch(t.tag){case 26:Pa(t,n,a),t.flags&ll&&t.memoizedState!==null&&Kb(a,Wn,t.memoizedState,t.memoizedProps);break;case 5:Pa(t,n,a);break;case 3:case 4:var o=Wn;Wn=Sc(t.stateNode.containerInfo),Pa(t,n,a),Wn=o;break;case 22:t.memoizedState===null&&(o=t.alternate,o!==null&&o.memoizedState!==null?(o=ll,ll=16777216,Pa(t,n,a),ll=o):Pa(t,n,a));break;default:Pa(t,n,a)}}function $y(t){var n=t.alternate;if(n!==null&&(t=n.child,t!==null)){n.child=null;do n=t.sibling,t.sibling=null,t=n;while(t!==null)}}function ul(t){var n=t.deletions;if((t.flags&16)!==0){if(n!==null)for(var a=0;a<n.length;a++){var o=n[a];zt=o,Zy(o,t)}$y(t)}if(t.subtreeFlags&10256)for(t=t.child;t!==null;)Jy(t),t=t.sibling}function Jy(t){switch(t.tag){case 0:case 11:case 15:ul(t),t.flags&2048&&Os(9,t,t.return);break;case 3:ul(t);break;case 12:ul(t);break;case 22:var n=t.stateNode;t.memoizedState!==null&&n._visibility&2&&(t.return===null||t.return.tag!==13)?(n._visibility&=-3,hc(t)):ul(t);break;default:ul(t)}}function hc(t){var n=t.deletions;if((t.flags&16)!==0){if(n!==null)for(var a=0;a<n.length;a++){var o=n[a];zt=o,Zy(o,t)}$y(t)}for(t=t.child;t!==null;){switch(n=t,n.tag){case 0:case 11:case 15:Os(8,n,n.return),hc(n);break;case 22:a=n.stateNode,a._visibility&2&&(a._visibility&=-3,hc(n));break;default:hc(n)}t=t.sibling}}function Zy(t,n){for(;zt!==null;){var a=zt;switch(a.tag){case 0:case 11:case 15:Os(8,a,n);break;case 23:case 22:if(a.memoizedState!==null&&a.memoizedState.cachePool!==null){var o=a.memoizedState.cachePool.pool;o!=null&&o.refCount++}break;case 24:Qo(a.memoizedState.cache)}if(o=a.child,o!==null)o.return=a,zt=o;else e:for(a=t;zt!==null;){o=zt;var h=o.sibling,d=o.return;if(qy(o),o===a){zt=null;break e}if(h!==null){h.return=d,zt=h;break e}zt=d}}}var ub={getCacheForType:function(t){var n=Gt(St),a=n.data.get(t);return a===void 0&&(a=t(),n.data.set(t,a)),a},cacheSignal:function(){return Gt(St).controller.signal}},cb=typeof WeakMap=="function"?WeakMap:Map,Fe=0,et=null,Ne=null,Oe=0,Ke=0,Tn=null,Ms=!1,La=!1,fd=!1,Zi=0,ht=0,Vs=0,Fr=0,dd=0,bn=0,Ua=0,cl=null,hn=null,md=!1,fc=0,Wy=0,dc=1/0,mc=null,ks=null,kt=0,js=null,za=null,Wi=0,pd=0,gd=null,e_=null,hl=0,yd=null;function An(){return(Fe&2)!==0&&Oe!==0?Oe&-Oe:Y.T!==null?Ad():pu()}function t_(){if(bn===0)if((Oe&536870912)===0||Pe){var t=yr;yr<<=1,(yr&3932160)===0&&(yr=262144),bn=t}else bn=536870912;return t=vn.current,t!==null&&(t.flags|=32),bn}function fn(t,n,a){(t===et&&(Ke===2||Ke===9)||t.cancelPendingCommit!==null)&&(Ba(t,0),Ps(t,Oe,bn,!1)),_r(t,a),((Fe&2)===0||t!==et)&&(t===et&&((Fe&2)===0&&(Fr|=a),ht===4&&Ps(t,Oe,bn,!1)),xi(t))}function n_(t,n,a){if((Fe&6)!==0)throw Error(r(327));var o=!a&&(n&127)===0&&(n&t.expiredLanes)===0||Fn(t,n),h=o?db(t,n):vd(t,n,!0),d=o;do{if(h===0){La&&!o&&Ps(t,n,0,!1);break}else{if(a=t.current.alternate,d&&!hb(a)){h=vd(t,n,!1),d=!1;continue}if(h===2){if(d=n,t.errorRecoveryDisabledLanes&d)var _=0;else _=t.pendingLanes&-536870913,_=_!==0?_:_&536870912?536870912:0;if(_!==0){n=_;e:{var b=t;h=cl;var C=b.current.memoizedState.isDehydrated;if(C&&(Ba(b,_).flags|=256),_=vd(b,_,!1),_!==2){if(fd&&!C){b.errorRecoveryDisabledLanes|=d,Fr|=d,h=4;break e}d=hn,hn=h,d!==null&&(hn===null?hn=d:hn.push.apply(hn,d))}h=_}if(d=!1,h!==2)continue}}if(h===1){Ba(t,0),Ps(t,n,0,!0);break}e:{switch(o=t,d=h,d){case 0:case 1:throw Error(r(345));case 4:if((n&4194048)!==n)break;case 6:Ps(o,n,bn,!Ms);break e;case 2:hn=null;break;case 3:case 5:break;default:throw Error(r(329))}if((n&62914560)===n&&(h=fc+300-nn(),10<h)){if(Ps(o,n,bn,!Ms),li(o,0,!0)!==0)break e;Wi=n,o.timeoutHandle=M_(i_.bind(null,o,a,hn,mc,md,n,bn,Fr,Ua,Ms,d,"Throttled",-0,0),h);break e}i_(o,a,hn,mc,md,n,bn,Fr,Ua,Ms,d,null,-0,0)}}break}while(!0);xi(t)}function i_(t,n,a,o,h,d,_,b,C,z,Q,$,B,F){if(t.timeoutHandle=-1,$=n.subtreeFlags,$&8192||($&16785408)===16785408){$={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Yn},Xy(n,d,$);var ce=(d&62914560)===d?fc-nn():(d&4194048)===d?Wy-nn():0;if(ce=Xb($,ce),ce!==null){Wi=d,t.cancelPendingCommit=ce(h_.bind(null,t,n,d,a,o,h,_,b,C,Q,$,null,B,F)),Ps(t,d,_,!z);return}}h_(t,n,d,a,o,h,_,b,C)}function hb(t){for(var n=t;;){var a=n.tag;if((a===0||a===11||a===15)&&n.flags&16384&&(a=n.updateQueue,a!==null&&(a=a.stores,a!==null)))for(var o=0;o<a.length;o++){var h=a[o],d=h.getSnapshot;h=h.value;try{if(!yn(d(),h))return!1}catch{return!1}}if(a=n.child,n.subtreeFlags&16384&&a!==null)a.return=n,n=a;else{if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return!0;n=n.return}n.sibling.return=n.return,n=n.sibling}}return!0}function Ps(t,n,a,o){n&=~dd,n&=~Fr,t.suspendedLanes|=n,t.pingedLanes&=~n,o&&(t.warmLanes|=n),o=t.expirationTimes;for(var h=n;0<h;){var d=31-dt(h),_=1<<d;o[d]=-1,h&=~_}a!==0&&vr(t,a,n)}function pc(){return(Fe&6)===0?(fl(0),!1):!0}function _d(){if(Ne!==null){if(Ke===0)var t=Ne.return;else t=Ne,qi=kr=null,Vf(t),Da=null,Ko=0,t=Ne;for(;t!==null;)Vy(t.alternate,t),t=t.return;Ne=null}}function Ba(t,n){var a=t.timeoutHandle;a!==-1&&(t.timeoutHandle=-1,Db(a)),a=t.cancelPendingCommit,a!==null&&(t.cancelPendingCommit=null,a()),Wi=0,_d(),et=t,Ne=a=zi(t.current,null),Oe=n,Ke=0,Tn=null,Ms=!1,La=Fn(t,n),fd=!1,Ua=bn=dd=Fr=Vs=ht=0,hn=cl=null,md=!1,(n&8)!==0&&(n|=n&32);var o=t.entangledLanes;if(o!==0)for(t=t.entanglements,o&=n;0<o;){var h=31-dt(o),d=1<<h;n|=t[h],o&=~d}return Zi=n,ju(),a}function s_(t,n){Re=null,Y.H=nl,n===Na||n===Fu?(n=Eg(),Ke=3):n===bf?(n=Eg(),Ke=4):Ke=n===$f?8:n!==null&&typeof n=="object"&&typeof n.then=="function"?6:1,Tn=n,Ne===null&&(ht=1,sc(t,On(n,t.current)))}function r_(){var t=vn.current;return t===null?!0:(Oe&4194048)===Oe?jn===null:(Oe&62914560)===Oe||(Oe&536870912)!==0?t===jn:!1}function a_(){var t=Y.H;return Y.H=nl,t===null?nl:t}function o_(){var t=Y.A;return Y.A=ub,t}function gc(){ht=4,Ms||(Oe&4194048)!==Oe&&vn.current!==null||(La=!0),(Vs&134217727)===0&&(Fr&134217727)===0||et===null||Ps(et,Oe,bn,!1)}function vd(t,n,a){var o=Fe;Fe|=2;var h=a_(),d=o_();(et!==t||Oe!==n)&&(mc=null,Ba(t,n)),n=!1;var _=ht;e:do try{if(Ke!==0&&Ne!==null){var b=Ne,C=Tn;switch(Ke){case 8:_d(),_=6;break e;case 3:case 2:case 9:case 6:vn.current===null&&(n=!0);var z=Ke;if(Ke=0,Tn=null,qa(t,b,C,z),a&&La){_=0;break e}break;default:z=Ke,Ke=0,Tn=null,qa(t,b,C,z)}}fb(),_=ht;break}catch(Q){s_(t,Q)}while(!0);return n&&t.shellSuspendCounter++,qi=kr=null,Fe=o,Y.H=h,Y.A=d,Ne===null&&(et=null,Oe=0,ju()),_}function fb(){for(;Ne!==null;)l_(Ne)}function db(t,n){var a=Fe;Fe|=2;var o=a_(),h=o_();et!==t||Oe!==n?(mc=null,dc=nn()+500,Ba(t,n)):La=Fn(t,n);e:do try{if(Ke!==0&&Ne!==null){n=Ne;var d=Tn;t:switch(Ke){case 1:Ke=0,Tn=null,qa(t,n,d,1);break;case 2:case 9:if(_g(d)){Ke=0,Tn=null,u_(n);break}n=function(){Ke!==2&&Ke!==9||et!==t||(Ke=7),xi(t)},d.then(n,n);break e;case 3:Ke=7;break e;case 4:Ke=5;break e;case 7:_g(d)?(Ke=0,Tn=null,u_(n)):(Ke=0,Tn=null,qa(t,n,d,7));break;case 5:var _=null;switch(Ne.tag){case 26:_=Ne.memoizedState;case 5:case 27:var b=Ne;if(_?K_(_):b.stateNode.complete){Ke=0,Tn=null;var C=b.sibling;if(C!==null)Ne=C;else{var z=b.return;z!==null?(Ne=z,yc(z)):Ne=null}break t}}Ke=0,Tn=null,qa(t,n,d,5);break;case 6:Ke=0,Tn=null,qa(t,n,d,6);break;case 8:_d(),ht=6;break e;default:throw Error(r(462))}}mb();break}catch(Q){s_(t,Q)}while(!0);return qi=kr=null,Y.H=o,Y.A=h,Fe=a,Ne!==null?0:(et=null,Oe=0,ju(),ht)}function mb(){for(;Ne!==null&&!Kh();)l_(Ne)}function l_(t){var n=Oy(t.alternate,t,Zi);t.memoizedProps=t.pendingProps,n===null?yc(t):Ne=n}function u_(t){var n=t,a=n.alternate;switch(n.tag){case 15:case 0:n=xy(a,n,n.pendingProps,n.type,void 0,Oe);break;case 11:n=xy(a,n,n.pendingProps,n.type.render,n.ref,Oe);break;case 5:Vf(n);default:Vy(a,n),n=Ne=og(n,Zi),n=Oy(a,n,Zi)}t.memoizedProps=t.pendingProps,n===null?yc(t):Ne=n}function qa(t,n,a,o){qi=kr=null,Vf(n),Da=null,Ko=0;var h=n.return;try{if(nb(t,h,n,a,Oe)){ht=1,sc(t,On(a,t.current)),Ne=null;return}}catch(d){if(h!==null)throw Ne=h,d;ht=1,sc(t,On(a,t.current)),Ne=null;return}n.flags&32768?(Pe||o===1?t=!0:La||(Oe&536870912)!==0?t=!1:(Ms=t=!0,(o===2||o===9||o===3||o===6)&&(o=vn.current,o!==null&&o.tag===13&&(o.flags|=16384))),c_(n,t)):yc(n)}function yc(t){var n=t;do{if((n.flags&32768)!==0){c_(n,Ms);return}t=n.return;var a=rb(n.alternate,n,Zi);if(a!==null){Ne=a;return}if(n=n.sibling,n!==null){Ne=n;return}Ne=n=t}while(n!==null);ht===0&&(ht=5)}function c_(t,n){do{var a=ab(t.alternate,t);if(a!==null){a.flags&=32767,Ne=a;return}if(a=t.return,a!==null&&(a.flags|=32768,a.subtreeFlags=0,a.deletions=null),!n&&(t=t.sibling,t!==null)){Ne=t;return}Ne=t=a}while(t!==null);ht=6,Ne=null}function h_(t,n,a,o,h,d,_,b,C){t.cancelPendingCommit=null;do _c();while(kt!==0);if((Fe&6)!==0)throw Error(r(327));if(n!==null){if(n===t.current)throw Error(r(177));if(d=n.lanes|n.childLanes,d|=of,Jh(t,a,d,_,b,C),t===et&&(Ne=et=null,Oe=0),za=n,js=t,Wi=a,pd=d,gd=h,e_=o,(n.subtreeFlags&10256)!==0||(n.flags&10256)!==0?(t.callbackNode=null,t.callbackPriority=0,_b(ds,function(){return g_(),null})):(t.callbackNode=null,t.callbackPriority=0),o=(n.flags&13878)!==0,(n.subtreeFlags&13878)!==0||o){o=Y.T,Y.T=null,h=re.p,re.p=2,_=Fe,Fe|=4;try{ob(t,n,a)}finally{Fe=_,re.p=h,Y.T=o}}kt=1,f_(),d_(),m_()}}function f_(){if(kt===1){kt=0;var t=js,n=za,a=(n.flags&13878)!==0;if((n.subtreeFlags&13878)!==0||a){a=Y.T,Y.T=null;var o=re.p;re.p=2;var h=Fe;Fe|=4;try{Qy(n,t);var d=Dd,_=Zp(t.containerInfo),b=d.focusedElem,C=d.selectionRange;if(_!==b&&b&&b.ownerDocument&&Jp(b.ownerDocument.documentElement,b)){if(C!==null&&tf(b)){var z=C.start,Q=C.end;if(Q===void 0&&(Q=z),"selectionStart"in b)b.selectionStart=z,b.selectionEnd=Math.min(Q,b.value.length);else{var $=b.ownerDocument||document,B=$&&$.defaultView||window;if(B.getSelection){var F=B.getSelection(),ce=b.textContent.length,ge=Math.min(C.start,ce),We=C.end===void 0?ge:Math.min(C.end,ce);!F.extend&&ge>We&&(_=We,We=ge,ge=_);var P=$p(b,ge),O=$p(b,We);if(P&&O&&(F.rangeCount!==1||F.anchorNode!==P.node||F.anchorOffset!==P.offset||F.focusNode!==O.node||F.focusOffset!==O.offset)){var U=$.createRange();U.setStart(P.node,P.offset),F.removeAllRanges(),ge>We?(F.addRange(U),F.extend(O.node,O.offset)):(U.setEnd(O.node,O.offset),F.addRange(U))}}}}for($=[],F=b;F=F.parentNode;)F.nodeType===1&&$.push({element:F,left:F.scrollLeft,top:F.scrollTop});for(typeof b.focus=="function"&&b.focus(),b=0;b<$.length;b++){var X=$[b];X.element.scrollLeft=X.left,X.element.scrollTop=X.top}}Nc=!!Nd,Dd=Nd=null}finally{Fe=h,re.p=o,Y.T=a}}t.current=n,kt=2}}function d_(){if(kt===2){kt=0;var t=js,n=za,a=(n.flags&8772)!==0;if((n.subtreeFlags&8772)!==0||a){a=Y.T,Y.T=null;var o=re.p;re.p=2;var h=Fe;Fe|=4;try{By(t,n.alternate,n)}finally{Fe=h,re.p=o,Y.T=a}}kt=3}}function m_(){if(kt===4||kt===3){kt=0,lu();var t=js,n=za,a=Wi,o=e_;(n.subtreeFlags&10256)!==0||(n.flags&10256)!==0?kt=5:(kt=0,za=js=null,p_(t,t.pendingLanes));var h=t.pendingLanes;if(h===0&&(ks=null),ji(a),n=n.stateNode,qt&&typeof qt.onCommitFiberRoot=="function")try{qt.onCommitFiberRoot(Hn,n,void 0,(n.current.flags&128)===128)}catch{}if(o!==null){n=Y.T,h=re.p,re.p=2,Y.T=null;try{for(var d=t.onRecoverableError,_=0;_<o.length;_++){var b=o[_];d(b.value,{componentStack:b.stack})}}finally{Y.T=n,re.p=h}}(Wi&3)!==0&&_c(),xi(t),h=t.pendingLanes,(a&261930)!==0&&(h&42)!==0?t===yd?hl++:(hl=0,yd=t):hl=0,fl(0)}}function p_(t,n){(t.pooledCacheLanes&=n)===0&&(n=t.pooledCache,n!=null&&(t.pooledCache=null,Qo(n)))}function _c(){return f_(),d_(),m_(),g_()}function g_(){if(kt!==5)return!1;var t=js,n=pd;pd=0;var a=ji(Wi),o=Y.T,h=re.p;try{re.p=32>a?32:a,Y.T=null,a=gd,gd=null;var d=js,_=Wi;if(kt=0,za=js=null,Wi=0,(Fe&6)!==0)throw Error(r(331));var b=Fe;if(Fe|=4,Jy(d.current),Ky(d,d.current,_,a),Fe=b,fl(0,!1),qt&&typeof qt.onPostCommitFiberRoot=="function")try{qt.onPostCommitFiberRoot(Hn,d)}catch{}return!0}finally{re.p=h,Y.T=o,p_(t,n)}}function y_(t,n,a){n=On(a,n),n=Xf(t.stateNode,n,2),t=Cs(t,n,2),t!==null&&(_r(t,2),xi(t))}function Xe(t,n,a){if(t.tag===3)y_(t,t,a);else for(;n!==null;){if(n.tag===3){y_(n,t,a);break}else if(n.tag===1){var o=n.stateNode;if(typeof n.type.getDerivedStateFromError=="function"||typeof o.componentDidCatch=="function"&&(ks===null||!ks.has(o))){t=On(a,t),a=_y(2),o=Cs(n,a,2),o!==null&&(vy(a,o,n,t),_r(o,2),xi(o));break}}n=n.return}}function Ed(t,n,a){var o=t.pingCache;if(o===null){o=t.pingCache=new cb;var h=new Set;o.set(n,h)}else h=o.get(n),h===void 0&&(h=new Set,o.set(n,h));h.has(a)||(fd=!0,h.add(a),t=pb.bind(null,t,n,a),n.then(t,t))}function pb(t,n,a){var o=t.pingCache;o!==null&&o.delete(n),t.pingedLanes|=t.suspendedLanes&a,t.warmLanes&=~a,et===t&&(Oe&a)===a&&(ht===4||ht===3&&(Oe&62914560)===Oe&&300>nn()-fc?(Fe&2)===0&&Ba(t,0):dd|=a,Ua===Oe&&(Ua=0)),xi(t)}function __(t,n){n===0&&(n=mu()),t=Or(t,n),t!==null&&(_r(t,n),xi(t))}function gb(t){var n=t.memoizedState,a=0;n!==null&&(a=n.retryLane),__(t,a)}function yb(t,n){var a=0;switch(t.tag){case 31:case 13:var o=t.stateNode,h=t.memoizedState;h!==null&&(a=h.retryLane);break;case 19:o=t.stateNode;break;case 22:o=t.stateNode._retryCache;break;default:throw Error(r(314))}o!==null&&o.delete(n),__(t,a)}function _b(t,n){return Vt(t,n)}var vc=null,Ha=null,Td=!1,Ec=!1,bd=!1,Ls=0;function xi(t){t!==Ha&&t.next===null&&(Ha===null?vc=Ha=t:Ha=Ha.next=t),Ec=!0,Td||(Td=!0,Eb())}function fl(t,n){if(!bd&&Ec){bd=!0;do for(var a=!1,o=vc;o!==null;){if(t!==0){var h=o.pendingLanes;if(h===0)var d=0;else{var _=o.suspendedLanes,b=o.pingedLanes;d=(1<<31-dt(42|t)+1)-1,d&=h&~(_&~b),d=d&201326741?d&201326741|1:d?d|2:0}d!==0&&(a=!0,b_(o,d))}else d=Oe,d=li(o,o===et?d:0,o.cancelPendingCommit!==null||o.timeoutHandle!==-1),(d&3)===0||Fn(o,d)||(a=!0,b_(o,d));o=o.next}while(a);bd=!1}}function vb(){v_()}function v_(){Ec=Td=!1;var t=0;Ls!==0&&Nb()&&(t=Ls);for(var n=nn(),a=null,o=vc;o!==null;){var h=o.next,d=E_(o,n);d===0?(o.next=null,a===null?vc=h:a.next=h,h===null&&(Ha=a)):(a=o,(t!==0||(d&3)!==0)&&(Ec=!0)),o=h}kt!==0&&kt!==5||fl(t),Ls!==0&&(Ls=0)}function E_(t,n){for(var a=t.suspendedLanes,o=t.pingedLanes,h=t.expirationTimes,d=t.pendingLanes&-62914561;0<d;){var _=31-dt(d),b=1<<_,C=h[_];C===-1?((b&a)===0||(b&o)!==0)&&(h[_]=$h(b,n)):C<=n&&(t.expiredLanes|=b),d&=~b}if(n=et,a=Oe,a=li(t,t===n?a:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),o=t.callbackNode,a===0||t===n&&(Ke===2||Ke===9)||t.cancelPendingCommit!==null)return o!==null&&o!==null&&fs(o),t.callbackNode=null,t.callbackPriority=0;if((a&3)===0||Fn(t,a)){if(n=a&-a,n===t.callbackPriority)return n;switch(o!==null&&fs(o),ji(a)){case 2:case 8:a=bo;break;case 32:a=ds;break;case 268435456:a=uu;break;default:a=ds}return o=T_.bind(null,t),a=Vt(a,o),t.callbackPriority=n,t.callbackNode=a,n}return o!==null&&o!==null&&fs(o),t.callbackPriority=2,t.callbackNode=null,2}function T_(t,n){if(kt!==0&&kt!==5)return t.callbackNode=null,t.callbackPriority=0,null;var a=t.callbackNode;if(_c()&&t.callbackNode!==a)return null;var o=Oe;return o=li(t,t===et?o:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),o===0?null:(n_(t,o,n),E_(t,nn()),t.callbackNode!=null&&t.callbackNode===a?T_.bind(null,t):null)}function b_(t,n){if(_c())return null;n_(t,n,!0)}function Eb(){Ob(function(){(Fe&6)!==0?Vt(To,vb):v_()})}function Ad(){if(Ls===0){var t=Ia;t===0&&(t=ai,ai<<=1,(ai&261888)===0&&(ai=256)),Ls=t}return Ls}function A_(t){return t==null||typeof t=="symbol"||typeof t=="boolean"?null:typeof t=="function"?t:da(""+t)}function S_(t,n){var a=n.ownerDocument.createElement("input");return a.name=n.name,a.value=n.value,t.id&&a.setAttribute("form",t.id),n.parentNode.insertBefore(a,n),t=new FormData(t),a.parentNode.removeChild(a),t}function Tb(t,n,a,o,h){if(n==="submit"&&a&&a.stateNode===h){var d=A_((h[Lt]||null).action),_=o.submitter;_&&(n=(n=_[Lt]||null)?A_(n.formAction):_.getAttribute("formAction"),n!==null&&(d=n,_=null));var b=new vi("action","action",null,o,h);t.push({event:b,listeners:[{instance:null,listener:function(){if(o.defaultPrevented){if(Ls!==0){var C=_?S_(h,_):new FormData(h);Hf(a,{pending:!0,data:C,method:h.method,action:d},null,C)}}else typeof d=="function"&&(b.preventDefault(),C=_?S_(h,_):new FormData(h),Hf(a,{pending:!0,data:C,method:h.method,action:d},d,C))},currentTarget:h}]})}}for(var Sd=0;Sd<af.length;Sd++){var wd=af[Sd],bb=wd.toLowerCase(),Ab=wd[0].toUpperCase()+wd.slice(1);Zn(bb,"on"+Ab)}Zn(tg,"onAnimationEnd"),Zn(ng,"onAnimationIteration"),Zn(ig,"onAnimationStart"),Zn("dblclick","onDoubleClick"),Zn("focusin","onFocus"),Zn("focusout","onBlur"),Zn(U1,"onTransitionRun"),Zn(z1,"onTransitionStart"),Zn(B1,"onTransitionCancel"),Zn(sg,"onTransitionEnd"),pi("onMouseEnter",["mouseout","mouseover"]),pi("onMouseLeave",["mouseout","mouseover"]),pi("onPointerEnter",["pointerout","pointerover"]),pi("onPointerLeave",["pointerout","pointerover"]),mi("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),mi("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),mi("onBeforeInput",["compositionend","keypress","textInput","paste"]),mi("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),mi("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),mi("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var dl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Sb=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(dl));function w_(t,n){n=(n&4)!==0;for(var a=0;a<t.length;a++){var o=t[a],h=o.event;o=o.listeners;e:{var d=void 0;if(n)for(var _=o.length-1;0<=_;_--){var b=o[_],C=b.instance,z=b.currentTarget;if(b=b.listener,C!==d&&h.isPropagationStopped())break e;d=b,h.currentTarget=z;try{d(h)}catch(Q){ku(Q)}h.currentTarget=null,d=C}else for(_=0;_<o.length;_++){if(b=o[_],C=b.instance,z=b.currentTarget,b=b.listener,C!==d&&h.isPropagationStopped())break e;d=b,h.currentTarget=z;try{d(h)}catch(Q){ku(Q)}h.currentTarget=null,d=C}}}}function De(t,n){var a=n[la];a===void 0&&(a=n[la]=new Set);var o=t+"__bubble";a.has(o)||(x_(n,t,2,!1),a.add(o))}function xd(t,n,a){var o=0;n&&(o|=4),x_(a,t,o,n)}var Tc="_reactListening"+Math.random().toString(36).slice(2);function Rd(t){if(!t[Tc]){t[Tc]=!0,wo.forEach(function(a){a!=="selectionchange"&&(Sb.has(a)||xd(a,!1,t),xd(a,!0,t))});var n=t.nodeType===9?t:t.ownerDocument;n===null||n[Tc]||(n[Tc]=!0,xd("selectionchange",!1,n))}}function x_(t,n,a,o){switch(t0(n)){case 2:var h=Zb;break;case 8:h=Wb;break;default:h=qd}a=h.bind(null,n,a,t),h=void 0,!Sr||n!=="touchstart"&&n!=="touchmove"&&n!=="wheel"||(h=!0),o?h!==void 0?t.addEventListener(n,a,{capture:!0,passive:h}):t.addEventListener(n,a,!0):h!==void 0?t.addEventListener(n,a,{passive:h}):t.addEventListener(n,a,!1)}function Id(t,n,a,o,h){var d=o;if((n&1)===0&&(n&2)===0&&o!==null)e:for(;;){if(o===null)return;var _=o.tag;if(_===3||_===4){var b=o.stateNode.containerInfo;if(b===h)break;if(_===4)for(_=o.return;_!==null;){var C=_.tag;if((C===3||C===4)&&_.stateNode.containerInfo===h)return;_=_.return}for(;b!==null;){if(_=fi(b),_===null)return;if(C=_.tag,C===5||C===6||C===26||C===27){o=d=_;continue e}b=b.parentNode}}o=o.return}vs(function(){var z=d,Q=In(a),$=[];e:{var B=rg.get(t);if(B!==void 0){var F=vi,ce=t;switch(t){case"keypress":if(xr(a)===0)break e;case"keydown":case"keyup":F=Ou;break;case"focusin":ce="focus",F=Ir;break;case"focusout":ce="blur",F=Ir;break;case"beforeblur":case"afterblur":F=Ir;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":F=Lo;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":F=Au;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":F=m;break;case tg:case ng:case ig:F=wu;break;case sg:F=S;break;case"scroll":case"scrollend":F=Po;break;case"wheel":F=H;break;case"copy":case"cut":case"paste":F=xu;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":F=Ui;break;case"toggle":case"beforetoggle":F=xe}var ge=(n&4)!==0,We=!ge&&(t==="scroll"||t==="scrollend"),P=ge?B!==null?B+"Capture":null:B;ge=[];for(var O=z,U;O!==null;){var X=O;if(U=X.stateNode,X=X.tag,X!==5&&X!==26&&X!==27||U===null||P===null||(X=Kn(O,P),X!=null&&ge.push(ml(O,X,U))),We)break;O=O.return}0<ge.length&&(B=new F(B,ce,null,a,Q),$.push({event:B,listeners:ge}))}}if((n&7)===0){e:{if(B=t==="mouseover"||t==="pointerover",F=t==="mouseout"||t==="pointerout",B&&a!==Vo&&(ce=a.relatedTarget||a.fromElement)&&(fi(ce)||ce[ci]))break e;if((F||B)&&(B=Q.window===Q?Q:(B=Q.ownerDocument)?B.defaultView||B.parentWindow:window,F?(ce=a.relatedTarget||a.toElement,F=z,ce=ce?fi(ce):null,ce!==null&&(We=u(ce),ge=ce.tag,ce!==We||ge!==5&&ge!==27&&ge!==6)&&(ce=null)):(F=null,ce=z),F!==ce)){if(ge=Lo,X="onMouseLeave",P="onMouseEnter",O="mouse",(t==="pointerout"||t==="pointerover")&&(ge=Ui,X="onPointerLeave",P="onPointerEnter",O="pointer"),We=F==null?B:pn(F),U=ce==null?B:pn(ce),B=new ge(X,O+"leave",F,a,Q),B.target=We,B.relatedTarget=U,X=null,fi(Q)===z&&(ge=new ge(P,O+"enter",ce,a,Q),ge.target=U,ge.relatedTarget=We,X=ge),We=X,F&&ce)t:{for(ge=wb,P=F,O=ce,U=0,X=P;X;X=ge(X))U++;X=0;for(var de=O;de;de=ge(de))X++;for(;0<U-X;)P=ge(P),U--;for(;0<X-U;)O=ge(O),X--;for(;U--;){if(P===O||O!==null&&P===O.alternate){ge=P;break t}P=ge(P),O=ge(O)}ge=null}else ge=null;F!==null&&R_($,B,F,ge,!1),ce!==null&&We!==null&&R_($,We,ce,ge,!0)}}e:{if(B=z?pn(z):window,F=B.nodeName&&B.nodeName.toLowerCase(),F==="select"||F==="input"&&B.type==="file")var Be=Fp;else if(qp(B))if(Gp)Be=j1;else{Be=V1;var fe=M1}else F=B.nodeName,!F||F.toLowerCase()!=="input"||B.type!=="checkbox"&&B.type!=="radio"?z&&fa(z.elementType)&&(Be=Fp):Be=k1;if(Be&&(Be=Be(t,z))){Hp($,Be,a,Q);break e}fe&&fe(t,B,z),t==="focusout"&&z&&B.type==="number"&&z.memoizedProps.value!=null&&Do(B,"number",B.value)}switch(fe=z?pn(z):window,t){case"focusin":(qp(fe)||fe.contentEditable==="true")&&(Ea=fe,nf=z,Ho=null);break;case"focusout":Ho=nf=Ea=null;break;case"mousedown":sf=!0;break;case"contextmenu":case"mouseup":case"dragend":sf=!1,Wp($,a,Q);break;case"selectionchange":if(L1)break;case"keydown":case"keyup":Wp($,a,Q)}var Ce;if(He)e:{switch(t){case"compositionstart":var Me="onCompositionStart";break e;case"compositionend":Me="onCompositionEnd";break e;case"compositionupdate":Me="onCompositionUpdate";break e}Me=void 0}else va?Cr(t,a)&&(Me="onCompositionEnd"):t==="keydown"&&a.keyCode===229&&(Me="onCompositionStart");Me&&(bi&&a.locale!=="ko"&&(va||Me!=="onCompositionStart"?Me==="onCompositionEnd"&&va&&(Ce=jo()):(_i=Q,ko="value"in _i?_i.value:_i.textContent,va=!0)),fe=bc(z,Me),0<fe.length&&(Me=new Ti(Me,t,null,a,Q),$.push({event:Me,listeners:fe}),Ce?Me.data=Ce:(Ce=_a(a),Ce!==null&&(Me.data=Ce)))),(Ce=Nn?C1(t,a):N1(t,a))&&(Me=bc(z,"onBeforeInput"),0<Me.length&&(fe=new Ti("onBeforeInput","beforeinput",null,a,Q),$.push({event:fe,listeners:Me}),fe.data=Ce)),Tb($,t,z,a,Q)}w_($,n)})}function ml(t,n,a){return{instance:t,listener:n,currentTarget:a}}function bc(t,n){for(var a=n+"Capture",o=[];t!==null;){var h=t,d=h.stateNode;if(h=h.tag,h!==5&&h!==26&&h!==27||d===null||(h=Kn(t,a),h!=null&&o.unshift(ml(t,h,d)),h=Kn(t,n),h!=null&&o.push(ml(t,h,d))),t.tag===3)return o;t=t.return}return[]}function wb(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5&&t.tag!==27);return t||null}function R_(t,n,a,o,h){for(var d=n._reactName,_=[];a!==null&&a!==o;){var b=a,C=b.alternate,z=b.stateNode;if(b=b.tag,C!==null&&C===o)break;b!==5&&b!==26&&b!==27||z===null||(C=z,h?(z=Kn(a,d),z!=null&&_.unshift(ml(a,z,C))):h||(z=Kn(a,d),z!=null&&_.push(ml(a,z,C)))),a=a.return}_.length!==0&&t.push({event:n,listeners:_})}var xb=/\r\n?/g,Rb=/\u0000|\uFFFD/g;function I_(t){return(typeof t=="string"?t:""+t).replace(xb,`
`).replace(Rb,"")}function C_(t,n){return n=I_(n),I_(t)===n}function Ze(t,n,a,o,h,d){switch(a){case"children":typeof o=="string"?n==="body"||n==="textarea"&&o===""||on(t,o):(typeof o=="number"||typeof o=="bigint")&&n!=="body"&&on(t,""+o);break;case"className":gn(t,"class",o);break;case"tabIndex":gn(t,"tabindex",o);break;case"dir":case"role":case"viewBox":case"width":case"height":gn(t,a,o);break;case"style":Mo(t,o,d);break;case"data":if(n!=="object"){gn(t,"data",o);break}case"src":case"href":if(o===""&&(n!=="a"||a!=="href")){t.removeAttribute(a);break}if(o==null||typeof o=="function"||typeof o=="symbol"||typeof o=="boolean"){t.removeAttribute(a);break}o=da(""+o),t.setAttribute(a,o);break;case"action":case"formAction":if(typeof o=="function"){t.setAttribute(a,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof d=="function"&&(a==="formAction"?(n!=="input"&&Ze(t,n,"name",h.name,h,null),Ze(t,n,"formEncType",h.formEncType,h,null),Ze(t,n,"formMethod",h.formMethod,h,null),Ze(t,n,"formTarget",h.formTarget,h,null)):(Ze(t,n,"encType",h.encType,h,null),Ze(t,n,"method",h.method,h,null),Ze(t,n,"target",h.target,h,null)));if(o==null||typeof o=="symbol"||typeof o=="boolean"){t.removeAttribute(a);break}o=da(""+o),t.setAttribute(a,o);break;case"onClick":o!=null&&(t.onclick=Yn);break;case"onScroll":o!=null&&De("scroll",t);break;case"onScrollEnd":o!=null&&De("scrollend",t);break;case"dangerouslySetInnerHTML":if(o!=null){if(typeof o!="object"||!("__html"in o))throw Error(r(61));if(a=o.__html,a!=null){if(h.children!=null)throw Error(r(60));t.innerHTML=a}}break;case"multiple":t.multiple=o&&typeof o!="function"&&typeof o!="symbol";break;case"muted":t.muted=o&&typeof o!="function"&&typeof o!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(o==null||typeof o=="function"||typeof o=="boolean"||typeof o=="symbol"){t.removeAttribute("xlink:href");break}a=da(""+o),t.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",a);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":o!=null&&typeof o!="function"&&typeof o!="symbol"?t.setAttribute(a,""+o):t.removeAttribute(a);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":o&&typeof o!="function"&&typeof o!="symbol"?t.setAttribute(a,""):t.removeAttribute(a);break;case"capture":case"download":o===!0?t.setAttribute(a,""):o!==!1&&o!=null&&typeof o!="function"&&typeof o!="symbol"?t.setAttribute(a,o):t.removeAttribute(a);break;case"cols":case"rows":case"size":case"span":o!=null&&typeof o!="function"&&typeof o!="symbol"&&!isNaN(o)&&1<=o?t.setAttribute(a,o):t.removeAttribute(a);break;case"rowSpan":case"start":o==null||typeof o=="function"||typeof o=="symbol"||isNaN(o)?t.removeAttribute(a):t.setAttribute(a,o);break;case"popover":De("beforetoggle",t),De("toggle",t),ca(t,"popover",o);break;case"xlinkActuate":At(t,"http://www.w3.org/1999/xlink","xlink:actuate",o);break;case"xlinkArcrole":At(t,"http://www.w3.org/1999/xlink","xlink:arcrole",o);break;case"xlinkRole":At(t,"http://www.w3.org/1999/xlink","xlink:role",o);break;case"xlinkShow":At(t,"http://www.w3.org/1999/xlink","xlink:show",o);break;case"xlinkTitle":At(t,"http://www.w3.org/1999/xlink","xlink:title",o);break;case"xlinkType":At(t,"http://www.w3.org/1999/xlink","xlink:type",o);break;case"xmlBase":At(t,"http://www.w3.org/XML/1998/namespace","xml:base",o);break;case"xmlLang":At(t,"http://www.w3.org/XML/1998/namespace","xml:lang",o);break;case"xmlSpace":At(t,"http://www.w3.org/XML/1998/namespace","xml:space",o);break;case"is":ca(t,"is",o);break;case"innerText":case"textContent":break;default:(!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(a=bu.get(a)||a,ca(t,a,o))}}function Cd(t,n,a,o,h,d){switch(a){case"style":Mo(t,o,d);break;case"dangerouslySetInnerHTML":if(o!=null){if(typeof o!="object"||!("__html"in o))throw Error(r(61));if(a=o.__html,a!=null){if(h.children!=null)throw Error(r(60));t.innerHTML=a}}break;case"children":typeof o=="string"?on(t,o):(typeof o=="number"||typeof o=="bigint")&&on(t,""+o);break;case"onScroll":o!=null&&De("scroll",t);break;case"onScrollEnd":o!=null&&De("scrollend",t);break;case"onClick":o!=null&&(t.onclick=Yn);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!xo.hasOwnProperty(a))e:{if(a[0]==="o"&&a[1]==="n"&&(h=a.endsWith("Capture"),n=a.slice(2,h?a.length-7:void 0),d=t[Lt]||null,d=d!=null?d[a]:null,typeof d=="function"&&t.removeEventListener(n,d,h),typeof o=="function")){typeof d!="function"&&d!==null&&(a in t?t[a]=null:t.hasAttribute(a)&&t.removeAttribute(a)),t.addEventListener(n,o,h);break e}a in t?t[a]=o:o===!0?t.setAttribute(a,""):ca(t,a,o)}}}function Yt(t,n,a){switch(n){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":De("error",t),De("load",t);var o=!1,h=!1,d;for(d in a)if(a.hasOwnProperty(d)){var _=a[d];if(_!=null)switch(d){case"src":o=!0;break;case"srcSet":h=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,n));default:Ze(t,n,d,_,a,null)}}h&&Ze(t,n,"srcSet",a.srcSet,a,null),o&&Ze(t,n,"src",a.src,a,null);return;case"input":De("invalid",t);var b=d=_=h=null,C=null,z=null;for(o in a)if(a.hasOwnProperty(o)){var Q=a[o];if(Q!=null)switch(o){case"name":h=Q;break;case"type":_=Q;break;case"checked":C=Q;break;case"defaultChecked":z=Q;break;case"value":d=Q;break;case"defaultValue":b=Q;break;case"children":case"dangerouslySetInnerHTML":if(Q!=null)throw Error(r(137,n));break;default:Ze(t,n,o,Q,a,null)}}vu(t,d,b,C,z,_,h,!1);return;case"select":De("invalid",t),o=_=d=null;for(h in a)if(a.hasOwnProperty(h)&&(b=a[h],b!=null))switch(h){case"value":d=b;break;case"defaultValue":_=b;break;case"multiple":o=b;default:Ze(t,n,h,b,a,null)}n=d,a=_,t.multiple=!!o,n!=null?ps(t,!!o,n,!1):a!=null&&ps(t,!!o,a,!0);return;case"textarea":De("invalid",t),d=h=o=null;for(_ in a)if(a.hasOwnProperty(_)&&(b=a[_],b!=null))switch(_){case"value":o=b;break;case"defaultValue":h=b;break;case"children":d=b;break;case"dangerouslySetInnerHTML":if(b!=null)throw Error(r(91));break;default:Ze(t,n,_,b,a,null)}gs(t,o,h,d);return;case"option":for(C in a)if(a.hasOwnProperty(C)&&(o=a[C],o!=null))switch(C){case"selected":t.selected=o&&typeof o!="function"&&typeof o!="symbol";break;default:Ze(t,n,C,o,a,null)}return;case"dialog":De("beforetoggle",t),De("toggle",t),De("cancel",t),De("close",t);break;case"iframe":case"object":De("load",t);break;case"video":case"audio":for(o=0;o<dl.length;o++)De(dl[o],t);break;case"image":De("error",t),De("load",t);break;case"details":De("toggle",t);break;case"embed":case"source":case"link":De("error",t),De("load",t);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(z in a)if(a.hasOwnProperty(z)&&(o=a[z],o!=null))switch(z){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,n));default:Ze(t,n,z,o,a,null)}return;default:if(fa(n)){for(Q in a)a.hasOwnProperty(Q)&&(o=a[Q],o!==void 0&&Cd(t,n,Q,o,a,void 0));return}}for(b in a)a.hasOwnProperty(b)&&(o=a[b],o!=null&&Ze(t,n,b,o,a,null))}function Ib(t,n,a,o){switch(n){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var h=null,d=null,_=null,b=null,C=null,z=null,Q=null;for(F in a){var $=a[F];if(a.hasOwnProperty(F)&&$!=null)switch(F){case"checked":break;case"value":break;case"defaultValue":C=$;default:o.hasOwnProperty(F)||Ze(t,n,F,null,o,$)}}for(var B in o){var F=o[B];if($=a[B],o.hasOwnProperty(B)&&(F!=null||$!=null))switch(B){case"type":d=F;break;case"name":h=F;break;case"checked":z=F;break;case"defaultChecked":Q=F;break;case"value":_=F;break;case"defaultValue":b=F;break;case"children":case"dangerouslySetInnerHTML":if(F!=null)throw Error(r(137,n));break;default:F!==$&&Ze(t,n,B,F,o,$)}}ha(t,_,b,C,z,Q,d,h);return;case"select":F=_=b=B=null;for(d in a)if(C=a[d],a.hasOwnProperty(d)&&C!=null)switch(d){case"value":break;case"multiple":F=C;default:o.hasOwnProperty(d)||Ze(t,n,d,null,o,C)}for(h in o)if(d=o[h],C=a[h],o.hasOwnProperty(h)&&(d!=null||C!=null))switch(h){case"value":B=d;break;case"defaultValue":b=d;break;case"multiple":_=d;default:d!==C&&Ze(t,n,h,d,o,C)}n=b,a=_,o=F,B!=null?ps(t,!!a,B,!1):!!o!=!!a&&(n!=null?ps(t,!!a,n,!0):ps(t,!!a,a?[]:"",!1));return;case"textarea":F=B=null;for(b in a)if(h=a[b],a.hasOwnProperty(b)&&h!=null&&!o.hasOwnProperty(b))switch(b){case"value":break;case"children":break;default:Ze(t,n,b,null,o,h)}for(_ in o)if(h=o[_],d=a[_],o.hasOwnProperty(_)&&(h!=null||d!=null))switch(_){case"value":B=h;break;case"defaultValue":F=h;break;case"children":break;case"dangerouslySetInnerHTML":if(h!=null)throw Error(r(91));break;default:h!==d&&Ze(t,n,_,h,o,d)}Eu(t,B,F);return;case"option":for(var ce in a)if(B=a[ce],a.hasOwnProperty(ce)&&B!=null&&!o.hasOwnProperty(ce))switch(ce){case"selected":t.selected=!1;break;default:Ze(t,n,ce,null,o,B)}for(C in o)if(B=o[C],F=a[C],o.hasOwnProperty(C)&&B!==F&&(B!=null||F!=null))switch(C){case"selected":t.selected=B&&typeof B!="function"&&typeof B!="symbol";break;default:Ze(t,n,C,B,o,F)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var ge in a)B=a[ge],a.hasOwnProperty(ge)&&B!=null&&!o.hasOwnProperty(ge)&&Ze(t,n,ge,null,o,B);for(z in o)if(B=o[z],F=a[z],o.hasOwnProperty(z)&&B!==F&&(B!=null||F!=null))switch(z){case"children":case"dangerouslySetInnerHTML":if(B!=null)throw Error(r(137,n));break;default:Ze(t,n,z,B,o,F)}return;default:if(fa(n)){for(var We in a)B=a[We],a.hasOwnProperty(We)&&B!==void 0&&!o.hasOwnProperty(We)&&Cd(t,n,We,void 0,o,B);for(Q in o)B=o[Q],F=a[Q],!o.hasOwnProperty(Q)||B===F||B===void 0&&F===void 0||Cd(t,n,Q,B,o,F);return}}for(var P in a)B=a[P],a.hasOwnProperty(P)&&B!=null&&!o.hasOwnProperty(P)&&Ze(t,n,P,null,o,B);for($ in o)B=o[$],F=a[$],!o.hasOwnProperty($)||B===F||B==null&&F==null||Ze(t,n,$,B,o,F)}function N_(t){switch(t){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function Cb(){if(typeof performance.getEntriesByType=="function"){for(var t=0,n=0,a=performance.getEntriesByType("resource"),o=0;o<a.length;o++){var h=a[o],d=h.transferSize,_=h.initiatorType,b=h.duration;if(d&&b&&N_(_)){for(_=0,b=h.responseEnd,o+=1;o<a.length;o++){var C=a[o],z=C.startTime;if(z>b)break;var Q=C.transferSize,$=C.initiatorType;Q&&N_($)&&(C=C.responseEnd,_+=Q*(C<b?1:(b-z)/(C-z)))}if(--o,n+=8*(d+_)/(h.duration/1e3),t++,10<t)break}}if(0<t)return n/t/1e6}return navigator.connection&&(t=navigator.connection.downlink,typeof t=="number")?t:5}var Nd=null,Dd=null;function Ac(t){return t.nodeType===9?t:t.ownerDocument}function D_(t){switch(t){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function O_(t,n){if(t===0)switch(n){case"svg":return 1;case"math":return 2;default:return 0}return t===1&&n==="foreignObject"?0:t}function Od(t,n){return t==="textarea"||t==="noscript"||typeof n.children=="string"||typeof n.children=="number"||typeof n.children=="bigint"||typeof n.dangerouslySetInnerHTML=="object"&&n.dangerouslySetInnerHTML!==null&&n.dangerouslySetInnerHTML.__html!=null}var Md=null;function Nb(){var t=window.event;return t&&t.type==="popstate"?t===Md?!1:(Md=t,!0):(Md=null,!1)}var M_=typeof setTimeout=="function"?setTimeout:void 0,Db=typeof clearTimeout=="function"?clearTimeout:void 0,V_=typeof Promise=="function"?Promise:void 0,Ob=typeof queueMicrotask=="function"?queueMicrotask:typeof V_<"u"?function(t){return V_.resolve(null).then(t).catch(Mb)}:M_;function Mb(t){setTimeout(function(){throw t})}function Us(t){return t==="head"}function k_(t,n){var a=n,o=0;do{var h=a.nextSibling;if(t.removeChild(a),h&&h.nodeType===8)if(a=h.data,a==="/$"||a==="/&"){if(o===0){t.removeChild(h),Ya(n);return}o--}else if(a==="$"||a==="$?"||a==="$~"||a==="$!"||a==="&")o++;else if(a==="html")pl(t.ownerDocument.documentElement);else if(a==="head"){a=t.ownerDocument.head,pl(a);for(var d=a.firstChild;d;){var _=d.nextSibling,b=d.nodeName;d[hi]||b==="SCRIPT"||b==="STYLE"||b==="LINK"&&d.rel.toLowerCase()==="stylesheet"||a.removeChild(d),d=_}}else a==="body"&&pl(t.ownerDocument.body);a=h}while(a);Ya(n)}function j_(t,n){var a=t;t=0;do{var o=a.nextSibling;if(a.nodeType===1?n?(a._stashedDisplay=a.style.display,a.style.display="none"):(a.style.display=a._stashedDisplay||"",a.getAttribute("style")===""&&a.removeAttribute("style")):a.nodeType===3&&(n?(a._stashedText=a.nodeValue,a.nodeValue=""):a.nodeValue=a._stashedText||""),o&&o.nodeType===8)if(a=o.data,a==="/$"){if(t===0)break;t--}else a!=="$"&&a!=="$?"&&a!=="$~"&&a!=="$!"||t++;a=o}while(a)}function Vd(t){var n=t.firstChild;for(n&&n.nodeType===10&&(n=n.nextSibling);n;){var a=n;switch(n=n.nextSibling,a.nodeName){case"HTML":case"HEAD":case"BODY":Vd(a),ua(a);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(a.rel.toLowerCase()==="stylesheet")continue}t.removeChild(a)}}function Vb(t,n,a,o){for(;t.nodeType===1;){var h=a;if(t.nodeName.toLowerCase()!==n.toLowerCase()){if(!o&&(t.nodeName!=="INPUT"||t.type!=="hidden"))break}else if(o){if(!t[hi])switch(n){case"meta":if(!t.hasAttribute("itemprop"))break;return t;case"link":if(d=t.getAttribute("rel"),d==="stylesheet"&&t.hasAttribute("data-precedence"))break;if(d!==h.rel||t.getAttribute("href")!==(h.href==null||h.href===""?null:h.href)||t.getAttribute("crossorigin")!==(h.crossOrigin==null?null:h.crossOrigin)||t.getAttribute("title")!==(h.title==null?null:h.title))break;return t;case"style":if(t.hasAttribute("data-precedence"))break;return t;case"script":if(d=t.getAttribute("src"),(d!==(h.src==null?null:h.src)||t.getAttribute("type")!==(h.type==null?null:h.type)||t.getAttribute("crossorigin")!==(h.crossOrigin==null?null:h.crossOrigin))&&d&&t.hasAttribute("async")&&!t.hasAttribute("itemprop"))break;return t;default:return t}}else if(n==="input"&&t.type==="hidden"){var d=h.name==null?null:""+h.name;if(h.type==="hidden"&&t.getAttribute("name")===d)return t}else return t;if(t=Pn(t.nextSibling),t===null)break}return null}function kb(t,n,a){if(n==="")return null;for(;t.nodeType!==3;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!a||(t=Pn(t.nextSibling),t===null))return null;return t}function P_(t,n){for(;t.nodeType!==8;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!n||(t=Pn(t.nextSibling),t===null))return null;return t}function kd(t){return t.data==="$?"||t.data==="$~"}function jd(t){return t.data==="$!"||t.data==="$?"&&t.ownerDocument.readyState!=="loading"}function jb(t,n){var a=t.ownerDocument;if(t.data==="$~")t._reactRetry=n;else if(t.data!=="$?"||a.readyState!=="loading")n();else{var o=function(){n(),a.removeEventListener("DOMContentLoaded",o)};a.addEventListener("DOMContentLoaded",o),t._reactRetry=o}}function Pn(t){for(;t!=null;t=t.nextSibling){var n=t.nodeType;if(n===1||n===3)break;if(n===8){if(n=t.data,n==="$"||n==="$!"||n==="$?"||n==="$~"||n==="&"||n==="F!"||n==="F")break;if(n==="/$"||n==="/&")return null}}return t}var Pd=null;function L_(t){t=t.nextSibling;for(var n=0;t;){if(t.nodeType===8){var a=t.data;if(a==="/$"||a==="/&"){if(n===0)return Pn(t.nextSibling);n--}else a!=="$"&&a!=="$!"&&a!=="$?"&&a!=="$~"&&a!=="&"||n++}t=t.nextSibling}return null}function U_(t){t=t.previousSibling;for(var n=0;t;){if(t.nodeType===8){var a=t.data;if(a==="$"||a==="$!"||a==="$?"||a==="$~"||a==="&"){if(n===0)return t;n--}else a!=="/$"&&a!=="/&"||n++}t=t.previousSibling}return null}function z_(t,n,a){switch(n=Ac(a),t){case"html":if(t=n.documentElement,!t)throw Error(r(452));return t;case"head":if(t=n.head,!t)throw Error(r(453));return t;case"body":if(t=n.body,!t)throw Error(r(454));return t;default:throw Error(r(451))}}function pl(t){for(var n=t.attributes;n.length;)t.removeAttributeNode(n[0]);ua(t)}var Ln=new Map,B_=new Set;function Sc(t){return typeof t.getRootNode=="function"?t.getRootNode():t.nodeType===9?t:t.ownerDocument}var es=re.d;re.d={f:Pb,r:Lb,D:Ub,C:zb,L:Bb,m:qb,X:Fb,S:Hb,M:Gb};function Pb(){var t=es.f(),n=pc();return t||n}function Lb(t){var n=Rn(t);n!==null&&n.tag===5&&n.type==="form"?sy(n):es.r(t)}var Fa=typeof document>"u"?null:document;function q_(t,n,a){var o=Fa;if(o&&typeof n=="string"&&n){var h=an(n);h='link[rel="'+t+'"][href="'+h+'"]',typeof a=="string"&&(h+='[crossorigin="'+a+'"]'),B_.has(h)||(B_.add(h),t={rel:t,crossOrigin:a,href:n},o.querySelector(h)===null&&(n=o.createElement("link"),Yt(n,"link",t),bt(n),o.head.appendChild(n)))}}function Ub(t){es.D(t),q_("dns-prefetch",t,null)}function zb(t,n){es.C(t,n),q_("preconnect",t,n)}function Bb(t,n,a){es.L(t,n,a);var o=Fa;if(o&&t&&n){var h='link[rel="preload"][as="'+an(n)+'"]';n==="image"&&a&&a.imageSrcSet?(h+='[imagesrcset="'+an(a.imageSrcSet)+'"]',typeof a.imageSizes=="string"&&(h+='[imagesizes="'+an(a.imageSizes)+'"]')):h+='[href="'+an(t)+'"]';var d=h;switch(n){case"style":d=Ga(t);break;case"script":d=Qa(t)}Ln.has(d)||(t=A({rel:"preload",href:n==="image"&&a&&a.imageSrcSet?void 0:t,as:n},a),Ln.set(d,t),o.querySelector(h)!==null||n==="style"&&o.querySelector(gl(d))||n==="script"&&o.querySelector(yl(d))||(n=o.createElement("link"),Yt(n,"link",t),bt(n),o.head.appendChild(n)))}}function qb(t,n){es.m(t,n);var a=Fa;if(a&&t){var o=n&&typeof n.as=="string"?n.as:"script",h='link[rel="modulepreload"][as="'+an(o)+'"][href="'+an(t)+'"]',d=h;switch(o){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":d=Qa(t)}if(!Ln.has(d)&&(t=A({rel:"modulepreload",href:t},n),Ln.set(d,t),a.querySelector(h)===null)){switch(o){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(a.querySelector(yl(d)))return}o=a.createElement("link"),Yt(o,"link",t),bt(o),a.head.appendChild(o)}}}function Hb(t,n,a){es.S(t,n,a);var o=Fa;if(o&&t){var h=di(o).hoistableStyles,d=Ga(t);n=n||"default";var _=h.get(d);if(!_){var b={loading:0,preload:null};if(_=o.querySelector(gl(d)))b.loading=5;else{t=A({rel:"stylesheet",href:t,"data-precedence":n},a),(a=Ln.get(d))&&Ld(t,a);var C=_=o.createElement("link");bt(C),Yt(C,"link",t),C._p=new Promise(function(z,Q){C.onload=z,C.onerror=Q}),C.addEventListener("load",function(){b.loading|=1}),C.addEventListener("error",function(){b.loading|=2}),b.loading|=4,wc(_,n,o)}_={type:"stylesheet",instance:_,count:1,state:b},h.set(d,_)}}}function Fb(t,n){es.X(t,n);var a=Fa;if(a&&t){var o=di(a).hoistableScripts,h=Qa(t),d=o.get(h);d||(d=a.querySelector(yl(h)),d||(t=A({src:t,async:!0},n),(n=Ln.get(h))&&Ud(t,n),d=a.createElement("script"),bt(d),Yt(d,"link",t),a.head.appendChild(d)),d={type:"script",instance:d,count:1,state:null},o.set(h,d))}}function Gb(t,n){es.M(t,n);var a=Fa;if(a&&t){var o=di(a).hoistableScripts,h=Qa(t),d=o.get(h);d||(d=a.querySelector(yl(h)),d||(t=A({src:t,async:!0,type:"module"},n),(n=Ln.get(h))&&Ud(t,n),d=a.createElement("script"),bt(d),Yt(d,"link",t),a.head.appendChild(d)),d={type:"script",instance:d,count:1,state:null},o.set(h,d))}}function H_(t,n,a,o){var h=(h=Ie.current)?Sc(h):null;if(!h)throw Error(r(446));switch(t){case"meta":case"title":return null;case"style":return typeof a.precedence=="string"&&typeof a.href=="string"?(n=Ga(a.href),a=di(h).hoistableStyles,o=a.get(n),o||(o={type:"style",instance:null,count:0,state:null},a.set(n,o)),o):{type:"void",instance:null,count:0,state:null};case"link":if(a.rel==="stylesheet"&&typeof a.href=="string"&&typeof a.precedence=="string"){t=Ga(a.href);var d=di(h).hoistableStyles,_=d.get(t);if(_||(h=h.ownerDocument||h,_={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},d.set(t,_),(d=h.querySelector(gl(t)))&&!d._p&&(_.instance=d,_.state.loading=5),Ln.has(t)||(a={rel:"preload",as:"style",href:a.href,crossOrigin:a.crossOrigin,integrity:a.integrity,media:a.media,hrefLang:a.hrefLang,referrerPolicy:a.referrerPolicy},Ln.set(t,a),d||Qb(h,t,a,_.state))),n&&o===null)throw Error(r(528,""));return _}if(n&&o!==null)throw Error(r(529,""));return null;case"script":return n=a.async,a=a.src,typeof a=="string"&&n&&typeof n!="function"&&typeof n!="symbol"?(n=Qa(a),a=di(h).hoistableScripts,o=a.get(n),o||(o={type:"script",instance:null,count:0,state:null},a.set(n,o)),o):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,t))}}function Ga(t){return'href="'+an(t)+'"'}function gl(t){return'link[rel="stylesheet"]['+t+"]"}function F_(t){return A({},t,{"data-precedence":t.precedence,precedence:null})}function Qb(t,n,a,o){t.querySelector('link[rel="preload"][as="style"]['+n+"]")?o.loading=1:(n=t.createElement("link"),o.preload=n,n.addEventListener("load",function(){return o.loading|=1}),n.addEventListener("error",function(){return o.loading|=2}),Yt(n,"link",a),bt(n),t.head.appendChild(n))}function Qa(t){return'[src="'+an(t)+'"]'}function yl(t){return"script[async]"+t}function G_(t,n,a){if(n.count++,n.instance===null)switch(n.type){case"style":var o=t.querySelector('style[data-href~="'+an(a.href)+'"]');if(o)return n.instance=o,bt(o),o;var h=A({},a,{"data-href":a.href,"data-precedence":a.precedence,href:null,precedence:null});return o=(t.ownerDocument||t).createElement("style"),bt(o),Yt(o,"style",h),wc(o,a.precedence,t),n.instance=o;case"stylesheet":h=Ga(a.href);var d=t.querySelector(gl(h));if(d)return n.state.loading|=4,n.instance=d,bt(d),d;o=F_(a),(h=Ln.get(h))&&Ld(o,h),d=(t.ownerDocument||t).createElement("link"),bt(d);var _=d;return _._p=new Promise(function(b,C){_.onload=b,_.onerror=C}),Yt(d,"link",o),n.state.loading|=4,wc(d,a.precedence,t),n.instance=d;case"script":return d=Qa(a.src),(h=t.querySelector(yl(d)))?(n.instance=h,bt(h),h):(o=a,(h=Ln.get(d))&&(o=A({},a),Ud(o,h)),t=t.ownerDocument||t,h=t.createElement("script"),bt(h),Yt(h,"link",o),t.head.appendChild(h),n.instance=h);case"void":return null;default:throw Error(r(443,n.type))}else n.type==="stylesheet"&&(n.state.loading&4)===0&&(o=n.instance,n.state.loading|=4,wc(o,a.precedence,t));return n.instance}function wc(t,n,a){for(var o=a.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),h=o.length?o[o.length-1]:null,d=h,_=0;_<o.length;_++){var b=o[_];if(b.dataset.precedence===n)d=b;else if(d!==h)break}d?d.parentNode.insertBefore(t,d.nextSibling):(n=a.nodeType===9?a.head:a,n.insertBefore(t,n.firstChild))}function Ld(t,n){t.crossOrigin==null&&(t.crossOrigin=n.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=n.referrerPolicy),t.title==null&&(t.title=n.title)}function Ud(t,n){t.crossOrigin==null&&(t.crossOrigin=n.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=n.referrerPolicy),t.integrity==null&&(t.integrity=n.integrity)}var xc=null;function Q_(t,n,a){if(xc===null){var o=new Map,h=xc=new Map;h.set(a,o)}else h=xc,o=h.get(a),o||(o=new Map,h.set(a,o));if(o.has(t))return o;for(o.set(t,null),a=a.getElementsByTagName(t),h=0;h<a.length;h++){var d=a[h];if(!(d[hi]||d[Tt]||t==="link"&&d.getAttribute("rel")==="stylesheet")&&d.namespaceURI!=="http://www.w3.org/2000/svg"){var _=d.getAttribute(n)||"";_=t+_;var b=o.get(_);b?b.push(d):o.set(_,[d])}}return o}function Y_(t,n,a){t=t.ownerDocument||t,t.head.insertBefore(a,n==="title"?t.querySelector("head > title"):null)}function Yb(t,n,a){if(a===1||n.itemProp!=null)return!1;switch(t){case"meta":case"title":return!0;case"style":if(typeof n.precedence!="string"||typeof n.href!="string"||n.href==="")break;return!0;case"link":if(typeof n.rel!="string"||typeof n.href!="string"||n.href===""||n.onLoad||n.onError)break;switch(n.rel){case"stylesheet":return t=n.disabled,typeof n.precedence=="string"&&t==null;default:return!0}case"script":if(n.async&&typeof n.async!="function"&&typeof n.async!="symbol"&&!n.onLoad&&!n.onError&&n.src&&typeof n.src=="string")return!0}return!1}function K_(t){return!(t.type==="stylesheet"&&(t.state.loading&3)===0)}function Kb(t,n,a,o){if(a.type==="stylesheet"&&(typeof o.media!="string"||matchMedia(o.media).matches!==!1)&&(a.state.loading&4)===0){if(a.instance===null){var h=Ga(o.href),d=n.querySelector(gl(h));if(d){n=d._p,n!==null&&typeof n=="object"&&typeof n.then=="function"&&(t.count++,t=Rc.bind(t),n.then(t,t)),a.state.loading|=4,a.instance=d,bt(d);return}d=n.ownerDocument||n,o=F_(o),(h=Ln.get(h))&&Ld(o,h),d=d.createElement("link"),bt(d);var _=d;_._p=new Promise(function(b,C){_.onload=b,_.onerror=C}),Yt(d,"link",o),a.instance=d}t.stylesheets===null&&(t.stylesheets=new Map),t.stylesheets.set(a,n),(n=a.state.preload)&&(a.state.loading&3)===0&&(t.count++,a=Rc.bind(t),n.addEventListener("load",a),n.addEventListener("error",a))}}var zd=0;function Xb(t,n){return t.stylesheets&&t.count===0&&Cc(t,t.stylesheets),0<t.count||0<t.imgCount?function(a){var o=setTimeout(function(){if(t.stylesheets&&Cc(t,t.stylesheets),t.unsuspend){var d=t.unsuspend;t.unsuspend=null,d()}},6e4+n);0<t.imgBytes&&zd===0&&(zd=62500*Cb());var h=setTimeout(function(){if(t.waitingForImages=!1,t.count===0&&(t.stylesheets&&Cc(t,t.stylesheets),t.unsuspend)){var d=t.unsuspend;t.unsuspend=null,d()}},(t.imgBytes>zd?50:800)+n);return t.unsuspend=a,function(){t.unsuspend=null,clearTimeout(o),clearTimeout(h)}}:null}function Rc(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Cc(this,this.stylesheets);else if(this.unsuspend){var t=this.unsuspend;this.unsuspend=null,t()}}}var Ic=null;function Cc(t,n){t.stylesheets=null,t.unsuspend!==null&&(t.count++,Ic=new Map,n.forEach($b,t),Ic=null,Rc.call(t))}function $b(t,n){if(!(n.state.loading&4)){var a=Ic.get(t);if(a)var o=a.get(null);else{a=new Map,Ic.set(t,a);for(var h=t.querySelectorAll("link[data-precedence],style[data-precedence]"),d=0;d<h.length;d++){var _=h[d];(_.nodeName==="LINK"||_.getAttribute("media")!=="not all")&&(a.set(_.dataset.precedence,_),o=_)}o&&a.set(null,o)}h=n.instance,_=h.getAttribute("data-precedence"),d=a.get(_)||o,d===o&&a.set(null,h),a.set(_,h),this.count++,o=Rc.bind(this),h.addEventListener("load",o),h.addEventListener("error",o),d?d.parentNode.insertBefore(h,d.nextSibling):(t=t.nodeType===9?t.head:t,t.insertBefore(h,t.firstChild)),n.state.loading|=4}}var _l={$$typeof:ne,Provider:null,Consumer:null,_currentValue:pe,_currentValue2:pe,_threadCount:0};function Jb(t,n,a,o,h,d,_,b,C){this.tag=1,this.containerInfo=t,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=ui(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ui(0),this.hiddenUpdates=ui(null),this.identifierPrefix=o,this.onUncaughtError=h,this.onCaughtError=d,this.onRecoverableError=_,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=C,this.incompleteTransitions=new Map}function X_(t,n,a,o,h,d,_,b,C,z,Q,$){return t=new Jb(t,n,a,_,C,z,Q,$,b),n=1,d===!0&&(n|=24),d=_n(3,null,null,n),t.current=d,d.stateNode=t,n=vf(),n.refCount++,t.pooledCache=n,n.refCount++,d.memoizedState={element:o,isDehydrated:a,cache:n},Af(d),t}function $_(t){return t?(t=Aa,t):Aa}function J_(t,n,a,o,h,d){h=$_(h),o.context===null?o.context=h:o.pendingContext=h,o=Is(n),o.payload={element:a},d=d===void 0?null:d,d!==null&&(o.callback=d),a=Cs(t,o,n),a!==null&&(fn(a,t,n),$o(a,t,n))}function Z_(t,n){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var a=t.retryLane;t.retryLane=a!==0&&a<n?a:n}}function Bd(t,n){Z_(t,n),(t=t.alternate)&&Z_(t,n)}function W_(t){if(t.tag===13||t.tag===31){var n=Or(t,67108864);n!==null&&fn(n,t,67108864),Bd(t,67108864)}}function e0(t){if(t.tag===13||t.tag===31){var n=An();n=Er(n);var a=Or(t,n);a!==null&&fn(a,t,n),Bd(t,n)}}var Nc=!0;function Zb(t,n,a,o){var h=Y.T;Y.T=null;var d=re.p;try{re.p=2,qd(t,n,a,o)}finally{re.p=d,Y.T=h}}function Wb(t,n,a,o){var h=Y.T;Y.T=null;var d=re.p;try{re.p=8,qd(t,n,a,o)}finally{re.p=d,Y.T=h}}function qd(t,n,a,o){if(Nc){var h=Hd(o);if(h===null)Id(t,n,o,Dc,a),n0(t,o);else if(tA(h,t,n,a,o))o.stopPropagation();else if(n0(t,o),n&4&&-1<eA.indexOf(t)){for(;h!==null;){var d=Rn(h);if(d!==null)switch(d.tag){case 3:if(d=d.stateNode,d.current.memoizedState.isDehydrated){var _=oi(d.pendingLanes);if(_!==0){var b=d;for(b.pendingLanes|=2,b.entangledLanes|=2;_;){var C=1<<31-dt(_);b.entanglements[1]|=C,_&=~C}xi(d),(Fe&6)===0&&(dc=nn()+500,fl(0))}}break;case 31:case 13:b=Or(d,2),b!==null&&fn(b,d,2),pc(),Bd(d,2)}if(d=Hd(o),d===null&&Id(t,n,o,Dc,a),d===h)break;h=d}h!==null&&o.stopPropagation()}else Id(t,n,o,null,a)}}function Hd(t){return t=In(t),Fd(t)}var Dc=null;function Fd(t){if(Dc=null,t=fi(t),t!==null){var n=u(t);if(n===null)t=null;else{var a=n.tag;if(a===13){if(t=f(n),t!==null)return t;t=null}else if(a===31){if(t=p(n),t!==null)return t;t=null}else if(a===3){if(n.stateNode.current.memoizedState.isDehydrated)return n.tag===3?n.stateNode.containerInfo:null;t=null}else n!==t&&(t=null)}}return Dc=t,null}function t0(t){switch(t){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(gr()){case To:return 2;case bo:return 8;case ds:case Xh:return 32;case uu:return 268435456;default:return 32}default:return 32}}var Gd=!1,zs=null,Bs=null,qs=null,vl=new Map,El=new Map,Hs=[],eA="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function n0(t,n){switch(t){case"focusin":case"focusout":zs=null;break;case"dragenter":case"dragleave":Bs=null;break;case"mouseover":case"mouseout":qs=null;break;case"pointerover":case"pointerout":vl.delete(n.pointerId);break;case"gotpointercapture":case"lostpointercapture":El.delete(n.pointerId)}}function Tl(t,n,a,o,h,d){return t===null||t.nativeEvent!==d?(t={blockedOn:n,domEventName:a,eventSystemFlags:o,nativeEvent:d,targetContainers:[h]},n!==null&&(n=Rn(n),n!==null&&W_(n)),t):(t.eventSystemFlags|=o,n=t.targetContainers,h!==null&&n.indexOf(h)===-1&&n.push(h),t)}function tA(t,n,a,o,h){switch(n){case"focusin":return zs=Tl(zs,t,n,a,o,h),!0;case"dragenter":return Bs=Tl(Bs,t,n,a,o,h),!0;case"mouseover":return qs=Tl(qs,t,n,a,o,h),!0;case"pointerover":var d=h.pointerId;return vl.set(d,Tl(vl.get(d)||null,t,n,a,o,h)),!0;case"gotpointercapture":return d=h.pointerId,El.set(d,Tl(El.get(d)||null,t,n,a,o,h)),!0}return!1}function i0(t){var n=fi(t.target);if(n!==null){var a=u(n);if(a!==null){if(n=a.tag,n===13){if(n=f(a),n!==null){t.blockedOn=n,Gn(t.priority,function(){e0(a)});return}}else if(n===31){if(n=p(a),n!==null){t.blockedOn=n,Gn(t.priority,function(){e0(a)});return}}else if(n===3&&a.stateNode.current.memoizedState.isDehydrated){t.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Oc(t){if(t.blockedOn!==null)return!1;for(var n=t.targetContainers;0<n.length;){var a=Hd(t.nativeEvent);if(a===null){a=t.nativeEvent;var o=new a.constructor(a.type,a);Vo=o,a.target.dispatchEvent(o),Vo=null}else return n=Rn(a),n!==null&&W_(n),t.blockedOn=a,!1;n.shift()}return!0}function s0(t,n,a){Oc(t)&&a.delete(n)}function nA(){Gd=!1,zs!==null&&Oc(zs)&&(zs=null),Bs!==null&&Oc(Bs)&&(Bs=null),qs!==null&&Oc(qs)&&(qs=null),vl.forEach(s0),El.forEach(s0)}function Mc(t,n){t.blockedOn===n&&(t.blockedOn=null,Gd||(Gd=!0,s.unstable_scheduleCallback(s.unstable_NormalPriority,nA)))}var Vc=null;function r0(t){Vc!==t&&(Vc=t,s.unstable_scheduleCallback(s.unstable_NormalPriority,function(){Vc===t&&(Vc=null);for(var n=0;n<t.length;n+=3){var a=t[n],o=t[n+1],h=t[n+2];if(typeof o!="function"){if(Fd(o||a)===null)continue;break}var d=Rn(a);d!==null&&(t.splice(n,3),n-=3,Hf(d,{pending:!0,data:h,method:a.method,action:o},o,h))}}))}function Ya(t){function n(C){return Mc(C,t)}zs!==null&&Mc(zs,t),Bs!==null&&Mc(Bs,t),qs!==null&&Mc(qs,t),vl.forEach(n),El.forEach(n);for(var a=0;a<Hs.length;a++){var o=Hs[a];o.blockedOn===t&&(o.blockedOn=null)}for(;0<Hs.length&&(a=Hs[0],a.blockedOn===null);)i0(a),a.blockedOn===null&&Hs.shift();if(a=(t.ownerDocument||t).$$reactFormReplay,a!=null)for(o=0;o<a.length;o+=3){var h=a[o],d=a[o+1],_=h[Lt]||null;if(typeof d=="function")_||r0(a);else if(_){var b=null;if(d&&d.hasAttribute("formAction")){if(h=d,_=d[Lt]||null)b=_.formAction;else if(Fd(h)!==null)continue}else b=_.action;typeof b=="function"?a[o+1]=b:(a.splice(o,3),o-=3),r0(a)}}}function a0(){function t(d){d.canIntercept&&d.info==="react-transition"&&d.intercept({handler:function(){return new Promise(function(_){return h=_})},focusReset:"manual",scroll:"manual"})}function n(){h!==null&&(h(),h=null),o||setTimeout(a,20)}function a(){if(!o&&!navigation.transition){var d=navigation.currentEntry;d&&d.url!=null&&navigation.navigate(d.url,{state:d.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var o=!1,h=null;return navigation.addEventListener("navigate",t),navigation.addEventListener("navigatesuccess",n),navigation.addEventListener("navigateerror",n),setTimeout(a,100),function(){o=!0,navigation.removeEventListener("navigate",t),navigation.removeEventListener("navigatesuccess",n),navigation.removeEventListener("navigateerror",n),h!==null&&(h(),h=null)}}}function Qd(t){this._internalRoot=t}kc.prototype.render=Qd.prototype.render=function(t){var n=this._internalRoot;if(n===null)throw Error(r(409));var a=n.current,o=An();J_(a,o,t,n,null,null)},kc.prototype.unmount=Qd.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var n=t.containerInfo;J_(t.current,2,null,t,null,null),pc(),n[ci]=null}};function kc(t){this._internalRoot=t}kc.prototype.unstable_scheduleHydration=function(t){if(t){var n=pu();t={blockedOn:null,target:t,priority:n};for(var a=0;a<Hs.length&&n!==0&&n<Hs[a].priority;a++);Hs.splice(a,0,t),a===0&&i0(t)}};var o0=e.version;if(o0!=="19.2.0")throw Error(r(527,o0,"19.2.0"));re.findDOMNode=function(t){var n=t._reactInternals;if(n===void 0)throw typeof t.render=="function"?Error(r(188)):(t=Object.keys(t).join(","),Error(r(268,t)));return t=g(n),t=t!==null?T(t):null,t=t===null?null:t.stateNode,t};var iA={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:Y,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var jc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!jc.isDisabled&&jc.supportsFiber)try{Hn=jc.inject(iA),qt=jc}catch{}}return Al.createRoot=function(t,n){if(!l(t))throw Error(r(299));var a=!1,o="",h=my,d=py,_=gy;return n!=null&&(n.unstable_strictMode===!0&&(a=!0),n.identifierPrefix!==void 0&&(o=n.identifierPrefix),n.onUncaughtError!==void 0&&(h=n.onUncaughtError),n.onCaughtError!==void 0&&(d=n.onCaughtError),n.onRecoverableError!==void 0&&(_=n.onRecoverableError)),n=X_(t,1,!1,null,null,a,o,null,h,d,_,a0),t[ci]=n.current,Rd(t),new Qd(n)},Al.hydrateRoot=function(t,n,a){if(!l(t))throw Error(r(299));var o=!1,h="",d=my,_=py,b=gy,C=null;return a!=null&&(a.unstable_strictMode===!0&&(o=!0),a.identifierPrefix!==void 0&&(h=a.identifierPrefix),a.onUncaughtError!==void 0&&(d=a.onUncaughtError),a.onCaughtError!==void 0&&(_=a.onCaughtError),a.onRecoverableError!==void 0&&(b=a.onRecoverableError),a.formState!==void 0&&(C=a.formState)),n=X_(t,1,!0,n,a??null,o,h,C,d,_,b,a0),n.context=$_(null),a=n.current,o=An(),o=Er(o),h=Is(o),h.callback=null,Cs(a,h,o),a=o,n.current.lanes=a,_r(n,a),xi(n),t[ci]=n.current,Rd(t),new kc(n)},Al.version="19.2.0",Al}var y0;function pA(){if(y0)return Xd.exports;y0=1;function s(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(s)}catch(e){console.error(e)}}return s(),Xd.exports=mA(),Xd.exports}var gA=pA();const yA=()=>{};var _0={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wv=function(s){const e=[];let i=0;for(let r=0;r<s.length;r++){let l=s.charCodeAt(r);l<128?e[i++]=l:l<2048?(e[i++]=l>>6|192,e[i++]=l&63|128):(l&64512)===55296&&r+1<s.length&&(s.charCodeAt(r+1)&64512)===56320?(l=65536+((l&1023)<<10)+(s.charCodeAt(++r)&1023),e[i++]=l>>18|240,e[i++]=l>>12&63|128,e[i++]=l>>6&63|128,e[i++]=l&63|128):(e[i++]=l>>12|224,e[i++]=l>>6&63|128,e[i++]=l&63|128)}return e},_A=function(s){const e=[];let i=0,r=0;for(;i<s.length;){const l=s[i++];if(l<128)e[r++]=String.fromCharCode(l);else if(l>191&&l<224){const u=s[i++];e[r++]=String.fromCharCode((l&31)<<6|u&63)}else if(l>239&&l<365){const u=s[i++],f=s[i++],p=s[i++],y=((l&7)<<18|(u&63)<<12|(f&63)<<6|p&63)-65536;e[r++]=String.fromCharCode(55296+(y>>10)),e[r++]=String.fromCharCode(56320+(y&1023))}else{const u=s[i++],f=s[i++];e[r++]=String.fromCharCode((l&15)<<12|(u&63)<<6|f&63)}}return e.join("")},eE={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(s,e){if(!Array.isArray(s))throw Error("encodeByteArray takes an array as a parameter");this.init_();const i=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let l=0;l<s.length;l+=3){const u=s[l],f=l+1<s.length,p=f?s[l+1]:0,y=l+2<s.length,g=y?s[l+2]:0,T=u>>2,A=(u&3)<<4|p>>4;let x=(p&15)<<2|g>>6,V=g&63;y||(V=64,f||(x=64)),r.push(i[T],i[A],i[x],i[V])}return r.join("")},encodeString(s,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(s):this.encodeByteArray(Wv(s),e)},decodeString(s,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(s):_A(this.decodeStringToByteArray(s,e))},decodeStringToByteArray(s,e){this.init_();const i=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let l=0;l<s.length;){const u=i[s.charAt(l++)],p=l<s.length?i[s.charAt(l)]:0;++l;const g=l<s.length?i[s.charAt(l)]:64;++l;const A=l<s.length?i[s.charAt(l)]:64;if(++l,u==null||p==null||g==null||A==null)throw new vA;const x=u<<2|p>>4;if(r.push(x),g!==64){const V=p<<4&240|g>>2;if(r.push(V),A!==64){const q=g<<6&192|A;r.push(q)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let s=0;s<this.ENCODED_VALS.length;s++)this.byteToCharMap_[s]=this.ENCODED_VALS.charAt(s),this.charToByteMap_[this.byteToCharMap_[s]]=s,this.byteToCharMapWebSafe_[s]=this.ENCODED_VALS_WEBSAFE.charAt(s),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[s]]=s,s>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(s)]=s,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(s)]=s)}}};class vA extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const EA=function(s){const e=Wv(s);return eE.encodeByteArray(e,!0)},Wc=function(s){return EA(s).replace(/\./g,"")},tE=function(s){try{return eE.decodeString(s,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TA(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bA=()=>TA().__FIREBASE_DEFAULTS__,AA=()=>{if(typeof process>"u"||typeof _0>"u")return;const s=_0.__FIREBASE_DEFAULTS__;if(s)return JSON.parse(s)},SA=()=>{if(typeof document>"u")return;let s;try{s=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=s&&tE(s[1]);return e&&JSON.parse(e)},Ah=()=>{try{return yA()||bA()||AA()||SA()}catch(s){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${s}`);return}},nE=s=>Ah()?.emulatorHosts?.[s],wA=s=>{const e=nE(s);if(!e)return;const i=e.lastIndexOf(":");if(i<=0||i+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(i+1),10);return e[0]==="["?[e.substring(1,i-1),r]:[e.substring(0,i),r]},iE=()=>Ah()?.config,sE=s=>Ah()?.[`_${s}`];/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xA{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,i)=>{this.resolve=e,this.reject=i})}wrapCallback(e){return(i,r)=>{i?this.reject(i):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(i):e(i,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function co(s){try{return(s.startsWith("http://")||s.startsWith("https://")?new URL(s).hostname:s).endsWith(".cloudworkstations.dev")}catch{return!1}}async function rE(s){return(await fetch(s,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RA(s,e){if(s.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const i={alg:"none",type:"JWT"},r=e||"demo-project",l=s.iat||0,u=s.sub||s.user_id;if(!u)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const f={iss:`https://securetoken.google.com/${r}`,aud:r,iat:l,exp:l+3600,auth_time:l,sub:u,user_id:u,firebase:{sign_in_provider:"custom",identities:{}},...s};return[Wc(JSON.stringify(i)),Wc(JSON.stringify(f)),""].join(".")}const Nl={};function IA(){const s={prod:[],emulator:[]};for(const e of Object.keys(Nl))Nl[e]?s.emulator.push(e):s.prod.push(e);return s}function CA(s){let e=document.getElementById(s),i=!1;return e||(e=document.createElement("div"),e.setAttribute("id",s),i=!0),{created:i,element:e}}let v0=!1;function aE(s,e){if(typeof window>"u"||typeof document>"u"||!co(window.location.host)||Nl[s]===e||Nl[s]||v0)return;Nl[s]=e;function i(x){return`__firebase__banner__${x}`}const r="__firebase__banner",u=IA().prod.length>0;function f(){const x=document.getElementById(r);x&&x.remove()}function p(x){x.style.display="flex",x.style.background="#7faaf0",x.style.position="fixed",x.style.bottom="5px",x.style.left="5px",x.style.padding=".5em",x.style.borderRadius="5px",x.style.alignItems="center"}function y(x,V){x.setAttribute("width","24"),x.setAttribute("id",V),x.setAttribute("height","24"),x.setAttribute("viewBox","0 0 24 24"),x.setAttribute("fill","none"),x.style.marginLeft="-6px"}function g(){const x=document.createElement("span");return x.style.cursor="pointer",x.style.marginLeft="16px",x.style.fontSize="24px",x.innerHTML=" &times;",x.onclick=()=>{v0=!0,f()},x}function T(x,V){x.setAttribute("id",V),x.innerText="Learn more",x.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",x.setAttribute("target","__blank"),x.style.paddingLeft="5px",x.style.textDecoration="underline"}function A(){const x=CA(r),V=i("text"),q=document.getElementById(V)||document.createElement("span"),G=i("learnmore"),K=document.getElementById(G)||document.createElement("a"),ee=i("preprendIcon"),te=document.getElementById(ee)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(x.created){const ne=x.element;p(ne),T(K,G);const he=g();y(te,ee),ne.append(te,q,K,he),document.body.appendChild(ne)}u?(q.innerText="Preview backend disconnected.",te.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(te.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,q.innerText="Preview backend running in this workspace."),q.setAttribute("id",V)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",A):A()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function NA(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(tn())}function DA(){const s=Ah()?.forceEnvironment;if(s==="node")return!0;if(s==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function OA(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function MA(){const s=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof s=="object"&&s.id!==void 0}function VA(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function kA(){const s=tn();return s.indexOf("MSIE ")>=0||s.indexOf("Trident/")>=0}function jA(){return!DA()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function PA(){try{return typeof indexedDB=="object"}catch{return!1}}function LA(){return new Promise((s,e)=>{try{let i=!0;const r="validate-browser-context-for-indexeddb-analytics-module",l=self.indexedDB.open(r);l.onsuccess=()=>{l.result.close(),i||self.indexedDB.deleteDatabase(r),s(!0)},l.onupgradeneeded=()=>{i=!1},l.onerror=()=>{e(l.error?.message||"")}}catch(i){e(i)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UA="FirebaseError";class cs extends Error{constructor(e,i,r){super(i),this.code=e,this.customData=r,this.name=UA,Object.setPrototypeOf(this,cs.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Ql.prototype.create)}}class Ql{constructor(e,i,r){this.service=e,this.serviceName=i,this.errors=r}create(e,...i){const r=i[0]||{},l=`${this.service}/${e}`,u=this.errors[e],f=u?zA(u,r):"Error",p=`${this.serviceName}: ${f} (${l}).`;return new cs(l,p,r)}}function zA(s,e){return s.replace(BA,(i,r)=>{const l=e[r];return l!=null?String(l):`<${r}?>`})}const BA=/\{\$([^}]+)}/g;function qA(s){for(const e in s)if(Object.prototype.hasOwnProperty.call(s,e))return!1;return!0}function Xr(s,e){if(s===e)return!0;const i=Object.keys(s),r=Object.keys(e);for(const l of i){if(!r.includes(l))return!1;const u=s[l],f=e[l];if(E0(u)&&E0(f)){if(!Xr(u,f))return!1}else if(u!==f)return!1}for(const l of r)if(!i.includes(l))return!1;return!0}function E0(s){return s!==null&&typeof s=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yl(s){const e=[];for(const[i,r]of Object.entries(s))Array.isArray(r)?r.forEach(l=>{e.push(encodeURIComponent(i)+"="+encodeURIComponent(l))}):e.push(encodeURIComponent(i)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function Sl(s){const e={};return s.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[l,u]=r.split("=");e[decodeURIComponent(l)]=decodeURIComponent(u)}}),e}function wl(s){const e=s.indexOf("?");if(!e)return"";const i=s.indexOf("#",e);return s.substring(e,i>0?i:void 0)}function HA(s,e){const i=new FA(s,e);return i.subscribe.bind(i)}class FA{constructor(e,i){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=i,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(i=>{i.next(e)})}error(e){this.forEachObserver(i=>{i.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,i,r){let l;if(e===void 0&&i===void 0&&r===void 0)throw new Error("Missing Observer.");GA(e,["next","error","complete"])?l=e:l={next:e,error:i,complete:r},l.next===void 0&&(l.next=Wd),l.error===void 0&&(l.error=Wd),l.complete===void 0&&(l.complete=Wd);const u=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?l.error(this.finalError):l.complete()}catch{}}),this.observers.push(l),u}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let i=0;i<this.observers.length;i++)this.sendOne(i,e)}sendOne(e,i){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{i(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function GA(s,e){if(typeof s!="object"||s===null)return!1;for(const i of e)if(i in s&&typeof s[i]=="function")return!0;return!1}function Wd(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pt(s){return s&&s._delegate?s._delegate:s}class $r{constructor(e,i,r){this.name=e,this.instanceFactory=i,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gr="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QA{constructor(e,i){this.name=e,this.container=i,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const i=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(i)){const r=new xA;if(this.instancesDeferred.set(i,r),this.isInitialized(i)||this.shouldAutoInitialize())try{const l=this.getOrInitializeService({instanceIdentifier:i});l&&r.resolve(l)}catch{}}return this.instancesDeferred.get(i).promise}getImmediate(e){const i=this.normalizeInstanceIdentifier(e?.identifier),r=e?.optional??!1;if(this.isInitialized(i)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:i})}catch(l){if(r)return null;throw l}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(KA(e))try{this.getOrInitializeService({instanceIdentifier:Gr})}catch{}for(const[i,r]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(i);try{const u=this.getOrInitializeService({instanceIdentifier:l});r.resolve(u)}catch{}}}}clearInstance(e=Gr){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(i=>"INTERNAL"in i).map(i=>i.INTERNAL.delete()),...e.filter(i=>"_delete"in i).map(i=>i._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Gr){return this.instances.has(e)}getOptions(e=Gr){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:i={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const l=this.getOrInitializeService({instanceIdentifier:r,options:i});for(const[u,f]of this.instancesDeferred.entries()){const p=this.normalizeInstanceIdentifier(u);r===p&&f.resolve(l)}return l}onInit(e,i){const r=this.normalizeInstanceIdentifier(i),l=this.onInitCallbacks.get(r)??new Set;l.add(e),this.onInitCallbacks.set(r,l);const u=this.instances.get(r);return u&&e(u,r),()=>{l.delete(e)}}invokeOnInitCallbacks(e,i){const r=this.onInitCallbacks.get(i);if(r)for(const l of r)try{l(e,i)}catch{}}getOrInitializeService({instanceIdentifier:e,options:i={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:YA(e),options:i}),this.instances.set(e,r),this.instancesOptions.set(e,i),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Gr){return this.component?this.component.multipleInstances?e:Gr:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function YA(s){return s===Gr?void 0:s}function KA(s){return s.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XA{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const i=this.getProvider(e.name);if(i.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);i.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const i=new QA(e,this);return this.providers.set(e,i),i}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ve;(function(s){s[s.DEBUG=0]="DEBUG",s[s.VERBOSE=1]="VERBOSE",s[s.INFO=2]="INFO",s[s.WARN=3]="WARN",s[s.ERROR=4]="ERROR",s[s.SILENT=5]="SILENT"})(Ve||(Ve={}));const $A={debug:Ve.DEBUG,verbose:Ve.VERBOSE,info:Ve.INFO,warn:Ve.WARN,error:Ve.ERROR,silent:Ve.SILENT},JA=Ve.INFO,ZA={[Ve.DEBUG]:"log",[Ve.VERBOSE]:"log",[Ve.INFO]:"info",[Ve.WARN]:"warn",[Ve.ERROR]:"error"},WA=(s,e,...i)=>{if(e<s.logLevel)return;const r=new Date().toISOString(),l=ZA[e];if(l)console[l](`[${r}]  ${s.name}:`,...i);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Hm{constructor(e){this.name=e,this._logLevel=JA,this._logHandler=WA,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Ve))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?$A[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Ve.DEBUG,...e),this._logHandler(this,Ve.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Ve.VERBOSE,...e),this._logHandler(this,Ve.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Ve.INFO,...e),this._logHandler(this,Ve.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Ve.WARN,...e),this._logHandler(this,Ve.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Ve.ERROR,...e),this._logHandler(this,Ve.ERROR,...e)}}const eS=(s,e)=>e.some(i=>s instanceof i);let T0,b0;function tS(){return T0||(T0=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function nS(){return b0||(b0=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const oE=new WeakMap,fm=new WeakMap,lE=new WeakMap,em=new WeakMap,Fm=new WeakMap;function iS(s){const e=new Promise((i,r)=>{const l=()=>{s.removeEventListener("success",u),s.removeEventListener("error",f)},u=()=>{i(Js(s.result)),l()},f=()=>{r(s.error),l()};s.addEventListener("success",u),s.addEventListener("error",f)});return e.then(i=>{i instanceof IDBCursor&&oE.set(i,s)}).catch(()=>{}),Fm.set(e,s),e}function sS(s){if(fm.has(s))return;const e=new Promise((i,r)=>{const l=()=>{s.removeEventListener("complete",u),s.removeEventListener("error",f),s.removeEventListener("abort",f)},u=()=>{i(),l()},f=()=>{r(s.error||new DOMException("AbortError","AbortError")),l()};s.addEventListener("complete",u),s.addEventListener("error",f),s.addEventListener("abort",f)});fm.set(s,e)}let dm={get(s,e,i){if(s instanceof IDBTransaction){if(e==="done")return fm.get(s);if(e==="objectStoreNames")return s.objectStoreNames||lE.get(s);if(e==="store")return i.objectStoreNames[1]?void 0:i.objectStore(i.objectStoreNames[0])}return Js(s[e])},set(s,e,i){return s[e]=i,!0},has(s,e){return s instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in s}};function rS(s){dm=s(dm)}function aS(s){return s===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...i){const r=s.call(tm(this),e,...i);return lE.set(r,e.sort?e.sort():[e]),Js(r)}:nS().includes(s)?function(...e){return s.apply(tm(this),e),Js(oE.get(this))}:function(...e){return Js(s.apply(tm(this),e))}}function oS(s){return typeof s=="function"?aS(s):(s instanceof IDBTransaction&&sS(s),eS(s,tS())?new Proxy(s,dm):s)}function Js(s){if(s instanceof IDBRequest)return iS(s);if(em.has(s))return em.get(s);const e=oS(s);return e!==s&&(em.set(s,e),Fm.set(e,s)),e}const tm=s=>Fm.get(s);function lS(s,e,{blocked:i,upgrade:r,blocking:l,terminated:u}={}){const f=indexedDB.open(s,e),p=Js(f);return r&&f.addEventListener("upgradeneeded",y=>{r(Js(f.result),y.oldVersion,y.newVersion,Js(f.transaction),y)}),i&&f.addEventListener("blocked",y=>i(y.oldVersion,y.newVersion,y)),p.then(y=>{u&&y.addEventListener("close",()=>u()),l&&y.addEventListener("versionchange",g=>l(g.oldVersion,g.newVersion,g))}).catch(()=>{}),p}const uS=["get","getKey","getAll","getAllKeys","count"],cS=["put","add","delete","clear"],nm=new Map;function A0(s,e){if(!(s instanceof IDBDatabase&&!(e in s)&&typeof e=="string"))return;if(nm.get(e))return nm.get(e);const i=e.replace(/FromIndex$/,""),r=e!==i,l=cS.includes(i);if(!(i in(r?IDBIndex:IDBObjectStore).prototype)||!(l||uS.includes(i)))return;const u=async function(f,...p){const y=this.transaction(f,l?"readwrite":"readonly");let g=y.store;return r&&(g=g.index(p.shift())),(await Promise.all([g[i](...p),l&&y.done]))[0]};return nm.set(e,u),u}rS(s=>({...s,get:(e,i,r)=>A0(e,i)||s.get(e,i,r),has:(e,i)=>!!A0(e,i)||s.has(e,i)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hS{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(i=>{if(fS(i)){const r=i.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(i=>i).join(" ")}}function fS(s){return s.getComponent()?.type==="VERSION"}const mm="@firebase/app",S0="0.14.5";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const as=new Hm("@firebase/app"),dS="@firebase/app-compat",mS="@firebase/analytics-compat",pS="@firebase/analytics",gS="@firebase/app-check-compat",yS="@firebase/app-check",_S="@firebase/auth",vS="@firebase/auth-compat",ES="@firebase/database",TS="@firebase/data-connect",bS="@firebase/database-compat",AS="@firebase/functions",SS="@firebase/functions-compat",wS="@firebase/installations",xS="@firebase/installations-compat",RS="@firebase/messaging",IS="@firebase/messaging-compat",CS="@firebase/performance",NS="@firebase/performance-compat",DS="@firebase/remote-config",OS="@firebase/remote-config-compat",MS="@firebase/storage",VS="@firebase/storage-compat",kS="@firebase/firestore",jS="@firebase/ai",PS="@firebase/firestore-compat",LS="firebase",US="12.5.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pm="[DEFAULT]",zS={[mm]:"fire-core",[dS]:"fire-core-compat",[pS]:"fire-analytics",[mS]:"fire-analytics-compat",[yS]:"fire-app-check",[gS]:"fire-app-check-compat",[_S]:"fire-auth",[vS]:"fire-auth-compat",[ES]:"fire-rtdb",[TS]:"fire-data-connect",[bS]:"fire-rtdb-compat",[AS]:"fire-fn",[SS]:"fire-fn-compat",[wS]:"fire-iid",[xS]:"fire-iid-compat",[RS]:"fire-fcm",[IS]:"fire-fcm-compat",[CS]:"fire-perf",[NS]:"fire-perf-compat",[DS]:"fire-rc",[OS]:"fire-rc-compat",[MS]:"fire-gcs",[VS]:"fire-gcs-compat",[kS]:"fire-fst",[PS]:"fire-fst-compat",[jS]:"fire-vertex","fire-js":"fire-js",[LS]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eh=new Map,BS=new Map,gm=new Map;function w0(s,e){try{s.container.addComponent(e)}catch(i){as.debug(`Component ${e.name} failed to register with FirebaseApp ${s.name}`,i)}}function io(s){const e=s.name;if(gm.has(e))return as.debug(`There were multiple attempts to register component ${e}.`),!1;gm.set(e,s);for(const i of eh.values())w0(i,s);for(const i of BS.values())w0(i,s);return!0}function Gm(s,e){const i=s.container.getProvider("heartbeat").getImmediate({optional:!0});return i&&i.triggerHeartbeat(),s.container.getProvider(e)}function Un(s){return s==null?!1:s.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qS={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Zs=new Ql("app","Firebase",qS);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HS{constructor(e,i,r){this._isDeleted=!1,this._options={...e},this._config={...i},this._name=i.name,this._automaticDataCollectionEnabled=i.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new $r("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Zs.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ho=US;function uE(s,e={}){let i=s;typeof e!="object"&&(e={name:e});const r={name:pm,automaticDataCollectionEnabled:!0,...e},l=r.name;if(typeof l!="string"||!l)throw Zs.create("bad-app-name",{appName:String(l)});if(i||(i=iE()),!i)throw Zs.create("no-options");const u=eh.get(l);if(u){if(Xr(i,u.options)&&Xr(r,u.config))return u;throw Zs.create("duplicate-app",{appName:l})}const f=new XA(l);for(const y of gm.values())f.addComponent(y);const p=new HS(i,r,f);return eh.set(l,p),p}function cE(s=pm){const e=eh.get(s);if(!e&&s===pm&&iE())return uE();if(!e)throw Zs.create("no-app",{appName:s});return e}function Ws(s,e,i){let r=zS[s]??s;i&&(r+=`-${i}`);const l=r.match(/\s|\//),u=e.match(/\s|\//);if(l||u){const f=[`Unable to register library "${r}" with version "${e}":`];l&&f.push(`library name "${r}" contains illegal characters (whitespace or "/")`),l&&u&&f.push("and"),u&&f.push(`version name "${e}" contains illegal characters (whitespace or "/")`),as.warn(f.join(" "));return}io(new $r(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FS="firebase-heartbeat-database",GS=1,jl="firebase-heartbeat-store";let im=null;function hE(){return im||(im=lS(FS,GS,{upgrade:(s,e)=>{switch(e){case 0:try{s.createObjectStore(jl)}catch(i){console.warn(i)}}}}).catch(s=>{throw Zs.create("idb-open",{originalErrorMessage:s.message})})),im}async function QS(s){try{const i=(await hE()).transaction(jl),r=await i.objectStore(jl).get(fE(s));return await i.done,r}catch(e){if(e instanceof cs)as.warn(e.message);else{const i=Zs.create("idb-get",{originalErrorMessage:e?.message});as.warn(i.message)}}}async function x0(s,e){try{const r=(await hE()).transaction(jl,"readwrite");await r.objectStore(jl).put(e,fE(s)),await r.done}catch(i){if(i instanceof cs)as.warn(i.message);else{const r=Zs.create("idb-set",{originalErrorMessage:i?.message});as.warn(r.message)}}}function fE(s){return`${s.name}!${s.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YS=1024,KS=30;class XS{constructor(e){this.container=e,this._heartbeatsCache=null;const i=this.container.getProvider("app").getImmediate();this._storage=new JS(i),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=R0();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(l=>l.date===r))return;if(this._heartbeatsCache.heartbeats.push({date:r,agent:i}),this._heartbeatsCache.heartbeats.length>KS){const l=ZS(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(l,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){as.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=R0(),{heartbeatsToSend:i,unsentEntries:r}=$S(this._heartbeatsCache.heartbeats),l=Wc(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=e,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),l}catch(e){return as.warn(e),""}}}function R0(){return new Date().toISOString().substring(0,10)}function $S(s,e=YS){const i=[];let r=s.slice();for(const l of s){const u=i.find(f=>f.agent===l.agent);if(u){if(u.dates.push(l.date),I0(i)>e){u.dates.pop();break}}else if(i.push({agent:l.agent,dates:[l.date]}),I0(i)>e){i.pop();break}r=r.slice(1)}return{heartbeatsToSend:i,unsentEntries:r}}class JS{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return PA()?LA().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const i=await QS(this.app);return i?.heartbeats?i:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return x0(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return x0(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function I0(s){return Wc(JSON.stringify({version:2,heartbeats:s})).length}function ZS(s){if(s.length===0)return-1;let e=0,i=s[0].date;for(let r=1;r<s.length;r++)s[r].date<i&&(i=s[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WS(s){io(new $r("platform-logger",e=>new hS(e),"PRIVATE")),io(new $r("heartbeat",e=>new XS(e),"PRIVATE")),Ws(mm,S0,s),Ws(mm,S0,"esm2020"),Ws("fire-js","")}WS("");var ew="firebase",tw="12.5.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Ws(ew,tw,"app");function dE(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const nw=dE,mE=new Ql("auth","Firebase",dE());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const th=new Hm("@firebase/auth");function iw(s,...e){th.logLevel<=Ve.WARN&&th.warn(`Auth (${ho}): ${s}`,...e)}function Hc(s,...e){th.logLevel<=Ve.ERROR&&th.error(`Auth (${ho}): ${s}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ii(s,...e){throw Qm(s,...e)}function Ii(s,...e){return Qm(s,...e)}function pE(s,e,i){const r={...nw(),[e]:i};return new Ql("auth","Firebase",r).create(e,{appName:s.name})}function is(s){return pE(s,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Qm(s,...e){if(typeof s!="string"){const i=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=s.name),s._errorFactory.create(i,...r)}return mE.create(s,...e)}function ye(s,e,...i){if(!s)throw Qm(e,...i)}function ts(s){const e="INTERNAL ASSERTION FAILED: "+s;throw Hc(e),new Error(e)}function os(s,e){s||ts(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ym(){return typeof self<"u"&&self.location?.href||""}function sw(){return C0()==="http:"||C0()==="https:"}function C0(){return typeof self<"u"&&self.location?.protocol||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rw(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(sw()||MA()||"connection"in navigator)?navigator.onLine:!0}function aw(){if(typeof navigator>"u")return null;const s=navigator;return s.languages&&s.languages[0]||s.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kl{constructor(e,i){this.shortDelay=e,this.longDelay=i,os(i>e,"Short delay should be less than long delay!"),this.isMobile=NA()||VA()}get(){return rw()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ym(s,e){os(s.emulator,"Emulator should always be set here");const{url:i}=s.emulator;return e?`${i}${e.startsWith("/")?e.slice(1):e}`:i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gE{static initialize(e,i,r){this.fetchImpl=e,i&&(this.headersImpl=i),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;ts("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;ts("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;ts("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ow={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lw=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],uw=new Kl(3e4,6e4);function cr(s,e){return s.tenantId&&!e.tenantId?{...e,tenantId:s.tenantId}:e}async function hr(s,e,i,r,l={}){return yE(s,l,async()=>{let u={},f={};r&&(e==="GET"?f=r:u={body:JSON.stringify(r)});const p=Yl({key:s.config.apiKey,...f}).slice(1),y=await s._getAdditionalHeaders();y["Content-Type"]="application/json",s.languageCode&&(y["X-Firebase-Locale"]=s.languageCode);const g={method:e,headers:y,...u};return OA()||(g.referrerPolicy="no-referrer"),s.emulatorConfig&&co(s.emulatorConfig.host)&&(g.credentials="include"),gE.fetch()(await _E(s,s.config.apiHost,i,p),g)})}async function yE(s,e,i){s._canInitEmulator=!1;const r={...ow,...e};try{const l=new hw(s),u=await Promise.race([i(),l.promise]);l.clearNetworkTimeout();const f=await u.json();if("needConfirmation"in f)throw Pc(s,"account-exists-with-different-credential",f);if(u.ok&&!("errorMessage"in f))return f;{const p=u.ok?f.errorMessage:f.error.message,[y,g]=p.split(" : ");if(y==="FEDERATED_USER_ID_ALREADY_LINKED")throw Pc(s,"credential-already-in-use",f);if(y==="EMAIL_EXISTS")throw Pc(s,"email-already-in-use",f);if(y==="USER_DISABLED")throw Pc(s,"user-disabled",f);const T=r[y]||y.toLowerCase().replace(/[_\s]+/g,"-");if(g)throw pE(s,T,g);ii(s,T)}}catch(l){if(l instanceof cs)throw l;ii(s,"network-request-failed",{message:String(l)})}}async function Xl(s,e,i,r,l={}){const u=await hr(s,e,i,r,l);return"mfaPendingCredential"in u&&ii(s,"multi-factor-auth-required",{_serverResponse:u}),u}async function _E(s,e,i,r){const l=`${e}${i}?${r}`,u=s,f=u.config.emulator?Ym(s.config,l):`${s.config.apiScheme}://${l}`;return lw.includes(i)&&(await u._persistenceManagerAvailable,u._getPersistenceType()==="COOKIE")?u._getPersistence()._getFinalTarget(f).toString():f}function cw(s){switch(s){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class hw{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((i,r)=>{this.timer=setTimeout(()=>r(Ii(this.auth,"network-request-failed")),uw.get())})}}function Pc(s,e,i){const r={appName:s.name};i.email&&(r.email=i.email),i.phoneNumber&&(r.phoneNumber=i.phoneNumber);const l=Ii(s,e,r);return l.customData._tokenResponse=i,l}function N0(s){return s!==void 0&&s.enterprise!==void 0}class fw{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const i of this.recaptchaEnforcementState)if(i.provider&&i.provider===e)return cw(i.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function dw(s,e){return hr(s,"GET","/v2/recaptchaConfig",cr(s,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function mw(s,e){return hr(s,"POST","/v1/accounts:delete",e)}async function nh(s,e){return hr(s,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dl(s){if(s)try{const e=new Date(Number(s));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function pw(s,e=!1){const i=Pt(s),r=await i.getIdToken(e),l=Km(r);ye(l&&l.exp&&l.auth_time&&l.iat,i.auth,"internal-error");const u=typeof l.firebase=="object"?l.firebase:void 0,f=u?.sign_in_provider;return{claims:l,token:r,authTime:Dl(sm(l.auth_time)),issuedAtTime:Dl(sm(l.iat)),expirationTime:Dl(sm(l.exp)),signInProvider:f||null,signInSecondFactor:u?.sign_in_second_factor||null}}function sm(s){return Number(s)*1e3}function Km(s){const[e,i,r]=s.split(".");if(e===void 0||i===void 0||r===void 0)return Hc("JWT malformed, contained fewer than 3 sections"),null;try{const l=tE(i);return l?JSON.parse(l):(Hc("Failed to decode base64 JWT payload"),null)}catch(l){return Hc("Caught error parsing JWT payload as JSON",l?.toString()),null}}function D0(s){const e=Km(s);return ye(e,"internal-error"),ye(typeof e.exp<"u","internal-error"),ye(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Pl(s,e,i=!1){if(i)return e;try{return await e}catch(r){throw r instanceof cs&&gw(r)&&s.auth.currentUser===s&&await s.auth.signOut(),r}}function gw({code:s}){return s==="auth/user-disabled"||s==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yw{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const i=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),i}else{this.errorBackoff=3e4;const r=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const i=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},i)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _m{constructor(e,i){this.createdAt=e,this.lastLoginAt=i,this._initializeTime()}_initializeTime(){this.lastSignInTime=Dl(this.lastLoginAt),this.creationTime=Dl(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ih(s){const e=s.auth,i=await s.getIdToken(),r=await Pl(s,nh(e,{idToken:i}));ye(r?.users.length,e,"internal-error");const l=r.users[0];s._notifyReloadListener(l);const u=l.providerUserInfo?.length?vE(l.providerUserInfo):[],f=vw(s.providerData,u),p=s.isAnonymous,y=!(s.email&&l.passwordHash)&&!f?.length,g=p?y:!1,T={uid:l.localId,displayName:l.displayName||null,photoURL:l.photoUrl||null,email:l.email||null,emailVerified:l.emailVerified||!1,phoneNumber:l.phoneNumber||null,tenantId:l.tenantId||null,providerData:f,metadata:new _m(l.createdAt,l.lastLoginAt),isAnonymous:g};Object.assign(s,T)}async function _w(s){const e=Pt(s);await ih(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function vw(s,e){return[...s.filter(r=>!e.some(l=>l.providerId===r.providerId)),...e]}function vE(s){return s.map(({providerId:e,...i})=>({providerId:e,uid:i.rawId||"",displayName:i.displayName||null,email:i.email||null,phoneNumber:i.phoneNumber||null,photoURL:i.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ew(s,e){const i=await yE(s,{},async()=>{const r=Yl({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:l,apiKey:u}=s.config,f=await _E(s,l,"/v1/token",`key=${u}`),p=await s._getAdditionalHeaders();p["Content-Type"]="application/x-www-form-urlencoded";const y={method:"POST",headers:p,body:r};return s.emulatorConfig&&co(s.emulatorConfig.host)&&(y.credentials="include"),gE.fetch()(f,y)});return{accessToken:i.access_token,expiresIn:i.expires_in,refreshToken:i.refresh_token}}async function Tw(s,e){return hr(s,"POST","/v2/accounts:revokeToken",cr(s,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wa{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){ye(e.idToken,"internal-error"),ye(typeof e.idToken<"u","internal-error"),ye(typeof e.refreshToken<"u","internal-error");const i="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):D0(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,i)}updateFromIdToken(e){ye(e.length!==0,"internal-error");const i=D0(e);this.updateTokensAndExpiration(e,null,i)}async getToken(e,i=!1){return!i&&this.accessToken&&!this.isExpired?this.accessToken:(ye(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,i){const{accessToken:r,refreshToken:l,expiresIn:u}=await Ew(e,i);this.updateTokensAndExpiration(r,l,Number(u))}updateTokensAndExpiration(e,i,r){this.refreshToken=i||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,i){const{refreshToken:r,accessToken:l,expirationTime:u}=i,f=new Wa;return r&&(ye(typeof r=="string","internal-error",{appName:e}),f.refreshToken=r),l&&(ye(typeof l=="string","internal-error",{appName:e}),f.accessToken=l),u&&(ye(typeof u=="number","internal-error",{appName:e}),f.expirationTime=u),f}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Wa,this.toJSON())}_performRefresh(){return ts("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gs(s,e){ye(typeof s=="string"||typeof s>"u","internal-error",{appName:e})}class ti{constructor({uid:e,auth:i,stsTokenManager:r,...l}){this.providerId="firebase",this.proactiveRefresh=new yw(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=i,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=l.displayName||null,this.email=l.email||null,this.emailVerified=l.emailVerified||!1,this.phoneNumber=l.phoneNumber||null,this.photoURL=l.photoURL||null,this.isAnonymous=l.isAnonymous||!1,this.tenantId=l.tenantId||null,this.providerData=l.providerData?[...l.providerData]:[],this.metadata=new _m(l.createdAt||void 0,l.lastLoginAt||void 0)}async getIdToken(e){const i=await Pl(this,this.stsTokenManager.getToken(this.auth,e));return ye(i,this.auth,"internal-error"),this.accessToken!==i&&(this.accessToken=i,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),i}getIdTokenResult(e){return pw(this,e)}reload(){return _w(this)}_assign(e){this!==e&&(ye(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(i=>({...i})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const i=new ti({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return i.metadata._copy(this.metadata),i}_onReload(e){ye(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,i=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),i&&await ih(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Un(this.auth.app))return Promise.reject(is(this.auth));const e=await this.getIdToken();return await Pl(this,mw(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,i){const r=i.displayName??void 0,l=i.email??void 0,u=i.phoneNumber??void 0,f=i.photoURL??void 0,p=i.tenantId??void 0,y=i._redirectEventId??void 0,g=i.createdAt??void 0,T=i.lastLoginAt??void 0,{uid:A,emailVerified:x,isAnonymous:V,providerData:q,stsTokenManager:G}=i;ye(A&&G,e,"internal-error");const K=Wa.fromJSON(this.name,G);ye(typeof A=="string",e,"internal-error"),Gs(r,e.name),Gs(l,e.name),ye(typeof x=="boolean",e,"internal-error"),ye(typeof V=="boolean",e,"internal-error"),Gs(u,e.name),Gs(f,e.name),Gs(p,e.name),Gs(y,e.name),Gs(g,e.name),Gs(T,e.name);const ee=new ti({uid:A,auth:e,email:l,emailVerified:x,displayName:r,isAnonymous:V,photoURL:f,phoneNumber:u,tenantId:p,stsTokenManager:K,createdAt:g,lastLoginAt:T});return q&&Array.isArray(q)&&(ee.providerData=q.map(te=>({...te}))),y&&(ee._redirectEventId=y),ee}static async _fromIdTokenResponse(e,i,r=!1){const l=new Wa;l.updateFromServerResponse(i);const u=new ti({uid:i.localId,auth:e,stsTokenManager:l,isAnonymous:r});return await ih(u),u}static async _fromGetAccountInfoResponse(e,i,r){const l=i.users[0];ye(l.localId!==void 0,"internal-error");const u=l.providerUserInfo!==void 0?vE(l.providerUserInfo):[],f=!(l.email&&l.passwordHash)&&!u?.length,p=new Wa;p.updateFromIdToken(r);const y=new ti({uid:l.localId,auth:e,stsTokenManager:p,isAnonymous:f}),g={uid:l.localId,displayName:l.displayName||null,photoURL:l.photoUrl||null,email:l.email||null,emailVerified:l.emailVerified||!1,phoneNumber:l.phoneNumber||null,tenantId:l.tenantId||null,providerData:u,metadata:new _m(l.createdAt,l.lastLoginAt),isAnonymous:!(l.email&&l.passwordHash)&&!u?.length};return Object.assign(y,g),y}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const O0=new Map;function ns(s){os(s instanceof Function,"Expected a class definition");let e=O0.get(s);return e?(os(e instanceof s,"Instance stored in cache mismatched with class"),e):(e=new s,O0.set(s,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EE{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,i){this.storage[e]=i}async _get(e){const i=this.storage[e];return i===void 0?null:i}async _remove(e){delete this.storage[e]}_addListener(e,i){}_removeListener(e,i){}}EE.type="NONE";const M0=EE;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fc(s,e,i){return`firebase:${s}:${e}:${i}`}class eo{constructor(e,i,r){this.persistence=e,this.auth=i,this.userKey=r;const{config:l,name:u}=this.auth;this.fullUserKey=Fc(this.userKey,l.apiKey,u),this.fullPersistenceKey=Fc("persistence",l.apiKey,u),this.boundEventHandler=i._onStorageEvent.bind(i),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const i=await nh(this.auth,{idToken:e}).catch(()=>{});return i?ti._fromGetAccountInfoResponse(this.auth,i,e):null}return ti._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const i=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,i)return this.setCurrentUser(i)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,i,r="authUser"){if(!i.length)return new eo(ns(M0),e,r);const l=(await Promise.all(i.map(async g=>{if(await g._isAvailable())return g}))).filter(g=>g);let u=l[0]||ns(M0);const f=Fc(r,e.config.apiKey,e.name);let p=null;for(const g of i)try{const T=await g._get(f);if(T){let A;if(typeof T=="string"){const x=await nh(e,{idToken:T}).catch(()=>{});if(!x)break;A=await ti._fromGetAccountInfoResponse(e,x,T)}else A=ti._fromJSON(e,T);g!==u&&(p=A),u=g;break}}catch{}const y=l.filter(g=>g._shouldAllowMigration);return!u._shouldAllowMigration||!y.length?new eo(u,e,r):(u=y[0],p&&await u._set(f,p.toJSON()),await Promise.all(i.map(async g=>{if(g!==u)try{await g._remove(f)}catch{}})),new eo(u,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function V0(s){const e=s.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(SE(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(TE(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(xE(e))return"Blackberry";if(RE(e))return"Webos";if(bE(e))return"Safari";if((e.includes("chrome/")||AE(e))&&!e.includes("edge/"))return"Chrome";if(wE(e))return"Android";{const i=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=s.match(i);if(r?.length===2)return r[1]}return"Other"}function TE(s=tn()){return/firefox\//i.test(s)}function bE(s=tn()){const e=s.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function AE(s=tn()){return/crios\//i.test(s)}function SE(s=tn()){return/iemobile/i.test(s)}function wE(s=tn()){return/android/i.test(s)}function xE(s=tn()){return/blackberry/i.test(s)}function RE(s=tn()){return/webos/i.test(s)}function Xm(s=tn()){return/iphone|ipad|ipod/i.test(s)||/macintosh/i.test(s)&&/mobile/i.test(s)}function bw(s=tn()){return Xm(s)&&!!window.navigator?.standalone}function Aw(){return kA()&&document.documentMode===10}function IE(s=tn()){return Xm(s)||wE(s)||RE(s)||xE(s)||/windows phone/i.test(s)||SE(s)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CE(s,e=[]){let i;switch(s){case"Browser":i=V0(tn());break;case"Worker":i=`${V0(tn())}-${s}`;break;default:i=s}const r=e.length?e.join(","):"FirebaseCore-web";return`${i}/JsCore/${ho}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sw{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,i){const r=u=>new Promise((f,p)=>{try{const y=e(u);f(y)}catch(y){p(y)}});r.onAbort=i,this.queue.push(r);const l=this.queue.length-1;return()=>{this.queue[l]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const i=[];try{for(const r of this.queue)await r(e),r.onAbort&&i.push(r.onAbort)}catch(r){i.reverse();for(const l of i)try{l()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ww(s,e={}){return hr(s,"GET","/v2/passwordPolicy",cr(s,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xw=6;class Rw{constructor(e){const i=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=i.minPasswordLength??xw,i.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=i.maxPasswordLength),i.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=i.containsLowercaseCharacter),i.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=i.containsUppercaseCharacter),i.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=i.containsNumericCharacter),i.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=i.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const i={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,i),this.validatePasswordCharacterOptions(e,i),i.isValid&&(i.isValid=i.meetsMinPasswordLength??!0),i.isValid&&(i.isValid=i.meetsMaxPasswordLength??!0),i.isValid&&(i.isValid=i.containsLowercaseLetter??!0),i.isValid&&(i.isValid=i.containsUppercaseLetter??!0),i.isValid&&(i.isValid=i.containsNumericCharacter??!0),i.isValid&&(i.isValid=i.containsNonAlphanumericCharacter??!0),i}validatePasswordLengthOptions(e,i){const r=this.customStrengthOptions.minPasswordLength,l=this.customStrengthOptions.maxPasswordLength;r&&(i.meetsMinPasswordLength=e.length>=r),l&&(i.meetsMaxPasswordLength=e.length<=l)}validatePasswordCharacterOptions(e,i){this.updatePasswordCharacterOptionsStatuses(i,!1,!1,!1,!1);let r;for(let l=0;l<e.length;l++)r=e.charAt(l),this.updatePasswordCharacterOptionsStatuses(i,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,i,r,l,u){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=i)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=l)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=u))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Iw{constructor(e,i,r,l){this.app=e,this.heartbeatServiceProvider=i,this.appCheckServiceProvider=r,this.config=l,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new k0(this),this.idTokenSubscription=new k0(this),this.beforeStateQueue=new Sw(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=mE,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=l.sdkClientVersion,this._persistenceManagerAvailable=new Promise(u=>this._resolvePersistenceManagerAvailable=u)}_initializeWithPersistence(e,i){return i&&(this._popupRedirectResolver=ns(i)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await eo.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(i),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const i=await nh(this,{idToken:e}),r=await ti._fromGetAccountInfoResponse(this,i,e);await this.directlySetCurrentUser(r)}catch(i){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",i),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(Un(this.app)){const u=this.app.settings.authIdToken;return u?new Promise(f=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(u).then(f,f))}):this.directlySetCurrentUser(null)}const i=await this.assertedPersistence.getCurrentUser();let r=i,l=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const u=this.redirectUser?._redirectEventId,f=r?._redirectEventId,p=await this.tryRedirectSignIn(e);(!u||u===f)&&p?.user&&(r=p.user,l=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(l)try{await this.beforeStateQueue.runMiddleware(r)}catch(u){r=i,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(u))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return ye(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let i=null;try{i=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return i}async reloadAndSetCurrentUserOrClear(e){try{await ih(e)}catch(i){if(i?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=aw()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Un(this.app))return Promise.reject(is(this));const i=e?Pt(e):null;return i&&ye(i.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(i&&i._clone(this))}async _updateCurrentUser(e,i=!1){if(!this._deleted)return e&&ye(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),i||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Un(this.app)?Promise.reject(is(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Un(this.app)?Promise.reject(is(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(ns(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const i=this._getPasswordPolicyInternal();return i.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):i.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await ww(this),i=new Rw(e);this.tenantId===null?this._projectPasswordPolicy=i:this._tenantPasswordPolicies[this.tenantId]=i}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Ql("auth","Firebase",e())}onAuthStateChanged(e,i,r){return this.registerStateListener(this.authStateSubscription,e,i,r)}beforeAuthStateChanged(e,i){return this.beforeStateQueue.pushCallback(e,i)}onIdTokenChanged(e,i,r){return this.registerStateListener(this.idTokenSubscription,e,i,r)}authStateReady(){return new Promise((e,i)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},i)}})}async revokeAccessToken(e){if(this.currentUser){const i=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:i};this.tenantId!=null&&(r.tenantId=this.tenantId),await Tw(this,r)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,i){const r=await this.getOrInitRedirectPersistenceManager(i);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const i=e&&ns(e)||this._popupRedirectResolver;ye(i,this,"argument-error"),this.redirectPersistenceManager=await eo.create(this,[ns(i._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,i,r,l){if(this._deleted)return()=>{};const u=typeof i=="function"?i:i.next.bind(i);let f=!1;const p=this._isInitialized?Promise.resolve():this._initializationPromise;if(ye(p,this,"internal-error"),p.then(()=>{f||u(this.currentUser)}),typeof i=="function"){const y=e.addObserver(i,r,l);return()=>{f=!0,y()}}else{const y=e.addObserver(i);return()=>{f=!0,y()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return ye(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=CE(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const i=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();i&&(e["X-Firebase-Client"]=i);const r=await this._getAppCheckToken();return r&&(e["X-Firebase-AppCheck"]=r),e}async _getAppCheckToken(){if(Un(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&iw(`Error while retrieving App Check token: ${e.error}`),e?.token}}function ea(s){return Pt(s)}class k0{constructor(e){this.auth=e,this.observer=null,this.addObserver=HA(i=>this.observer=i)}get next(){return ye(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Sh={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function Cw(s){Sh=s}function NE(s){return Sh.loadJS(s)}function Nw(){return Sh.recaptchaEnterpriseScript}function Dw(){return Sh.gapiScript}function Ow(s){return`__${s}${Math.floor(Math.random()*1e6)}`}class Mw{constructor(){this.enterprise=new Vw}ready(e){e()}execute(e,i){return Promise.resolve("token")}render(e,i){return""}}class Vw{ready(e){e()}execute(e,i){return Promise.resolve("token")}render(e,i){return""}}const kw="recaptcha-enterprise",DE="NO_RECAPTCHA";class jw{constructor(e){this.type=kw,this.auth=ea(e)}async verify(e="verify",i=!1){async function r(u){if(!i){if(u.tenantId==null&&u._agentRecaptchaConfig!=null)return u._agentRecaptchaConfig.siteKey;if(u.tenantId!=null&&u._tenantRecaptchaConfigs[u.tenantId]!==void 0)return u._tenantRecaptchaConfigs[u.tenantId].siteKey}return new Promise(async(f,p)=>{dw(u,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(y=>{if(y.recaptchaKey===void 0)p(new Error("recaptcha Enterprise site key undefined"));else{const g=new fw(y);return u.tenantId==null?u._agentRecaptchaConfig=g:u._tenantRecaptchaConfigs[u.tenantId]=g,f(g.siteKey)}}).catch(y=>{p(y)})})}function l(u,f,p){const y=window.grecaptcha;N0(y)?y.enterprise.ready(()=>{y.enterprise.execute(u,{action:e}).then(g=>{f(g)}).catch(()=>{f(DE)})}):p(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new Mw().execute("siteKey",{action:"verify"}):new Promise((u,f)=>{r(this.auth).then(p=>{if(!i&&N0(window.grecaptcha))l(p,u,f);else{if(typeof window>"u"){f(new Error("RecaptchaVerifier is only supported in browser"));return}let y=Nw();y.length!==0&&(y+=p),NE(y).then(()=>{l(p,u,f)}).catch(g=>{f(g)})}}).catch(p=>{f(p)})})}}async function j0(s,e,i,r=!1,l=!1){const u=new jw(s);let f;if(l)f=DE;else try{f=await u.verify(i)}catch{f=await u.verify(i,!0)}const p={...e};if(i==="mfaSmsEnrollment"||i==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in p){const y=p.phoneEnrollmentInfo.phoneNumber,g=p.phoneEnrollmentInfo.recaptchaToken;Object.assign(p,{phoneEnrollmentInfo:{phoneNumber:y,recaptchaToken:g,captchaResponse:f,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in p){const y=p.phoneSignInInfo.recaptchaToken;Object.assign(p,{phoneSignInInfo:{recaptchaToken:y,captchaResponse:f,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return p}return r?Object.assign(p,{captchaResp:f}):Object.assign(p,{captchaResponse:f}),Object.assign(p,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(p,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),p}async function vm(s,e,i,r,l){if(s._getRecaptchaConfig()?.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const u=await j0(s,e,i,i==="getOobCode");return r(s,u)}else return r(s,e).catch(async u=>{if(u.code==="auth/missing-recaptcha-token"){console.log(`${i} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const f=await j0(s,e,i,i==="getOobCode");return r(s,f)}else return Promise.reject(u)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pw(s,e){const i=Gm(s,"auth");if(i.isInitialized()){const l=i.getImmediate(),u=i.getOptions();if(Xr(u,e??{}))return l;ii(l,"already-initialized")}return i.initialize({options:e})}function Lw(s,e){const i=e?.persistence||[],r=(Array.isArray(i)?i:[i]).map(ns);e?.errorMap&&s._updateErrorMap(e.errorMap),s._initializeWithPersistence(r,e?.popupRedirectResolver)}function Uw(s,e,i){const r=ea(s);ye(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const l=!1,u=OE(e),{host:f,port:p}=zw(e),y=p===null?"":`:${p}`,g={url:`${u}//${f}${y}/`},T=Object.freeze({host:f,port:p,protocol:u.replace(":",""),options:Object.freeze({disableWarnings:l})});if(!r._canInitEmulator){ye(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),ye(Xr(g,r.config.emulator)&&Xr(T,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=g,r.emulatorConfig=T,r.settings.appVerificationDisabledForTesting=!0,co(f)?(rE(`${u}//${f}${y}`),aE("Auth",!0)):Bw()}function OE(s){const e=s.indexOf(":");return e<0?"":s.substr(0,e+1)}function zw(s){const e=OE(s),i=/(\/\/)?([^?#/]+)/.exec(s.substr(e.length));if(!i)return{host:"",port:null};const r=i[2].split("@").pop()||"",l=/^(\[[^\]]+\])(:|$)/.exec(r);if(l){const u=l[1];return{host:u,port:P0(r.substr(u.length+1))}}else{const[u,f]=r.split(":");return{host:u,port:P0(f)}}}function P0(s){if(!s)return null;const e=Number(s);return isNaN(e)?null:e}function Bw(){function s(){const e=document.createElement("p"),i=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",i.position="fixed",i.width="100%",i.backgroundColor="#ffffff",i.border=".1em solid #000000",i.color="#b50000",i.bottom="0px",i.left="0px",i.margin="0px",i.zIndex="10000",i.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",s):s())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $m{constructor(e,i){this.providerId=e,this.signInMethod=i}toJSON(){return ts("not implemented")}_getIdTokenResponse(e){return ts("not implemented")}_linkToIdToken(e,i){return ts("not implemented")}_getReauthenticationResolver(e){return ts("not implemented")}}async function qw(s,e){return hr(s,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Hw(s,e){return Xl(s,"POST","/v1/accounts:signInWithPassword",cr(s,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Fw(s,e){return Xl(s,"POST","/v1/accounts:signInWithEmailLink",cr(s,e))}async function Gw(s,e){return Xl(s,"POST","/v1/accounts:signInWithEmailLink",cr(s,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ll extends $m{constructor(e,i,r,l=null){super("password",r),this._email=e,this._password=i,this._tenantId=l}static _fromEmailAndPassword(e,i){return new Ll(e,i,"password")}static _fromEmailAndCode(e,i,r=null){return new Ll(e,i,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const i=typeof e=="string"?JSON.parse(e):e;if(i?.email&&i?.password){if(i.signInMethod==="password")return this._fromEmailAndPassword(i.email,i.password);if(i.signInMethod==="emailLink")return this._fromEmailAndCode(i.email,i.password,i.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const i={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return vm(e,i,"signInWithPassword",Hw);case"emailLink":return Fw(e,{email:this._email,oobCode:this._password});default:ii(e,"internal-error")}}async _linkToIdToken(e,i){switch(this.signInMethod){case"password":const r={idToken:i,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return vm(e,r,"signUpPassword",qw);case"emailLink":return Gw(e,{idToken:i,email:this._email,oobCode:this._password});default:ii(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function to(s,e){return Xl(s,"POST","/v1/accounts:signInWithIdp",cr(s,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qw="http://localhost";class Jr extends $m{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const i=new Jr(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(i.idToken=e.idToken),e.accessToken&&(i.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(i.nonce=e.nonce),e.pendingToken&&(i.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(i.accessToken=e.oauthToken,i.secret=e.oauthTokenSecret):ii("argument-error"),i}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const i=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:l,...u}=i;if(!r||!l)return null;const f=new Jr(r,l);return f.idToken=u.idToken||void 0,f.accessToken=u.accessToken||void 0,f.secret=u.secret,f.nonce=u.nonce,f.pendingToken=u.pendingToken||null,f}_getIdTokenResponse(e){const i=this.buildRequest();return to(e,i)}_linkToIdToken(e,i){const r=this.buildRequest();return r.idToken=i,to(e,r)}_getReauthenticationResolver(e){const i=this.buildRequest();return i.autoCreate=!1,to(e,i)}buildRequest(){const e={requestUri:Qw,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const i={};this.idToken&&(i.id_token=this.idToken),this.accessToken&&(i.access_token=this.accessToken),this.secret&&(i.oauth_token_secret=this.secret),i.providerId=this.providerId,this.nonce&&!this.pendingToken&&(i.nonce=this.nonce),e.postBody=Yl(i)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yw(s){switch(s){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function Kw(s){const e=Sl(wl(s)).link,i=e?Sl(wl(e)).deep_link_id:null,r=Sl(wl(s)).deep_link_id;return(r?Sl(wl(r)).link:null)||r||i||e||s}class Jm{constructor(e){const i=Sl(wl(e)),r=i.apiKey??null,l=i.oobCode??null,u=Yw(i.mode??null);ye(r&&l&&u,"argument-error"),this.apiKey=r,this.operation=u,this.code=l,this.continueUrl=i.continueUrl??null,this.languageCode=i.lang??null,this.tenantId=i.tenantId??null}static parseLink(e){const i=Kw(e);try{return new Jm(i)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fo{constructor(){this.providerId=fo.PROVIDER_ID}static credential(e,i){return Ll._fromEmailAndPassword(e,i)}static credentialWithLink(e,i){const r=Jm.parseLink(i);return ye(r,"argument-error"),Ll._fromEmailAndCode(e,r.code,r.tenantId)}}fo.PROVIDER_ID="password";fo.EMAIL_PASSWORD_SIGN_IN_METHOD="password";fo.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ME{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $l extends ME{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qs extends $l{constructor(){super("facebook.com")}static credential(e){return Jr._fromParams({providerId:Qs.PROVIDER_ID,signInMethod:Qs.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Qs.credentialFromTaggedObject(e)}static credentialFromError(e){return Qs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Qs.credential(e.oauthAccessToken)}catch{return null}}}Qs.FACEBOOK_SIGN_IN_METHOD="facebook.com";Qs.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ys extends $l{constructor(){super("google.com"),this.addScope("profile")}static credential(e,i){return Jr._fromParams({providerId:Ys.PROVIDER_ID,signInMethod:Ys.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:i})}static credentialFromResult(e){return Ys.credentialFromTaggedObject(e)}static credentialFromError(e){return Ys.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:i,oauthAccessToken:r}=e;if(!i&&!r)return null;try{return Ys.credential(i,r)}catch{return null}}}Ys.GOOGLE_SIGN_IN_METHOD="google.com";Ys.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ks extends $l{constructor(){super("github.com")}static credential(e){return Jr._fromParams({providerId:Ks.PROVIDER_ID,signInMethod:Ks.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ks.credentialFromTaggedObject(e)}static credentialFromError(e){return Ks.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Ks.credential(e.oauthAccessToken)}catch{return null}}}Ks.GITHUB_SIGN_IN_METHOD="github.com";Ks.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xs extends $l{constructor(){super("twitter.com")}static credential(e,i){return Jr._fromParams({providerId:Xs.PROVIDER_ID,signInMethod:Xs.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:i})}static credentialFromResult(e){return Xs.credentialFromTaggedObject(e)}static credentialFromError(e){return Xs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:i,oauthTokenSecret:r}=e;if(!i||!r)return null;try{return Xs.credential(i,r)}catch{return null}}}Xs.TWITTER_SIGN_IN_METHOD="twitter.com";Xs.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Xw(s,e){return Xl(s,"POST","/v1/accounts:signUp",cr(s,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zr{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,i,r,l=!1){const u=await ti._fromIdTokenResponse(e,r,l),f=L0(r);return new Zr({user:u,providerId:f,_tokenResponse:r,operationType:i})}static async _forOperation(e,i,r){await e._updateTokensIfNecessary(r,!0);const l=L0(r);return new Zr({user:e,providerId:l,_tokenResponse:r,operationType:i})}}function L0(s){return s.providerId?s.providerId:"phoneNumber"in s?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sh extends cs{constructor(e,i,r,l){super(i.code,i.message),this.operationType=r,this.user=l,Object.setPrototypeOf(this,sh.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:i.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,i,r,l){return new sh(e,i,r,l)}}function VE(s,e,i,r){return(e==="reauthenticate"?i._getReauthenticationResolver(s):i._getIdTokenResponse(s)).catch(u=>{throw u.code==="auth/multi-factor-auth-required"?sh._fromErrorAndOperation(s,u,e,r):u})}async function $w(s,e,i=!1){const r=await Pl(s,e._linkToIdToken(s.auth,await s.getIdToken()),i);return Zr._forOperation(s,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Jw(s,e,i=!1){const{auth:r}=s;if(Un(r.app))return Promise.reject(is(r));const l="reauthenticate";try{const u=await Pl(s,VE(r,l,e,s),i);ye(u.idToken,r,"internal-error");const f=Km(u.idToken);ye(f,r,"internal-error");const{sub:p}=f;return ye(s.uid===p,r,"user-mismatch"),Zr._forOperation(s,l,u)}catch(u){throw u?.code==="auth/user-not-found"&&ii(r,"user-mismatch"),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function kE(s,e,i=!1){if(Un(s.app))return Promise.reject(is(s));const r="signIn",l=await VE(s,r,e),u=await Zr._fromIdTokenResponse(s,r,l);return i||await s._updateCurrentUser(u.user),u}async function Zw(s,e){return kE(ea(s),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function jE(s){const e=ea(s);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function Ww(s,e,i){if(Un(s.app))return Promise.reject(is(s));const r=ea(s),f=await vm(r,{returnSecureToken:!0,email:e,password:i,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",Xw).catch(y=>{throw y.code==="auth/password-does-not-meet-requirements"&&jE(s),y}),p=await Zr._fromIdTokenResponse(r,"signIn",f);return await r._updateCurrentUser(p.user),p}function e2(s,e,i){return Un(s.app)?Promise.reject(is(s)):Zw(Pt(s),fo.credential(e,i)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&jE(s),r})}function t2(s,e,i,r){return Pt(s).onIdTokenChanged(e,i,r)}function n2(s,e,i){return Pt(s).beforeAuthStateChanged(e,i)}function i2(s,e,i,r){return Pt(s).onAuthStateChanged(e,i,r)}function s2(s){return Pt(s).signOut()}const rh="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PE{constructor(e,i){this.storageRetriever=e,this.type=i}_isAvailable(){try{return this.storage?(this.storage.setItem(rh,"1"),this.storage.removeItem(rh),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,i){return this.storage.setItem(e,JSON.stringify(i)),Promise.resolve()}_get(e){const i=this.storage.getItem(e);return Promise.resolve(i?JSON.parse(i):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const r2=1e3,a2=10;class LE extends PE{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,i)=>this.onStorageEvent(e,i),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=IE(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const i of Object.keys(this.listeners)){const r=this.storage.getItem(i),l=this.localCache[i];r!==l&&e(i,l,r)}}onStorageEvent(e,i=!1){if(!e.key){this.forAllChangedKeys((f,p,y)=>{this.notifyListeners(f,y)});return}const r=e.key;i?this.detachListener():this.stopPolling();const l=()=>{const f=this.storage.getItem(r);!i&&this.localCache[r]===f||this.notifyListeners(r,f)},u=this.storage.getItem(r);Aw()&&u!==e.newValue&&e.newValue!==e.oldValue?setTimeout(l,a2):l()}notifyListeners(e,i){this.localCache[e]=i;const r=this.listeners[e];if(r)for(const l of Array.from(r))l(i&&JSON.parse(i))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,i,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:i,newValue:r}),!0)})},r2)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,i){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(i)}_removeListener(e,i){this.listeners[e]&&(this.listeners[e].delete(i),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,i){await super._set(e,i),this.localCache[e]=JSON.stringify(i)}async _get(e){const i=await super._get(e);return this.localCache[e]=JSON.stringify(i),i}async _remove(e){await super._remove(e),delete this.localCache[e]}}LE.type="LOCAL";const o2=LE;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UE extends PE{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,i){}_removeListener(e,i){}}UE.type="SESSION";const zE=UE;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function l2(s){return Promise.all(s.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(i){return{fulfilled:!1,reason:i}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wh{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const i=this.receivers.find(l=>l.isListeningto(e));if(i)return i;const r=new wh(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const i=e,{eventId:r,eventType:l,data:u}=i.data,f=this.handlersMap[l];if(!f?.size)return;i.ports[0].postMessage({status:"ack",eventId:r,eventType:l});const p=Array.from(f).map(async g=>g(i.origin,u)),y=await l2(p);i.ports[0].postMessage({status:"done",eventId:r,eventType:l,response:y})}_subscribe(e,i){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(i)}_unsubscribe(e,i){this.handlersMap[e]&&i&&this.handlersMap[e].delete(i),(!i||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}wh.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zm(s="",e=10){let i="";for(let r=0;r<e;r++)i+=Math.floor(Math.random()*10);return s+i}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u2{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,i,r=50){const l=typeof MessageChannel<"u"?new MessageChannel:null;if(!l)throw new Error("connection_unavailable");let u,f;return new Promise((p,y)=>{const g=Zm("",20);l.port1.start();const T=setTimeout(()=>{y(new Error("unsupported_event"))},r);f={messageChannel:l,onMessage(A){const x=A;if(x.data.eventId===g)switch(x.data.status){case"ack":clearTimeout(T),u=setTimeout(()=>{y(new Error("timeout"))},3e3);break;case"done":clearTimeout(u),p(x.data.response);break;default:clearTimeout(T),clearTimeout(u),y(new Error("invalid_response"));break}}},this.handlers.add(f),l.port1.addEventListener("message",f.onMessage),this.target.postMessage({eventType:e,eventId:g,data:i},[l.port2])}).finally(()=>{f&&this.removeMessageHandler(f)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ci(){return window}function c2(s){Ci().location.href=s}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BE(){return typeof Ci().WorkerGlobalScope<"u"&&typeof Ci().importScripts=="function"}async function h2(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function f2(){return navigator?.serviceWorker?.controller||null}function d2(){return BE()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qE="firebaseLocalStorageDb",m2=1,ah="firebaseLocalStorage",HE="fbase_key";class Jl{constructor(e){this.request=e}toPromise(){return new Promise((e,i)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{i(this.request.error)})})}}function xh(s,e){return s.transaction([ah],e?"readwrite":"readonly").objectStore(ah)}function p2(){const s=indexedDB.deleteDatabase(qE);return new Jl(s).toPromise()}function Em(){const s=indexedDB.open(qE,m2);return new Promise((e,i)=>{s.addEventListener("error",()=>{i(s.error)}),s.addEventListener("upgradeneeded",()=>{const r=s.result;try{r.createObjectStore(ah,{keyPath:HE})}catch(l){i(l)}}),s.addEventListener("success",async()=>{const r=s.result;r.objectStoreNames.contains(ah)?e(r):(r.close(),await p2(),e(await Em()))})})}async function U0(s,e,i){const r=xh(s,!0).put({[HE]:e,value:i});return new Jl(r).toPromise()}async function g2(s,e){const i=xh(s,!1).get(e),r=await new Jl(i).toPromise();return r===void 0?null:r.value}function z0(s,e){const i=xh(s,!0).delete(e);return new Jl(i).toPromise()}const y2=800,_2=3;class FE{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Em(),this.db)}async _withRetries(e){let i=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(i++>_2)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return BE()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=wh._getInstance(d2()),this.receiver._subscribe("keyChanged",async(e,i)=>({keyProcessed:(await this._poll()).includes(i.key)})),this.receiver._subscribe("ping",async(e,i)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await h2(),!this.activeServiceWorker)return;this.sender=new u2(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&e[0]?.fulfilled&&e[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||f2()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Em();return await U0(e,rh,"1"),await z0(e,rh),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,i){return this._withPendingWrite(async()=>(await this._withRetries(r=>U0(r,e,i)),this.localCache[e]=i,this.notifyServiceWorker(e)))}async _get(e){const i=await this._withRetries(r=>g2(r,e));return this.localCache[e]=i,i}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(i=>z0(i,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(l=>{const u=xh(l,!1).getAll();return new Jl(u).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const i=[],r=new Set;if(e.length!==0)for(const{fbase_key:l,value:u}of e)r.add(l),JSON.stringify(this.localCache[l])!==JSON.stringify(u)&&(this.notifyListeners(l,u),i.push(l));for(const l of Object.keys(this.localCache))this.localCache[l]&&!r.has(l)&&(this.notifyListeners(l,null),i.push(l));return i}notifyListeners(e,i){this.localCache[e]=i;const r=this.listeners[e];if(r)for(const l of Array.from(r))l(i)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),y2)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,i){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(i)}_removeListener(e,i){this.listeners[e]&&(this.listeners[e].delete(i),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}FE.type="LOCAL";const v2=FE;new Kl(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function E2(s,e){return e?ns(e):(ye(s._popupRedirectResolver,s,"argument-error"),s._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wm extends $m{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return to(e,this._buildIdpRequest())}_linkToIdToken(e,i){return to(e,this._buildIdpRequest(i))}_getReauthenticationResolver(e){return to(e,this._buildIdpRequest())}_buildIdpRequest(e){const i={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(i.idToken=e),i}}function T2(s){return kE(s.auth,new Wm(s),s.bypassAuthState)}function b2(s){const{auth:e,user:i}=s;return ye(i,e,"internal-error"),Jw(i,new Wm(s),s.bypassAuthState)}async function A2(s){const{auth:e,user:i}=s;return ye(i,e,"internal-error"),$w(i,new Wm(s),s.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GE{constructor(e,i,r,l,u=!1){this.auth=e,this.resolver=r,this.user=l,this.bypassAuthState=u,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(i)?i:[i]}execute(){return new Promise(async(e,i)=>{this.pendingPromise={resolve:e,reject:i};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:i,sessionId:r,postBody:l,tenantId:u,error:f,type:p}=e;if(f){this.reject(f);return}const y={auth:this.auth,requestUri:i,sessionId:r,tenantId:u||void 0,postBody:l||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(p)(y))}catch(g){this.reject(g)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return T2;case"linkViaPopup":case"linkViaRedirect":return A2;case"reauthViaPopup":case"reauthViaRedirect":return b2;default:ii(this.auth,"internal-error")}}resolve(e){os(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){os(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const S2=new Kl(2e3,1e4);class Za extends GE{constructor(e,i,r,l,u){super(e,i,l,u),this.provider=r,this.authWindow=null,this.pollId=null,Za.currentPopupAction&&Za.currentPopupAction.cancel(),Za.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return ye(e,this.auth,"internal-error"),e}async onExecution(){os(this.filter.length===1,"Popup operations only handle one event");const e=Zm();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(i=>{this.reject(i)}),this.resolver._isIframeWebStorageSupported(this.auth,i=>{i||this.reject(Ii(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(Ii(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Za.currentPopupAction=null}pollUserCancellation(){const e=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Ii(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,S2.get())};e()}}Za.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const w2="pendingRedirect",Gc=new Map;class x2 extends GE{constructor(e,i,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],i,void 0,r),this.eventId=null}async execute(){let e=Gc.get(this.auth._key());if(!e){try{const r=await R2(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(i){e=()=>Promise.reject(i)}Gc.set(this.auth._key(),e)}return this.bypassAuthState||Gc.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const i=await this.auth._redirectUserForId(e.eventId);if(i)return this.user=i,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function R2(s,e){const i=N2(e),r=C2(s);if(!await r._isAvailable())return!1;const l=await r._get(i)==="true";return await r._remove(i),l}function I2(s,e){Gc.set(s._key(),e)}function C2(s){return ns(s._redirectPersistence)}function N2(s){return Fc(w2,s.config.apiKey,s.name)}async function D2(s,e,i=!1){if(Un(s.app))return Promise.reject(is(s));const r=ea(s),l=E2(r,e),f=await new x2(r,l,i).execute();return f&&!i&&(delete f.user._redirectEventId,await r._persistUserIfCurrent(f.user),await r._setRedirectUser(null,e)),f}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const O2=600*1e3;class M2{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let i=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(i=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!V2(e)||(this.hasHandledPotentialRedirect=!0,i||(this.queuedRedirectEvent=e,i=!0)),i}sendToConsumer(e,i){if(e.error&&!QE(e)){const r=e.error.code?.split("auth/")[1]||"internal-error";i.onError(Ii(this.auth,r))}else i.onAuthEvent(e)}isEventForConsumer(e,i){const r=i.eventId===null||!!e.eventId&&e.eventId===i.eventId;return i.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=O2&&this.cachedEventUids.clear(),this.cachedEventUids.has(B0(e))}saveEventToCache(e){this.cachedEventUids.add(B0(e)),this.lastProcessedEventTime=Date.now()}}function B0(s){return[s.type,s.eventId,s.sessionId,s.tenantId].filter(e=>e).join("-")}function QE({type:s,error:e}){return s==="unknown"&&e?.code==="auth/no-auth-event"}function V2(s){switch(s.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return QE(s);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function k2(s,e={}){return hr(s,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const j2=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,P2=/^https?/;async function L2(s){if(s.config.emulator)return;const{authorizedDomains:e}=await k2(s);for(const i of e)try{if(U2(i))return}catch{}ii(s,"unauthorized-domain")}function U2(s){const e=ym(),{protocol:i,hostname:r}=new URL(e);if(s.startsWith("chrome-extension://")){const f=new URL(s);return f.hostname===""&&r===""?i==="chrome-extension:"&&s.replace("chrome-extension://","")===e.replace("chrome-extension://",""):i==="chrome-extension:"&&f.hostname===r}if(!P2.test(i))return!1;if(j2.test(s))return r===s;const l=s.replace(/\./g,"\\.");return new RegExp("^(.+\\."+l+"|"+l+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const z2=new Kl(3e4,6e4);function q0(){const s=Ci().___jsl;if(s?.H){for(const e of Object.keys(s.H))if(s.H[e].r=s.H[e].r||[],s.H[e].L=s.H[e].L||[],s.H[e].r=[...s.H[e].L],s.CP)for(let i=0;i<s.CP.length;i++)s.CP[i]=null}}function B2(s){return new Promise((e,i)=>{function r(){q0(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{q0(),i(Ii(s,"network-request-failed"))},timeout:z2.get()})}if(Ci().gapi?.iframes?.Iframe)e(gapi.iframes.getContext());else if(Ci().gapi?.load)r();else{const l=Ow("iframefcb");return Ci()[l]=()=>{gapi.load?r():i(Ii(s,"network-request-failed"))},NE(`${Dw()}?onload=${l}`).catch(u=>i(u))}}).catch(e=>{throw Qc=null,e})}let Qc=null;function q2(s){return Qc=Qc||B2(s),Qc}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const H2=new Kl(5e3,15e3),F2="__/auth/iframe",G2="emulator/auth/iframe",Q2={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Y2=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function K2(s){const e=s.config;ye(e.authDomain,s,"auth-domain-config-required");const i=e.emulator?Ym(e,G2):`https://${s.config.authDomain}/${F2}`,r={apiKey:e.apiKey,appName:s.name,v:ho},l=Y2.get(s.config.apiHost);l&&(r.eid=l);const u=s._getFrameworks();return u.length&&(r.fw=u.join(",")),`${i}?${Yl(r).slice(1)}`}async function X2(s){const e=await q2(s),i=Ci().gapi;return ye(i,s,"internal-error"),e.open({where:document.body,url:K2(s),messageHandlersFilter:i.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Q2,dontclear:!0},r=>new Promise(async(l,u)=>{await r.restyle({setHideOnLeave:!1});const f=Ii(s,"network-request-failed"),p=Ci().setTimeout(()=>{u(f)},H2.get());function y(){Ci().clearTimeout(p),l(r)}r.ping(y).then(y,()=>{u(f)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $2={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},J2=500,Z2=600,W2="_blank",ex="http://localhost";class H0{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function tx(s,e,i,r=J2,l=Z2){const u=Math.max((window.screen.availHeight-l)/2,0).toString(),f=Math.max((window.screen.availWidth-r)/2,0).toString();let p="";const y={...$2,width:r.toString(),height:l.toString(),top:u,left:f},g=tn().toLowerCase();i&&(p=AE(g)?W2:i),TE(g)&&(e=e||ex,y.scrollbars="yes");const T=Object.entries(y).reduce((x,[V,q])=>`${x}${V}=${q},`,"");if(bw(g)&&p!=="_self")return nx(e||"",p),new H0(null);const A=window.open(e||"",p,T);ye(A,s,"popup-blocked");try{A.focus()}catch{}return new H0(A)}function nx(s,e){const i=document.createElement("a");i.href=s,i.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),i.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ix="__/auth/handler",sx="emulator/auth/handler",rx=encodeURIComponent("fac");async function F0(s,e,i,r,l,u){ye(s.config.authDomain,s,"auth-domain-config-required"),ye(s.config.apiKey,s,"invalid-api-key");const f={apiKey:s.config.apiKey,appName:s.name,authType:i,redirectUrl:r,v:ho,eventId:l};if(e instanceof ME){e.setDefaultLanguage(s.languageCode),f.providerId=e.providerId||"",qA(e.getCustomParameters())||(f.customParameters=JSON.stringify(e.getCustomParameters()));for(const[T,A]of Object.entries({}))f[T]=A}if(e instanceof $l){const T=e.getScopes().filter(A=>A!=="");T.length>0&&(f.scopes=T.join(","))}s.tenantId&&(f.tid=s.tenantId);const p=f;for(const T of Object.keys(p))p[T]===void 0&&delete p[T];const y=await s._getAppCheckToken(),g=y?`#${rx}=${encodeURIComponent(y)}`:"";return`${ax(s)}?${Yl(p).slice(1)}${g}`}function ax({config:s}){return s.emulator?Ym(s,sx):`https://${s.authDomain}/${ix}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rm="webStorageSupport";class ox{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=zE,this._completeRedirectFn=D2,this._overrideRedirectResult=I2}async _openPopup(e,i,r,l){os(this.eventManagers[e._key()]?.manager,"_initialize() not called before _openPopup()");const u=await F0(e,i,r,ym(),l);return tx(e,u,Zm())}async _openRedirect(e,i,r,l){await this._originValidation(e);const u=await F0(e,i,r,ym(),l);return c2(u),new Promise(()=>{})}_initialize(e){const i=e._key();if(this.eventManagers[i]){const{manager:l,promise:u}=this.eventManagers[i];return l?Promise.resolve(l):(os(u,"If manager is not set, promise should be"),u)}const r=this.initAndGetManager(e);return this.eventManagers[i]={promise:r},r.catch(()=>{delete this.eventManagers[i]}),r}async initAndGetManager(e){const i=await X2(e),r=new M2(e);return i.register("authEvent",l=>(ye(l?.authEvent,e,"invalid-auth-event"),{status:r.onEvent(l.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=i,r}_isIframeWebStorageSupported(e,i){this.iframes[e._key()].send(rm,{type:rm},l=>{const u=l?.[0]?.[rm];u!==void 0&&i(!!u),ii(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const i=e._key();return this.originValidationPromises[i]||(this.originValidationPromises[i]=L2(e)),this.originValidationPromises[i]}get _shouldInitProactively(){return IE()||bE()||Xm()}}const lx=ox;var G0="@firebase/auth",Q0="1.11.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ux{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const i=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,i),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const i=this.internalListeners.get(e);i&&(this.internalListeners.delete(e),i(),this.updateProactiveRefresh())}assertAuthConfigured(){ye(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cx(s){switch(s){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function hx(s){io(new $r("auth",(e,{options:i})=>{const r=e.getProvider("app").getImmediate(),l=e.getProvider("heartbeat"),u=e.getProvider("app-check-internal"),{apiKey:f,authDomain:p}=r.options;ye(f&&!f.includes(":"),"invalid-api-key",{appName:r.name});const y={apiKey:f,authDomain:p,clientPlatform:s,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:CE(s)},g=new Iw(r,l,u,y);return Lw(g,i),g},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,i,r)=>{e.getProvider("auth-internal").initialize()})),io(new $r("auth-internal",e=>{const i=ea(e.getProvider("auth").getImmediate());return(r=>new ux(r))(i)},"PRIVATE").setInstantiationMode("EXPLICIT")),Ws(G0,Q0,cx(s)),Ws(G0,Q0,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fx=300,dx=sE("authIdTokenMaxAge")||fx;let Y0=null;const mx=s=>async e=>{const i=e&&await e.getIdTokenResult(),r=i&&(new Date().getTime()-Date.parse(i.issuedAtTime))/1e3;if(r&&r>dx)return;const l=i?.token;Y0!==l&&(Y0=l,await fetch(s,{method:l?"POST":"DELETE",headers:l?{Authorization:`Bearer ${l}`}:{}}))};function px(s=cE()){const e=Gm(s,"auth");if(e.isInitialized())return e.getImmediate();const i=Pw(s,{popupRedirectResolver:lx,persistence:[v2,o2,zE]}),r=sE("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const u=new URL(r,location.origin);if(location.origin===u.origin){const f=mx(u.toString());n2(i,f,()=>f(i.currentUser)),t2(i,p=>f(p))}}const l=nE("auth");return l&&Uw(i,`http://${l}`),i}function gx(){return document.getElementsByTagName("head")?.[0]??document}Cw({loadJS(s){return new Promise((e,i)=>{const r=document.createElement("script");r.setAttribute("src",s),r.onload=e,r.onerror=l=>{const u=Ii("internal-error");u.customData=l,i(u)},r.type="text/javascript",r.charset="UTF-8",gx().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});hx("Browser");var K0=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var er,YE;(function(){var s;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(N,w){function I(){}I.prototype=w.prototype,N.F=w.prototype,N.prototype=new I,N.prototype.constructor=N,N.D=function(k,D,j){for(var R=Array(arguments.length-2),be=2;be<arguments.length;be++)R[be-2]=arguments[be];return w.prototype[D].apply(k,R)}}function i(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(r,i),r.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function l(N,w,I){I||(I=0);const k=Array(16);if(typeof w=="string")for(var D=0;D<16;++D)k[D]=w.charCodeAt(I++)|w.charCodeAt(I++)<<8|w.charCodeAt(I++)<<16|w.charCodeAt(I++)<<24;else for(D=0;D<16;++D)k[D]=w[I++]|w[I++]<<8|w[I++]<<16|w[I++]<<24;w=N.g[0],I=N.g[1],D=N.g[2];let j=N.g[3],R;R=w+(j^I&(D^j))+k[0]+3614090360&4294967295,w=I+(R<<7&4294967295|R>>>25),R=j+(D^w&(I^D))+k[1]+3905402710&4294967295,j=w+(R<<12&4294967295|R>>>20),R=D+(I^j&(w^I))+k[2]+606105819&4294967295,D=j+(R<<17&4294967295|R>>>15),R=I+(w^D&(j^w))+k[3]+3250441966&4294967295,I=D+(R<<22&4294967295|R>>>10),R=w+(j^I&(D^j))+k[4]+4118548399&4294967295,w=I+(R<<7&4294967295|R>>>25),R=j+(D^w&(I^D))+k[5]+1200080426&4294967295,j=w+(R<<12&4294967295|R>>>20),R=D+(I^j&(w^I))+k[6]+2821735955&4294967295,D=j+(R<<17&4294967295|R>>>15),R=I+(w^D&(j^w))+k[7]+4249261313&4294967295,I=D+(R<<22&4294967295|R>>>10),R=w+(j^I&(D^j))+k[8]+1770035416&4294967295,w=I+(R<<7&4294967295|R>>>25),R=j+(D^w&(I^D))+k[9]+2336552879&4294967295,j=w+(R<<12&4294967295|R>>>20),R=D+(I^j&(w^I))+k[10]+4294925233&4294967295,D=j+(R<<17&4294967295|R>>>15),R=I+(w^D&(j^w))+k[11]+2304563134&4294967295,I=D+(R<<22&4294967295|R>>>10),R=w+(j^I&(D^j))+k[12]+1804603682&4294967295,w=I+(R<<7&4294967295|R>>>25),R=j+(D^w&(I^D))+k[13]+4254626195&4294967295,j=w+(R<<12&4294967295|R>>>20),R=D+(I^j&(w^I))+k[14]+2792965006&4294967295,D=j+(R<<17&4294967295|R>>>15),R=I+(w^D&(j^w))+k[15]+1236535329&4294967295,I=D+(R<<22&4294967295|R>>>10),R=w+(D^j&(I^D))+k[1]+4129170786&4294967295,w=I+(R<<5&4294967295|R>>>27),R=j+(I^D&(w^I))+k[6]+3225465664&4294967295,j=w+(R<<9&4294967295|R>>>23),R=D+(w^I&(j^w))+k[11]+643717713&4294967295,D=j+(R<<14&4294967295|R>>>18),R=I+(j^w&(D^j))+k[0]+3921069994&4294967295,I=D+(R<<20&4294967295|R>>>12),R=w+(D^j&(I^D))+k[5]+3593408605&4294967295,w=I+(R<<5&4294967295|R>>>27),R=j+(I^D&(w^I))+k[10]+38016083&4294967295,j=w+(R<<9&4294967295|R>>>23),R=D+(w^I&(j^w))+k[15]+3634488961&4294967295,D=j+(R<<14&4294967295|R>>>18),R=I+(j^w&(D^j))+k[4]+3889429448&4294967295,I=D+(R<<20&4294967295|R>>>12),R=w+(D^j&(I^D))+k[9]+568446438&4294967295,w=I+(R<<5&4294967295|R>>>27),R=j+(I^D&(w^I))+k[14]+3275163606&4294967295,j=w+(R<<9&4294967295|R>>>23),R=D+(w^I&(j^w))+k[3]+4107603335&4294967295,D=j+(R<<14&4294967295|R>>>18),R=I+(j^w&(D^j))+k[8]+1163531501&4294967295,I=D+(R<<20&4294967295|R>>>12),R=w+(D^j&(I^D))+k[13]+2850285829&4294967295,w=I+(R<<5&4294967295|R>>>27),R=j+(I^D&(w^I))+k[2]+4243563512&4294967295,j=w+(R<<9&4294967295|R>>>23),R=D+(w^I&(j^w))+k[7]+1735328473&4294967295,D=j+(R<<14&4294967295|R>>>18),R=I+(j^w&(D^j))+k[12]+2368359562&4294967295,I=D+(R<<20&4294967295|R>>>12),R=w+(I^D^j)+k[5]+4294588738&4294967295,w=I+(R<<4&4294967295|R>>>28),R=j+(w^I^D)+k[8]+2272392833&4294967295,j=w+(R<<11&4294967295|R>>>21),R=D+(j^w^I)+k[11]+1839030562&4294967295,D=j+(R<<16&4294967295|R>>>16),R=I+(D^j^w)+k[14]+4259657740&4294967295,I=D+(R<<23&4294967295|R>>>9),R=w+(I^D^j)+k[1]+2763975236&4294967295,w=I+(R<<4&4294967295|R>>>28),R=j+(w^I^D)+k[4]+1272893353&4294967295,j=w+(R<<11&4294967295|R>>>21),R=D+(j^w^I)+k[7]+4139469664&4294967295,D=j+(R<<16&4294967295|R>>>16),R=I+(D^j^w)+k[10]+3200236656&4294967295,I=D+(R<<23&4294967295|R>>>9),R=w+(I^D^j)+k[13]+681279174&4294967295,w=I+(R<<4&4294967295|R>>>28),R=j+(w^I^D)+k[0]+3936430074&4294967295,j=w+(R<<11&4294967295|R>>>21),R=D+(j^w^I)+k[3]+3572445317&4294967295,D=j+(R<<16&4294967295|R>>>16),R=I+(D^j^w)+k[6]+76029189&4294967295,I=D+(R<<23&4294967295|R>>>9),R=w+(I^D^j)+k[9]+3654602809&4294967295,w=I+(R<<4&4294967295|R>>>28),R=j+(w^I^D)+k[12]+3873151461&4294967295,j=w+(R<<11&4294967295|R>>>21),R=D+(j^w^I)+k[15]+530742520&4294967295,D=j+(R<<16&4294967295|R>>>16),R=I+(D^j^w)+k[2]+3299628645&4294967295,I=D+(R<<23&4294967295|R>>>9),R=w+(D^(I|~j))+k[0]+4096336452&4294967295,w=I+(R<<6&4294967295|R>>>26),R=j+(I^(w|~D))+k[7]+1126891415&4294967295,j=w+(R<<10&4294967295|R>>>22),R=D+(w^(j|~I))+k[14]+2878612391&4294967295,D=j+(R<<15&4294967295|R>>>17),R=I+(j^(D|~w))+k[5]+4237533241&4294967295,I=D+(R<<21&4294967295|R>>>11),R=w+(D^(I|~j))+k[12]+1700485571&4294967295,w=I+(R<<6&4294967295|R>>>26),R=j+(I^(w|~D))+k[3]+2399980690&4294967295,j=w+(R<<10&4294967295|R>>>22),R=D+(w^(j|~I))+k[10]+4293915773&4294967295,D=j+(R<<15&4294967295|R>>>17),R=I+(j^(D|~w))+k[1]+2240044497&4294967295,I=D+(R<<21&4294967295|R>>>11),R=w+(D^(I|~j))+k[8]+1873313359&4294967295,w=I+(R<<6&4294967295|R>>>26),R=j+(I^(w|~D))+k[15]+4264355552&4294967295,j=w+(R<<10&4294967295|R>>>22),R=D+(w^(j|~I))+k[6]+2734768916&4294967295,D=j+(R<<15&4294967295|R>>>17),R=I+(j^(D|~w))+k[13]+1309151649&4294967295,I=D+(R<<21&4294967295|R>>>11),R=w+(D^(I|~j))+k[4]+4149444226&4294967295,w=I+(R<<6&4294967295|R>>>26),R=j+(I^(w|~D))+k[11]+3174756917&4294967295,j=w+(R<<10&4294967295|R>>>22),R=D+(w^(j|~I))+k[2]+718787259&4294967295,D=j+(R<<15&4294967295|R>>>17),R=I+(j^(D|~w))+k[9]+3951481745&4294967295,N.g[0]=N.g[0]+w&4294967295,N.g[1]=N.g[1]+(D+(R<<21&4294967295|R>>>11))&4294967295,N.g[2]=N.g[2]+D&4294967295,N.g[3]=N.g[3]+j&4294967295}r.prototype.v=function(N,w){w===void 0&&(w=N.length);const I=w-this.blockSize,k=this.C;let D=this.h,j=0;for(;j<w;){if(D==0)for(;j<=I;)l(this,N,j),j+=this.blockSize;if(typeof N=="string"){for(;j<w;)if(k[D++]=N.charCodeAt(j++),D==this.blockSize){l(this,k),D=0;break}}else for(;j<w;)if(k[D++]=N[j++],D==this.blockSize){l(this,k),D=0;break}}this.h=D,this.o+=w},r.prototype.A=function(){var N=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);N[0]=128;for(var w=1;w<N.length-8;++w)N[w]=0;w=this.o*8;for(var I=N.length-8;I<N.length;++I)N[I]=w&255,w/=256;for(this.v(N),N=Array(16),w=0,I=0;I<4;++I)for(let k=0;k<32;k+=8)N[w++]=this.g[I]>>>k&255;return N};function u(N,w){var I=p;return Object.prototype.hasOwnProperty.call(I,N)?I[N]:I[N]=w(N)}function f(N,w){this.h=w;const I=[];let k=!0;for(let D=N.length-1;D>=0;D--){const j=N[D]|0;k&&j==w||(I[D]=j,k=!1)}this.g=I}var p={};function y(N){return-128<=N&&N<128?u(N,function(w){return new f([w|0],w<0?-1:0)}):new f([N|0],N<0?-1:0)}function g(N){if(isNaN(N)||!isFinite(N))return A;if(N<0)return K(g(-N));const w=[];let I=1;for(let k=0;N>=I;k++)w[k]=N/I|0,I*=4294967296;return new f(w,0)}function T(N,w){if(N.length==0)throw Error("number format error: empty string");if(w=w||10,w<2||36<w)throw Error("radix out of range: "+w);if(N.charAt(0)=="-")return K(T(N.substring(1),w));if(N.indexOf("-")>=0)throw Error('number format error: interior "-" character');const I=g(Math.pow(w,8));let k=A;for(let j=0;j<N.length;j+=8){var D=Math.min(8,N.length-j);const R=parseInt(N.substring(j,j+D),w);D<8?(D=g(Math.pow(w,D)),k=k.j(D).add(g(R))):(k=k.j(I),k=k.add(g(R)))}return k}var A=y(0),x=y(1),V=y(16777216);s=f.prototype,s.m=function(){if(G(this))return-K(this).m();let N=0,w=1;for(let I=0;I<this.g.length;I++){const k=this.i(I);N+=(k>=0?k:4294967296+k)*w,w*=4294967296}return N},s.toString=function(N){if(N=N||10,N<2||36<N)throw Error("radix out of range: "+N);if(q(this))return"0";if(G(this))return"-"+K(this).toString(N);const w=g(Math.pow(N,6));var I=this;let k="";for(;;){const D=he(I,w).g;I=ee(I,D.j(w));let j=((I.g.length>0?I.g[0]:I.h)>>>0).toString(N);if(I=D,q(I))return j+k;for(;j.length<6;)j="0"+j;k=j+k}},s.i=function(N){return N<0?0:N<this.g.length?this.g[N]:this.h};function q(N){if(N.h!=0)return!1;for(let w=0;w<N.g.length;w++)if(N.g[w]!=0)return!1;return!0}function G(N){return N.h==-1}s.l=function(N){return N=ee(this,N),G(N)?-1:q(N)?0:1};function K(N){const w=N.g.length,I=[];for(let k=0;k<w;k++)I[k]=~N.g[k];return new f(I,~N.h).add(x)}s.abs=function(){return G(this)?K(this):this},s.add=function(N){const w=Math.max(this.g.length,N.g.length),I=[];let k=0;for(let D=0;D<=w;D++){let j=k+(this.i(D)&65535)+(N.i(D)&65535),R=(j>>>16)+(this.i(D)>>>16)+(N.i(D)>>>16);k=R>>>16,j&=65535,R&=65535,I[D]=R<<16|j}return new f(I,I[I.length-1]&-2147483648?-1:0)};function ee(N,w){return N.add(K(w))}s.j=function(N){if(q(this)||q(N))return A;if(G(this))return G(N)?K(this).j(K(N)):K(K(this).j(N));if(G(N))return K(this.j(K(N)));if(this.l(V)<0&&N.l(V)<0)return g(this.m()*N.m());const w=this.g.length+N.g.length,I=[];for(var k=0;k<2*w;k++)I[k]=0;for(k=0;k<this.g.length;k++)for(let D=0;D<N.g.length;D++){const j=this.i(k)>>>16,R=this.i(k)&65535,be=N.i(D)>>>16,lt=N.i(D)&65535;I[2*k+2*D]+=R*lt,te(I,2*k+2*D),I[2*k+2*D+1]+=j*lt,te(I,2*k+2*D+1),I[2*k+2*D+1]+=R*be,te(I,2*k+2*D+1),I[2*k+2*D+2]+=j*be,te(I,2*k+2*D+2)}for(N=0;N<w;N++)I[N]=I[2*N+1]<<16|I[2*N];for(N=w;N<2*w;N++)I[N]=0;return new f(I,0)};function te(N,w){for(;(N[w]&65535)!=N[w];)N[w+1]+=N[w]>>>16,N[w]&=65535,w++}function ne(N,w){this.g=N,this.h=w}function he(N,w){if(q(w))throw Error("division by zero");if(q(N))return new ne(A,A);if(G(N))return w=he(K(N),w),new ne(K(w.g),K(w.h));if(G(w))return w=he(N,K(w)),new ne(K(w.g),w.h);if(N.g.length>30){if(G(N)||G(w))throw Error("slowDivide_ only works with positive integers.");for(var I=x,k=w;k.l(N)<=0;)I=ve(I),k=ve(k);var D=Te(I,1),j=Te(k,1);for(k=Te(k,2),I=Te(I,2);!q(k);){var R=j.add(k);R.l(N)<=0&&(D=D.add(I),j=R),k=Te(k,1),I=Te(I,1)}return w=ee(N,D.j(w)),new ne(D,w)}for(D=A;N.l(w)>=0;){for(I=Math.max(1,Math.floor(N.m()/w.m())),k=Math.ceil(Math.log(I)/Math.LN2),k=k<=48?1:Math.pow(2,k-48),j=g(I),R=j.j(w);G(R)||R.l(N)>0;)I-=k,j=g(I),R=j.j(w);q(j)&&(j=x),D=D.add(j),N=ee(N,R)}return new ne(D,N)}s.B=function(N){return he(this,N).h},s.and=function(N){const w=Math.max(this.g.length,N.g.length),I=[];for(let k=0;k<w;k++)I[k]=this.i(k)&N.i(k);return new f(I,this.h&N.h)},s.or=function(N){const w=Math.max(this.g.length,N.g.length),I=[];for(let k=0;k<w;k++)I[k]=this.i(k)|N.i(k);return new f(I,this.h|N.h)},s.xor=function(N){const w=Math.max(this.g.length,N.g.length),I=[];for(let k=0;k<w;k++)I[k]=this.i(k)^N.i(k);return new f(I,this.h^N.h)};function ve(N){const w=N.g.length+1,I=[];for(let k=0;k<w;k++)I[k]=N.i(k)<<1|N.i(k-1)>>>31;return new f(I,N.h)}function Te(N,w){const I=w>>5;w%=32;const k=N.g.length-I,D=[];for(let j=0;j<k;j++)D[j]=w>0?N.i(j+I)>>>w|N.i(j+I+1)<<32-w:N.i(j+I);return new f(D,N.h)}r.prototype.digest=r.prototype.A,r.prototype.reset=r.prototype.u,r.prototype.update=r.prototype.v,YE=r,f.prototype.add=f.prototype.add,f.prototype.multiply=f.prototype.j,f.prototype.modulo=f.prototype.B,f.prototype.compare=f.prototype.l,f.prototype.toNumber=f.prototype.m,f.prototype.toString=f.prototype.toString,f.prototype.getBits=f.prototype.i,f.fromNumber=g,f.fromString=T,er=f}).apply(typeof K0<"u"?K0:typeof self<"u"?self:typeof window<"u"?window:{});var Lc=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var KE,xl,XE,Yc,Tm,$E,JE,ZE;(function(){var s,e=Object.defineProperty;function i(c){c=[typeof globalThis=="object"&&globalThis,c,typeof window=="object"&&window,typeof self=="object"&&self,typeof Lc=="object"&&Lc];for(var m=0;m<c.length;++m){var v=c[m];if(v&&v.Math==Math)return v}throw Error("Cannot find global object")}var r=i(this);function l(c,m){if(m)e:{var v=r;c=c.split(".");for(var S=0;S<c.length-1;S++){var L=c[S];if(!(L in v))break e;v=v[L]}c=c[c.length-1],S=v[c],m=m(S),m!=S&&m!=null&&e(v,c,{configurable:!0,writable:!0,value:m})}}l("Symbol.dispose",function(c){return c||Symbol("Symbol.dispose")}),l("Array.prototype.values",function(c){return c||function(){return this[Symbol.iterator]()}}),l("Object.entries",function(c){return c||function(m){var v=[],S;for(S in m)Object.prototype.hasOwnProperty.call(m,S)&&v.push([S,m[S]]);return v}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var u=u||{},f=this||self;function p(c){var m=typeof c;return m=="object"&&c!=null||m=="function"}function y(c,m,v){return c.call.apply(c.bind,arguments)}function g(c,m,v){return g=y,g.apply(null,arguments)}function T(c,m){var v=Array.prototype.slice.call(arguments,1);return function(){var S=v.slice();return S.push.apply(S,arguments),c.apply(this,S)}}function A(c,m){function v(){}v.prototype=m.prototype,c.Z=m.prototype,c.prototype=new v,c.prototype.constructor=c,c.Ob=function(S,L,H){for(var ie=Array(arguments.length-2),xe=2;xe<arguments.length;xe++)ie[xe-2]=arguments[xe];return m.prototype[L].apply(S,ie)}}var x=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?c=>c&&AsyncContext.Snapshot.wrap(c):c=>c;function V(c){const m=c.length;if(m>0){const v=Array(m);for(let S=0;S<m;S++)v[S]=c[S];return v}return[]}function q(c,m){for(let S=1;S<arguments.length;S++){const L=arguments[S];var v=typeof L;if(v=v!="object"?v:L?Array.isArray(L)?"array":v:"null",v=="array"||v=="object"&&typeof L.length=="number"){v=c.length||0;const H=L.length||0;c.length=v+H;for(let ie=0;ie<H;ie++)c[v+ie]=L[ie]}else c.push(L)}}class G{constructor(m,v){this.i=m,this.j=v,this.h=0,this.g=null}get(){let m;return this.h>0?(this.h--,m=this.g,this.g=m.next,m.next=null):m=this.i(),m}}function K(c){f.setTimeout(()=>{throw c},0)}function ee(){var c=N;let m=null;return c.g&&(m=c.g,c.g=c.g.next,c.g||(c.h=null),m.next=null),m}class te{constructor(){this.h=this.g=null}add(m,v){const S=ne.get();S.set(m,v),this.h?this.h.next=S:this.g=S,this.h=S}}var ne=new G(()=>new he,c=>c.reset());class he{constructor(){this.next=this.g=this.h=null}set(m,v){this.h=m,this.g=v,this.next=null}reset(){this.next=this.g=this.h=null}}let ve,Te=!1,N=new te,w=()=>{const c=Promise.resolve(void 0);ve=()=>{c.then(I)}};function I(){for(var c;c=ee();){try{c.h.call(c.g)}catch(v){K(v)}var m=ne;m.j(c),m.h<100&&(m.h++,c.next=m.g,m.g=c)}Te=!1}function k(){this.u=this.u,this.C=this.C}k.prototype.u=!1,k.prototype.dispose=function(){this.u||(this.u=!0,this.N())},k.prototype[Symbol.dispose]=function(){this.dispose()},k.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function D(c,m){this.type=c,this.g=this.target=m,this.defaultPrevented=!1}D.prototype.h=function(){this.defaultPrevented=!0};var j=(function(){if(!f.addEventListener||!Object.defineProperty)return!1;var c=!1,m=Object.defineProperty({},"passive",{get:function(){c=!0}});try{const v=()=>{};f.addEventListener("test",v,m),f.removeEventListener("test",v,m)}catch{}return c})();function R(c){return/^[\s\xa0]*$/.test(c)}function be(c,m){D.call(this,c?c.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,c&&this.init(c,m)}A(be,D),be.prototype.init=function(c,m){const v=this.type=c.type,S=c.changedTouches&&c.changedTouches.length?c.changedTouches[0]:null;this.target=c.target||c.srcElement,this.g=m,m=c.relatedTarget,m||(v=="mouseover"?m=c.fromElement:v=="mouseout"&&(m=c.toElement)),this.relatedTarget=m,S?(this.clientX=S.clientX!==void 0?S.clientX:S.pageX,this.clientY=S.clientY!==void 0?S.clientY:S.pageY,this.screenX=S.screenX||0,this.screenY=S.screenY||0):(this.clientX=c.clientX!==void 0?c.clientX:c.pageX,this.clientY=c.clientY!==void 0?c.clientY:c.pageY,this.screenX=c.screenX||0,this.screenY=c.screenY||0),this.button=c.button,this.key=c.key||"",this.ctrlKey=c.ctrlKey,this.altKey=c.altKey,this.shiftKey=c.shiftKey,this.metaKey=c.metaKey,this.pointerId=c.pointerId||0,this.pointerType=c.pointerType,this.state=c.state,this.i=c,c.defaultPrevented&&be.Z.h.call(this)},be.prototype.h=function(){be.Z.h.call(this);const c=this.i;c.preventDefault?c.preventDefault():c.returnValue=!1};var lt="closure_listenable_"+(Math.random()*1e6|0),Y=0;function re(c,m,v,S,L){this.listener=c,this.proxy=null,this.src=m,this.type=v,this.capture=!!S,this.ha=L,this.key=++Y,this.da=this.fa=!1}function pe(c){c.da=!0,c.listener=null,c.proxy=null,c.src=null,c.ha=null}function ze(c,m,v){for(const S in c)m.call(v,c[S],S,c)}function Qe(c,m){for(const v in c)m.call(void 0,c[v],v,c)}function M(c){const m={};for(const v in c)m[v]=c[v];return m}const Z="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function ae(c,m){let v,S;for(let L=1;L<arguments.length;L++){S=arguments[L];for(v in S)c[v]=S[v];for(let H=0;H<Z.length;H++)v=Z[H],Object.prototype.hasOwnProperty.call(S,v)&&(c[v]=S[v])}}function ue(c){this.src=c,this.g={},this.h=0}ue.prototype.add=function(c,m,v,S,L){const H=c.toString();c=this.g[H],c||(c=this.g[H]=[],this.h++);const ie=Ie(c,m,S,L);return ie>-1?(m=c[ie],v||(m.fa=!1)):(m=new re(m,this.src,H,!!S,L),m.fa=v,c.push(m)),m};function Ee(c,m){const v=m.type;if(v in c.g){var S=c.g[v],L=Array.prototype.indexOf.call(S,m,void 0),H;(H=L>=0)&&Array.prototype.splice.call(S,L,1),H&&(pe(m),c.g[v].length==0&&(delete c.g[v],c.h--))}}function Ie(c,m,v,S){for(let L=0;L<c.length;++L){const H=c[L];if(!H.da&&H.listener==m&&H.capture==!!v&&H.ha==S)return L}return-1}var Le="closure_lm_"+(Math.random()*1e6|0),Mt={};function rt(c,m,v,S,L){if(Array.isArray(m)){for(let H=0;H<m.length;H++)rt(c,m[H],v,S,L);return null}return v=Eo(v),c&&c[lt]?c.J(m,v,p(S)?!!S.capture:!1,L):mr(c,m,v,!1,S,L)}function mr(c,m,v,S,L,H){if(!m)throw Error("Invalid event type");const ie=p(L)?!!L.capture:!!L;let xe=pr(c);if(xe||(c[Le]=xe=new ue(c)),v=xe.add(m,v,S,ie,H),v.proxy)return v;if(S=sa(),v.proxy=S,S.src=c,S.listener=v,c.addEventListener)j||(L=ie),L===void 0&&(L=!1),c.addEventListener(m.toString(),S,L);else if(c.attachEvent)c.attachEvent(ri(m.toString()),S);else if(c.addListener&&c.removeListener)c.addListener(S);else throw Error("addEventListener and attachEvent are unavailable.");return v}function sa(){function c(v){return m.call(c.src,c.listener,v)}const m=_o;return c}function ra(c,m,v,S,L){if(Array.isArray(m))for(var H=0;H<m.length;H++)ra(c,m[H],v,S,L);else S=p(S)?!!S.capture:!!S,v=Eo(v),c&&c[lt]?(c=c.i,H=String(m).toString(),H in c.g&&(m=c.g[H],v=Ie(m,v,S,L),v>-1&&(pe(m[v]),Array.prototype.splice.call(m,v,1),m.length==0&&(delete c.g[H],c.h--)))):c&&(c=pr(c))&&(m=c.g[m.toString()],c=-1,m&&(c=Ie(m,v,S,L)),(v=c>-1?m[c]:null)&&aa(v))}function aa(c){if(typeof c!="number"&&c&&!c.da){var m=c.src;if(m&&m[lt])Ee(m.i,c);else{var v=c.type,S=c.proxy;m.removeEventListener?m.removeEventListener(v,S,c.capture):m.detachEvent?m.detachEvent(ri(v),S):m.addListener&&m.removeListener&&m.removeListener(S),(v=pr(m))?(Ee(v,c),v.h==0&&(v.src=null,m[Le]=null)):pe(c)}}}function ri(c){return c in Mt?Mt[c]:Mt[c]="on"+c}function _o(c,m){if(c.da)c=!0;else{m=new be(m,this);const v=c.listener,S=c.ha||c.src;c.fa&&aa(c),c=v.call(S,m)}return c}function pr(c){return c=c[Le],c instanceof ue?c:null}var vo="__closure_events_fn_"+(Math.random()*1e9>>>0);function Eo(c){return typeof c=="function"?c:(c[vo]||(c[vo]=function(m){return c.handleEvent(m)}),c[vo])}function vt(){k.call(this),this.i=new ue(this),this.M=this,this.G=null}A(vt,k),vt.prototype[lt]=!0,vt.prototype.removeEventListener=function(c,m,v,S){ra(this,c,m,v,S)};function Vt(c,m){var v,S=c.G;if(S)for(v=[];S;S=S.G)v.push(S);if(c=c.M,S=m.type||m,typeof m=="string")m=new D(m,c);else if(m instanceof D)m.target=m.target||c;else{var L=m;m=new D(S,c),ae(m,L)}L=!0;let H,ie;if(v)for(ie=v.length-1;ie>=0;ie--)H=m.g=v[ie],L=fs(H,S,!0,m)&&L;if(H=m.g=c,L=fs(H,S,!0,m)&&L,L=fs(H,S,!1,m)&&L,v)for(ie=0;ie<v.length;ie++)H=m.g=v[ie],L=fs(H,S,!1,m)&&L}vt.prototype.N=function(){if(vt.Z.N.call(this),this.i){var c=this.i;for(const m in c.g){const v=c.g[m];for(let S=0;S<v.length;S++)pe(v[S]);delete c.g[m],c.h--}}this.G=null},vt.prototype.J=function(c,m,v,S){return this.i.add(String(c),m,!1,v,S)},vt.prototype.K=function(c,m,v,S){return this.i.add(String(c),m,!0,v,S)};function fs(c,m,v,S){if(m=c.i.g[String(m)],!m)return!0;m=m.concat();let L=!0;for(let H=0;H<m.length;++H){const ie=m[H];if(ie&&!ie.da&&ie.capture==v){const xe=ie.listener,mt=ie.ha||ie.src;ie.fa&&Ee(c.i,ie),L=xe.call(mt,S)!==!1&&L}}return L&&!S.defaultPrevented}function Kh(c,m){if(typeof c!="function")if(c&&typeof c.handleEvent=="function")c=g(c.handleEvent,c);else throw Error("Invalid listener argument");return Number(m)>2147483647?-1:f.setTimeout(c,m||0)}function lu(c){c.g=Kh(()=>{c.g=null,c.i&&(c.i=!1,lu(c))},c.l);const m=c.h;c.h=null,c.m.apply(null,m)}class nn extends k{constructor(m,v){super(),this.m=m,this.l=v,this.h=null,this.i=!1,this.g=null}j(m){this.h=arguments,this.g?this.i=!0:lu(this)}N(){super.N(),this.g&&(f.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function gr(c){k.call(this),this.h=c,this.g={}}A(gr,k);var To=[];function bo(c){ze(c.g,function(m,v){this.g.hasOwnProperty(v)&&aa(m)},c),c.g={}}gr.prototype.N=function(){gr.Z.N.call(this),bo(this)},gr.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var ds=f.JSON.stringify,Xh=f.JSON.parse,uu=class{stringify(c){return f.JSON.stringify(c,void 0)}parse(c){return f.JSON.parse(c,void 0)}};function cu(){}function hu(){}var Hn={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function qt(){D.call(this,"d")}A(qt,D);function xn(){D.call(this,"c")}A(xn,D);var dt={},fu=null;function oa(){return fu=fu||new vt}dt.Ia="serverreachability";function du(c){D.call(this,dt.Ia,c)}A(du,D);function ai(c){const m=oa();Vt(m,new du(m))}dt.STAT_EVENT="statevent";function yr(c,m){D.call(this,dt.STAT_EVENT,c),this.stat=m}A(yr,D);function Et(c){const m=oa();Vt(m,new yr(m,c))}dt.Ja="timingevent";function oi(c,m){D.call(this,dt.Ja,c),this.size=m}A(oi,D);function li(c,m){if(typeof c!="function")throw Error("Fn must not be null and must be a function");return f.setTimeout(function(){c()},m)}function Fn(){this.g=!0}Fn.prototype.ua=function(){this.g=!1};function $h(c,m,v,S,L,H){c.info(function(){if(c.g)if(H){var ie="",xe=H.split("&");for(let He=0;He<xe.length;He++){var mt=xe[He].split("=");if(mt.length>1){const at=mt[0];mt=mt[1];const Nn=at.split("_");ie=Nn.length>=2&&Nn[1]=="type"?ie+(at+"="+mt+"&"):ie+(at+"=redacted&")}}}else ie=null;else ie=H;return"XMLHTTP REQ ("+S+") [attempt "+L+"]: "+m+`
`+v+`
`+ie})}function mu(c,m,v,S,L,H,ie){c.info(function(){return"XMLHTTP RESP ("+S+") [ attempt "+L+"]: "+m+`
`+v+`
`+H+" "+ie})}function ui(c,m,v,S){c.info(function(){return"XMLHTTP TEXT ("+m+"): "+Jh(c,v)+(S?" "+S:"")})}function _r(c,m){c.info(function(){return"TIMEOUT: "+m})}Fn.prototype.info=function(){};function Jh(c,m){if(!c.g)return m;if(!m)return null;try{const H=JSON.parse(m);if(H){for(c=0;c<H.length;c++)if(Array.isArray(H[c])){var v=H[c];if(!(v.length<2)){var S=v[1];if(Array.isArray(S)&&!(S.length<1)){var L=S[0];if(L!="noop"&&L!="stop"&&L!="close")for(let ie=1;ie<S.length;ie++)S[ie]=""}}}}return ds(H)}catch{return m}}var vr={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},Ao={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},So;function Er(){}A(Er,cu),Er.prototype.g=function(){return new XMLHttpRequest},So=new Er;function ji(c){return encodeURIComponent(String(c))}function pu(c){var m=1;c=c.split(":");const v=[];for(;m>0&&c.length;)v.push(c.shift()),m--;return c.length&&v.push(c.join(":")),v}function Gn(c,m,v,S){this.j=c,this.i=m,this.l=v,this.S=S||1,this.V=new gr(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new Qn}function Qn(){this.i=null,this.g="",this.h=!1}var Tt={},Lt={};function ci(c,m,v){c.M=1,c.A=Tr(At(m)),c.u=v,c.R=!0,la(c,null)}function la(c,m){c.F=Date.now(),hi(c),c.B=At(c.A);var v=c.B,S=c.S;Array.isArray(S)||(S=[String(S)]),fa(v.i,"t",S),c.C=0,v=c.j.L,c.h=new Qn,c.g=Nu(c.j,v?m:null,!c.u),c.P>0&&(c.O=new nn(g(c.Y,c,c.g),c.P)),m=c.V,v=c.g,S=c.ba;var L="readystatechange";Array.isArray(L)||(L&&(To[0]=L.toString()),L=To);for(let H=0;H<L.length;H++){const ie=rt(v,L[H],S||m.handleEvent,!1,m.h||m);if(!ie)break;m.g[ie.key]=ie}m=c.J?M(c.J):{},c.u?(c.v||(c.v="POST"),m["Content-Type"]="application/x-www-form-urlencoded",c.g.ea(c.B,c.v,c.u,m)):(c.v="GET",c.g.ea(c.B,c.v,null,m)),ai(),$h(c.i,c.v,c.B,c.l,c.S,c.u)}Gn.prototype.ba=function(c){c=c.target;const m=this.O;m&&Xn(c)==3?m.j():this.Y(c)},Gn.prototype.Y=function(c){try{if(c==this.g)e:{const xe=Xn(this.g),mt=this.g.ya(),He=this.g.ca();if(!(xe<3)&&(xe!=3||this.g&&(this.h.h||this.g.la()||Ht(this.g)))){this.K||xe!=4||mt==7||(mt==8||He<=0?ai(3):ai(2)),fi(this);var m=this.g.ca();this.X=m;var v=Zh(this);if(this.o=m==200,mu(this.i,this.v,this.B,this.l,this.S,xe,m),this.o){if(this.U&&!this.L){t:{if(this.g){var S,L=this.g;if((S=L.g?L.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!R(S)){var H=S;break t}}H=null}if(c=H)ui(this.i,this.l,c,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,di(this,c);else{this.o=!1,this.m=3,Et(12),pn(this),Rn(this);break e}}if(this.R){c=!0;let at;for(;!this.K&&this.C<v.length;)if(at=yu(this,v),at==Lt){xe==4&&(this.m=4,Et(14),c=!1),ui(this.i,this.l,null,"[Incomplete Response]");break}else if(at==Tt){this.m=4,Et(15),ui(this.i,this.l,v,"[Invalid Chunk]"),c=!1;break}else ui(this.i,this.l,at,null),di(this,at);if(gu(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),xe!=4||v.length!=0||this.h.h||(this.m=1,Et(16),c=!1),this.o=this.o&&c,!c)ui(this.i,this.l,v,"[Invalid Chunked Response]"),pn(this),Rn(this);else if(v.length>0&&!this.W){this.W=!0;var ie=this.j;ie.g==this&&ie.aa&&!ie.P&&(ie.j.info("Great, no buffering proxy detected. Bytes received: "+v.length),Uo(ie),ie.P=!0,Et(11))}}else ui(this.i,this.l,v,null),di(this,v);xe==4&&pn(this),this.o&&!this.K&&(xe==4?xu(this.j,this):(this.o=!1,hi(this)))}else Li(this.g),m==400&&v.indexOf("Unknown SID")>0?(this.m=3,Et(12)):(this.m=0,Et(13)),pn(this),Rn(this)}}}catch{}finally{}};function Zh(c){if(!gu(c))return c.g.la();const m=Ht(c.g);if(m==="")return"";let v="";const S=m.length,L=Xn(c.g)==4;if(!c.h.i){if(typeof TextDecoder>"u")return pn(c),Rn(c),"";c.h.i=new f.TextDecoder}for(let H=0;H<S;H++)c.h.h=!0,v+=c.h.i.decode(m[H],{stream:!(L&&H==S-1)});return m.length=0,c.h.g+=v,c.C=0,c.h.g}function gu(c){return c.g?c.v=="GET"&&c.M!=2&&c.j.Aa:!1}function yu(c,m){var v=c.C,S=m.indexOf(`
`,v);return S==-1?Lt:(v=Number(m.substring(v,S)),isNaN(v)?Tt:(S+=1,S+v>m.length?Lt:(m=m.slice(S,S+v),c.C=S+v,m)))}Gn.prototype.cancel=function(){this.K=!0,pn(this)};function hi(c){c.T=Date.now()+c.H,ua(c,c.H)}function ua(c,m){if(c.D!=null)throw Error("WatchDog timer not null");c.D=li(g(c.aa,c),m)}function fi(c){c.D&&(f.clearTimeout(c.D),c.D=null)}Gn.prototype.aa=function(){this.D=null;const c=Date.now();c-this.T>=0?(_r(this.i,this.B),this.M!=2&&(ai(),Et(17)),pn(this),this.m=2,Rn(this)):ua(this,this.T-c)};function Rn(c){c.j.I==0||c.K||xu(c.j,c)}function pn(c){fi(c);var m=c.O;m&&typeof m.dispose=="function"&&m.dispose(),c.O=null,bo(c.V),c.g&&(m=c.g,c.g=null,m.abort(),m.dispose())}function di(c,m){try{var v=c.j;if(v.I!=0&&(v.g==c||pi(v.h,c))){if(!c.L&&pi(v.h,c)&&v.I==3){try{var S=v.Ba.g.parse(m)}catch{S=null}if(Array.isArray(S)&&S.length==3){var L=S;if(L[0]==0){e:if(!v.v){if(v.g)if(v.g.F+3e3<c.F)ya(v),Ts(v);else break e;Ir(v),Et(18)}}else v.xa=L[1],0<v.xa-v.K&&L[2]<37500&&v.F&&v.A==0&&!v.C&&(v.C=li(g(v.Va,v),6e3));mi(v.h)<=1&&v.ta&&(v.ta=void 0)}else Ti(v,11)}else if((c.L||v.g==c)&&ya(v),!R(m))for(L=v.Ba.g.parse(m),m=0;m<L.length;m++){let He=L[m];const at=He[0];if(!(at<=v.K))if(v.K=at,He=He[1],v.I==2)if(He[0]=="c"){v.M=He[1],v.ba=He[2];const Nn=He[3];Nn!=null&&(v.ka=Nn,v.j.info("VER="+v.ka));const bi=He[4];bi!=null&&(v.za=bi,v.j.info("SVER="+v.za));const $n=He[5];$n!=null&&typeof $n=="number"&&$n>0&&(S=1.5*$n,v.O=S,v.j.info("backChannelRequestTimeoutMs_="+S)),S=v;const Jn=c.g;if(Jn){const Cr=Jn.g?Jn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Cr){var H=S.h;H.g||Cr.indexOf("spdy")==-1&&Cr.indexOf("quic")==-1&&Cr.indexOf("h2")==-1||(H.j=H.l,H.g=new Set,H.h&&(Ro(H,H.h),H.h=null))}if(S.G){const _a=Jn.g?Jn.g.getResponseHeader("X-HTTP-Session-Id"):null;_a&&(S.wa=_a,Ye(S.J,S.G,_a))}}v.I=3,v.l&&v.l.ra(),v.aa&&(v.T=Date.now()-c.F,v.j.info("Handshake RTT: "+v.T+"ms")),S=v;var ie=c;if(S.na=Cu(S,S.L?S.ba:null,S.W),ie.L){Io(S.h,ie);var xe=ie,mt=S.O;mt&&(xe.H=mt),xe.D&&(fi(xe),hi(xe)),S.g=ie}else Su(S);v.i.length>0&&Ei(v)}else He[0]!="stop"&&He[0]!="close"||Ti(v,7);else v.I==3&&(He[0]=="stop"||He[0]=="close"?He[0]=="stop"?Ti(v,7):Po(v):He[0]!="noop"&&v.l&&v.l.qa(He),v.A=0)}}ai(4)}catch{}}var bt=class{constructor(c,m){this.g=c,this.map=m}};function wo(c){this.l=c||10,f.PerformanceNavigationTiming?(c=f.performance.getEntriesByType("navigation"),c=c.length>0&&(c[0].nextHopProtocol=="hq"||c[0].nextHopProtocol=="h2")):c=!!(f.chrome&&f.chrome.loadTimes&&f.chrome.loadTimes()&&f.chrome.loadTimes().wasFetchedViaSpdy),this.j=c?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function xo(c){return c.h?!0:c.g?c.g.size>=c.j:!1}function mi(c){return c.h?1:c.g?c.g.size:0}function pi(c,m){return c.h?c.h==m:c.g?c.g.has(m):!1}function Ro(c,m){c.g?c.g.add(m):c.h=m}function Io(c,m){c.h&&c.h==m?c.h=null:c.g&&c.g.has(m)&&c.g.delete(m)}wo.prototype.cancel=function(){if(this.i=Co(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const c of this.g.values())c.cancel();this.g.clear()}};function Co(c){if(c.h!=null)return c.i.concat(c.h.G);if(c.g!=null&&c.g.size!==0){let m=c.i;for(const v of c.g.values())m=m.concat(v.G);return m}return V(c.i)}var _u=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function ca(c,m){if(c){c=c.split("&");for(let v=0;v<c.length;v++){const S=c[v].indexOf("=");let L,H=null;S>=0?(L=c[v].substring(0,S),H=c[v].substring(S+1)):L=c[v],m(L,H?decodeURIComponent(H.replace(/\+/g," ")):"")}}}function gn(c){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let m;c instanceof gn?(this.l=c.l,Ut(this,c.j),this.o=c.o,this.g=c.g,ms(this,c.u),this.h=c.h,No(this,bu(c.i)),this.m=c.m):c&&(m=String(c).match(_u))?(this.l=!1,Ut(this,m[1]||"",!0),this.o=gi(m[2]||""),this.g=gi(m[3]||"",!0),ms(this,m[4]),this.h=gi(m[5]||"",!0),No(this,m[6]||"",!0),this.m=gi(m[7]||"")):(this.l=!1,this.i=new gs(null,this.l))}gn.prototype.toString=function(){const c=[];var m=this.j;m&&c.push(br(m,ha,!0),":");var v=this.g;return(v||m=="file")&&(c.push("//"),(m=this.o)&&c.push(br(m,ha,!0),"@"),c.push(ji(v).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),v=this.u,v!=null&&c.push(":",String(v))),(v=this.h)&&(this.g&&v.charAt(0)!="/"&&c.push("/"),c.push(br(v,v.charAt(0)=="/"?Do:vu,!0))),(v=this.i.toString())&&c.push("?",v),(v=this.m)&&c.push("#",br(v,Eu)),c.join("")},gn.prototype.resolve=function(c){const m=At(this);let v=!!c.j;v?Ut(m,c.j):v=!!c.o,v?m.o=c.o:v=!!c.g,v?m.g=c.g:v=c.u!=null;var S=c.h;if(v)ms(m,c.u);else if(v=!!c.h){if(S.charAt(0)!="/")if(this.g&&!this.h)S="/"+S;else{var L=m.h.lastIndexOf("/");L!=-1&&(S=m.h.slice(0,L+1)+S)}if(L=S,L==".."||L==".")S="";else if(L.indexOf("./")!=-1||L.indexOf("/.")!=-1){S=L.lastIndexOf("/",0)==0,L=L.split("/");const H=[];for(let ie=0;ie<L.length;){const xe=L[ie++];xe=="."?S&&ie==L.length&&H.push(""):xe==".."?((H.length>1||H.length==1&&H[0]!="")&&H.pop(),S&&ie==L.length&&H.push("")):(H.push(xe),S=!0)}S=H.join("/")}else S=L}return v?m.h=S:v=c.i.toString()!=="",v?No(m,bu(c.i)):v=!!c.m,v&&(m.m=c.m),m};function At(c){return new gn(c)}function Ut(c,m,v){c.j=v?gi(m,!0):m,c.j&&(c.j=c.j.replace(/:$/,""))}function ms(c,m){if(m){if(m=Number(m),isNaN(m)||m<0)throw Error("Bad port number "+m);c.u=m}else c.u=null}function No(c,m,v){m instanceof gs?(c.i=m,da(c.i,c.l)):(v||(m=br(m,ps)),c.i=new gs(m,c.l))}function Ye(c,m,v){c.i.set(m,v)}function Tr(c){return Ye(c,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),c}function gi(c,m){return c?m?decodeURI(c.replace(/%25/g,"%2525")):decodeURIComponent(c):""}function br(c,m,v){return typeof c=="string"?(c=encodeURI(c).replace(m,an),v&&(c=c.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),c):null}function an(c){return c=c.charCodeAt(0),"%"+(c>>4&15).toString(16)+(c&15).toString(16)}var ha=/[#\/\?@]/g,vu=/[#\?:]/g,Do=/[#\?]/g,ps=/[#\?@]/g,Eu=/#/g;function gs(c,m){this.h=this.g=null,this.i=c||null,this.j=!!m}function on(c){c.g||(c.g=new Map,c.h=0,c.i&&ca(c.i,function(m,v){c.add(decodeURIComponent(m.replace(/\+/g," ")),v)}))}s=gs.prototype,s.add=function(c,m){on(this),this.i=null,c=ys(this,c);let v=this.g.get(c);return v||this.g.set(c,v=[]),v.push(m),this.h+=1,this};function Tu(c,m){on(c),m=ys(c,m),c.g.has(m)&&(c.i=null,c.h-=c.g.get(m).length,c.g.delete(m))}function Oo(c,m){return on(c),m=ys(c,m),c.g.has(m)}s.forEach=function(c,m){on(this),this.g.forEach(function(v,S){v.forEach(function(L){c.call(m,L,S,this)},this)},this)};function Mo(c,m){on(c);let v=[];if(typeof m=="string")Oo(c,m)&&(v=v.concat(c.g.get(ys(c,m))));else for(c=Array.from(c.g.values()),m=0;m<c.length;m++)v=v.concat(c[m]);return v}s.set=function(c,m){return on(this),this.i=null,c=ys(this,c),Oo(this,c)&&(this.h-=this.g.get(c).length),this.g.set(c,[m]),this.h+=1,this},s.get=function(c,m){return c?(c=Mo(this,c),c.length>0?String(c[0]):m):m};function fa(c,m,v){Tu(c,m),v.length>0&&(c.i=null,c.g.set(ys(c,m),V(v)),c.h+=v.length)}s.toString=function(){if(this.i)return this.i;if(!this.g)return"";const c=[],m=Array.from(this.g.keys());for(let S=0;S<m.length;S++){var v=m[S];const L=ji(v);v=Mo(this,v);for(let H=0;H<v.length;H++){let ie=L;v[H]!==""&&(ie+="="+ji(v[H])),c.push(ie)}}return this.i=c.join("&")};function bu(c){const m=new gs;return m.i=c.i,c.g&&(m.g=new Map(c.g),m.h=c.h),m}function ys(c,m){return m=String(m),c.j&&(m=m.toLowerCase()),m}function da(c,m){m&&!c.j&&(on(c),c.i=null,c.g.forEach(function(v,S){const L=S.toLowerCase();S!=L&&(Tu(this,S),fa(this,L,v))},c)),c.j=m}function Yn(c,m){const v=new Fn;if(f.Image){const S=new Image;S.onload=T(In,v,"TestLoadImage: loaded",!0,m,S),S.onerror=T(In,v,"TestLoadImage: error",!1,m,S),S.onabort=T(In,v,"TestLoadImage: abort",!1,m,S),S.ontimeout=T(In,v,"TestLoadImage: timeout",!1,m,S),f.setTimeout(function(){S.ontimeout&&S.ontimeout()},1e4),S.src=c}else m(!1)}function Vo(c,m){const v=new Fn,S=new AbortController,L=setTimeout(()=>{S.abort(),In(v,"TestPingServer: timeout",!1,m)},1e4);fetch(c,{signal:S.signal}).then(H=>{clearTimeout(L),H.ok?In(v,"TestPingServer: ok",!0,m):In(v,"TestPingServer: server error",!1,m)}).catch(()=>{clearTimeout(L),In(v,"TestPingServer: error",!1,m)})}function In(c,m,v,S,L){try{L&&(L.onload=null,L.onerror=null,L.onabort=null,L.ontimeout=null),S(v)}catch{}}function _s(){this.g=new uu}function yi(c){this.i=c.Sb||null,this.h=c.ab||!1}A(yi,cu),yi.prototype.g=function(){return new Ar(this.i,this.h)};function Ar(c,m){vt.call(this),this.H=c,this.o=m,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}A(Ar,vt),s=Ar.prototype,s.open=function(c,m){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=c,this.D=m,this.readyState=1,Kn(this)},s.send=function(c){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const m={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};c&&(m.body=c),(this.H||f).fetch(new Request(this.D,m)).then(this.Pa.bind(this),this.ga.bind(this))},s.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,vs(this)),this.readyState=0},s.Pa=function(c){if(this.g&&(this.l=c,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=c.headers,this.readyState=2,Kn(this)),this.g&&(this.readyState=3,Kn(this),this.g)))if(this.responseType==="arraybuffer")c.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof f.ReadableStream<"u"&&"body"in c){if(this.j=c.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;ma(this)}else c.text().then(this.Oa.bind(this),this.ga.bind(this))};function ma(c){c.j.read().then(c.Ma.bind(c)).catch(c.ga.bind(c))}s.Ma=function(c){if(this.g){if(this.o&&c.value)this.response.push(c.value);else if(!this.o){var m=c.value?c.value:new Uint8Array(0);(m=this.B.decode(m,{stream:!c.done}))&&(this.response=this.responseText+=m)}c.done?vs(this):Kn(this),this.readyState==3&&ma(this)}},s.Oa=function(c){this.g&&(this.response=this.responseText=c,vs(this))},s.Na=function(c){this.g&&(this.response=c,vs(this))},s.ga=function(){this.g&&vs(this)};function vs(c){c.readyState=4,c.l=null,c.j=null,c.B=null,Kn(c)}s.setRequestHeader=function(c,m){this.A.append(c,m)},s.getResponseHeader=function(c){return this.h&&this.h.get(c.toLowerCase())||""},s.getAllResponseHeaders=function(){if(!this.h)return"";const c=[],m=this.h.entries();for(var v=m.next();!v.done;)v=v.value,c.push(v[0]+": "+v[1]),v=m.next();return c.join(`\r
`)};function Kn(c){c.onreadystatechange&&c.onreadystatechange.call(c)}Object.defineProperty(Ar.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(c){this.m=c?"include":"same-origin"}});function Cn(c){let m="";return ze(c,function(v,S){m+=S,m+=":",m+=v,m+=`\r
`}),m}function Sr(c,m,v){e:{for(S in v){var S=!1;break e}S=!0}S||(v=Cn(v),typeof c=="string"?v!=null&&ji(v):Ye(c,m,v))}function $e(c){vt.call(this),this.headers=new Map,this.L=c||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}A($e,vt);var _i=/^https?$/i,ko=["POST","PUT"];s=$e.prototype,s.Fa=function(c){this.H=c},s.ea=function(c,m,v,S){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+c);m=m?m.toUpperCase():"GET",this.D=c,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():So.g(),this.g.onreadystatechange=x(g(this.Ca,this));try{this.B=!0,this.g.open(m,String(c),!0),this.B=!1}catch(H){wr(this,H);return}if(c=v||"",v=new Map(this.headers),S)if(Object.getPrototypeOf(S)===Object.prototype)for(var L in S)v.set(L,S[L]);else if(typeof S.keys=="function"&&typeof S.get=="function")for(const H of S.keys())v.set(H,S.get(H));else throw Error("Unknown input type for opt_headers: "+String(S));S=Array.from(v.keys()).find(H=>H.toLowerCase()=="content-type"),L=f.FormData&&c instanceof f.FormData,!(Array.prototype.indexOf.call(ko,m,void 0)>=0)||S||L||v.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[H,ie]of v)this.g.setRequestHeader(H,ie);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(c),this.v=!1}catch(H){wr(this,H)}};function wr(c,m){c.h=!1,c.g&&(c.j=!0,c.g.abort(),c.j=!1),c.l=m,c.o=5,jo(c),Pi(c)}function jo(c){c.A||(c.A=!0,Vt(c,"complete"),Vt(c,"error"))}s.abort=function(c){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=c||7,Vt(this,"complete"),Vt(this,"abort"),Pi(this))},s.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Pi(this,!0)),$e.Z.N.call(this)},s.Ca=function(){this.u||(this.B||this.v||this.j?xr(this):this.Xa())},s.Xa=function(){xr(this)};function xr(c){if(c.h&&typeof u<"u"){if(c.v&&Xn(c)==4)setTimeout(c.Ca.bind(c),0);else if(Vt(c,"readystatechange"),Xn(c)==4){c.h=!1;try{const H=c.ca();e:switch(H){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var m=!0;break e;default:m=!1}var v;if(!(v=m)){var S;if(S=H===0){let ie=String(c.D).match(_u)[1]||null;!ie&&f.self&&f.self.location&&(ie=f.self.location.protocol.slice(0,-1)),S=!_i.test(ie?ie.toLowerCase():"")}v=S}if(v)Vt(c,"complete"),Vt(c,"success");else{c.o=6;try{var L=Xn(c)>2?c.g.statusText:""}catch{L=""}c.l=L+" ["+c.ca()+"]",jo(c)}}finally{Pi(c)}}}}function Pi(c,m){if(c.g){c.m&&(clearTimeout(c.m),c.m=null);const v=c.g;c.g=null,m||Vt(c,"ready");try{v.onreadystatechange=null}catch{}}}s.isActive=function(){return!!this.g};function Xn(c){return c.g?c.g.readyState:0}s.ca=function(){try{return Xn(this)>2?this.g.status:-1}catch{return-1}},s.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},s.La=function(c){if(this.g){var m=this.g.responseText;return c&&m.indexOf(c)==0&&(m=m.substring(c.length)),Xh(m)}};function Ht(c){try{if(!c.g)return null;if("response"in c.g)return c.g.response;switch(c.F){case"":case"text":return c.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in c.g)return c.g.mozResponseArrayBuffer}return null}catch{return null}}function Li(c){const m={};c=(c.g&&Xn(c)>=2&&c.g.getAllResponseHeaders()||"").split(`\r
`);for(let S=0;S<c.length;S++){if(R(c[S]))continue;var v=pu(c[S]);const L=v[0];if(v=v[1],typeof v!="string")continue;v=v.trim();const H=m[L]||[];m[L]=H,H.push(v)}Qe(m,function(S){return S.join(", ")})}s.ya=function(){return this.o},s.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function vi(c,m,v){return v&&v.internalChannelParams&&v.internalChannelParams[c]||m}function Es(c){this.za=0,this.i=[],this.j=new Fn,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=vi("failFast",!1,c),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=vi("baseRetryDelayMs",5e3,c),this.Za=vi("retryDelaySeedMs",1e4,c),this.Ta=vi("forwardChannelMaxRetries",2,c),this.va=vi("forwardChannelRequestTimeoutMs",2e4,c),this.ma=c&&c.xmlHttpFactory||void 0,this.Ua=c&&c.Rb||void 0,this.Aa=c&&c.useFetchStreams||!1,this.O=void 0,this.L=c&&c.supportsCrossDomainXhr||!1,this.M="",this.h=new wo(c&&c.concurrentRequestLimit),this.Ba=new _s,this.S=c&&c.fastHandshake||!1,this.R=c&&c.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=c&&c.Pb||!1,c&&c.ua&&this.j.ua(),c&&c.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&c&&c.detectBufferingProxy||!1,this.ia=void 0,c&&c.longPollingTimeout&&c.longPollingTimeout>0&&(this.ia=c.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}s=Es.prototype,s.ka=8,s.I=1,s.connect=function(c,m,v,S){Et(0),this.W=c,this.H=m||{},v&&S!==void 0&&(this.H.OSID=v,this.H.OAID=S),this.F=this.X,this.J=Cu(this,null,this.W),Ei(this)};function Po(c){if(pa(c),c.I==3){var m=c.V++,v=At(c.J);if(Ye(v,"SID",c.M),Ye(v,"RID",m),Ye(v,"TYPE","terminate"),Rr(c,v),m=new Gn(c,c.j,m),m.M=2,m.A=Tr(At(v)),v=!1,f.navigator&&f.navigator.sendBeacon)try{v=f.navigator.sendBeacon(m.A.toString(),"")}catch{}!v&&f.Image&&(new Image().src=m.A,v=!0),v||(m.g=Nu(m.j,null),m.g.ea(m.A)),m.F=Date.now(),hi(m)}Iu(c)}function Ts(c){c.g&&(Uo(c),c.g.cancel(),c.g=null)}function pa(c){Ts(c),c.v&&(f.clearTimeout(c.v),c.v=null),ya(c),c.h.cancel(),c.m&&(typeof c.m=="number"&&f.clearTimeout(c.m),c.m=null)}function Ei(c){if(!xo(c.h)&&!c.m){c.m=!0;var m=c.Ea;ve||w(),Te||(ve(),Te=!0),N.add(m,c),c.D=0}}function ga(c,m){return mi(c.h)>=c.h.j-(c.m?1:0)?!1:c.m?(c.i=m.G.concat(c.i),!0):c.I==1||c.I==2||c.D>=(c.Sa?0:c.Ta)?!1:(c.m=li(g(c.Ea,c,m),Ru(c,c.D)),c.D++,!0)}s.Ea=function(c){if(this.m)if(this.m=null,this.I==1){if(!c){this.V=Math.floor(Math.random()*1e5),c=this.V++;const L=new Gn(this,this.j,c);let H=this.o;if(this.U&&(H?(H=M(H),ae(H,this.U)):H=this.U),this.u!==null||this.R||(L.J=H,H=null),this.S)e:{for(var m=0,v=0;v<this.i.length;v++){t:{var S=this.i[v];if("__data__"in S.map&&(S=S.map.__data__,typeof S=="string")){S=S.length;break t}S=void 0}if(S===void 0)break;if(m+=S,m>4096){m=v;break e}if(m===4096||v===this.i.length-1){m=v+1;break e}}m=1e3}else m=1e3;m=Au(this,L,m),v=At(this.J),Ye(v,"RID",c),Ye(v,"CVER",22),this.G&&Ye(v,"X-HTTP-Session-Id",this.G),Rr(this,v),H&&(this.R?m="headers="+ji(Cn(H))+"&"+m:this.u&&Sr(v,this.u,H)),Ro(this.h,L),this.Ra&&Ye(v,"TYPE","init"),this.S?(Ye(v,"$req",m),Ye(v,"SID","null"),L.U=!0,ci(L,v,null)):ci(L,v,m),this.I=2}}else this.I==3&&(c?Lo(this,c):this.i.length==0||xo(this.h)||Lo(this))};function Lo(c,m){var v;m?v=m.l:v=c.V++;const S=At(c.J);Ye(S,"SID",c.M),Ye(S,"RID",v),Ye(S,"AID",c.K),Rr(c,S),c.u&&c.o&&Sr(S,c.u,c.o),v=new Gn(c,c.j,v,c.D+1),c.u===null&&(v.J=c.o),m&&(c.i=m.G.concat(c.i)),m=Au(c,v,1e3),v.H=Math.round(c.va*.5)+Math.round(c.va*.5*Math.random()),Ro(c.h,v),ci(v,S,m)}function Rr(c,m){c.H&&ze(c.H,function(v,S){Ye(m,S,v)}),c.l&&ze({},function(v,S){Ye(m,S,v)})}function Au(c,m,v){v=Math.min(c.i.length,v);const S=c.l?g(c.l.Ka,c.l,c):null;e:{var L=c.i;let xe=-1;for(;;){const mt=["count="+v];xe==-1?v>0?(xe=L[0].g,mt.push("ofs="+xe)):xe=0:mt.push("ofs="+xe);let He=!0;for(let at=0;at<v;at++){var H=L[at].g;const Nn=L[at].map;if(H-=xe,H<0)xe=Math.max(0,L[at].g-100),He=!1;else try{H="req"+H+"_"||"";try{var ie=Nn instanceof Map?Nn:Object.entries(Nn);for(const[bi,$n]of ie){let Jn=$n;p($n)&&(Jn=ds($n)),mt.push(H+bi+"="+encodeURIComponent(Jn))}}catch(bi){throw mt.push(H+"type="+encodeURIComponent("_badmap")),bi}}catch{S&&S(Nn)}}if(He){ie=mt.join("&");break e}}ie=void 0}return c=c.i.splice(0,v),m.G=c,ie}function Su(c){if(!c.g&&!c.v){c.Y=1;var m=c.Da;ve||w(),Te||(ve(),Te=!0),N.add(m,c),c.A=0}}function Ir(c){return c.g||c.v||c.A>=3?!1:(c.Y++,c.v=li(g(c.Da,c),Ru(c,c.A)),c.A++,!0)}s.Da=function(){if(this.v=null,wu(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var c=4*this.T;this.j.info("BP detection timer enabled: "+c),this.B=li(g(this.Wa,this),c)}},s.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,Et(10),Ts(this),wu(this))};function Uo(c){c.B!=null&&(f.clearTimeout(c.B),c.B=null)}function wu(c){c.g=new Gn(c,c.j,"rpc",c.Y),c.u===null&&(c.g.J=c.o),c.g.P=0;var m=At(c.na);Ye(m,"RID","rpc"),Ye(m,"SID",c.M),Ye(m,"AID",c.K),Ye(m,"CI",c.F?"0":"1"),!c.F&&c.ia&&Ye(m,"TO",c.ia),Ye(m,"TYPE","xmlhttp"),Rr(c,m),c.u&&c.o&&Sr(m,c.u,c.o),c.O&&(c.g.H=c.O);var v=c.g;c=c.ba,v.M=1,v.A=Tr(At(m)),v.u=null,v.R=!0,la(v,c)}s.Va=function(){this.C!=null&&(this.C=null,Ts(this),Ir(this),Et(19))};function ya(c){c.C!=null&&(f.clearTimeout(c.C),c.C=null)}function xu(c,m){var v=null;if(c.g==m){ya(c),Uo(c),c.g=null;var S=2}else if(pi(c.h,m))v=m.G,Io(c.h,m),S=1;else return;if(c.I!=0){if(m.o)if(S==1){v=m.u?m.u.length:0,m=Date.now()-m.F;var L=c.D;S=oa(),Vt(S,new oi(S,v)),Ei(c)}else Su(c);else if(L=m.m,L==3||L==0&&m.X>0||!(S==1&&ga(c,m)||S==2&&Ir(c)))switch(v&&v.length>0&&(m=c.h,m.i=m.i.concat(v)),L){case 1:Ti(c,5);break;case 4:Ti(c,10);break;case 3:Ti(c,6);break;default:Ti(c,2)}}}function Ru(c,m){let v=c.Qa+Math.floor(Math.random()*c.Za);return c.isActive()||(v*=2),v*m}function Ti(c,m){if(c.j.info("Error code "+m),m==2){var v=g(c.bb,c),S=c.Ua;const L=!S;S=new gn(S||"//www.google.com/images/cleardot.gif"),f.location&&f.location.protocol=="http"||Ut(S,"https"),Tr(S),L?Yn(S.toString(),v):Vo(S.toString(),v)}else Et(2);c.I=0,c.l&&c.l.pa(m),Iu(c),pa(c)}s.bb=function(c){c?(this.j.info("Successfully pinged google.com"),Et(2)):(this.j.info("Failed to ping google.com"),Et(1))};function Iu(c){if(c.I=0,c.ja=[],c.l){const m=Co(c.h);(m.length!=0||c.i.length!=0)&&(q(c.ja,m),q(c.ja,c.i),c.h.i.length=0,V(c.i),c.i.length=0),c.l.oa()}}function Cu(c,m,v){var S=v instanceof gn?At(v):new gn(v);if(S.g!="")m&&(S.g=m+"."+S.g),ms(S,S.u);else{var L=f.location;S=L.protocol,m=m?m+"."+L.hostname:L.hostname,L=+L.port;const H=new gn(null);S&&Ut(H,S),m&&(H.g=m),L&&ms(H,L),v&&(H.h=v),S=H}return v=c.G,m=c.wa,v&&m&&Ye(S,v,m),Ye(S,"VER",c.ka),Rr(c,S),S}function Nu(c,m,v){if(m&&!c.L)throw Error("Can't create secondary domain capable XhrIo object.");return m=c.Aa&&!c.ma?new $e(new yi({ab:v})):new $e(c.ma),m.Fa(c.L),m}s.isActive=function(){return!!this.l&&this.l.isActive(this)};function Du(){}s=Du.prototype,s.ra=function(){},s.qa=function(){},s.pa=function(){},s.oa=function(){},s.isActive=function(){return!0},s.Ka=function(){};function bs(){}bs.prototype.g=function(c,m){return new sn(c,m)};function sn(c,m){vt.call(this),this.g=new Es(m),this.l=c,this.h=m&&m.messageUrlParams||null,c=m&&m.messageHeaders||null,m&&m.clientProtocolHeaderRequired&&(c?c["X-Client-Protocol"]="webchannel":c={"X-Client-Protocol":"webchannel"}),this.g.o=c,c=m&&m.initMessageHeaders||null,m&&m.messageContentType&&(c?c["X-WebChannel-Content-Type"]=m.messageContentType:c={"X-WebChannel-Content-Type":m.messageContentType}),m&&m.sa&&(c?c["X-WebChannel-Client-Profile"]=m.sa:c={"X-WebChannel-Client-Profile":m.sa}),this.g.U=c,(c=m&&m.Qb)&&!R(c)&&(this.g.u=c),this.A=m&&m.supportsCrossDomainXhr||!1,this.v=m&&m.sendRawJson||!1,(m=m&&m.httpSessionIdParam)&&!R(m)&&(this.g.G=m,c=this.h,c!==null&&m in c&&(c=this.h,m in c&&delete c[m])),this.j=new Ui(this)}A(sn,vt),sn.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},sn.prototype.close=function(){Po(this.g)},sn.prototype.o=function(c){var m=this.g;if(typeof c=="string"){var v={};v.__data__=c,c=v}else this.v&&(v={},v.__data__=ds(c),c=v);m.i.push(new bt(m.Ya++,c)),m.I==3&&Ei(m)},sn.prototype.N=function(){this.g.l=null,delete this.j,Po(this.g),delete this.g,sn.Z.N.call(this)};function Ou(c){qt.call(this),c.__headers__&&(this.headers=c.__headers__,this.statusCode=c.__status__,delete c.__headers__,delete c.__status__);var m=c.__sm__;if(m){e:{for(const v in m){c=v;break e}c=void 0}(this.i=c)&&(c=this.i,m=m!==null&&c in m?m[c]:void 0),this.data=m}else this.data=c}A(Ou,qt);function Mu(){xn.call(this),this.status=1}A(Mu,xn);function Ui(c){this.g=c}A(Ui,Du),Ui.prototype.ra=function(){Vt(this.g,"a")},Ui.prototype.qa=function(c){Vt(this.g,new Ou(c))},Ui.prototype.pa=function(c){Vt(this.g,new Mu)},Ui.prototype.oa=function(){Vt(this.g,"b")},bs.prototype.createWebChannel=bs.prototype.g,sn.prototype.send=sn.prototype.o,sn.prototype.open=sn.prototype.m,sn.prototype.close=sn.prototype.close,ZE=function(){return new bs},JE=function(){return oa()},$E=dt,Tm={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},vr.NO_ERROR=0,vr.TIMEOUT=8,vr.HTTP_ERROR=6,Yc=vr,Ao.COMPLETE="complete",XE=Ao,hu.EventType=Hn,Hn.OPEN="a",Hn.CLOSE="b",Hn.ERROR="c",Hn.MESSAGE="d",vt.prototype.listen=vt.prototype.J,xl=hu,$e.prototype.listenOnce=$e.prototype.K,$e.prototype.getLastError=$e.prototype.Ha,$e.prototype.getLastErrorCode=$e.prototype.ya,$e.prototype.getStatus=$e.prototype.ca,$e.prototype.getResponseJson=$e.prototype.La,$e.prototype.getResponseText=$e.prototype.la,$e.prototype.send=$e.prototype.ea,$e.prototype.setWithCredentials=$e.prototype.Fa,KE=$e}).apply(typeof Lc<"u"?Lc:typeof self<"u"?self:typeof window<"u"?window:{});const X0="@firebase/firestore",$0="4.9.2";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Wt=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};Wt.UNAUTHENTICATED=new Wt(null),Wt.GOOGLE_CREDENTIALS=new Wt("google-credentials-uid"),Wt.FIRST_PARTY=new Wt("first-party-uid"),Wt.MOCK_USER=new Wt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let mo="12.3.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nr=new Hm("@firebase/firestore");function Ka(){return nr.logLevel}function yx(s){nr.setLogLevel(s)}function le(s,...e){if(nr.logLevel<=Ve.DEBUG){const i=e.map(ep);nr.debug(`Firestore (${mo}): ${s}`,...i)}}function ls(s,...e){if(nr.logLevel<=Ve.ERROR){const i=e.map(ep);nr.error(`Firestore (${mo}): ${s}`,...i)}}function so(s,...e){if(nr.logLevel<=Ve.WARN){const i=e.map(ep);nr.warn(`Firestore (${mo}): ${s}`,...i)}}function ep(s){if(typeof s=="string")return s;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(i){return JSON.stringify(i)})(s)}catch{return s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _e(s,e,i){let r="Unexpected state";typeof e=="string"?r=e:i=e,WE(s,r,i)}function WE(s,e,i){let r=`FIRESTORE (${mo}) INTERNAL ASSERTION FAILED: ${e} (ID: ${s.toString(16)})`;if(i!==void 0)try{r+=" CONTEXT: "+JSON.stringify(i)}catch{r+=" CONTEXT: "+i}throw ls(r),new Error(r)}function Ge(s,e,i,r){let l="Unexpected state";typeof i=="string"?l=i:r=i,s||WE(e,l,r)}function we(s,e){return s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const J={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class oe extends cs{constructor(e,i){super(e,i),this.code=e,this.message=i,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ss{constructor(){this.promise=new Promise(((e,i)=>{this.resolve=e,this.reject=i}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eT{constructor(e,i){this.user=i,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class _x{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,i){e.enqueueRetryable((()=>i(Wt.UNAUTHENTICATED)))}shutdown(){}}class vx{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,i){this.changeListener=i,e.enqueueRetryable((()=>i(this.token.user)))}shutdown(){this.changeListener=null}}class Ex{constructor(e){this.t=e,this.currentUser=Wt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,i){Ge(this.o===void 0,42304);let r=this.i;const l=y=>this.i!==r?(r=this.i,i(y)):Promise.resolve();let u=new ss;this.o=()=>{this.i++,this.currentUser=this.u(),u.resolve(),u=new ss,e.enqueueRetryable((()=>l(this.currentUser)))};const f=()=>{const y=u;e.enqueueRetryable((async()=>{await y.promise,await l(this.currentUser)}))},p=y=>{le("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=y,this.o&&(this.auth.addAuthTokenListener(this.o),f())};this.t.onInit((y=>p(y))),setTimeout((()=>{if(!this.auth){const y=this.t.getImmediate({optional:!0});y?p(y):(le("FirebaseAuthCredentialsProvider","Auth not yet detected"),u.resolve(),u=new ss)}}),0),f()}getToken(){const e=this.i,i=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(i).then((r=>this.i!==e?(le("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Ge(typeof r.accessToken=="string",31837,{l:r}),new eT(r.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Ge(e===null||typeof e=="string",2055,{h:e}),new Wt(e)}}class Tx{constructor(e,i,r){this.P=e,this.T=i,this.I=r,this.type="FirstParty",this.user=Wt.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class bx{constructor(e,i,r){this.P=e,this.T=i,this.I=r}getToken(){return Promise.resolve(new Tx(this.P,this.T,this.I))}start(e,i){e.enqueueRetryable((()=>i(Wt.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class J0{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Ax{constructor(e,i){this.V=i,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Un(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,i){Ge(this.o===void 0,3512);const r=u=>{u.error!=null&&le("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${u.error.message}`);const f=u.token!==this.m;return this.m=u.token,le("FirebaseAppCheckTokenProvider",`Received ${f?"new":"existing"} token.`),f?i(u.token):Promise.resolve()};this.o=u=>{e.enqueueRetryable((()=>r(u)))};const l=u=>{le("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=u,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((u=>l(u))),setTimeout((()=>{if(!this.appCheck){const u=this.V.getImmediate({optional:!0});u?l(u):le("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new J0(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((i=>i?(Ge(typeof i.token=="string",44558,{tokenResult:i}),this.m=i.token,new J0(i.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sx(s){const e=typeof self<"u"&&(self.crypto||self.msCrypto),i=new Uint8Array(s);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(i);else for(let r=0;r<s;r++)i[r]=Math.floor(256*Math.random());return i}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tp{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",i=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const l=Sx(40);for(let u=0;u<l.length;++u)r.length<20&&l[u]<i&&(r+=e.charAt(l[u]%62))}return r}}function ke(s,e){return s<e?-1:s>e?1:0}function bm(s,e){const i=Math.min(s.length,e.length);for(let r=0;r<i;r++){const l=s.charAt(r),u=e.charAt(r);if(l!==u)return am(l)===am(u)?ke(l,u):am(l)?1:-1}return ke(s.length,e.length)}const wx=55296,xx=57343;function am(s){const e=s.charCodeAt(0);return e>=wx&&e<=xx}function ro(s,e,i){return s.length===e.length&&s.every(((r,l)=>i(r,e[l])))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Z0="__name__";class Ri{constructor(e,i,r){i===void 0?i=0:i>e.length&&_e(637,{offset:i,range:e.length}),r===void 0?r=e.length-i:r>e.length-i&&_e(1746,{length:r,range:e.length-i}),this.segments=e,this.offset=i,this.len=r}get length(){return this.len}isEqual(e){return Ri.comparator(this,e)===0}child(e){const i=this.segments.slice(this.offset,this.limit());return e instanceof Ri?e.forEach((r=>{i.push(r)})):i.push(e),this.construct(i)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let i=0;i<this.length;i++)if(this.get(i)!==e.get(i))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let i=0;i<this.length;i++)if(this.get(i)!==e.get(i))return!1;return!0}forEach(e){for(let i=this.offset,r=this.limit();i<r;i++)e(this.segments[i])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,i){const r=Math.min(e.length,i.length);for(let l=0;l<r;l++){const u=Ri.compareSegments(e.get(l),i.get(l));if(u!==0)return u}return ke(e.length,i.length)}static compareSegments(e,i){const r=Ri.isNumericId(e),l=Ri.isNumericId(i);return r&&!l?-1:!r&&l?1:r&&l?Ri.extractNumericId(e).compare(Ri.extractNumericId(i)):bm(e,i)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return er.fromString(e.substring(4,e.length-2))}}class tt extends Ri{construct(e,i,r){return new tt(e,i,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const i=[];for(const r of e){if(r.indexOf("//")>=0)throw new oe(J.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);i.push(...r.split("/").filter((l=>l.length>0)))}return new tt(i)}static emptyPath(){return new tt([])}}const Rx=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Xt extends Ri{construct(e,i,r){return new Xt(e,i,r)}static isValidIdentifier(e){return Rx.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Xt.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===Z0}static keyField(){return new Xt([Z0])}static fromServerFormat(e){const i=[];let r="",l=0;const u=()=>{if(r.length===0)throw new oe(J.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);i.push(r),r=""};let f=!1;for(;l<e.length;){const p=e[l];if(p==="\\"){if(l+1===e.length)throw new oe(J.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const y=e[l+1];if(y!=="\\"&&y!=="."&&y!=="`")throw new oe(J.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=y,l+=2}else p==="`"?(f=!f,l++):p!=="."||f?(r+=p,l++):(u(),l++)}if(u(),f)throw new oe(J.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Xt(i)}static emptyPath(){return new Xt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class me{constructor(e){this.path=e}static fromPath(e){return new me(tt.fromString(e))}static fromName(e){return new me(tt.fromString(e).popFirst(5))}static empty(){return new me(tt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&tt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,i){return tt.comparator(e.path,i.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new me(new tt(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tT(s,e,i){if(!i)throw new oe(J.INVALID_ARGUMENT,`Function ${s}() cannot be called with an empty ${e}.`)}function Ix(s,e,i,r){if(e===!0&&r===!0)throw new oe(J.INVALID_ARGUMENT,`${s} and ${i} cannot be used together.`)}function W0(s){if(!me.isDocumentKey(s))throw new oe(J.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${s} has ${s.length}.`)}function ev(s){if(me.isDocumentKey(s))throw new oe(J.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${s} has ${s.length}.`)}function nT(s){return typeof s=="object"&&s!==null&&(Object.getPrototypeOf(s)===Object.prototype||Object.getPrototypeOf(s)===null)}function Rh(s){if(s===void 0)return"undefined";if(s===null)return"null";if(typeof s=="string")return s.length>20&&(s=`${s.substring(0,20)}...`),JSON.stringify(s);if(typeof s=="number"||typeof s=="boolean")return""+s;if(typeof s=="object"){if(s instanceof Array)return"an array";{const e=(function(r){return r.constructor?r.constructor.name:null})(s);return e?`a custom ${e} object`:"an object"}}return typeof s=="function"?"a function":_e(12329,{type:typeof s})}function wn(s,e){if("_delegate"in s&&(s=s._delegate),!(s instanceof e)){if(e.name===s.constructor.name)throw new oe(J.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const i=Rh(s);throw new oe(J.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${i}`)}}return s}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nt(s,e){const i={typeString:s};return e&&(i.value=e),i}function Zl(s,e){if(!nT(s))throw new oe(J.INVALID_ARGUMENT,"JSON must be an object");let i;for(const r in e)if(e[r]){const l=e[r].typeString,u="value"in e[r]?{value:e[r].value}:void 0;if(!(r in s)){i=`JSON missing required field: '${r}'`;break}const f=s[r];if(l&&typeof f!==l){i=`JSON field '${r}' must be a ${l}.`;break}if(u!==void 0&&f!==u.value){i=`Expected '${r}' field to equal '${u.value}'`;break}}if(i)throw new oe(J.INVALID_ARGUMENT,i);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tv=-62135596800,nv=1e6;class st{static now(){return st.fromMillis(Date.now())}static fromDate(e){return st.fromMillis(e.getTime())}static fromMillis(e){const i=Math.floor(e/1e3),r=Math.floor((e-1e3*i)*nv);return new st(i,r)}constructor(e,i){if(this.seconds=e,this.nanoseconds=i,i<0)throw new oe(J.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+i);if(i>=1e9)throw new oe(J.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+i);if(e<tv)throw new oe(J.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new oe(J.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/nv}_compareTo(e){return this.seconds===e.seconds?ke(this.nanoseconds,e.nanoseconds):ke(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:st._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Zl(e,st._jsonSchema))return new st(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-tv;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}st._jsonSchemaVersion="firestore/timestamp/1.0",st._jsonSchema={type:Nt("string",st._jsonSchemaVersion),seconds:Nt("number"),nanoseconds:Nt("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ae{static fromTimestamp(e){return new Ae(e)}static min(){return new Ae(new st(0,0))}static max(){return new Ae(new st(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ul=-1;function Cx(s,e){const i=s.toTimestamp().seconds,r=s.toTimestamp().nanoseconds+1,l=Ae.fromTimestamp(r===1e9?new st(i+1,0):new st(i,r));return new ir(l,me.empty(),e)}function Nx(s){return new ir(s.readTime,s.key,Ul)}class ir{constructor(e,i,r){this.readTime=e,this.documentKey=i,this.largestBatchId=r}static min(){return new ir(Ae.min(),me.empty(),Ul)}static max(){return new ir(Ae.max(),me.empty(),Ul)}}function Dx(s,e){let i=s.readTime.compareTo(e.readTime);return i!==0?i:(i=me.comparator(s.documentKey,e.documentKey),i!==0?i:ke(s.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ox="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Mx{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function po(s){if(s.code!==J.FAILED_PRECONDITION||s.message!==Ox)throw s;le("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((i=>{this.isDone=!0,this.result=i,this.nextCallback&&this.nextCallback(i)}),(i=>{this.isDone=!0,this.error=i,this.catchCallback&&this.catchCallback(i)}))}catch(e){return this.next(void 0,e)}next(e,i){return this.callbackAttached&&_e(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(i,this.error):this.wrapSuccess(e,this.result):new W(((r,l)=>{this.nextCallback=u=>{this.wrapSuccess(e,u).next(r,l)},this.catchCallback=u=>{this.wrapFailure(i,u).next(r,l)}}))}toPromise(){return new Promise(((e,i)=>{this.next(e,i)}))}wrapUserFunction(e){try{const i=e();return i instanceof W?i:W.resolve(i)}catch(i){return W.reject(i)}}wrapSuccess(e,i){return e?this.wrapUserFunction((()=>e(i))):W.resolve(i)}wrapFailure(e,i){return e?this.wrapUserFunction((()=>e(i))):W.reject(i)}static resolve(e){return new W(((i,r)=>{i(e)}))}static reject(e){return new W(((i,r)=>{r(e)}))}static waitFor(e){return new W(((i,r)=>{let l=0,u=0,f=!1;e.forEach((p=>{++l,p.next((()=>{++u,f&&u===l&&i()}),(y=>r(y)))})),f=!0,u===l&&i()}))}static or(e){let i=W.resolve(!1);for(const r of e)i=i.next((l=>l?W.resolve(l):r()));return i}static forEach(e,i){const r=[];return e.forEach(((l,u)=>{r.push(i.call(this,l,u))})),this.waitFor(r)}static mapArray(e,i){return new W(((r,l)=>{const u=e.length,f=new Array(u);let p=0;for(let y=0;y<u;y++){const g=y;i(e[g]).next((T=>{f[g]=T,++p,p===u&&r(f)}),(T=>l(T)))}}))}static doWhile(e,i){return new W(((r,l)=>{const u=()=>{e()===!0?i().next((()=>{u()}),l):r()};u()}))}}function Vx(s){const e=s.match(/Android ([\d.]+)/i),i=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(i)}function go(s){return s.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ih{constructor(e,i){this.previousValue=e,i&&(i.sequenceNumberHandler=r=>this.ae(r),this.ue=r=>i.writeSequenceNumber(r))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Ih.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const np=-1;function Ch(s){return s==null}function oh(s){return s===0&&1/s==-1/0}function kx(s){return typeof s=="number"&&Number.isInteger(s)&&!oh(s)&&s<=Number.MAX_SAFE_INTEGER&&s>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iT="";function jx(s){let e="";for(let i=0;i<s.length;i++)e.length>0&&(e=iv(e)),e=Px(s.get(i),e);return iv(e)}function Px(s,e){let i=e;const r=s.length;for(let l=0;l<r;l++){const u=s.charAt(l);switch(u){case"\0":i+="";break;case iT:i+="";break;default:i+=u}}return i}function iv(s){return s+iT+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sv(s){let e=0;for(const i in s)Object.prototype.hasOwnProperty.call(s,i)&&e++;return e}function fr(s,e){for(const i in s)Object.prototype.hasOwnProperty.call(s,i)&&e(i,s[i])}function sT(s){for(const e in s)if(Object.prototype.hasOwnProperty.call(s,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ut{constructor(e,i){this.comparator=e,this.root=i||Kt.EMPTY}insert(e,i){return new ut(this.comparator,this.root.insert(e,i,this.comparator).copy(null,null,Kt.BLACK,null,null))}remove(e){return new ut(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Kt.BLACK,null,null))}get(e){let i=this.root;for(;!i.isEmpty();){const r=this.comparator(e,i.key);if(r===0)return i.value;r<0?i=i.left:r>0&&(i=i.right)}return null}indexOf(e){let i=0,r=this.root;for(;!r.isEmpty();){const l=this.comparator(e,r.key);if(l===0)return i+r.left.size;l<0?r=r.left:(i+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((i,r)=>(e(i,r),!1)))}toString(){const e=[];return this.inorderTraversal(((i,r)=>(e.push(`${i}:${r}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Uc(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Uc(this.root,e,this.comparator,!1)}getReverseIterator(){return new Uc(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Uc(this.root,e,this.comparator,!0)}}class Uc{constructor(e,i,r,l){this.isReverse=l,this.nodeStack=[];let u=1;for(;!e.isEmpty();)if(u=i?r(e.key,i):1,i&&l&&(u*=-1),u<0)e=this.isReverse?e.left:e.right;else{if(u===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const i={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return i}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Kt{constructor(e,i,r,l,u){this.key=e,this.value=i,this.color=r??Kt.RED,this.left=l??Kt.EMPTY,this.right=u??Kt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,i,r,l,u){return new Kt(e??this.key,i??this.value,r??this.color,l??this.left,u??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,i,r){let l=this;const u=r(e,l.key);return l=u<0?l.copy(null,null,null,l.left.insert(e,i,r),null):u===0?l.copy(null,i,null,null,null):l.copy(null,null,null,null,l.right.insert(e,i,r)),l.fixUp()}removeMin(){if(this.left.isEmpty())return Kt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,i){let r,l=this;if(i(e,l.key)<0)l.left.isEmpty()||l.left.isRed()||l.left.left.isRed()||(l=l.moveRedLeft()),l=l.copy(null,null,null,l.left.remove(e,i),null);else{if(l.left.isRed()&&(l=l.rotateRight()),l.right.isEmpty()||l.right.isRed()||l.right.left.isRed()||(l=l.moveRedRight()),i(e,l.key)===0){if(l.right.isEmpty())return Kt.EMPTY;r=l.right.min(),l=l.copy(r.key,r.value,null,null,l.right.removeMin())}l=l.copy(null,null,null,null,l.right.remove(e,i))}return l.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Kt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Kt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),i=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,i)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw _e(43730,{key:this.key,value:this.value});if(this.right.isRed())throw _e(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw _e(27949);return e+(this.isRed()?0:1)}}Kt.EMPTY=null,Kt.RED=!0,Kt.BLACK=!1;Kt.EMPTY=new class{constructor(){this.size=0}get key(){throw _e(57766)}get value(){throw _e(16141)}get color(){throw _e(16727)}get left(){throw _e(29726)}get right(){throw _e(36894)}copy(e,i,r,l,u){return this}insert(e,i,r){return new Kt(e,i)}remove(e,i){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jt{constructor(e){this.comparator=e,this.data=new ut(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((i,r)=>(e(i),!1)))}forEachInRange(e,i){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const l=r.getNext();if(this.comparator(l.key,e[1])>=0)return;i(l.key)}}forEachWhile(e,i){let r;for(r=i!==void 0?this.data.getIteratorFrom(i):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const i=this.data.getIteratorFrom(e);return i.hasNext()?i.getNext().key:null}getIterator(){return new rv(this.data.getIterator())}getIteratorFrom(e){return new rv(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let i=this;return i.size<e.size&&(i=e,e=this),e.forEach((r=>{i=i.add(r)})),i}isEqual(e){if(!(e instanceof jt)||this.size!==e.size)return!1;const i=this.data.getIterator(),r=e.data.getIterator();for(;i.hasNext();){const l=i.getNext().key,u=r.getNext().key;if(this.comparator(l,u)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((i=>{e.push(i)})),e}toString(){const e=[];return this.forEach((i=>e.push(i))),"SortedSet("+e.toString()+")"}copy(e){const i=new jt(this.comparator);return i.data=e,i}}class rv{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sn{constructor(e){this.fields=e,e.sort(Xt.comparator)}static empty(){return new Sn([])}unionWith(e){let i=new jt(Xt.comparator);for(const r of this.fields)i=i.add(r);for(const r of e)i=i.add(r);return new Sn(i.toArray())}covers(e){for(const i of this.fields)if(i.isPrefixOf(e))return!0;return!1}isEqual(e){return ro(this.fields,e.fields,((i,r)=>i.isEqual(r)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rT extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $t{constructor(e){this.binaryString=e}static fromBase64String(e){const i=(function(l){try{return atob(l)}catch(u){throw typeof DOMException<"u"&&u instanceof DOMException?new rT("Invalid base64 string: "+u):u}})(e);return new $t(i)}static fromUint8Array(e){const i=(function(l){let u="";for(let f=0;f<l.length;++f)u+=String.fromCharCode(l[f]);return u})(e);return new $t(i)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(i){return btoa(i)})(this.binaryString)}toUint8Array(){return(function(i){const r=new Uint8Array(i.length);for(let l=0;l<i.length;l++)r[l]=i.charCodeAt(l);return r})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ke(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}$t.EMPTY_BYTE_STRING=new $t("");const Lx=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function sr(s){if(Ge(!!s,39018),typeof s=="string"){let e=0;const i=Lx.exec(s);if(Ge(!!i,46558,{timestamp:s}),i[1]){let l=i[1];l=(l+"000000000").substr(0,9),e=Number(l)}const r=new Date(s);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:yt(s.seconds),nanos:yt(s.nanos)}}function yt(s){return typeof s=="number"?s:typeof s=="string"?Number(s):0}function rr(s){return typeof s=="string"?$t.fromBase64String(s):$t.fromUint8Array(s)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aT="server_timestamp",oT="__type__",lT="__previous_value__",uT="__local_write_time__";function ip(s){return(s?.mapValue?.fields||{})[oT]?.stringValue===aT}function Nh(s){const e=s.mapValue.fields[lT];return ip(e)?Nh(e):e}function zl(s){const e=sr(s.mapValue.fields[uT].timestampValue);return new st(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ux{constructor(e,i,r,l,u,f,p,y,g,T){this.databaseId=e,this.appId=i,this.persistenceKey=r,this.host=l,this.ssl=u,this.forceLongPolling=f,this.autoDetectLongPolling=p,this.longPollingOptions=y,this.useFetchStreams=g,this.isUsingEmulator=T}}const lh="(default)";class Bl{constructor(e,i){this.projectId=e,this.database=i||lh}static empty(){return new Bl("","")}get isDefaultDatabase(){return this.database===lh}isEqual(e){return e instanceof Bl&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cT="__type__",zx="__max__",zc={mapValue:{}},hT="__vector__",uh="value";function ar(s){return"nullValue"in s?0:"booleanValue"in s?1:"integerValue"in s||"doubleValue"in s?2:"timestampValue"in s?3:"stringValue"in s?5:"bytesValue"in s?6:"referenceValue"in s?7:"geoPointValue"in s?8:"arrayValue"in s?9:"mapValue"in s?ip(s)?4:qx(s)?9007199254740991:Bx(s)?10:11:_e(28295,{value:s})}function Vi(s,e){if(s===e)return!0;const i=ar(s);if(i!==ar(e))return!1;switch(i){case 0:case 9007199254740991:return!0;case 1:return s.booleanValue===e.booleanValue;case 4:return zl(s).isEqual(zl(e));case 3:return(function(l,u){if(typeof l.timestampValue=="string"&&typeof u.timestampValue=="string"&&l.timestampValue.length===u.timestampValue.length)return l.timestampValue===u.timestampValue;const f=sr(l.timestampValue),p=sr(u.timestampValue);return f.seconds===p.seconds&&f.nanos===p.nanos})(s,e);case 5:return s.stringValue===e.stringValue;case 6:return(function(l,u){return rr(l.bytesValue).isEqual(rr(u.bytesValue))})(s,e);case 7:return s.referenceValue===e.referenceValue;case 8:return(function(l,u){return yt(l.geoPointValue.latitude)===yt(u.geoPointValue.latitude)&&yt(l.geoPointValue.longitude)===yt(u.geoPointValue.longitude)})(s,e);case 2:return(function(l,u){if("integerValue"in l&&"integerValue"in u)return yt(l.integerValue)===yt(u.integerValue);if("doubleValue"in l&&"doubleValue"in u){const f=yt(l.doubleValue),p=yt(u.doubleValue);return f===p?oh(f)===oh(p):isNaN(f)&&isNaN(p)}return!1})(s,e);case 9:return ro(s.arrayValue.values||[],e.arrayValue.values||[],Vi);case 10:case 11:return(function(l,u){const f=l.mapValue.fields||{},p=u.mapValue.fields||{};if(sv(f)!==sv(p))return!1;for(const y in f)if(f.hasOwnProperty(y)&&(p[y]===void 0||!Vi(f[y],p[y])))return!1;return!0})(s,e);default:return _e(52216,{left:s})}}function ql(s,e){return(s.values||[]).find((i=>Vi(i,e)))!==void 0}function ao(s,e){if(s===e)return 0;const i=ar(s),r=ar(e);if(i!==r)return ke(i,r);switch(i){case 0:case 9007199254740991:return 0;case 1:return ke(s.booleanValue,e.booleanValue);case 2:return(function(u,f){const p=yt(u.integerValue||u.doubleValue),y=yt(f.integerValue||f.doubleValue);return p<y?-1:p>y?1:p===y?0:isNaN(p)?isNaN(y)?0:-1:1})(s,e);case 3:return av(s.timestampValue,e.timestampValue);case 4:return av(zl(s),zl(e));case 5:return bm(s.stringValue,e.stringValue);case 6:return(function(u,f){const p=rr(u),y=rr(f);return p.compareTo(y)})(s.bytesValue,e.bytesValue);case 7:return(function(u,f){const p=u.split("/"),y=f.split("/");for(let g=0;g<p.length&&g<y.length;g++){const T=ke(p[g],y[g]);if(T!==0)return T}return ke(p.length,y.length)})(s.referenceValue,e.referenceValue);case 8:return(function(u,f){const p=ke(yt(u.latitude),yt(f.latitude));return p!==0?p:ke(yt(u.longitude),yt(f.longitude))})(s.geoPointValue,e.geoPointValue);case 9:return ov(s.arrayValue,e.arrayValue);case 10:return(function(u,f){const p=u.fields||{},y=f.fields||{},g=p[uh]?.arrayValue,T=y[uh]?.arrayValue,A=ke(g?.values?.length||0,T?.values?.length||0);return A!==0?A:ov(g,T)})(s.mapValue,e.mapValue);case 11:return(function(u,f){if(u===zc.mapValue&&f===zc.mapValue)return 0;if(u===zc.mapValue)return 1;if(f===zc.mapValue)return-1;const p=u.fields||{},y=Object.keys(p),g=f.fields||{},T=Object.keys(g);y.sort(),T.sort();for(let A=0;A<y.length&&A<T.length;++A){const x=bm(y[A],T[A]);if(x!==0)return x;const V=ao(p[y[A]],g[T[A]]);if(V!==0)return V}return ke(y.length,T.length)})(s.mapValue,e.mapValue);default:throw _e(23264,{he:i})}}function av(s,e){if(typeof s=="string"&&typeof e=="string"&&s.length===e.length)return ke(s,e);const i=sr(s),r=sr(e),l=ke(i.seconds,r.seconds);return l!==0?l:ke(i.nanos,r.nanos)}function ov(s,e){const i=s.values||[],r=e.values||[];for(let l=0;l<i.length&&l<r.length;++l){const u=ao(i[l],r[l]);if(u)return u}return ke(i.length,r.length)}function oo(s){return Am(s)}function Am(s){return"nullValue"in s?"null":"booleanValue"in s?""+s.booleanValue:"integerValue"in s?""+s.integerValue:"doubleValue"in s?""+s.doubleValue:"timestampValue"in s?(function(i){const r=sr(i);return`time(${r.seconds},${r.nanos})`})(s.timestampValue):"stringValue"in s?s.stringValue:"bytesValue"in s?(function(i){return rr(i).toBase64()})(s.bytesValue):"referenceValue"in s?(function(i){return me.fromName(i).toString()})(s.referenceValue):"geoPointValue"in s?(function(i){return`geo(${i.latitude},${i.longitude})`})(s.geoPointValue):"arrayValue"in s?(function(i){let r="[",l=!0;for(const u of i.values||[])l?l=!1:r+=",",r+=Am(u);return r+"]"})(s.arrayValue):"mapValue"in s?(function(i){const r=Object.keys(i.fields||{}).sort();let l="{",u=!0;for(const f of r)u?u=!1:l+=",",l+=`${f}:${Am(i.fields[f])}`;return l+"}"})(s.mapValue):_e(61005,{value:s})}function Kc(s){switch(ar(s)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Nh(s);return e?16+Kc(e):16;case 5:return 2*s.stringValue.length;case 6:return rr(s.bytesValue).approximateByteSize();case 7:return s.referenceValue.length;case 9:return(function(r){return(r.values||[]).reduce(((l,u)=>l+Kc(u)),0)})(s.arrayValue);case 10:case 11:return(function(r){let l=0;return fr(r.fields,((u,f)=>{l+=u.length+Kc(f)})),l})(s.mapValue);default:throw _e(13486,{value:s})}}function lv(s,e){return{referenceValue:`projects/${s.projectId}/databases/${s.database}/documents/${e.path.canonicalString()}`}}function Sm(s){return!!s&&"integerValue"in s}function sp(s){return!!s&&"arrayValue"in s}function uv(s){return!!s&&"nullValue"in s}function cv(s){return!!s&&"doubleValue"in s&&isNaN(Number(s.doubleValue))}function Xc(s){return!!s&&"mapValue"in s}function Bx(s){return(s?.mapValue?.fields||{})[cT]?.stringValue===hT}function Ol(s){if(s.geoPointValue)return{geoPointValue:{...s.geoPointValue}};if(s.timestampValue&&typeof s.timestampValue=="object")return{timestampValue:{...s.timestampValue}};if(s.mapValue){const e={mapValue:{fields:{}}};return fr(s.mapValue.fields,((i,r)=>e.mapValue.fields[i]=Ol(r))),e}if(s.arrayValue){const e={arrayValue:{values:[]}};for(let i=0;i<(s.arrayValue.values||[]).length;++i)e.arrayValue.values[i]=Ol(s.arrayValue.values[i]);return e}return{...s}}function qx(s){return(((s.mapValue||{}).fields||{}).__type__||{}).stringValue===zx}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mn{constructor(e){this.value=e}static empty(){return new mn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let i=this.value;for(let r=0;r<e.length-1;++r)if(i=(i.mapValue.fields||{})[e.get(r)],!Xc(i))return null;return i=(i.mapValue.fields||{})[e.lastSegment()],i||null}}set(e,i){this.getFieldsMap(e.popLast())[e.lastSegment()]=Ol(i)}setAll(e){let i=Xt.emptyPath(),r={},l=[];e.forEach(((f,p)=>{if(!i.isImmediateParentOf(p)){const y=this.getFieldsMap(i);this.applyChanges(y,r,l),r={},l=[],i=p.popLast()}f?r[p.lastSegment()]=Ol(f):l.push(p.lastSegment())}));const u=this.getFieldsMap(i);this.applyChanges(u,r,l)}delete(e){const i=this.field(e.popLast());Xc(i)&&i.mapValue.fields&&delete i.mapValue.fields[e.lastSegment()]}isEqual(e){return Vi(this.value,e.value)}getFieldsMap(e){let i=this.value;i.mapValue.fields||(i.mapValue={fields:{}});for(let r=0;r<e.length;++r){let l=i.mapValue.fields[e.get(r)];Xc(l)&&l.mapValue.fields||(l={mapValue:{fields:{}}},i.mapValue.fields[e.get(r)]=l),i=l}return i.mapValue.fields}applyChanges(e,i,r){fr(i,((l,u)=>e[l]=u));for(const l of r)delete e[l]}clone(){return new mn(Ol(this.value))}}function fT(s){const e=[];return fr(s.fields,((i,r)=>{const l=new Xt([i]);if(Xc(r)){const u=fT(r.mapValue).fields;if(u.length===0)e.push(l);else for(const f of u)e.push(l.child(f))}else e.push(l)})),new Sn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class en{constructor(e,i,r,l,u,f,p){this.key=e,this.documentType=i,this.version=r,this.readTime=l,this.createTime=u,this.data=f,this.documentState=p}static newInvalidDocument(e){return new en(e,0,Ae.min(),Ae.min(),Ae.min(),mn.empty(),0)}static newFoundDocument(e,i,r,l){return new en(e,1,i,Ae.min(),r,l,0)}static newNoDocument(e,i){return new en(e,2,i,Ae.min(),Ae.min(),mn.empty(),0)}static newUnknownDocument(e,i){return new en(e,3,i,Ae.min(),Ae.min(),mn.empty(),2)}convertToFoundDocument(e,i){return!this.createTime.isEqual(Ae.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=i,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=mn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=mn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ae.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof en&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new en(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ch{constructor(e,i){this.position=e,this.inclusive=i}}function hv(s,e,i){let r=0;for(let l=0;l<s.position.length;l++){const u=e[l],f=s.position[l];if(u.field.isKeyField()?r=me.comparator(me.fromName(f.referenceValue),i.key):r=ao(f,i.data.field(u.field)),u.dir==="desc"&&(r*=-1),r!==0)break}return r}function fv(s,e){if(s===null)return e===null;if(e===null||s.inclusive!==e.inclusive||s.position.length!==e.position.length)return!1;for(let i=0;i<s.position.length;i++)if(!Vi(s.position[i],e.position[i]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hh{constructor(e,i="asc"){this.field=e,this.dir=i}}function Hx(s,e){return s.dir===e.dir&&s.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dT{}class Ct extends dT{constructor(e,i,r){super(),this.field=e,this.op=i,this.value=r}static create(e,i,r){return e.isKeyField()?i==="in"||i==="not-in"?this.createKeyFieldInFilter(e,i,r):new Gx(e,i,r):i==="array-contains"?new Kx(e,r):i==="in"?new Xx(e,r):i==="not-in"?new $x(e,r):i==="array-contains-any"?new Jx(e,r):new Ct(e,i,r)}static createKeyFieldInFilter(e,i,r){return i==="in"?new Qx(e,r):new Yx(e,r)}matches(e){const i=e.data.field(this.field);return this.op==="!="?i!==null&&i.nullValue===void 0&&this.matchesComparison(ao(i,this.value)):i!==null&&ar(this.value)===ar(i)&&this.matchesComparison(ao(i,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return _e(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class si extends dT{constructor(e,i){super(),this.filters=e,this.op=i,this.Pe=null}static create(e,i){return new si(e,i)}matches(e){return mT(this)?this.filters.find((i=>!i.matches(e)))===void 0:this.filters.find((i=>i.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,i)=>e.concat(i.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function mT(s){return s.op==="and"}function pT(s){return Fx(s)&&mT(s)}function Fx(s){for(const e of s.filters)if(e instanceof si)return!1;return!0}function wm(s){if(s instanceof Ct)return s.field.canonicalString()+s.op.toString()+oo(s.value);if(pT(s))return s.filters.map((e=>wm(e))).join(",");{const e=s.filters.map((i=>wm(i))).join(",");return`${s.op}(${e})`}}function gT(s,e){return s instanceof Ct?(function(r,l){return l instanceof Ct&&r.op===l.op&&r.field.isEqual(l.field)&&Vi(r.value,l.value)})(s,e):s instanceof si?(function(r,l){return l instanceof si&&r.op===l.op&&r.filters.length===l.filters.length?r.filters.reduce(((u,f,p)=>u&&gT(f,l.filters[p])),!0):!1})(s,e):void _e(19439)}function yT(s){return s instanceof Ct?(function(i){return`${i.field.canonicalString()} ${i.op} ${oo(i.value)}`})(s):s instanceof si?(function(i){return i.op.toString()+" {"+i.getFilters().map(yT).join(" ,")+"}"})(s):"Filter"}class Gx extends Ct{constructor(e,i,r){super(e,i,r),this.key=me.fromName(r.referenceValue)}matches(e){const i=me.comparator(e.key,this.key);return this.matchesComparison(i)}}class Qx extends Ct{constructor(e,i){super(e,"in",i),this.keys=_T("in",i)}matches(e){return this.keys.some((i=>i.isEqual(e.key)))}}class Yx extends Ct{constructor(e,i){super(e,"not-in",i),this.keys=_T("not-in",i)}matches(e){return!this.keys.some((i=>i.isEqual(e.key)))}}function _T(s,e){return(e.arrayValue?.values||[]).map((i=>me.fromName(i.referenceValue)))}class Kx extends Ct{constructor(e,i){super(e,"array-contains",i)}matches(e){const i=e.data.field(this.field);return sp(i)&&ql(i.arrayValue,this.value)}}class Xx extends Ct{constructor(e,i){super(e,"in",i)}matches(e){const i=e.data.field(this.field);return i!==null&&ql(this.value.arrayValue,i)}}class $x extends Ct{constructor(e,i){super(e,"not-in",i)}matches(e){if(ql(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const i=e.data.field(this.field);return i!==null&&i.nullValue===void 0&&!ql(this.value.arrayValue,i)}}class Jx extends Ct{constructor(e,i){super(e,"array-contains-any",i)}matches(e){const i=e.data.field(this.field);return!(!sp(i)||!i.arrayValue.values)&&i.arrayValue.values.some((r=>ql(this.value.arrayValue,r)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zx{constructor(e,i=null,r=[],l=[],u=null,f=null,p=null){this.path=e,this.collectionGroup=i,this.orderBy=r,this.filters=l,this.limit=u,this.startAt=f,this.endAt=p,this.Te=null}}function dv(s,e=null,i=[],r=[],l=null,u=null,f=null){return new Zx(s,e,i,r,l,u,f)}function rp(s){const e=we(s);if(e.Te===null){let i=e.path.canonicalString();e.collectionGroup!==null&&(i+="|cg:"+e.collectionGroup),i+="|f:",i+=e.filters.map((r=>wm(r))).join(","),i+="|ob:",i+=e.orderBy.map((r=>(function(u){return u.field.canonicalString()+u.dir})(r))).join(","),Ch(e.limit)||(i+="|l:",i+=e.limit),e.startAt&&(i+="|lb:",i+=e.startAt.inclusive?"b:":"a:",i+=e.startAt.position.map((r=>oo(r))).join(",")),e.endAt&&(i+="|ub:",i+=e.endAt.inclusive?"a:":"b:",i+=e.endAt.position.map((r=>oo(r))).join(",")),e.Te=i}return e.Te}function ap(s,e){if(s.limit!==e.limit||s.orderBy.length!==e.orderBy.length)return!1;for(let i=0;i<s.orderBy.length;i++)if(!Hx(s.orderBy[i],e.orderBy[i]))return!1;if(s.filters.length!==e.filters.length)return!1;for(let i=0;i<s.filters.length;i++)if(!gT(s.filters[i],e.filters[i]))return!1;return s.collectionGroup===e.collectionGroup&&!!s.path.isEqual(e.path)&&!!fv(s.startAt,e.startAt)&&fv(s.endAt,e.endAt)}function xm(s){return me.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wl{constructor(e,i=null,r=[],l=[],u=null,f="F",p=null,y=null){this.path=e,this.collectionGroup=i,this.explicitOrderBy=r,this.filters=l,this.limit=u,this.limitType=f,this.startAt=p,this.endAt=y,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function Wx(s,e,i,r,l,u,f,p){return new Wl(s,e,i,r,l,u,f,p)}function Dh(s){return new Wl(s)}function mv(s){return s.filters.length===0&&s.limit===null&&s.startAt==null&&s.endAt==null&&(s.explicitOrderBy.length===0||s.explicitOrderBy.length===1&&s.explicitOrderBy[0].field.isKeyField())}function vT(s){return s.collectionGroup!==null}function Ml(s){const e=we(s);if(e.Ie===null){e.Ie=[];const i=new Set;for(const u of e.explicitOrderBy)e.Ie.push(u),i.add(u.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(f){let p=new jt(Xt.comparator);return f.filters.forEach((y=>{y.getFlattenedFilters().forEach((g=>{g.isInequality()&&(p=p.add(g.field))}))})),p})(e).forEach((u=>{i.has(u.canonicalString())||u.isKeyField()||e.Ie.push(new hh(u,r))})),i.has(Xt.keyField().canonicalString())||e.Ie.push(new hh(Xt.keyField(),r))}return e.Ie}function Ni(s){const e=we(s);return e.Ee||(e.Ee=eR(e,Ml(s))),e.Ee}function eR(s,e){if(s.limitType==="F")return dv(s.path,s.collectionGroup,e,s.filters,s.limit,s.startAt,s.endAt);{e=e.map((l=>{const u=l.dir==="desc"?"asc":"desc";return new hh(l.field,u)}));const i=s.endAt?new ch(s.endAt.position,s.endAt.inclusive):null,r=s.startAt?new ch(s.startAt.position,s.startAt.inclusive):null;return dv(s.path,s.collectionGroup,e,s.filters,s.limit,i,r)}}function Rm(s,e){const i=s.filters.concat([e]);return new Wl(s.path,s.collectionGroup,s.explicitOrderBy.slice(),i,s.limit,s.limitType,s.startAt,s.endAt)}function Im(s,e,i){return new Wl(s.path,s.collectionGroup,s.explicitOrderBy.slice(),s.filters.slice(),e,i,s.startAt,s.endAt)}function Oh(s,e){return ap(Ni(s),Ni(e))&&s.limitType===e.limitType}function ET(s){return`${rp(Ni(s))}|lt:${s.limitType}`}function Xa(s){return`Query(target=${(function(i){let r=i.path.canonicalString();return i.collectionGroup!==null&&(r+=" collectionGroup="+i.collectionGroup),i.filters.length>0&&(r+=`, filters: [${i.filters.map((l=>yT(l))).join(", ")}]`),Ch(i.limit)||(r+=", limit: "+i.limit),i.orderBy.length>0&&(r+=`, orderBy: [${i.orderBy.map((l=>(function(f){return`${f.field.canonicalString()} (${f.dir})`})(l))).join(", ")}]`),i.startAt&&(r+=", startAt: ",r+=i.startAt.inclusive?"b:":"a:",r+=i.startAt.position.map((l=>oo(l))).join(",")),i.endAt&&(r+=", endAt: ",r+=i.endAt.inclusive?"a:":"b:",r+=i.endAt.position.map((l=>oo(l))).join(",")),`Target(${r})`})(Ni(s))}; limitType=${s.limitType})`}function Mh(s,e){return e.isFoundDocument()&&(function(r,l){const u=l.key.path;return r.collectionGroup!==null?l.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(u):me.isDocumentKey(r.path)?r.path.isEqual(u):r.path.isImmediateParentOf(u)})(s,e)&&(function(r,l){for(const u of Ml(r))if(!u.field.isKeyField()&&l.data.field(u.field)===null)return!1;return!0})(s,e)&&(function(r,l){for(const u of r.filters)if(!u.matches(l))return!1;return!0})(s,e)&&(function(r,l){return!(r.startAt&&!(function(f,p,y){const g=hv(f,p,y);return f.inclusive?g<=0:g<0})(r.startAt,Ml(r),l)||r.endAt&&!(function(f,p,y){const g=hv(f,p,y);return f.inclusive?g>=0:g>0})(r.endAt,Ml(r),l))})(s,e)}function tR(s){return s.collectionGroup||(s.path.length%2==1?s.path.lastSegment():s.path.get(s.path.length-2))}function TT(s){return(e,i)=>{let r=!1;for(const l of Ml(s)){const u=nR(l,e,i);if(u!==0)return u;r=r||l.field.isKeyField()}return 0}}function nR(s,e,i){const r=s.field.isKeyField()?me.comparator(e.key,i.key):(function(u,f,p){const y=f.data.field(u),g=p.data.field(u);return y!==null&&g!==null?ao(y,g):_e(42886)})(s.field,e,i);switch(s.dir){case"asc":return r;case"desc":return-1*r;default:return _e(19790,{direction:s.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ta{constructor(e,i){this.mapKeyFn=e,this.equalsFn=i,this.inner={},this.innerSize=0}get(e){const i=this.mapKeyFn(e),r=this.inner[i];if(r!==void 0){for(const[l,u]of r)if(this.equalsFn(l,e))return u}}has(e){return this.get(e)!==void 0}set(e,i){const r=this.mapKeyFn(e),l=this.inner[r];if(l===void 0)return this.inner[r]=[[e,i]],void this.innerSize++;for(let u=0;u<l.length;u++)if(this.equalsFn(l[u][0],e))return void(l[u]=[e,i]);l.push([e,i]),this.innerSize++}delete(e){const i=this.mapKeyFn(e),r=this.inner[i];if(r===void 0)return!1;for(let l=0;l<r.length;l++)if(this.equalsFn(r[l][0],e))return r.length===1?delete this.inner[i]:r.splice(l,1),this.innerSize--,!0;return!1}forEach(e){fr(this.inner,((i,r)=>{for(const[l,u]of r)e(l,u)}))}isEmpty(){return sT(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iR=new ut(me.comparator);function us(){return iR}const bT=new ut(me.comparator);function Rl(...s){let e=bT;for(const i of s)e=e.insert(i.key,i);return e}function AT(s){let e=bT;return s.forEach(((i,r)=>e=e.insert(i,r.overlayedDocument))),e}function Qr(){return Vl()}function ST(){return Vl()}function Vl(){return new ta((s=>s.toString()),((s,e)=>s.isEqual(e)))}const sR=new ut(me.comparator),rR=new jt(me.comparator);function je(...s){let e=rR;for(const i of s)e=e.add(i);return e}const aR=new jt(ke);function oR(){return aR}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function op(s,e){if(s.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:oh(e)?"-0":e}}function wT(s){return{integerValue:""+s}}function lR(s,e){return kx(e)?wT(e):op(s,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vh{constructor(){this._=void 0}}function uR(s,e,i){return s instanceof Hl?(function(l,u){const f={fields:{[oT]:{stringValue:aT},[uT]:{timestampValue:{seconds:l.seconds,nanos:l.nanoseconds}}}};return u&&ip(u)&&(u=Nh(u)),u&&(f.fields[lT]=u),{mapValue:f}})(i,e):s instanceof Fl?RT(s,e):s instanceof Gl?IT(s,e):(function(l,u){const f=xT(l,u),p=pv(f)+pv(l.Ae);return Sm(f)&&Sm(l.Ae)?wT(p):op(l.serializer,p)})(s,e)}function cR(s,e,i){return s instanceof Fl?RT(s,e):s instanceof Gl?IT(s,e):i}function xT(s,e){return s instanceof fh?(function(r){return Sm(r)||(function(u){return!!u&&"doubleValue"in u})(r)})(e)?e:{integerValue:0}:null}class Hl extends Vh{}class Fl extends Vh{constructor(e){super(),this.elements=e}}function RT(s,e){const i=CT(e);for(const r of s.elements)i.some((l=>Vi(l,r)))||i.push(r);return{arrayValue:{values:i}}}class Gl extends Vh{constructor(e){super(),this.elements=e}}function IT(s,e){let i=CT(e);for(const r of s.elements)i=i.filter((l=>!Vi(l,r)));return{arrayValue:{values:i}}}class fh extends Vh{constructor(e,i){super(),this.serializer=e,this.Ae=i}}function pv(s){return yt(s.integerValue||s.doubleValue)}function CT(s){return sp(s)&&s.arrayValue.values?s.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hR{constructor(e,i){this.field=e,this.transform=i}}function fR(s,e){return s.field.isEqual(e.field)&&(function(r,l){return r instanceof Fl&&l instanceof Fl||r instanceof Gl&&l instanceof Gl?ro(r.elements,l.elements,Vi):r instanceof fh&&l instanceof fh?Vi(r.Ae,l.Ae):r instanceof Hl&&l instanceof Hl})(s.transform,e.transform)}class dR{constructor(e,i){this.version=e,this.transformResults=i}}class ni{constructor(e,i){this.updateTime=e,this.exists=i}static none(){return new ni}static exists(e){return new ni(void 0,e)}static updateTime(e){return new ni(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function $c(s,e){return s.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(s.updateTime):s.exists===void 0||s.exists===e.isFoundDocument()}class kh{}function NT(s,e){if(!s.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return s.isNoDocument()?new OT(s.key,ni.none()):new eu(s.key,s.data,ni.none());{const i=s.data,r=mn.empty();let l=new jt(Xt.comparator);for(let u of e.fields)if(!l.has(u)){let f=i.field(u);f===null&&u.length>1&&(u=u.popLast(),f=i.field(u)),f===null?r.delete(u):r.set(u,f),l=l.add(u)}return new dr(s.key,r,new Sn(l.toArray()),ni.none())}}function mR(s,e,i){s instanceof eu?(function(l,u,f){const p=l.value.clone(),y=yv(l.fieldTransforms,u,f.transformResults);p.setAll(y),u.convertToFoundDocument(f.version,p).setHasCommittedMutations()})(s,e,i):s instanceof dr?(function(l,u,f){if(!$c(l.precondition,u))return void u.convertToUnknownDocument(f.version);const p=yv(l.fieldTransforms,u,f.transformResults),y=u.data;y.setAll(DT(l)),y.setAll(p),u.convertToFoundDocument(f.version,y).setHasCommittedMutations()})(s,e,i):(function(l,u,f){u.convertToNoDocument(f.version).setHasCommittedMutations()})(0,e,i)}function kl(s,e,i,r){return s instanceof eu?(function(u,f,p,y){if(!$c(u.precondition,f))return p;const g=u.value.clone(),T=_v(u.fieldTransforms,y,f);return g.setAll(T),f.convertToFoundDocument(f.version,g).setHasLocalMutations(),null})(s,e,i,r):s instanceof dr?(function(u,f,p,y){if(!$c(u.precondition,f))return p;const g=_v(u.fieldTransforms,y,f),T=f.data;return T.setAll(DT(u)),T.setAll(g),f.convertToFoundDocument(f.version,T).setHasLocalMutations(),p===null?null:p.unionWith(u.fieldMask.fields).unionWith(u.fieldTransforms.map((A=>A.field)))})(s,e,i,r):(function(u,f,p){return $c(u.precondition,f)?(f.convertToNoDocument(f.version).setHasLocalMutations(),null):p})(s,e,i)}function pR(s,e){let i=null;for(const r of s.fieldTransforms){const l=e.data.field(r.field),u=xT(r.transform,l||null);u!=null&&(i===null&&(i=mn.empty()),i.set(r.field,u))}return i||null}function gv(s,e){return s.type===e.type&&!!s.key.isEqual(e.key)&&!!s.precondition.isEqual(e.precondition)&&!!(function(r,l){return r===void 0&&l===void 0||!(!r||!l)&&ro(r,l,((u,f)=>fR(u,f)))})(s.fieldTransforms,e.fieldTransforms)&&(s.type===0?s.value.isEqual(e.value):s.type!==1||s.data.isEqual(e.data)&&s.fieldMask.isEqual(e.fieldMask))}class eu extends kh{constructor(e,i,r,l=[]){super(),this.key=e,this.value=i,this.precondition=r,this.fieldTransforms=l,this.type=0}getFieldMask(){return null}}class dr extends kh{constructor(e,i,r,l,u=[]){super(),this.key=e,this.data=i,this.fieldMask=r,this.precondition=l,this.fieldTransforms=u,this.type=1}getFieldMask(){return this.fieldMask}}function DT(s){const e=new Map;return s.fieldMask.fields.forEach((i=>{if(!i.isEmpty()){const r=s.data.field(i);e.set(i,r)}})),e}function yv(s,e,i){const r=new Map;Ge(s.length===i.length,32656,{Re:i.length,Ve:s.length});for(let l=0;l<i.length;l++){const u=s[l],f=u.transform,p=e.data.field(u.field);r.set(u.field,cR(f,p,i[l]))}return r}function _v(s,e,i){const r=new Map;for(const l of s){const u=l.transform,f=i.data.field(l.field);r.set(l.field,uR(u,f,e))}return r}class OT extends kh{constructor(e,i){super(),this.key=e,this.precondition=i,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class gR extends kh{constructor(e,i){super(),this.key=e,this.precondition=i,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yR{constructor(e,i,r,l){this.batchId=e,this.localWriteTime=i,this.baseMutations=r,this.mutations=l}applyToRemoteDocument(e,i){const r=i.mutationResults;for(let l=0;l<this.mutations.length;l++){const u=this.mutations[l];u.key.isEqual(e.key)&&mR(u,e,r[l])}}applyToLocalView(e,i){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(i=kl(r,e,i,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(i=kl(r,e,i,this.localWriteTime));return i}applyToLocalDocumentSet(e,i){const r=ST();return this.mutations.forEach((l=>{const u=e.get(l.key),f=u.overlayedDocument;let p=this.applyToLocalView(f,u.mutatedFields);p=i.has(l.key)?null:p;const y=NT(f,p);y!==null&&r.set(l.key,y),f.isValidDocument()||f.convertToNoDocument(Ae.min())})),r}keys(){return this.mutations.reduce(((e,i)=>e.add(i.key)),je())}isEqual(e){return this.batchId===e.batchId&&ro(this.mutations,e.mutations,((i,r)=>gv(i,r)))&&ro(this.baseMutations,e.baseMutations,((i,r)=>gv(i,r)))}}class lp{constructor(e,i,r,l){this.batch=e,this.commitVersion=i,this.mutationResults=r,this.docVersions=l}static from(e,i,r){Ge(e.mutations.length===r.length,58842,{me:e.mutations.length,fe:r.length});let l=(function(){return sR})();const u=e.mutations;for(let f=0;f<u.length;f++)l=l.insert(u[f].key,r[f].version);return new lp(e,i,r,l)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _R{constructor(e,i){this.largestBatchId=e,this.mutation=i}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vR{constructor(e,i){this.count=e,this.unchangedNames=i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var It,Ue;function ER(s){switch(s){case J.OK:return _e(64938);case J.CANCELLED:case J.UNKNOWN:case J.DEADLINE_EXCEEDED:case J.RESOURCE_EXHAUSTED:case J.INTERNAL:case J.UNAVAILABLE:case J.UNAUTHENTICATED:return!1;case J.INVALID_ARGUMENT:case J.NOT_FOUND:case J.ALREADY_EXISTS:case J.PERMISSION_DENIED:case J.FAILED_PRECONDITION:case J.ABORTED:case J.OUT_OF_RANGE:case J.UNIMPLEMENTED:case J.DATA_LOSS:return!0;default:return _e(15467,{code:s})}}function MT(s){if(s===void 0)return ls("GRPC error has no .code"),J.UNKNOWN;switch(s){case It.OK:return J.OK;case It.CANCELLED:return J.CANCELLED;case It.UNKNOWN:return J.UNKNOWN;case It.DEADLINE_EXCEEDED:return J.DEADLINE_EXCEEDED;case It.RESOURCE_EXHAUSTED:return J.RESOURCE_EXHAUSTED;case It.INTERNAL:return J.INTERNAL;case It.UNAVAILABLE:return J.UNAVAILABLE;case It.UNAUTHENTICATED:return J.UNAUTHENTICATED;case It.INVALID_ARGUMENT:return J.INVALID_ARGUMENT;case It.NOT_FOUND:return J.NOT_FOUND;case It.ALREADY_EXISTS:return J.ALREADY_EXISTS;case It.PERMISSION_DENIED:return J.PERMISSION_DENIED;case It.FAILED_PRECONDITION:return J.FAILED_PRECONDITION;case It.ABORTED:return J.ABORTED;case It.OUT_OF_RANGE:return J.OUT_OF_RANGE;case It.UNIMPLEMENTED:return J.UNIMPLEMENTED;case It.DATA_LOSS:return J.DATA_LOSS;default:return _e(39323,{code:s})}}(Ue=It||(It={}))[Ue.OK=0]="OK",Ue[Ue.CANCELLED=1]="CANCELLED",Ue[Ue.UNKNOWN=2]="UNKNOWN",Ue[Ue.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ue[Ue.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ue[Ue.NOT_FOUND=5]="NOT_FOUND",Ue[Ue.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ue[Ue.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ue[Ue.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ue[Ue.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ue[Ue.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ue[Ue.ABORTED=10]="ABORTED",Ue[Ue.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ue[Ue.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ue[Ue.INTERNAL=13]="INTERNAL",Ue[Ue.UNAVAILABLE=14]="UNAVAILABLE",Ue[Ue.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TR(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bR=new er([4294967295,4294967295],0);function vv(s){const e=TR().encode(s),i=new YE;return i.update(e),new Uint8Array(i.digest())}function Ev(s){const e=new DataView(s.buffer),i=e.getUint32(0,!0),r=e.getUint32(4,!0),l=e.getUint32(8,!0),u=e.getUint32(12,!0);return[new er([i,r],0),new er([l,u],0)]}class up{constructor(e,i,r){if(this.bitmap=e,this.padding=i,this.hashCount=r,i<0||i>=8)throw new Il(`Invalid padding: ${i}`);if(r<0)throw new Il(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Il(`Invalid hash count: ${r}`);if(e.length===0&&i!==0)throw new Il(`Invalid padding when bitmap length is 0: ${i}`);this.ge=8*e.length-i,this.pe=er.fromNumber(this.ge)}ye(e,i,r){let l=e.add(i.multiply(er.fromNumber(r)));return l.compare(bR)===1&&(l=new er([l.getBits(0),l.getBits(1)],0)),l.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const i=vv(e),[r,l]=Ev(i);for(let u=0;u<this.hashCount;u++){const f=this.ye(r,l,u);if(!this.we(f))return!1}return!0}static create(e,i,r){const l=e%8==0?0:8-e%8,u=new Uint8Array(Math.ceil(e/8)),f=new up(u,l,i);return r.forEach((p=>f.insert(p))),f}insert(e){if(this.ge===0)return;const i=vv(e),[r,l]=Ev(i);for(let u=0;u<this.hashCount;u++){const f=this.ye(r,l,u);this.Se(f)}}Se(e){const i=Math.floor(e/8),r=e%8;this.bitmap[i]|=1<<r}}class Il extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jh{constructor(e,i,r,l,u){this.snapshotVersion=e,this.targetChanges=i,this.targetMismatches=r,this.documentUpdates=l,this.resolvedLimboDocuments=u}static createSynthesizedRemoteEventForCurrentChange(e,i,r){const l=new Map;return l.set(e,tu.createSynthesizedTargetChangeForCurrentChange(e,i,r)),new jh(Ae.min(),l,new ut(ke),us(),je())}}class tu{constructor(e,i,r,l,u){this.resumeToken=e,this.current=i,this.addedDocuments=r,this.modifiedDocuments=l,this.removedDocuments=u}static createSynthesizedTargetChangeForCurrentChange(e,i,r){return new tu(r,i,je(),je(),je())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jc{constructor(e,i,r,l){this.be=e,this.removedTargetIds=i,this.key=r,this.De=l}}class VT{constructor(e,i){this.targetId=e,this.Ce=i}}class kT{constructor(e,i,r=$t.EMPTY_BYTE_STRING,l=null){this.state=e,this.targetIds=i,this.resumeToken=r,this.cause=l}}class Tv{constructor(){this.ve=0,this.Fe=bv(),this.Me=$t.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=je(),i=je(),r=je();return this.Fe.forEach(((l,u)=>{switch(u){case 0:e=e.add(l);break;case 2:i=i.add(l);break;case 1:r=r.add(l);break;default:_e(38017,{changeType:u})}})),new tu(this.Me,this.xe,e,i,r)}qe(){this.Oe=!1,this.Fe=bv()}Qe(e,i){this.Oe=!0,this.Fe=this.Fe.insert(e,i)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,Ge(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class AR{constructor(e){this.Ge=e,this.ze=new Map,this.je=us(),this.Je=Bc(),this.He=Bc(),this.Ye=new ut(ke)}Ze(e){for(const i of e.be)e.De&&e.De.isFoundDocument()?this.Xe(i,e.De):this.et(i,e.key,e.De);for(const i of e.removedTargetIds)this.et(i,e.key,e.De)}tt(e){this.forEachTarget(e,(i=>{const r=this.nt(i);switch(e.state){case 0:this.rt(i)&&r.Le(e.resumeToken);break;case 1:r.Ke(),r.Ne||r.qe(),r.Le(e.resumeToken);break;case 2:r.Ke(),r.Ne||this.removeTarget(i);break;case 3:this.rt(i)&&(r.We(),r.Le(e.resumeToken));break;case 4:this.rt(i)&&(this.it(i),r.Le(e.resumeToken));break;default:_e(56790,{state:e.state})}}))}forEachTarget(e,i){e.targetIds.length>0?e.targetIds.forEach(i):this.ze.forEach(((r,l)=>{this.rt(l)&&i(l)}))}st(e){const i=e.targetId,r=e.Ce.count,l=this.ot(i);if(l){const u=l.target;if(xm(u))if(r===0){const f=new me(u.path);this.et(i,f,en.newNoDocument(f,Ae.min()))}else Ge(r===1,20013,{expectedCount:r});else{const f=this._t(i);if(f!==r){const p=this.ut(e),y=p?this.ct(p,e,f):1;if(y!==0){this.it(i);const g=y===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(i,g)}}}}}ut(e){const i=e.Ce.unchangedNames;if(!i||!i.bits)return null;const{bits:{bitmap:r="",padding:l=0},hashCount:u=0}=i;let f,p;try{f=rr(r).toUint8Array()}catch(y){if(y instanceof rT)return so("Decoding the base64 bloom filter in existence filter failed ("+y.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw y}try{p=new up(f,l,u)}catch(y){return so(y instanceof Il?"BloomFilter error: ":"Applying bloom filter failed: ",y),null}return p.ge===0?null:p}ct(e,i,r){return i.Ce.count===r-this.Pt(e,i.targetId)?0:2}Pt(e,i){const r=this.Ge.getRemoteKeysForTarget(i);let l=0;return r.forEach((u=>{const f=this.Ge.ht(),p=`projects/${f.projectId}/databases/${f.database}/documents/${u.path.canonicalString()}`;e.mightContain(p)||(this.et(i,u,null),l++)})),l}Tt(e){const i=new Map;this.ze.forEach(((u,f)=>{const p=this.ot(f);if(p){if(u.current&&xm(p.target)){const y=new me(p.target.path);this.It(y).has(f)||this.Et(f,y)||this.et(f,y,en.newNoDocument(y,e))}u.Be&&(i.set(f,u.ke()),u.qe())}}));let r=je();this.He.forEach(((u,f)=>{let p=!0;f.forEachWhile((y=>{const g=this.ot(y);return!g||g.purpose==="TargetPurposeLimboResolution"||(p=!1,!1)})),p&&(r=r.add(u))})),this.je.forEach(((u,f)=>f.setReadTime(e)));const l=new jh(e,i,this.Ye,this.je,r);return this.je=us(),this.Je=Bc(),this.He=Bc(),this.Ye=new ut(ke),l}Xe(e,i){if(!this.rt(e))return;const r=this.Et(e,i.key)?2:0;this.nt(e).Qe(i.key,r),this.je=this.je.insert(i.key,i),this.Je=this.Je.insert(i.key,this.It(i.key).add(e)),this.He=this.He.insert(i.key,this.dt(i.key).add(e))}et(e,i,r){if(!this.rt(e))return;const l=this.nt(e);this.Et(e,i)?l.Qe(i,1):l.$e(i),this.He=this.He.insert(i,this.dt(i).delete(e)),this.He=this.He.insert(i,this.dt(i).add(e)),r&&(this.je=this.je.insert(i,r))}removeTarget(e){this.ze.delete(e)}_t(e){const i=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+i.addedDocuments.size-i.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let i=this.ze.get(e);return i||(i=new Tv,this.ze.set(e,i)),i}dt(e){let i=this.He.get(e);return i||(i=new jt(ke),this.He=this.He.insert(e,i)),i}It(e){let i=this.Je.get(e);return i||(i=new jt(ke),this.Je=this.Je.insert(e,i)),i}rt(e){const i=this.ot(e)!==null;return i||le("WatchChangeAggregator","Detected inactive target",e),i}ot(e){const i=this.ze.get(e);return i&&i.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new Tv),this.Ge.getRemoteKeysForTarget(e).forEach((i=>{this.et(e,i,null)}))}Et(e,i){return this.Ge.getRemoteKeysForTarget(e).has(i)}}function Bc(){return new ut(me.comparator)}function bv(){return new ut(me.comparator)}const SR={asc:"ASCENDING",desc:"DESCENDING"},wR={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},xR={and:"AND",or:"OR"};class RR{constructor(e,i){this.databaseId=e,this.useProto3Json=i}}function Cm(s,e){return s.useProto3Json||Ch(e)?e:{value:e}}function dh(s,e){return s.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function jT(s,e){return s.useProto3Json?e.toBase64():e.toUint8Array()}function IR(s,e){return dh(s,e.toTimestamp())}function Di(s){return Ge(!!s,49232),Ae.fromTimestamp((function(i){const r=sr(i);return new st(r.seconds,r.nanos)})(s))}function cp(s,e){return Nm(s,e).canonicalString()}function Nm(s,e){const i=(function(l){return new tt(["projects",l.projectId,"databases",l.database])})(s).child("documents");return e===void 0?i:i.child(e)}function PT(s){const e=tt.fromString(s);return Ge(qT(e),10190,{key:e.toString()}),e}function Dm(s,e){return cp(s.databaseId,e.path)}function om(s,e){const i=PT(e);if(i.get(1)!==s.databaseId.projectId)throw new oe(J.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+i.get(1)+" vs "+s.databaseId.projectId);if(i.get(3)!==s.databaseId.database)throw new oe(J.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+i.get(3)+" vs "+s.databaseId.database);return new me(UT(i))}function LT(s,e){return cp(s.databaseId,e)}function CR(s){const e=PT(s);return e.length===4?tt.emptyPath():UT(e)}function Om(s){return new tt(["projects",s.databaseId.projectId,"databases",s.databaseId.database]).canonicalString()}function UT(s){return Ge(s.length>4&&s.get(4)==="documents",29091,{key:s.toString()}),s.popFirst(5)}function Av(s,e,i){return{name:Dm(s,e),fields:i.value.mapValue.fields}}function NR(s,e){let i;if("targetChange"in e){e.targetChange;const r=(function(g){return g==="NO_CHANGE"?0:g==="ADD"?1:g==="REMOVE"?2:g==="CURRENT"?3:g==="RESET"?4:_e(39313,{state:g})})(e.targetChange.targetChangeType||"NO_CHANGE"),l=e.targetChange.targetIds||[],u=(function(g,T){return g.useProto3Json?(Ge(T===void 0||typeof T=="string",58123),$t.fromBase64String(T||"")):(Ge(T===void 0||T instanceof Buffer||T instanceof Uint8Array,16193),$t.fromUint8Array(T||new Uint8Array))})(s,e.targetChange.resumeToken),f=e.targetChange.cause,p=f&&(function(g){const T=g.code===void 0?J.UNKNOWN:MT(g.code);return new oe(T,g.message||"")})(f);i=new kT(r,l,u,p||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const l=om(s,r.document.name),u=Di(r.document.updateTime),f=r.document.createTime?Di(r.document.createTime):Ae.min(),p=new mn({mapValue:{fields:r.document.fields}}),y=en.newFoundDocument(l,u,f,p),g=r.targetIds||[],T=r.removedTargetIds||[];i=new Jc(g,T,y.key,y)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const l=om(s,r.document),u=r.readTime?Di(r.readTime):Ae.min(),f=en.newNoDocument(l,u),p=r.removedTargetIds||[];i=new Jc([],p,f.key,f)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const l=om(s,r.document),u=r.removedTargetIds||[];i=new Jc([],u,l,null)}else{if(!("filter"in e))return _e(11601,{Rt:e});{e.filter;const r=e.filter;r.targetId;const{count:l=0,unchangedNames:u}=r,f=new vR(l,u),p=r.targetId;i=new VT(p,f)}}return i}function DR(s,e){let i;if(e instanceof eu)i={update:Av(s,e.key,e.value)};else if(e instanceof OT)i={delete:Dm(s,e.key)};else if(e instanceof dr)i={update:Av(s,e.key,e.data),updateMask:zR(e.fieldMask)};else{if(!(e instanceof gR))return _e(16599,{Vt:e.type});i={verify:Dm(s,e.key)}}return e.fieldTransforms.length>0&&(i.updateTransforms=e.fieldTransforms.map((r=>(function(u,f){const p=f.transform;if(p instanceof Hl)return{fieldPath:f.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(p instanceof Fl)return{fieldPath:f.field.canonicalString(),appendMissingElements:{values:p.elements}};if(p instanceof Gl)return{fieldPath:f.field.canonicalString(),removeAllFromArray:{values:p.elements}};if(p instanceof fh)return{fieldPath:f.field.canonicalString(),increment:p.Ae};throw _e(20930,{transform:f.transform})})(0,r)))),e.precondition.isNone||(i.currentDocument=(function(l,u){return u.updateTime!==void 0?{updateTime:IR(l,u.updateTime)}:u.exists!==void 0?{exists:u.exists}:_e(27497)})(s,e.precondition)),i}function OR(s,e){return s&&s.length>0?(Ge(e!==void 0,14353),s.map((i=>(function(l,u){let f=l.updateTime?Di(l.updateTime):Di(u);return f.isEqual(Ae.min())&&(f=Di(u)),new dR(f,l.transformResults||[])})(i,e)))):[]}function MR(s,e){return{documents:[LT(s,e.path)]}}function VR(s,e){const i={structuredQuery:{}},r=e.path;let l;e.collectionGroup!==null?(l=r,i.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(l=r.popLast(),i.structuredQuery.from=[{collectionId:r.lastSegment()}]),i.parent=LT(s,l);const u=(function(g){if(g.length!==0)return BT(si.create(g,"and"))})(e.filters);u&&(i.structuredQuery.where=u);const f=(function(g){if(g.length!==0)return g.map((T=>(function(x){return{field:$a(x.field),direction:PR(x.dir)}})(T)))})(e.orderBy);f&&(i.structuredQuery.orderBy=f);const p=Cm(s,e.limit);return p!==null&&(i.structuredQuery.limit=p),e.startAt&&(i.structuredQuery.startAt=(function(g){return{before:g.inclusive,values:g.position}})(e.startAt)),e.endAt&&(i.structuredQuery.endAt=(function(g){return{before:!g.inclusive,values:g.position}})(e.endAt)),{ft:i,parent:l}}function kR(s){let e=CR(s.parent);const i=s.structuredQuery,r=i.from?i.from.length:0;let l=null;if(r>0){Ge(r===1,65062);const T=i.from[0];T.allDescendants?l=T.collectionId:e=e.child(T.collectionId)}let u=[];i.where&&(u=(function(A){const x=zT(A);return x instanceof si&&pT(x)?x.getFilters():[x]})(i.where));let f=[];i.orderBy&&(f=(function(A){return A.map((x=>(function(q){return new hh(Ja(q.field),(function(K){switch(K){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(q.direction))})(x)))})(i.orderBy));let p=null;i.limit&&(p=(function(A){let x;return x=typeof A=="object"?A.value:A,Ch(x)?null:x})(i.limit));let y=null;i.startAt&&(y=(function(A){const x=!!A.before,V=A.values||[];return new ch(V,x)})(i.startAt));let g=null;return i.endAt&&(g=(function(A){const x=!A.before,V=A.values||[];return new ch(V,x)})(i.endAt)),Wx(e,l,f,u,p,"F",y,g)}function jR(s,e){const i=(function(l){switch(l){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return _e(28987,{purpose:l})}})(e.purpose);return i==null?null:{"goog-listen-tags":i}}function zT(s){return s.unaryFilter!==void 0?(function(i){switch(i.unaryFilter.op){case"IS_NAN":const r=Ja(i.unaryFilter.field);return Ct.create(r,"==",{doubleValue:NaN});case"IS_NULL":const l=Ja(i.unaryFilter.field);return Ct.create(l,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const u=Ja(i.unaryFilter.field);return Ct.create(u,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const f=Ja(i.unaryFilter.field);return Ct.create(f,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return _e(61313);default:return _e(60726)}})(s):s.fieldFilter!==void 0?(function(i){return Ct.create(Ja(i.fieldFilter.field),(function(l){switch(l){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return _e(58110);default:return _e(50506)}})(i.fieldFilter.op),i.fieldFilter.value)})(s):s.compositeFilter!==void 0?(function(i){return si.create(i.compositeFilter.filters.map((r=>zT(r))),(function(l){switch(l){case"AND":return"and";case"OR":return"or";default:return _e(1026)}})(i.compositeFilter.op))})(s):_e(30097,{filter:s})}function PR(s){return SR[s]}function LR(s){return wR[s]}function UR(s){return xR[s]}function $a(s){return{fieldPath:s.canonicalString()}}function Ja(s){return Xt.fromServerFormat(s.fieldPath)}function BT(s){return s instanceof Ct?(function(i){if(i.op==="=="){if(cv(i.value))return{unaryFilter:{field:$a(i.field),op:"IS_NAN"}};if(uv(i.value))return{unaryFilter:{field:$a(i.field),op:"IS_NULL"}}}else if(i.op==="!="){if(cv(i.value))return{unaryFilter:{field:$a(i.field),op:"IS_NOT_NAN"}};if(uv(i.value))return{unaryFilter:{field:$a(i.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:$a(i.field),op:LR(i.op),value:i.value}}})(s):s instanceof si?(function(i){const r=i.getFilters().map((l=>BT(l)));return r.length===1?r[0]:{compositeFilter:{op:UR(i.op),filters:r}}})(s):_e(54877,{filter:s})}function zR(s){const e=[];return s.fields.forEach((i=>e.push(i.canonicalString()))),{fieldPaths:e}}function qT(s){return s.length>=4&&s.get(0)==="projects"&&s.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $s{constructor(e,i,r,l,u=Ae.min(),f=Ae.min(),p=$t.EMPTY_BYTE_STRING,y=null){this.target=e,this.targetId=i,this.purpose=r,this.sequenceNumber=l,this.snapshotVersion=u,this.lastLimboFreeSnapshotVersion=f,this.resumeToken=p,this.expectedCount=y}withSequenceNumber(e){return new $s(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,i){return new $s(this.target,this.targetId,this.purpose,this.sequenceNumber,i,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new $s(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new $s(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BR{constructor(e){this.yt=e}}function qR(s){const e=kR({parent:s.parent,structuredQuery:s.structuredQuery});return s.limitType==="LAST"?Im(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HR{constructor(){this.Cn=new FR}addToCollectionParentIndex(e,i){return this.Cn.add(i),W.resolve()}getCollectionParents(e,i){return W.resolve(this.Cn.getEntries(i))}addFieldIndex(e,i){return W.resolve()}deleteFieldIndex(e,i){return W.resolve()}deleteAllFieldIndexes(e){return W.resolve()}createTargetIndexes(e,i){return W.resolve()}getDocumentsMatchingTarget(e,i){return W.resolve(null)}getIndexType(e,i){return W.resolve(0)}getFieldIndexes(e,i){return W.resolve([])}getNextCollectionGroupToUpdate(e){return W.resolve(null)}getMinOffset(e,i){return W.resolve(ir.min())}getMinOffsetFromCollectionGroup(e,i){return W.resolve(ir.min())}updateCollectionGroup(e,i,r){return W.resolve()}updateIndexEntries(e,i){return W.resolve()}}class FR{constructor(){this.index={}}add(e){const i=e.lastSegment(),r=e.popLast(),l=this.index[i]||new jt(tt.comparator),u=!l.has(r);return this.index[i]=l.add(r),u}has(e){const i=e.lastSegment(),r=e.popLast(),l=this.index[i];return l&&l.has(r)}getEntries(e){return(this.index[e]||new jt(tt.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sv={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},HT=41943040;class dn{static withCacheSize(e){return new dn(e,dn.DEFAULT_COLLECTION_PERCENTILE,dn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,i,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=i,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */dn.DEFAULT_COLLECTION_PERCENTILE=10,dn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,dn.DEFAULT=new dn(HT,dn.DEFAULT_COLLECTION_PERCENTILE,dn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),dn.DISABLED=new dn(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lo{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new lo(0)}static cr(){return new lo(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wv="LruGarbageCollector",GR=1048576;function xv([s,e],[i,r]){const l=ke(s,i);return l===0?ke(e,r):l}class QR{constructor(e){this.Ir=e,this.buffer=new jt(xv),this.Er=0}dr(){return++this.Er}Ar(e){const i=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(i);else{const r=this.buffer.last();xv(i,r)<0&&(this.buffer=this.buffer.delete(r).add(i))}}get maxValue(){return this.buffer.last()[0]}}class YR{constructor(e,i,r){this.garbageCollector=e,this.asyncQueue=i,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){le(wv,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(i){go(i)?le(wv,"Ignoring IndexedDB error during garbage collection: ",i):await po(i)}await this.Vr(3e5)}))}}class KR{constructor(e,i){this.mr=e,this.params=i}calculateTargetCount(e,i){return this.mr.gr(e).next((r=>Math.floor(i/100*r)))}nthSequenceNumber(e,i){if(i===0)return W.resolve(Ih.ce);const r=new QR(i);return this.mr.forEachTarget(e,(l=>r.Ar(l.sequenceNumber))).next((()=>this.mr.pr(e,(l=>r.Ar(l))))).next((()=>r.maxValue))}removeTargets(e,i,r){return this.mr.removeTargets(e,i,r)}removeOrphanedDocuments(e,i){return this.mr.removeOrphanedDocuments(e,i)}collect(e,i){return this.params.cacheSizeCollectionThreshold===-1?(le("LruGarbageCollector","Garbage collection skipped; disabled"),W.resolve(Sv)):this.getCacheSize(e).next((r=>r<this.params.cacheSizeCollectionThreshold?(le("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Sv):this.yr(e,i)))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,i){let r,l,u,f,p,y,g;const T=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((A=>(A>this.params.maximumSequenceNumbersToCollect?(le("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${A}`),l=this.params.maximumSequenceNumbersToCollect):l=A,f=Date.now(),this.nthSequenceNumber(e,l)))).next((A=>(r=A,p=Date.now(),this.removeTargets(e,r,i)))).next((A=>(u=A,y=Date.now(),this.removeOrphanedDocuments(e,r)))).next((A=>(g=Date.now(),Ka()<=Ve.DEBUG&&le("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${f-T}ms
	Determined least recently used ${l} in `+(p-f)+`ms
	Removed ${u} targets in `+(y-p)+`ms
	Removed ${A} documents in `+(g-y)+`ms
Total Duration: ${g-T}ms`),W.resolve({didRun:!0,sequenceNumbersCollected:l,targetsRemoved:u,documentsRemoved:A}))))}}function XR(s,e){return new KR(s,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $R{constructor(){this.changes=new ta((e=>e.toString()),((e,i)=>e.isEqual(i))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,i){this.assertNotApplied(),this.changes.set(e,en.newInvalidDocument(e).setReadTime(i))}getEntry(e,i){this.assertNotApplied();const r=this.changes.get(i);return r!==void 0?W.resolve(r):this.getFromCache(e,i)}getEntries(e,i){return this.getAllFromCache(e,i)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JR{constructor(e,i){this.overlayedDocument=e,this.mutatedFields=i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZR{constructor(e,i,r,l){this.remoteDocumentCache=e,this.mutationQueue=i,this.documentOverlayCache=r,this.indexManager=l}getDocument(e,i){let r=null;return this.documentOverlayCache.getOverlay(e,i).next((l=>(r=l,this.remoteDocumentCache.getEntry(e,i)))).next((l=>(r!==null&&kl(r.mutation,l,Sn.empty(),st.now()),l)))}getDocuments(e,i){return this.remoteDocumentCache.getEntries(e,i).next((r=>this.getLocalViewOfDocuments(e,r,je()).next((()=>r))))}getLocalViewOfDocuments(e,i,r=je()){const l=Qr();return this.populateOverlays(e,l,i).next((()=>this.computeViews(e,i,l,r).next((u=>{let f=Rl();return u.forEach(((p,y)=>{f=f.insert(p,y.overlayedDocument)})),f}))))}getOverlayedDocuments(e,i){const r=Qr();return this.populateOverlays(e,r,i).next((()=>this.computeViews(e,i,r,je())))}populateOverlays(e,i,r){const l=[];return r.forEach((u=>{i.has(u)||l.push(u)})),this.documentOverlayCache.getOverlays(e,l).next((u=>{u.forEach(((f,p)=>{i.set(f,p)}))}))}computeViews(e,i,r,l){let u=us();const f=Vl(),p=(function(){return Vl()})();return i.forEach(((y,g)=>{const T=r.get(g.key);l.has(g.key)&&(T===void 0||T.mutation instanceof dr)?u=u.insert(g.key,g):T!==void 0?(f.set(g.key,T.mutation.getFieldMask()),kl(T.mutation,g,T.mutation.getFieldMask(),st.now())):f.set(g.key,Sn.empty())})),this.recalculateAndSaveOverlays(e,u).next((y=>(y.forEach(((g,T)=>f.set(g,T))),i.forEach(((g,T)=>p.set(g,new JR(T,f.get(g)??null)))),p)))}recalculateAndSaveOverlays(e,i){const r=Vl();let l=new ut(((f,p)=>f-p)),u=je();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,i).next((f=>{for(const p of f)p.keys().forEach((y=>{const g=i.get(y);if(g===null)return;let T=r.get(y)||Sn.empty();T=p.applyToLocalView(g,T),r.set(y,T);const A=(l.get(p.batchId)||je()).add(y);l=l.insert(p.batchId,A)}))})).next((()=>{const f=[],p=l.getReverseIterator();for(;p.hasNext();){const y=p.getNext(),g=y.key,T=y.value,A=ST();T.forEach((x=>{if(!u.has(x)){const V=NT(i.get(x),r.get(x));V!==null&&A.set(x,V),u=u.add(x)}})),f.push(this.documentOverlayCache.saveOverlays(e,g,A))}return W.waitFor(f)})).next((()=>r))}recalculateAndSaveOverlaysForDocumentKeys(e,i){return this.remoteDocumentCache.getEntries(e,i).next((r=>this.recalculateAndSaveOverlays(e,r)))}getDocumentsMatchingQuery(e,i,r,l){return(function(f){return me.isDocumentKey(f.path)&&f.collectionGroup===null&&f.filters.length===0})(i)?this.getDocumentsMatchingDocumentQuery(e,i.path):vT(i)?this.getDocumentsMatchingCollectionGroupQuery(e,i,r,l):this.getDocumentsMatchingCollectionQuery(e,i,r,l)}getNextDocuments(e,i,r,l){return this.remoteDocumentCache.getAllFromCollectionGroup(e,i,r,l).next((u=>{const f=l-u.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,i,r.largestBatchId,l-u.size):W.resolve(Qr());let p=Ul,y=u;return f.next((g=>W.forEach(g,((T,A)=>(p<A.largestBatchId&&(p=A.largestBatchId),u.get(T)?W.resolve():this.remoteDocumentCache.getEntry(e,T).next((x=>{y=y.insert(T,x)}))))).next((()=>this.populateOverlays(e,g,u))).next((()=>this.computeViews(e,y,g,je()))).next((T=>({batchId:p,changes:AT(T)})))))}))}getDocumentsMatchingDocumentQuery(e,i){return this.getDocument(e,new me(i)).next((r=>{let l=Rl();return r.isFoundDocument()&&(l=l.insert(r.key,r)),l}))}getDocumentsMatchingCollectionGroupQuery(e,i,r,l){const u=i.collectionGroup;let f=Rl();return this.indexManager.getCollectionParents(e,u).next((p=>W.forEach(p,(y=>{const g=(function(A,x){return new Wl(x,null,A.explicitOrderBy.slice(),A.filters.slice(),A.limit,A.limitType,A.startAt,A.endAt)})(i,y.child(u));return this.getDocumentsMatchingCollectionQuery(e,g,r,l).next((T=>{T.forEach(((A,x)=>{f=f.insert(A,x)}))}))})).next((()=>f))))}getDocumentsMatchingCollectionQuery(e,i,r,l){let u;return this.documentOverlayCache.getOverlaysForCollection(e,i.path,r.largestBatchId).next((f=>(u=f,this.remoteDocumentCache.getDocumentsMatchingQuery(e,i,r,u,l)))).next((f=>{u.forEach(((y,g)=>{const T=g.getKey();f.get(T)===null&&(f=f.insert(T,en.newInvalidDocument(T)))}));let p=Rl();return f.forEach(((y,g)=>{const T=u.get(y);T!==void 0&&kl(T.mutation,g,Sn.empty(),st.now()),Mh(i,g)&&(p=p.insert(y,g))})),p}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WR{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,i){return W.resolve(this.Lr.get(i))}saveBundleMetadata(e,i){return this.Lr.set(i.id,(function(l){return{id:l.id,version:l.version,createTime:Di(l.createTime)}})(i)),W.resolve()}getNamedQuery(e,i){return W.resolve(this.kr.get(i))}saveNamedQuery(e,i){return this.kr.set(i.name,(function(l){return{name:l.name,query:qR(l.bundledQuery),readTime:Di(l.readTime)}})(i)),W.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eI{constructor(){this.overlays=new ut(me.comparator),this.qr=new Map}getOverlay(e,i){return W.resolve(this.overlays.get(i))}getOverlays(e,i){const r=Qr();return W.forEach(i,(l=>this.getOverlay(e,l).next((u=>{u!==null&&r.set(l,u)})))).next((()=>r))}saveOverlays(e,i,r){return r.forEach(((l,u)=>{this.St(e,i,u)})),W.resolve()}removeOverlaysForBatchId(e,i,r){const l=this.qr.get(r);return l!==void 0&&(l.forEach((u=>this.overlays=this.overlays.remove(u))),this.qr.delete(r)),W.resolve()}getOverlaysForCollection(e,i,r){const l=Qr(),u=i.length+1,f=new me(i.child("")),p=this.overlays.getIteratorFrom(f);for(;p.hasNext();){const y=p.getNext().value,g=y.getKey();if(!i.isPrefixOf(g.path))break;g.path.length===u&&y.largestBatchId>r&&l.set(y.getKey(),y)}return W.resolve(l)}getOverlaysForCollectionGroup(e,i,r,l){let u=new ut(((g,T)=>g-T));const f=this.overlays.getIterator();for(;f.hasNext();){const g=f.getNext().value;if(g.getKey().getCollectionGroup()===i&&g.largestBatchId>r){let T=u.get(g.largestBatchId);T===null&&(T=Qr(),u=u.insert(g.largestBatchId,T)),T.set(g.getKey(),g)}}const p=Qr(),y=u.getIterator();for(;y.hasNext()&&(y.getNext().value.forEach(((g,T)=>p.set(g,T))),!(p.size()>=l)););return W.resolve(p)}St(e,i,r){const l=this.overlays.get(r.key);if(l!==null){const f=this.qr.get(l.largestBatchId).delete(r.key);this.qr.set(l.largestBatchId,f)}this.overlays=this.overlays.insert(r.key,new _R(i,r));let u=this.qr.get(i);u===void 0&&(u=je(),this.qr.set(i,u)),this.qr.set(i,u.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tI{constructor(){this.sessionToken=$t.EMPTY_BYTE_STRING}getSessionToken(e){return W.resolve(this.sessionToken)}setSessionToken(e,i){return this.sessionToken=i,W.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hp{constructor(){this.Qr=new jt(Bt.$r),this.Ur=new jt(Bt.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,i){const r=new Bt(e,i);this.Qr=this.Qr.add(r),this.Ur=this.Ur.add(r)}Wr(e,i){e.forEach((r=>this.addReference(r,i)))}removeReference(e,i){this.Gr(new Bt(e,i))}zr(e,i){e.forEach((r=>this.removeReference(r,i)))}jr(e){const i=new me(new tt([])),r=new Bt(i,e),l=new Bt(i,e+1),u=[];return this.Ur.forEachInRange([r,l],(f=>{this.Gr(f),u.push(f.key)})),u}Jr(){this.Qr.forEach((e=>this.Gr(e)))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const i=new me(new tt([])),r=new Bt(i,e),l=new Bt(i,e+1);let u=je();return this.Ur.forEachInRange([r,l],(f=>{u=u.add(f.key)})),u}containsKey(e){const i=new Bt(e,0),r=this.Qr.firstAfterOrEqual(i);return r!==null&&e.isEqual(r.key)}}class Bt{constructor(e,i){this.key=e,this.Yr=i}static $r(e,i){return me.comparator(e.key,i.key)||ke(e.Yr,i.Yr)}static Kr(e,i){return ke(e.Yr,i.Yr)||me.comparator(e.key,i.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nI{constructor(e,i){this.indexManager=e,this.referenceDelegate=i,this.mutationQueue=[],this.tr=1,this.Zr=new jt(Bt.$r)}checkEmpty(e){return W.resolve(this.mutationQueue.length===0)}addMutationBatch(e,i,r,l){const u=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const f=new yR(u,i,r,l);this.mutationQueue.push(f);for(const p of l)this.Zr=this.Zr.add(new Bt(p.key,u)),this.indexManager.addToCollectionParentIndex(e,p.key.path.popLast());return W.resolve(f)}lookupMutationBatch(e,i){return W.resolve(this.Xr(i))}getNextMutationBatchAfterBatchId(e,i){const r=i+1,l=this.ei(r),u=l<0?0:l;return W.resolve(this.mutationQueue.length>u?this.mutationQueue[u]:null)}getHighestUnacknowledgedBatchId(){return W.resolve(this.mutationQueue.length===0?np:this.tr-1)}getAllMutationBatches(e){return W.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,i){const r=new Bt(i,0),l=new Bt(i,Number.POSITIVE_INFINITY),u=[];return this.Zr.forEachInRange([r,l],(f=>{const p=this.Xr(f.Yr);u.push(p)})),W.resolve(u)}getAllMutationBatchesAffectingDocumentKeys(e,i){let r=new jt(ke);return i.forEach((l=>{const u=new Bt(l,0),f=new Bt(l,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([u,f],(p=>{r=r.add(p.Yr)}))})),W.resolve(this.ti(r))}getAllMutationBatchesAffectingQuery(e,i){const r=i.path,l=r.length+1;let u=r;me.isDocumentKey(u)||(u=u.child(""));const f=new Bt(new me(u),0);let p=new jt(ke);return this.Zr.forEachWhile((y=>{const g=y.key.path;return!!r.isPrefixOf(g)&&(g.length===l&&(p=p.add(y.Yr)),!0)}),f),W.resolve(this.ti(p))}ti(e){const i=[];return e.forEach((r=>{const l=this.Xr(r);l!==null&&i.push(l)})),i}removeMutationBatch(e,i){Ge(this.ni(i.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Zr;return W.forEach(i.mutations,(l=>{const u=new Bt(l.key,i.batchId);return r=r.delete(u),this.referenceDelegate.markPotentiallyOrphaned(e,l.key)})).next((()=>{this.Zr=r}))}ir(e){}containsKey(e,i){const r=new Bt(i,0),l=this.Zr.firstAfterOrEqual(r);return W.resolve(i.isEqual(l&&l.key))}performConsistencyCheck(e){return this.mutationQueue.length,W.resolve()}ni(e,i){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const i=this.ei(e);return i<0||i>=this.mutationQueue.length?null:this.mutationQueue[i]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iI{constructor(e){this.ri=e,this.docs=(function(){return new ut(me.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,i){const r=i.key,l=this.docs.get(r),u=l?l.size:0,f=this.ri(i);return this.docs=this.docs.insert(r,{document:i.mutableCopy(),size:f}),this.size+=f-u,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const i=this.docs.get(e);i&&(this.docs=this.docs.remove(e),this.size-=i.size)}getEntry(e,i){const r=this.docs.get(i);return W.resolve(r?r.document.mutableCopy():en.newInvalidDocument(i))}getEntries(e,i){let r=us();return i.forEach((l=>{const u=this.docs.get(l);r=r.insert(l,u?u.document.mutableCopy():en.newInvalidDocument(l))})),W.resolve(r)}getDocumentsMatchingQuery(e,i,r,l){let u=us();const f=i.path,p=new me(f.child("__id-9223372036854775808__")),y=this.docs.getIteratorFrom(p);for(;y.hasNext();){const{key:g,value:{document:T}}=y.getNext();if(!f.isPrefixOf(g.path))break;g.path.length>f.length+1||Dx(Nx(T),r)<=0||(l.has(T.key)||Mh(i,T))&&(u=u.insert(T.key,T.mutableCopy()))}return W.resolve(u)}getAllFromCollectionGroup(e,i,r,l){_e(9500)}ii(e,i){return W.forEach(this.docs,(r=>i(r)))}newChangeBuffer(e){return new sI(this)}getSize(e){return W.resolve(this.size)}}class sI extends $R{constructor(e){super(),this.Nr=e}applyChanges(e){const i=[];return this.changes.forEach(((r,l)=>{l.isValidDocument()?i.push(this.Nr.addEntry(e,l)):this.Nr.removeEntry(r)})),W.waitFor(i)}getFromCache(e,i){return this.Nr.getEntry(e,i)}getAllFromCache(e,i){return this.Nr.getEntries(e,i)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rI{constructor(e){this.persistence=e,this.si=new ta((i=>rp(i)),ap),this.lastRemoteSnapshotVersion=Ae.min(),this.highestTargetId=0,this.oi=0,this._i=new hp,this.targetCount=0,this.ai=lo.ur()}forEachTarget(e,i){return this.si.forEach(((r,l)=>i(l))),W.resolve()}getLastRemoteSnapshotVersion(e){return W.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return W.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),W.resolve(this.highestTargetId)}setTargetsMetadata(e,i,r){return r&&(this.lastRemoteSnapshotVersion=r),i>this.oi&&(this.oi=i),W.resolve()}Pr(e){this.si.set(e.target,e);const i=e.targetId;i>this.highestTargetId&&(this.ai=new lo(i),this.highestTargetId=i),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,i){return this.Pr(i),this.targetCount+=1,W.resolve()}updateTargetData(e,i){return this.Pr(i),W.resolve()}removeTargetData(e,i){return this.si.delete(i.target),this._i.jr(i.targetId),this.targetCount-=1,W.resolve()}removeTargets(e,i,r){let l=0;const u=[];return this.si.forEach(((f,p)=>{p.sequenceNumber<=i&&r.get(p.targetId)===null&&(this.si.delete(f),u.push(this.removeMatchingKeysForTargetId(e,p.targetId)),l++)})),W.waitFor(u).next((()=>l))}getTargetCount(e){return W.resolve(this.targetCount)}getTargetData(e,i){const r=this.si.get(i)||null;return W.resolve(r)}addMatchingKeys(e,i,r){return this._i.Wr(i,r),W.resolve()}removeMatchingKeys(e,i,r){this._i.zr(i,r);const l=this.persistence.referenceDelegate,u=[];return l&&i.forEach((f=>{u.push(l.markPotentiallyOrphaned(e,f))})),W.waitFor(u)}removeMatchingKeysForTargetId(e,i){return this._i.jr(i),W.resolve()}getMatchingKeysForTargetId(e,i){const r=this._i.Hr(i);return W.resolve(r)}containsKey(e,i){return W.resolve(this._i.containsKey(i))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FT{constructor(e,i){this.ui={},this.overlays={},this.ci=new Ih(0),this.li=!1,this.li=!0,this.hi=new tI,this.referenceDelegate=e(this),this.Pi=new rI(this),this.indexManager=new HR,this.remoteDocumentCache=(function(l){return new iI(l)})((r=>this.referenceDelegate.Ti(r))),this.serializer=new BR(i),this.Ii=new WR(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let i=this.overlays[e.toKey()];return i||(i=new eI,this.overlays[e.toKey()]=i),i}getMutationQueue(e,i){let r=this.ui[e.toKey()];return r||(r=new nI(i,this.referenceDelegate),this.ui[e.toKey()]=r),r}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,i,r){le("MemoryPersistence","Starting transaction:",e);const l=new aI(this.ci.next());return this.referenceDelegate.Ei(),r(l).next((u=>this.referenceDelegate.di(l).next((()=>u)))).toPromise().then((u=>(l.raiseOnCommittedEvent(),u)))}Ai(e,i){return W.or(Object.values(this.ui).map((r=>()=>r.containsKey(e,i))))}}class aI extends Mx{constructor(e){super(),this.currentSequenceNumber=e}}class fp{constructor(e){this.persistence=e,this.Ri=new hp,this.Vi=null}static mi(e){return new fp(e)}get fi(){if(this.Vi)return this.Vi;throw _e(60996)}addReference(e,i,r){return this.Ri.addReference(r,i),this.fi.delete(r.toString()),W.resolve()}removeReference(e,i,r){return this.Ri.removeReference(r,i),this.fi.add(r.toString()),W.resolve()}markPotentiallyOrphaned(e,i){return this.fi.add(i.toString()),W.resolve()}removeTarget(e,i){this.Ri.jr(i.targetId).forEach((l=>this.fi.add(l.toString())));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,i.targetId).next((l=>{l.forEach((u=>this.fi.add(u.toString())))})).next((()=>r.removeTargetData(e,i)))}Ei(){this.Vi=new Set}di(e){const i=this.persistence.getRemoteDocumentCache().newChangeBuffer();return W.forEach(this.fi,(r=>{const l=me.fromPath(r);return this.gi(e,l).next((u=>{u||i.removeEntry(l,Ae.min())}))})).next((()=>(this.Vi=null,i.apply(e))))}updateLimboDocument(e,i){return this.gi(e,i).next((r=>{r?this.fi.delete(i.toString()):this.fi.add(i.toString())}))}Ti(e){return 0}gi(e,i){return W.or([()=>W.resolve(this.Ri.containsKey(i)),()=>this.persistence.getTargetCache().containsKey(e,i),()=>this.persistence.Ai(e,i)])}}class mh{constructor(e,i){this.persistence=e,this.pi=new ta((r=>jx(r.path)),((r,l)=>r.isEqual(l))),this.garbageCollector=XR(this,i)}static mi(e,i){return new mh(e,i)}Ei(){}di(e){return W.resolve()}forEachTarget(e,i){return this.persistence.getTargetCache().forEachTarget(e,i)}gr(e){const i=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next((r=>i.next((l=>r+l))))}wr(e){let i=0;return this.pr(e,(r=>{i++})).next((()=>i))}pr(e,i){return W.forEach(this.pi,((r,l)=>this.br(e,r,l).next((u=>u?W.resolve():i(l)))))}removeTargets(e,i,r){return this.persistence.getTargetCache().removeTargets(e,i,r)}removeOrphanedDocuments(e,i){let r=0;const l=this.persistence.getRemoteDocumentCache(),u=l.newChangeBuffer();return l.ii(e,(f=>this.br(e,f,i).next((p=>{p||(r++,u.removeEntry(f,Ae.min()))})))).next((()=>u.apply(e))).next((()=>r))}markPotentiallyOrphaned(e,i){return this.pi.set(i,e.currentSequenceNumber),W.resolve()}removeTarget(e,i){const r=i.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,i,r){return this.pi.set(r,e.currentSequenceNumber),W.resolve()}removeReference(e,i,r){return this.pi.set(r,e.currentSequenceNumber),W.resolve()}updateLimboDocument(e,i){return this.pi.set(i,e.currentSequenceNumber),W.resolve()}Ti(e){let i=e.key.toString().length;return e.isFoundDocument()&&(i+=Kc(e.data.value)),i}br(e,i,r){return W.or([()=>this.persistence.Ai(e,i),()=>this.persistence.getTargetCache().containsKey(e,i),()=>{const l=this.pi.get(i);return W.resolve(l!==void 0&&l>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dp{constructor(e,i,r,l){this.targetId=e,this.fromCache=i,this.Es=r,this.ds=l}static As(e,i){let r=je(),l=je();for(const u of i.docChanges)switch(u.type){case 0:r=r.add(u.doc.key);break;case 1:l=l.add(u.doc.key)}return new dp(e,i.fromCache,r,l)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oI{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lI{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return jA()?8:Vx(tn())>0?6:4})()}initialize(e,i){this.ps=e,this.indexManager=i,this.Rs=!0}getDocumentsMatchingQuery(e,i,r,l){const u={result:null};return this.ys(e,i).next((f=>{u.result=f})).next((()=>{if(!u.result)return this.ws(e,i,l,r).next((f=>{u.result=f}))})).next((()=>{if(u.result)return;const f=new oI;return this.Ss(e,i,f).next((p=>{if(u.result=p,this.Vs)return this.bs(e,i,f,p.size)}))})).next((()=>u.result))}bs(e,i,r,l){return r.documentReadCount<this.fs?(Ka()<=Ve.DEBUG&&le("QueryEngine","SDK will not create cache indexes for query:",Xa(i),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),W.resolve()):(Ka()<=Ve.DEBUG&&le("QueryEngine","Query:",Xa(i),"scans",r.documentReadCount,"local documents and returns",l,"documents as results."),r.documentReadCount>this.gs*l?(Ka()<=Ve.DEBUG&&le("QueryEngine","The SDK decides to create cache indexes for query:",Xa(i),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Ni(i))):W.resolve())}ys(e,i){if(mv(i))return W.resolve(null);let r=Ni(i);return this.indexManager.getIndexType(e,r).next((l=>l===0?null:(i.limit!==null&&l===1&&(i=Im(i,null,"F"),r=Ni(i)),this.indexManager.getDocumentsMatchingTarget(e,r).next((u=>{const f=je(...u);return this.ps.getDocuments(e,f).next((p=>this.indexManager.getMinOffset(e,r).next((y=>{const g=this.Ds(i,p);return this.Cs(i,g,f,y.readTime)?this.ys(e,Im(i,null,"F")):this.vs(e,g,i,y)}))))})))))}ws(e,i,r,l){return mv(i)||l.isEqual(Ae.min())?W.resolve(null):this.ps.getDocuments(e,r).next((u=>{const f=this.Ds(i,u);return this.Cs(i,f,r,l)?W.resolve(null):(Ka()<=Ve.DEBUG&&le("QueryEngine","Re-using previous result from %s to execute query: %s",l.toString(),Xa(i)),this.vs(e,f,i,Cx(l,Ul)).next((p=>p)))}))}Ds(e,i){let r=new jt(TT(e));return i.forEach(((l,u)=>{Mh(e,u)&&(r=r.add(u))})),r}Cs(e,i,r,l){if(e.limit===null)return!1;if(r.size!==i.size)return!0;const u=e.limitType==="F"?i.last():i.first();return!!u&&(u.hasPendingWrites||u.version.compareTo(l)>0)}Ss(e,i,r){return Ka()<=Ve.DEBUG&&le("QueryEngine","Using full collection scan to execute query:",Xa(i)),this.ps.getDocumentsMatchingQuery(e,i,ir.min(),r)}vs(e,i,r,l){return this.ps.getDocumentsMatchingQuery(e,r,l).next((u=>(i.forEach((f=>{u=u.insert(f.key,f)})),u)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mp="LocalStore",uI=3e8;class cI{constructor(e,i,r,l){this.persistence=e,this.Fs=i,this.serializer=l,this.Ms=new ut(ke),this.xs=new ta((u=>rp(u)),ap),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(r)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new ZR(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(i=>e.collect(i,this.Ms)))}}function hI(s,e,i,r){return new cI(s,e,i,r)}async function GT(s,e){const i=we(s);return await i.persistence.runTransaction("Handle user change","readonly",(r=>{let l;return i.mutationQueue.getAllMutationBatches(r).next((u=>(l=u,i.Bs(e),i.mutationQueue.getAllMutationBatches(r)))).next((u=>{const f=[],p=[];let y=je();for(const g of l){f.push(g.batchId);for(const T of g.mutations)y=y.add(T.key)}for(const g of u){p.push(g.batchId);for(const T of g.mutations)y=y.add(T.key)}return i.localDocuments.getDocuments(r,y).next((g=>({Ls:g,removedBatchIds:f,addedBatchIds:p})))}))}))}function fI(s,e){const i=we(s);return i.persistence.runTransaction("Acknowledge batch","readwrite-primary",(r=>{const l=e.batch.keys(),u=i.Ns.newChangeBuffer({trackRemovals:!0});return(function(p,y,g,T){const A=g.batch,x=A.keys();let V=W.resolve();return x.forEach((q=>{V=V.next((()=>T.getEntry(y,q))).next((G=>{const K=g.docVersions.get(q);Ge(K!==null,48541),G.version.compareTo(K)<0&&(A.applyToRemoteDocument(G,g),G.isValidDocument()&&(G.setReadTime(g.commitVersion),T.addEntry(G)))}))})),V.next((()=>p.mutationQueue.removeMutationBatch(y,A)))})(i,r,e,u).next((()=>u.apply(r))).next((()=>i.mutationQueue.performConsistencyCheck(r))).next((()=>i.documentOverlayCache.removeOverlaysForBatchId(r,l,e.batch.batchId))).next((()=>i.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,(function(p){let y=je();for(let g=0;g<p.mutationResults.length;++g)p.mutationResults[g].transformResults.length>0&&(y=y.add(p.batch.mutations[g].key));return y})(e)))).next((()=>i.localDocuments.getDocuments(r,l)))}))}function QT(s){const e=we(s);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(i=>e.Pi.getLastRemoteSnapshotVersion(i)))}function dI(s,e){const i=we(s),r=e.snapshotVersion;let l=i.Ms;return i.persistence.runTransaction("Apply remote event","readwrite-primary",(u=>{const f=i.Ns.newChangeBuffer({trackRemovals:!0});l=i.Ms;const p=[];e.targetChanges.forEach(((T,A)=>{const x=l.get(A);if(!x)return;p.push(i.Pi.removeMatchingKeys(u,T.removedDocuments,A).next((()=>i.Pi.addMatchingKeys(u,T.addedDocuments,A))));let V=x.withSequenceNumber(u.currentSequenceNumber);e.targetMismatches.get(A)!==null?V=V.withResumeToken($t.EMPTY_BYTE_STRING,Ae.min()).withLastLimboFreeSnapshotVersion(Ae.min()):T.resumeToken.approximateByteSize()>0&&(V=V.withResumeToken(T.resumeToken,r)),l=l.insert(A,V),(function(G,K,ee){return G.resumeToken.approximateByteSize()===0||K.snapshotVersion.toMicroseconds()-G.snapshotVersion.toMicroseconds()>=uI?!0:ee.addedDocuments.size+ee.modifiedDocuments.size+ee.removedDocuments.size>0})(x,V,T)&&p.push(i.Pi.updateTargetData(u,V))}));let y=us(),g=je();if(e.documentUpdates.forEach((T=>{e.resolvedLimboDocuments.has(T)&&p.push(i.persistence.referenceDelegate.updateLimboDocument(u,T))})),p.push(mI(u,f,e.documentUpdates).next((T=>{y=T.ks,g=T.qs}))),!r.isEqual(Ae.min())){const T=i.Pi.getLastRemoteSnapshotVersion(u).next((A=>i.Pi.setTargetsMetadata(u,u.currentSequenceNumber,r)));p.push(T)}return W.waitFor(p).next((()=>f.apply(u))).next((()=>i.localDocuments.getLocalViewOfDocuments(u,y,g))).next((()=>y))})).then((u=>(i.Ms=l,u)))}function mI(s,e,i){let r=je(),l=je();return i.forEach((u=>r=r.add(u))),e.getEntries(s,r).next((u=>{let f=us();return i.forEach(((p,y)=>{const g=u.get(p);y.isFoundDocument()!==g.isFoundDocument()&&(l=l.add(p)),y.isNoDocument()&&y.version.isEqual(Ae.min())?(e.removeEntry(p,y.readTime),f=f.insert(p,y)):!g.isValidDocument()||y.version.compareTo(g.version)>0||y.version.compareTo(g.version)===0&&g.hasPendingWrites?(e.addEntry(y),f=f.insert(p,y)):le(mp,"Ignoring outdated watch update for ",p,". Current version:",g.version," Watch version:",y.version)})),{ks:f,qs:l}}))}function pI(s,e){const i=we(s);return i.persistence.runTransaction("Get next mutation batch","readonly",(r=>(e===void 0&&(e=np),i.mutationQueue.getNextMutationBatchAfterBatchId(r,e))))}function gI(s,e){const i=we(s);return i.persistence.runTransaction("Allocate target","readwrite",(r=>{let l;return i.Pi.getTargetData(r,e).next((u=>u?(l=u,W.resolve(l)):i.Pi.allocateTargetId(r).next((f=>(l=new $s(e,f,"TargetPurposeListen",r.currentSequenceNumber),i.Pi.addTargetData(r,l).next((()=>l)))))))})).then((r=>{const l=i.Ms.get(r.targetId);return(l===null||r.snapshotVersion.compareTo(l.snapshotVersion)>0)&&(i.Ms=i.Ms.insert(r.targetId,r),i.xs.set(e,r.targetId)),r}))}async function Mm(s,e,i){const r=we(s),l=r.Ms.get(e),u=i?"readwrite":"readwrite-primary";try{i||await r.persistence.runTransaction("Release target",u,(f=>r.persistence.referenceDelegate.removeTarget(f,l)))}catch(f){if(!go(f))throw f;le(mp,`Failed to update sequence numbers for target ${e}: ${f}`)}r.Ms=r.Ms.remove(e),r.xs.delete(l.target)}function Rv(s,e,i){const r=we(s);let l=Ae.min(),u=je();return r.persistence.runTransaction("Execute query","readwrite",(f=>(function(y,g,T){const A=we(y),x=A.xs.get(T);return x!==void 0?W.resolve(A.Ms.get(x)):A.Pi.getTargetData(g,T)})(r,f,Ni(e)).next((p=>{if(p)return l=p.lastLimboFreeSnapshotVersion,r.Pi.getMatchingKeysForTargetId(f,p.targetId).next((y=>{u=y}))})).next((()=>r.Fs.getDocumentsMatchingQuery(f,e,i?l:Ae.min(),i?u:je()))).next((p=>(yI(r,tR(e),p),{documents:p,Qs:u})))))}function yI(s,e,i){let r=s.Os.get(e)||Ae.min();i.forEach(((l,u)=>{u.readTime.compareTo(r)>0&&(r=u.readTime)})),s.Os.set(e,r)}class Iv{constructor(){this.activeTargetIds=oR()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class _I{constructor(){this.Mo=new Iv,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,i,r){}addLocalQueryTarget(e,i=!0){return i&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,i,r){this.xo[e]=i}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new Iv,Promise.resolve()}handleUserChange(e,i,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vI{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cv="ConnectivityMonitor";class Nv{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){le(Cv,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){le(Cv,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let qc=null;function Vm(){return qc===null?qc=(function(){return 268435456+Math.round(2147483648*Math.random())})():qc++,"0x"+qc.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lm="RestConnection",EI={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class TI{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const i=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),l=encodeURIComponent(this.databaseId.database);this.Uo=i+"://"+e.host,this.Ko=`projects/${r}/databases/${l}`,this.Wo=this.databaseId.database===lh?`project_id=${r}`:`project_id=${r}&database_id=${l}`}Go(e,i,r,l,u){const f=Vm(),p=this.zo(e,i.toUriEncodedString());le(lm,`Sending RPC '${e}' ${f}:`,p,r);const y={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(y,l,u);const{host:g}=new URL(p),T=co(g);return this.Jo(e,p,y,r,T).then((A=>(le(lm,`Received RPC '${e}' ${f}: `,A),A)),(A=>{throw so(lm,`RPC '${e}' ${f} failed with error: `,A,"url: ",p,"request:",r),A}))}Ho(e,i,r,l,u,f){return this.Go(e,i,r,l,u)}jo(e,i,r){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+mo})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),i&&i.headers.forEach(((l,u)=>e[u]=l)),r&&r.headers.forEach(((l,u)=>e[u]=l))}zo(e,i){const r=EI[e];return`${this.Uo}/v1/${i}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bI{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zt="WebChannelConnection";class AI extends TI{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,i,r,l,u){const f=Vm();return new Promise(((p,y)=>{const g=new KE;g.setWithCredentials(!0),g.listenOnce(XE.COMPLETE,(()=>{try{switch(g.getLastErrorCode()){case Yc.NO_ERROR:const A=g.getResponseJson();le(Zt,`XHR for RPC '${e}' ${f} received:`,JSON.stringify(A)),p(A);break;case Yc.TIMEOUT:le(Zt,`RPC '${e}' ${f} timed out`),y(new oe(J.DEADLINE_EXCEEDED,"Request time out"));break;case Yc.HTTP_ERROR:const x=g.getStatus();if(le(Zt,`RPC '${e}' ${f} failed with status:`,x,"response text:",g.getResponseText()),x>0){let V=g.getResponseJson();Array.isArray(V)&&(V=V[0]);const q=V?.error;if(q&&q.status&&q.message){const G=(function(ee){const te=ee.toLowerCase().replace(/_/g,"-");return Object.values(J).indexOf(te)>=0?te:J.UNKNOWN})(q.status);y(new oe(G,q.message))}else y(new oe(J.UNKNOWN,"Server responded with status "+g.getStatus()))}else y(new oe(J.UNAVAILABLE,"Connection failed."));break;default:_e(9055,{l_:e,streamId:f,h_:g.getLastErrorCode(),P_:g.getLastError()})}}finally{le(Zt,`RPC '${e}' ${f} completed.`)}}));const T=JSON.stringify(l);le(Zt,`RPC '${e}' ${f} sending request:`,l),g.send(i,"POST",T,r,15)}))}T_(e,i,r){const l=Vm(),u=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],f=ZE(),p=JE(),y={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},g=this.longPollingOptions.timeoutSeconds;g!==void 0&&(y.longPollingTimeout=Math.round(1e3*g)),this.useFetchStreams&&(y.useFetchStreams=!0),this.jo(y.initMessageHeaders,i,r),y.encodeInitMessageHeaders=!0;const T=u.join("");le(Zt,`Creating RPC '${e}' stream ${l}: ${T}`,y);const A=f.createWebChannel(T,y);this.I_(A);let x=!1,V=!1;const q=new bI({Yo:K=>{V?le(Zt,`Not sending because RPC '${e}' stream ${l} is closed:`,K):(x||(le(Zt,`Opening RPC '${e}' stream ${l} transport.`),A.open(),x=!0),le(Zt,`RPC '${e}' stream ${l} sending:`,K),A.send(K))},Zo:()=>A.close()}),G=(K,ee,te)=>{K.listen(ee,(ne=>{try{te(ne)}catch(he){setTimeout((()=>{throw he}),0)}}))};return G(A,xl.EventType.OPEN,(()=>{V||(le(Zt,`RPC '${e}' stream ${l} transport opened.`),q.o_())})),G(A,xl.EventType.CLOSE,(()=>{V||(V=!0,le(Zt,`RPC '${e}' stream ${l} transport closed`),q.a_(),this.E_(A))})),G(A,xl.EventType.ERROR,(K=>{V||(V=!0,so(Zt,`RPC '${e}' stream ${l} transport errored. Name:`,K.name,"Message:",K.message),q.a_(new oe(J.UNAVAILABLE,"The operation could not be completed")))})),G(A,xl.EventType.MESSAGE,(K=>{if(!V){const ee=K.data[0];Ge(!!ee,16349);const te=ee,ne=te?.error||te[0]?.error;if(ne){le(Zt,`RPC '${e}' stream ${l} received error:`,ne);const he=ne.status;let ve=(function(w){const I=It[w];if(I!==void 0)return MT(I)})(he),Te=ne.message;ve===void 0&&(ve=J.INTERNAL,Te="Unknown error status: "+he+" with message "+ne.message),V=!0,q.a_(new oe(ve,Te)),A.close()}else le(Zt,`RPC '${e}' stream ${l} received:`,ee),q.u_(ee)}})),G(p,$E.STAT_EVENT,(K=>{K.stat===Tm.PROXY?le(Zt,`RPC '${e}' stream ${l} detected buffering proxy`):K.stat===Tm.NOPROXY&&le(Zt,`RPC '${e}' stream ${l} detected no buffering proxy`)})),setTimeout((()=>{q.__()}),0),q}terminate(){this.c_.forEach((e=>e.close())),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter((i=>i===e))}}function um(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ph(s){return new RR(s,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YT{constructor(e,i,r=1e3,l=1.5,u=6e4){this.Mi=e,this.timerId=i,this.d_=r,this.A_=l,this.R_=u,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const i=Math.floor(this.V_+this.y_()),r=Math.max(0,Date.now()-this.f_),l=Math.max(0,i-r);l>0&&le("ExponentialBackoff",`Backing off for ${l} ms (base delay: ${this.V_} ms, delay with jitter: ${i} ms, last attempt: ${r} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,l,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dv="PersistentStream";class KT{constructor(e,i,r,l,u,f,p,y){this.Mi=e,this.S_=r,this.b_=l,this.connection=u,this.authCredentialsProvider=f,this.appCheckCredentialsProvider=p,this.listener=y,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new YT(e,i)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,i){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():i&&i.code===J.RESOURCE_EXHAUSTED?(ls(i.toString()),ls("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):i&&i.code===J.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(i)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),i=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([r,l])=>{this.D_===i&&this.G_(r,l)}),(r=>{e((()=>{const l=new oe(J.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(l)}))}))}G_(e,i){const r=this.W_(this.D_);this.stream=this.j_(e,i),this.stream.Xo((()=>{r((()=>this.listener.Xo()))})),this.stream.t_((()=>{r((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((l=>{r((()=>this.z_(l)))})),this.stream.onMessage((l=>{r((()=>++this.F_==1?this.J_(l):this.onNext(l)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return le(Dv,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return i=>{this.Mi.enqueueAndForget((()=>this.D_===e?i():(le(Dv,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class SI extends KT{constructor(e,i,r,l,u,f){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",i,r,l,f),this.serializer=u}j_(e,i){return this.connection.T_("Listen",e,i)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const i=NR(this.serializer,e),r=(function(u){if(!("targetChange"in u))return Ae.min();const f=u.targetChange;return f.targetIds&&f.targetIds.length?Ae.min():f.readTime?Di(f.readTime):Ae.min()})(e);return this.listener.H_(i,r)}Y_(e){const i={};i.database=Om(this.serializer),i.addTarget=(function(u,f){let p;const y=f.target;if(p=xm(y)?{documents:MR(u,y)}:{query:VR(u,y).ft},p.targetId=f.targetId,f.resumeToken.approximateByteSize()>0){p.resumeToken=jT(u,f.resumeToken);const g=Cm(u,f.expectedCount);g!==null&&(p.expectedCount=g)}else if(f.snapshotVersion.compareTo(Ae.min())>0){p.readTime=dh(u,f.snapshotVersion.toTimestamp());const g=Cm(u,f.expectedCount);g!==null&&(p.expectedCount=g)}return p})(this.serializer,e);const r=jR(this.serializer,e);r&&(i.labels=r),this.q_(i)}Z_(e){const i={};i.database=Om(this.serializer),i.removeTarget=e,this.q_(i)}}class wI extends KT{constructor(e,i,r,l,u,f){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",i,r,l,f),this.serializer=u}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,i){return this.connection.T_("Write",e,i)}J_(e){return Ge(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Ge(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){Ge(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const i=OR(e.writeResults,e.commitTime),r=Di(e.commitTime);return this.listener.na(r,i)}ra(){const e={};e.database=Om(this.serializer),this.q_(e)}ea(e){const i={streamToken:this.lastStreamToken,writes:e.map((r=>DR(this.serializer,r)))};this.q_(i)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xI{}class RI extends xI{constructor(e,i,r,l){super(),this.authCredentials=e,this.appCheckCredentials=i,this.connection=r,this.serializer=l,this.ia=!1}sa(){if(this.ia)throw new oe(J.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,i,r,l){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([u,f])=>this.connection.Go(e,Nm(i,r),l,u,f))).catch((u=>{throw u.name==="FirebaseError"?(u.code===J.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new oe(J.UNKNOWN,u.toString())}))}Ho(e,i,r,l,u){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([f,p])=>this.connection.Ho(e,Nm(i,r),l,f,p,u))).catch((f=>{throw f.name==="FirebaseError"?(f.code===J.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),f):new oe(J.UNKNOWN,f.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class II{constructor(e,i){this.asyncQueue=e,this.onlineStateHandler=i,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const i=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(ls(i),this.aa=!1):le("OnlineStateTracker",i)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wr="RemoteStore";class CI{constructor(e,i,r,l,u){this.localStore=e,this.datastore=i,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=u,this.Aa.Oo((f=>{r.enqueueAndForget((async()=>{na(this)&&(le(Wr,"Restarting streams for network reachability change."),await(async function(y){const g=we(y);g.Ea.add(4),await nu(g),g.Ra.set("Unknown"),g.Ea.delete(4),await Lh(g)})(this))}))})),this.Ra=new II(r,l)}}async function Lh(s){if(na(s))for(const e of s.da)await e(!0)}async function nu(s){for(const e of s.da)await e(!1)}function XT(s,e){const i=we(s);i.Ia.has(e.targetId)||(i.Ia.set(e.targetId,e),_p(i)?yp(i):yo(i).O_()&&gp(i,e))}function pp(s,e){const i=we(s),r=yo(i);i.Ia.delete(e),r.O_()&&$T(i,e),i.Ia.size===0&&(r.O_()?r.L_():na(i)&&i.Ra.set("Unknown"))}function gp(s,e){if(s.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Ae.min())>0){const i=s.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(i)}yo(s).Y_(e)}function $T(s,e){s.Va.Ue(e),yo(s).Z_(e)}function yp(s){s.Va=new AR({getRemoteKeysForTarget:e=>s.remoteSyncer.getRemoteKeysForTarget(e),At:e=>s.Ia.get(e)||null,ht:()=>s.datastore.serializer.databaseId}),yo(s).start(),s.Ra.ua()}function _p(s){return na(s)&&!yo(s).x_()&&s.Ia.size>0}function na(s){return we(s).Ea.size===0}function JT(s){s.Va=void 0}async function NI(s){s.Ra.set("Online")}async function DI(s){s.Ia.forEach(((e,i)=>{gp(s,e)}))}async function OI(s,e){JT(s),_p(s)?(s.Ra.ha(e),yp(s)):s.Ra.set("Unknown")}async function MI(s,e,i){if(s.Ra.set("Online"),e instanceof kT&&e.state===2&&e.cause)try{await(async function(l,u){const f=u.cause;for(const p of u.targetIds)l.Ia.has(p)&&(await l.remoteSyncer.rejectListen(p,f),l.Ia.delete(p),l.Va.removeTarget(p))})(s,e)}catch(r){le(Wr,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await ph(s,r)}else if(e instanceof Jc?s.Va.Ze(e):e instanceof VT?s.Va.st(e):s.Va.tt(e),!i.isEqual(Ae.min()))try{const r=await QT(s.localStore);i.compareTo(r)>=0&&await(function(u,f){const p=u.Va.Tt(f);return p.targetChanges.forEach(((y,g)=>{if(y.resumeToken.approximateByteSize()>0){const T=u.Ia.get(g);T&&u.Ia.set(g,T.withResumeToken(y.resumeToken,f))}})),p.targetMismatches.forEach(((y,g)=>{const T=u.Ia.get(y);if(!T)return;u.Ia.set(y,T.withResumeToken($t.EMPTY_BYTE_STRING,T.snapshotVersion)),$T(u,y);const A=new $s(T.target,y,g,T.sequenceNumber);gp(u,A)})),u.remoteSyncer.applyRemoteEvent(p)})(s,i)}catch(r){le(Wr,"Failed to raise snapshot:",r),await ph(s,r)}}async function ph(s,e,i){if(!go(e))throw e;s.Ea.add(1),await nu(s),s.Ra.set("Offline"),i||(i=()=>QT(s.localStore)),s.asyncQueue.enqueueRetryable((async()=>{le(Wr,"Retrying IndexedDB access"),await i(),s.Ea.delete(1),await Lh(s)}))}function ZT(s,e){return e().catch((i=>ph(s,i,e)))}async function Uh(s){const e=we(s),i=or(e);let r=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:np;for(;VI(e);)try{const l=await pI(e.localStore,r);if(l===null){e.Ta.length===0&&i.L_();break}r=l.batchId,kI(e,l)}catch(l){await ph(e,l)}WT(e)&&e1(e)}function VI(s){return na(s)&&s.Ta.length<10}function kI(s,e){s.Ta.push(e);const i=or(s);i.O_()&&i.X_&&i.ea(e.mutations)}function WT(s){return na(s)&&!or(s).x_()&&s.Ta.length>0}function e1(s){or(s).start()}async function jI(s){or(s).ra()}async function PI(s){const e=or(s);for(const i of s.Ta)e.ea(i.mutations)}async function LI(s,e,i){const r=s.Ta.shift(),l=lp.from(r,e,i);await ZT(s,(()=>s.remoteSyncer.applySuccessfulWrite(l))),await Uh(s)}async function UI(s,e){e&&or(s).X_&&await(async function(r,l){if((function(f){return ER(f)&&f!==J.ABORTED})(l.code)){const u=r.Ta.shift();or(r).B_(),await ZT(r,(()=>r.remoteSyncer.rejectFailedWrite(u.batchId,l))),await Uh(r)}})(s,e),WT(s)&&e1(s)}async function Ov(s,e){const i=we(s);i.asyncQueue.verifyOperationInProgress(),le(Wr,"RemoteStore received new credentials");const r=na(i);i.Ea.add(3),await nu(i),r&&i.Ra.set("Unknown"),await i.remoteSyncer.handleCredentialChange(e),i.Ea.delete(3),await Lh(i)}async function zI(s,e){const i=we(s);e?(i.Ea.delete(2),await Lh(i)):e||(i.Ea.add(2),await nu(i),i.Ra.set("Unknown"))}function yo(s){return s.ma||(s.ma=(function(i,r,l){const u=we(i);return u.sa(),new SI(r,u.connection,u.authCredentials,u.appCheckCredentials,u.serializer,l)})(s.datastore,s.asyncQueue,{Xo:NI.bind(null,s),t_:DI.bind(null,s),r_:OI.bind(null,s),H_:MI.bind(null,s)}),s.da.push((async e=>{e?(s.ma.B_(),_p(s)?yp(s):s.Ra.set("Unknown")):(await s.ma.stop(),JT(s))}))),s.ma}function or(s){return s.fa||(s.fa=(function(i,r,l){const u=we(i);return u.sa(),new wI(r,u.connection,u.authCredentials,u.appCheckCredentials,u.serializer,l)})(s.datastore,s.asyncQueue,{Xo:()=>Promise.resolve(),t_:jI.bind(null,s),r_:UI.bind(null,s),ta:PI.bind(null,s),na:LI.bind(null,s)}),s.da.push((async e=>{e?(s.fa.B_(),await Uh(s)):(await s.fa.stop(),s.Ta.length>0&&(le(Wr,`Stopping write stream with ${s.Ta.length} pending writes`),s.Ta=[]))}))),s.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vp{constructor(e,i,r,l,u){this.asyncQueue=e,this.timerId=i,this.targetTimeMs=r,this.op=l,this.removalCallback=u,this.deferred=new ss,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((f=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,i,r,l,u){const f=Date.now()+r,p=new vp(e,i,f,l,u);return p.start(r),p}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new oe(J.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Ep(s,e){if(ls("AsyncQueue",`${e}: ${s}`),go(s))return new oe(J.UNAVAILABLE,`${e}: ${s}`);throw s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class no{static emptySet(e){return new no(e.comparator)}constructor(e){this.comparator=e?(i,r)=>e(i,r)||me.comparator(i.key,r.key):(i,r)=>me.comparator(i.key,r.key),this.keyedMap=Rl(),this.sortedSet=new ut(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const i=this.keyedMap.get(e);return i?this.sortedSet.indexOf(i):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((i,r)=>(e(i),!1)))}add(e){const i=this.delete(e.key);return i.copy(i.keyedMap.insert(e.key,e),i.sortedSet.insert(e,null))}delete(e){const i=this.get(e);return i?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(i)):this}isEqual(e){if(!(e instanceof no)||this.size!==e.size)return!1;const i=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;i.hasNext();){const l=i.getNext().key,u=r.getNext().key;if(!l.isEqual(u))return!1}return!0}toString(){const e=[];return this.forEach((i=>{e.push(i.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,i){const r=new no;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=i,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mv{constructor(){this.ga=new ut(me.comparator)}track(e){const i=e.doc.key,r=this.ga.get(i);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(i,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(i,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(i,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(i,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(i):e.type===1&&r.type===2?this.ga=this.ga.insert(i,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(i,{type:2,doc:e.doc}):_e(63341,{Rt:e,pa:r}):this.ga=this.ga.insert(i,e)}ya(){const e=[];return this.ga.inorderTraversal(((i,r)=>{e.push(r)})),e}}class uo{constructor(e,i,r,l,u,f,p,y,g){this.query=e,this.docs=i,this.oldDocs=r,this.docChanges=l,this.mutatedKeys=u,this.fromCache=f,this.syncStateChanged=p,this.excludesMetadataChanges=y,this.hasCachedResults=g}static fromInitialDocuments(e,i,r,l,u){const f=[];return i.forEach((p=>{f.push({type:0,doc:p})})),new uo(e,i,no.emptySet(i),f,r,l,!0,!1,u)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Oh(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const i=this.docChanges,r=e.docChanges;if(i.length!==r.length)return!1;for(let l=0;l<i.length;l++)if(i[l].type!==r[l].type||!i[l].doc.isEqual(r[l].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BI{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((e=>e.Da()))}}class qI{constructor(){this.queries=Vv(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(i,r){const l=we(i),u=l.queries;l.queries=Vv(),u.forEach(((f,p)=>{for(const y of p.Sa)y.onError(r)}))})(this,new oe(J.ABORTED,"Firestore shutting down"))}}function Vv(){return new ta((s=>ET(s)),Oh)}async function Tp(s,e){const i=we(s);let r=3;const l=e.query;let u=i.queries.get(l);u?!u.ba()&&e.Da()&&(r=2):(u=new BI,r=e.Da()?0:1);try{switch(r){case 0:u.wa=await i.onListen(l,!0);break;case 1:u.wa=await i.onListen(l,!1);break;case 2:await i.onFirstRemoteStoreListen(l)}}catch(f){const p=Ep(f,`Initialization of query '${Xa(e.query)}' failed`);return void e.onError(p)}i.queries.set(l,u),u.Sa.push(e),e.va(i.onlineState),u.wa&&e.Fa(u.wa)&&Ap(i)}async function bp(s,e){const i=we(s),r=e.query;let l=3;const u=i.queries.get(r);if(u){const f=u.Sa.indexOf(e);f>=0&&(u.Sa.splice(f,1),u.Sa.length===0?l=e.Da()?0:1:!u.ba()&&e.Da()&&(l=2))}switch(l){case 0:return i.queries.delete(r),i.onUnlisten(r,!0);case 1:return i.queries.delete(r),i.onUnlisten(r,!1);case 2:return i.onLastRemoteStoreUnlisten(r);default:return}}function HI(s,e){const i=we(s);let r=!1;for(const l of e){const u=l.query,f=i.queries.get(u);if(f){for(const p of f.Sa)p.Fa(l)&&(r=!0);f.wa=l}}r&&Ap(i)}function FI(s,e,i){const r=we(s),l=r.queries.get(e);if(l)for(const u of l.Sa)u.onError(i);r.queries.delete(e)}function Ap(s){s.Ca.forEach((e=>{e.next()}))}var km,kv;(kv=km||(km={})).Ma="default",kv.Cache="cache";class Sp{constructor(e,i,r){this.query=e,this.xa=i,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){const r=[];for(const l of e.docChanges)l.type!==3&&r.push(l);e=new uo(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let i=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),i=!0):this.La(e,this.onlineState)&&(this.ka(e),i=!0),this.Na=e,i}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let i=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),i=!0),i}La(e,i){if(!e.fromCache||!this.Da())return!0;const r=i!=="Offline";return(!this.options.qa||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||i==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const i=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!i)&&this.options.includeMetadataChanges===!0}ka(e){e=uo.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==km.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t1{constructor(e){this.key=e}}class n1{constructor(e){this.key=e}}class GI{constructor(e,i){this.query=e,this.Ya=i,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=je(),this.mutatedKeys=je(),this.eu=TT(e),this.tu=new no(this.eu)}get nu(){return this.Ya}ru(e,i){const r=i?i.iu:new Mv,l=i?i.tu:this.tu;let u=i?i.mutatedKeys:this.mutatedKeys,f=l,p=!1;const y=this.query.limitType==="F"&&l.size===this.query.limit?l.last():null,g=this.query.limitType==="L"&&l.size===this.query.limit?l.first():null;if(e.inorderTraversal(((T,A)=>{const x=l.get(T),V=Mh(this.query,A)?A:null,q=!!x&&this.mutatedKeys.has(x.key),G=!!V&&(V.hasLocalMutations||this.mutatedKeys.has(V.key)&&V.hasCommittedMutations);let K=!1;x&&V?x.data.isEqual(V.data)?q!==G&&(r.track({type:3,doc:V}),K=!0):this.su(x,V)||(r.track({type:2,doc:V}),K=!0,(y&&this.eu(V,y)>0||g&&this.eu(V,g)<0)&&(p=!0)):!x&&V?(r.track({type:0,doc:V}),K=!0):x&&!V&&(r.track({type:1,doc:x}),K=!0,(y||g)&&(p=!0)),K&&(V?(f=f.add(V),u=G?u.add(T):u.delete(T)):(f=f.delete(T),u=u.delete(T)))})),this.query.limit!==null)for(;f.size>this.query.limit;){const T=this.query.limitType==="F"?f.last():f.first();f=f.delete(T.key),u=u.delete(T.key),r.track({type:1,doc:T})}return{tu:f,iu:r,Cs:p,mutatedKeys:u}}su(e,i){return e.hasLocalMutations&&i.hasCommittedMutations&&!i.hasLocalMutations}applyChanges(e,i,r,l){const u=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const f=e.iu.ya();f.sort(((T,A)=>(function(V,q){const G=K=>{switch(K){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return _e(20277,{Rt:K})}};return G(V)-G(q)})(T.type,A.type)||this.eu(T.doc,A.doc))),this.ou(r),l=l??!1;const p=i&&!l?this._u():[],y=this.Xa.size===0&&this.current&&!l?1:0,g=y!==this.Za;return this.Za=y,f.length!==0||g?{snapshot:new uo(this.query,e.tu,u,f,e.mutatedKeys,y===0,g,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:p}:{au:p}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new Mv,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((i=>this.Ya=this.Ya.add(i))),e.modifiedDocuments.forEach((i=>{})),e.removedDocuments.forEach((i=>this.Ya=this.Ya.delete(i))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=je(),this.tu.forEach((r=>{this.uu(r.key)&&(this.Xa=this.Xa.add(r.key))}));const i=[];return e.forEach((r=>{this.Xa.has(r)||i.push(new n1(r))})),this.Xa.forEach((r=>{e.has(r)||i.push(new t1(r))})),i}cu(e){this.Ya=e.Qs,this.Xa=je();const i=this.ru(e.documents);return this.applyChanges(i,!0)}lu(){return uo.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const wp="SyncEngine";class QI{constructor(e,i,r){this.query=e,this.targetId=i,this.view=r}}class YI{constructor(e){this.key=e,this.hu=!1}}class KI{constructor(e,i,r,l,u,f){this.localStore=e,this.remoteStore=i,this.eventManager=r,this.sharedClientState=l,this.currentUser=u,this.maxConcurrentLimboResolutions=f,this.Pu={},this.Tu=new ta((p=>ET(p)),Oh),this.Iu=new Map,this.Eu=new Set,this.du=new ut(me.comparator),this.Au=new Map,this.Ru=new hp,this.Vu={},this.mu=new Map,this.fu=lo.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function XI(s,e,i=!0){const r=l1(s);let l;const u=r.Tu.get(e);return u?(r.sharedClientState.addLocalQueryTarget(u.targetId),l=u.view.lu()):l=await i1(r,e,i,!0),l}async function $I(s,e){const i=l1(s);await i1(i,e,!0,!1)}async function i1(s,e,i,r){const l=await gI(s.localStore,Ni(e)),u=l.targetId,f=s.sharedClientState.addLocalQueryTarget(u,i);let p;return r&&(p=await JI(s,e,u,f==="current",l.resumeToken)),s.isPrimaryClient&&i&&XT(s.remoteStore,l),p}async function JI(s,e,i,r,l){s.pu=(A,x,V)=>(async function(G,K,ee,te){let ne=K.view.ru(ee);ne.Cs&&(ne=await Rv(G.localStore,K.query,!1).then((({documents:N})=>K.view.ru(N,ne))));const he=te&&te.targetChanges.get(K.targetId),ve=te&&te.targetMismatches.get(K.targetId)!=null,Te=K.view.applyChanges(ne,G.isPrimaryClient,he,ve);return Pv(G,K.targetId,Te.au),Te.snapshot})(s,A,x,V);const u=await Rv(s.localStore,e,!0),f=new GI(e,u.Qs),p=f.ru(u.documents),y=tu.createSynthesizedTargetChangeForCurrentChange(i,r&&s.onlineState!=="Offline",l),g=f.applyChanges(p,s.isPrimaryClient,y);Pv(s,i,g.au);const T=new QI(e,i,f);return s.Tu.set(e,T),s.Iu.has(i)?s.Iu.get(i).push(e):s.Iu.set(i,[e]),g.snapshot}async function ZI(s,e,i){const r=we(s),l=r.Tu.get(e),u=r.Iu.get(l.targetId);if(u.length>1)return r.Iu.set(l.targetId,u.filter((f=>!Oh(f,e)))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(l.targetId),r.sharedClientState.isActiveQueryTarget(l.targetId)||await Mm(r.localStore,l.targetId,!1).then((()=>{r.sharedClientState.clearQueryState(l.targetId),i&&pp(r.remoteStore,l.targetId),jm(r,l.targetId)})).catch(po)):(jm(r,l.targetId),await Mm(r.localStore,l.targetId,!0))}async function WI(s,e){const i=we(s),r=i.Tu.get(e),l=i.Iu.get(r.targetId);i.isPrimaryClient&&l.length===1&&(i.sharedClientState.removeLocalQueryTarget(r.targetId),pp(i.remoteStore,r.targetId))}async function eC(s,e,i){const r=oC(s);try{const l=await(function(f,p){const y=we(f),g=st.now(),T=p.reduce(((V,q)=>V.add(q.key)),je());let A,x;return y.persistence.runTransaction("Locally write mutations","readwrite",(V=>{let q=us(),G=je();return y.Ns.getEntries(V,T).next((K=>{q=K,q.forEach(((ee,te)=>{te.isValidDocument()||(G=G.add(ee))}))})).next((()=>y.localDocuments.getOverlayedDocuments(V,q))).next((K=>{A=K;const ee=[];for(const te of p){const ne=pR(te,A.get(te.key).overlayedDocument);ne!=null&&ee.push(new dr(te.key,ne,fT(ne.value.mapValue),ni.exists(!0)))}return y.mutationQueue.addMutationBatch(V,g,ee,p)})).next((K=>{x=K;const ee=K.applyToLocalDocumentSet(A,G);return y.documentOverlayCache.saveOverlays(V,K.batchId,ee)}))})).then((()=>({batchId:x.batchId,changes:AT(A)})))})(r.localStore,e);r.sharedClientState.addPendingMutation(l.batchId),(function(f,p,y){let g=f.Vu[f.currentUser.toKey()];g||(g=new ut(ke)),g=g.insert(p,y),f.Vu[f.currentUser.toKey()]=g})(r,l.batchId,i),await iu(r,l.changes),await Uh(r.remoteStore)}catch(l){const u=Ep(l,"Failed to persist write");i.reject(u)}}async function s1(s,e){const i=we(s);try{const r=await dI(i.localStore,e);e.targetChanges.forEach(((l,u)=>{const f=i.Au.get(u);f&&(Ge(l.addedDocuments.size+l.modifiedDocuments.size+l.removedDocuments.size<=1,22616),l.addedDocuments.size>0?f.hu=!0:l.modifiedDocuments.size>0?Ge(f.hu,14607):l.removedDocuments.size>0&&(Ge(f.hu,42227),f.hu=!1))})),await iu(i,r,e)}catch(r){await po(r)}}function jv(s,e,i){const r=we(s);if(r.isPrimaryClient&&i===0||!r.isPrimaryClient&&i===1){const l=[];r.Tu.forEach(((u,f)=>{const p=f.view.va(e);p.snapshot&&l.push(p.snapshot)})),(function(f,p){const y=we(f);y.onlineState=p;let g=!1;y.queries.forEach(((T,A)=>{for(const x of A.Sa)x.va(p)&&(g=!0)})),g&&Ap(y)})(r.eventManager,e),l.length&&r.Pu.H_(l),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function tC(s,e,i){const r=we(s);r.sharedClientState.updateQueryState(e,"rejected",i);const l=r.Au.get(e),u=l&&l.key;if(u){let f=new ut(me.comparator);f=f.insert(u,en.newNoDocument(u,Ae.min()));const p=je().add(u),y=new jh(Ae.min(),new Map,new ut(ke),f,p);await s1(r,y),r.du=r.du.remove(u),r.Au.delete(e),xp(r)}else await Mm(r.localStore,e,!1).then((()=>jm(r,e,i))).catch(po)}async function nC(s,e){const i=we(s),r=e.batch.batchId;try{const l=await fI(i.localStore,e);a1(i,r,null),r1(i,r),i.sharedClientState.updateMutationState(r,"acknowledged"),await iu(i,l)}catch(l){await po(l)}}async function iC(s,e,i){const r=we(s);try{const l=await(function(f,p){const y=we(f);return y.persistence.runTransaction("Reject batch","readwrite-primary",(g=>{let T;return y.mutationQueue.lookupMutationBatch(g,p).next((A=>(Ge(A!==null,37113),T=A.keys(),y.mutationQueue.removeMutationBatch(g,A)))).next((()=>y.mutationQueue.performConsistencyCheck(g))).next((()=>y.documentOverlayCache.removeOverlaysForBatchId(g,T,p))).next((()=>y.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(g,T))).next((()=>y.localDocuments.getDocuments(g,T)))}))})(r.localStore,e);a1(r,e,i),r1(r,e),r.sharedClientState.updateMutationState(e,"rejected",i),await iu(r,l)}catch(l){await po(l)}}function r1(s,e){(s.mu.get(e)||[]).forEach((i=>{i.resolve()})),s.mu.delete(e)}function a1(s,e,i){const r=we(s);let l=r.Vu[r.currentUser.toKey()];if(l){const u=l.get(e);u&&(i?u.reject(i):u.resolve(),l=l.remove(e)),r.Vu[r.currentUser.toKey()]=l}}function jm(s,e,i=null){s.sharedClientState.removeLocalQueryTarget(e);for(const r of s.Iu.get(e))s.Tu.delete(r),i&&s.Pu.yu(r,i);s.Iu.delete(e),s.isPrimaryClient&&s.Ru.jr(e).forEach((r=>{s.Ru.containsKey(r)||o1(s,r)}))}function o1(s,e){s.Eu.delete(e.path.canonicalString());const i=s.du.get(e);i!==null&&(pp(s.remoteStore,i),s.du=s.du.remove(e),s.Au.delete(i),xp(s))}function Pv(s,e,i){for(const r of i)r instanceof t1?(s.Ru.addReference(r.key,e),sC(s,r)):r instanceof n1?(le(wp,"Document no longer in limbo: "+r.key),s.Ru.removeReference(r.key,e),s.Ru.containsKey(r.key)||o1(s,r.key)):_e(19791,{wu:r})}function sC(s,e){const i=e.key,r=i.path.canonicalString();s.du.get(i)||s.Eu.has(r)||(le(wp,"New document in limbo: "+i),s.Eu.add(r),xp(s))}function xp(s){for(;s.Eu.size>0&&s.du.size<s.maxConcurrentLimboResolutions;){const e=s.Eu.values().next().value;s.Eu.delete(e);const i=new me(tt.fromString(e)),r=s.fu.next();s.Au.set(r,new YI(i)),s.du=s.du.insert(i,r),XT(s.remoteStore,new $s(Ni(Dh(i.path)),r,"TargetPurposeLimboResolution",Ih.ce))}}async function iu(s,e,i){const r=we(s),l=[],u=[],f=[];r.Tu.isEmpty()||(r.Tu.forEach(((p,y)=>{f.push(r.pu(y,e,i).then((g=>{if((g||i)&&r.isPrimaryClient){const T=g?!g.fromCache:i?.targetChanges.get(y.targetId)?.current;r.sharedClientState.updateQueryState(y.targetId,T?"current":"not-current")}if(g){l.push(g);const T=dp.As(y.targetId,g);u.push(T)}})))})),await Promise.all(f),r.Pu.H_(l),await(async function(y,g){const T=we(y);try{await T.persistence.runTransaction("notifyLocalViewChanges","readwrite",(A=>W.forEach(g,(x=>W.forEach(x.Es,(V=>T.persistence.referenceDelegate.addReference(A,x.targetId,V))).next((()=>W.forEach(x.ds,(V=>T.persistence.referenceDelegate.removeReference(A,x.targetId,V)))))))))}catch(A){if(!go(A))throw A;le(mp,"Failed to update sequence numbers: "+A)}for(const A of g){const x=A.targetId;if(!A.fromCache){const V=T.Ms.get(x),q=V.snapshotVersion,G=V.withLastLimboFreeSnapshotVersion(q);T.Ms=T.Ms.insert(x,G)}}})(r.localStore,u))}async function rC(s,e){const i=we(s);if(!i.currentUser.isEqual(e)){le(wp,"User change. New user:",e.toKey());const r=await GT(i.localStore,e);i.currentUser=e,(function(u,f){u.mu.forEach((p=>{p.forEach((y=>{y.reject(new oe(J.CANCELLED,f))}))})),u.mu.clear()})(i,"'waitForPendingWrites' promise is rejected due to a user change."),i.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await iu(i,r.Ls)}}function aC(s,e){const i=we(s),r=i.Au.get(e);if(r&&r.hu)return je().add(r.key);{let l=je();const u=i.Iu.get(e);if(!u)return l;for(const f of u){const p=i.Tu.get(f);l=l.unionWith(p.view.nu)}return l}}function l1(s){const e=we(s);return e.remoteStore.remoteSyncer.applyRemoteEvent=s1.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=aC.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=tC.bind(null,e),e.Pu.H_=HI.bind(null,e.eventManager),e.Pu.yu=FI.bind(null,e.eventManager),e}function oC(s){const e=we(s);return e.remoteStore.remoteSyncer.applySuccessfulWrite=nC.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=iC.bind(null,e),e}class gh{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Ph(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,i){return null}Mu(e,i){return null}vu(e){return hI(this.persistence,new lI,e.initialUser,this.serializer)}Cu(e){return new FT(fp.mi,this.serializer)}Du(e){return new _I}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}gh.provider={build:()=>new gh};class lC extends gh{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,i){Ge(this.persistence.referenceDelegate instanceof mh,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new YR(r,e.asyncQueue,i)}Cu(e){const i=this.cacheSizeBytes!==void 0?dn.withCacheSize(this.cacheSizeBytes):dn.DEFAULT;return new FT((r=>mh.mi(r,i)),this.serializer)}}class Pm{async initialize(e,i){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(i),this.remoteStore=this.createRemoteStore(i),this.eventManager=this.createEventManager(i),this.syncEngine=this.createSyncEngine(i,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>jv(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=rC.bind(null,this.syncEngine),await zI(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new qI})()}createDatastore(e){const i=Ph(e.databaseInfo.databaseId),r=(function(u){return new AI(u)})(e.databaseInfo);return(function(u,f,p,y){return new RI(u,f,p,y)})(e.authCredentials,e.appCheckCredentials,r,i)}createRemoteStore(e){return(function(r,l,u,f,p){return new CI(r,l,u,f,p)})(this.localStore,this.datastore,e.asyncQueue,(i=>jv(this.syncEngine,i,0)),(function(){return Nv.v()?new Nv:new vI})())}createSyncEngine(e,i){return(function(l,u,f,p,y,g,T){const A=new KI(l,u,f,p,y,g);return T&&(A.gu=!0),A})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,i)}async terminate(){await(async function(i){const r=we(i);le(Wr,"RemoteStore shutting down."),r.Ea.add(5),await nu(r),r.Aa.shutdown(),r.Ra.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}Pm.provider={build:()=>new Pm};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rp{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):ls("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,i){setTimeout((()=>{this.muted||e(i)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lr="FirestoreClient";class uC{constructor(e,i,r,l,u){this.authCredentials=e,this.appCheckCredentials=i,this.asyncQueue=r,this.databaseInfo=l,this.user=Wt.UNAUTHENTICATED,this.clientId=tp.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=u,this.authCredentials.start(r,(async f=>{le(lr,"Received user=",f.uid),await this.authCredentialListener(f),this.user=f})),this.appCheckCredentials.start(r,(f=>(le(lr,"Received new app check token=",f),this.appCheckCredentialListener(f,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new ss;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(i){const r=Ep(i,"Failed to shutdown persistence");e.reject(r)}})),e.promise}}async function cm(s,e){s.asyncQueue.verifyOperationInProgress(),le(lr,"Initializing OfflineComponentProvider");const i=s.configuration;await e.initialize(i);let r=i.initialUser;s.setCredentialChangeListener((async l=>{r.isEqual(l)||(await GT(e.localStore,l),r=l)})),e.persistence.setDatabaseDeletedListener((()=>s.terminate())),s._offlineComponents=e}async function Lv(s,e){s.asyncQueue.verifyOperationInProgress();const i=await cC(s);le(lr,"Initializing OnlineComponentProvider"),await e.initialize(i,s.configuration),s.setCredentialChangeListener((r=>Ov(e.remoteStore,r))),s.setAppCheckTokenChangeListener(((r,l)=>Ov(e.remoteStore,l))),s._onlineComponents=e}async function cC(s){if(!s._offlineComponents)if(s._uninitializedComponentsProvider){le(lr,"Using user provided OfflineComponentProvider");try{await cm(s,s._uninitializedComponentsProvider._offline)}catch(e){const i=e;if(!(function(l){return l.name==="FirebaseError"?l.code===J.FAILED_PRECONDITION||l.code===J.UNIMPLEMENTED:!(typeof DOMException<"u"&&l instanceof DOMException)||l.code===22||l.code===20||l.code===11})(i))throw i;so("Error using user provided cache. Falling back to memory cache: "+i),await cm(s,new gh)}}else le(lr,"Using default OfflineComponentProvider"),await cm(s,new lC(void 0));return s._offlineComponents}async function u1(s){return s._onlineComponents||(s._uninitializedComponentsProvider?(le(lr,"Using user provided OnlineComponentProvider"),await Lv(s,s._uninitializedComponentsProvider._online)):(le(lr,"Using default OnlineComponentProvider"),await Lv(s,new Pm))),s._onlineComponents}function hC(s){return u1(s).then((e=>e.syncEngine))}async function yh(s){const e=await u1(s),i=e.eventManager;return i.onListen=XI.bind(null,e.syncEngine),i.onUnlisten=ZI.bind(null,e.syncEngine),i.onFirstRemoteStoreListen=$I.bind(null,e.syncEngine),i.onLastRemoteStoreUnlisten=WI.bind(null,e.syncEngine),i}function fC(s,e,i={}){const r=new ss;return s.asyncQueue.enqueueAndForget((async()=>(function(u,f,p,y,g){const T=new Rp({next:x=>{T.Nu(),f.enqueueAndForget((()=>bp(u,A)));const V=x.docs.has(p);!V&&x.fromCache?g.reject(new oe(J.UNAVAILABLE,"Failed to get document because the client is offline.")):V&&x.fromCache&&y&&y.source==="server"?g.reject(new oe(J.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):g.resolve(x)},error:x=>g.reject(x)}),A=new Sp(Dh(p.path),T,{includeMetadataChanges:!0,qa:!0});return Tp(u,A)})(await yh(s),s.asyncQueue,e,i,r))),r.promise}function dC(s,e,i={}){const r=new ss;return s.asyncQueue.enqueueAndForget((async()=>(function(u,f,p,y,g){const T=new Rp({next:x=>{T.Nu(),f.enqueueAndForget((()=>bp(u,A))),x.fromCache&&y.source==="server"?g.reject(new oe(J.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):g.resolve(x)},error:x=>g.reject(x)}),A=new Sp(p,T,{includeMetadataChanges:!0,qa:!0});return Tp(u,A)})(await yh(s),s.asyncQueue,e,i,r))),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function c1(s){const e={};return s.timeoutSeconds!==void 0&&(e.timeoutSeconds=s.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Uv=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const h1="firestore.googleapis.com",zv=!0;class Bv{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new oe(J.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=h1,this.ssl=zv}else this.host=e.host,this.ssl=e.ssl??zv;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=HT;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<GR)throw new oe(J.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}Ix("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=c1(e.experimentalLongPollingOptions??{}),(function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new oe(J.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new oe(J.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new oe(J.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(r,l){return r.timeoutSeconds===l.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class zh{constructor(e,i,r,l){this._authCredentials=e,this._appCheckCredentials=i,this._databaseId=r,this._app=l,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Bv({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new oe(J.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new oe(J.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Bv(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(r){if(!r)return new _x;switch(r.type){case"firstParty":return new bx(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new oe(J.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(i){const r=Uv.get(i);r&&(le("ComponentProvider","Removing Datastore"),Uv.delete(i),r.terminate())})(this),Promise.resolve()}}function mC(s,e,i,r={}){s=wn(s,zh);const l=co(e),u=s._getSettings(),f={...u,emulatorOptions:s._getEmulatorOptions()},p=`${e}:${i}`;l&&(rE(`https://${p}`),aE("Firestore",!0)),u.host!==h1&&u.host!==p&&so("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const y={...u,host:p,ssl:l,emulatorOptions:r};if(!Xr(y,f)&&(s._setSettings(y),r.mockUserToken)){let g,T;if(typeof r.mockUserToken=="string")g=r.mockUserToken,T=Wt.MOCK_USER;else{g=RA(r.mockUserToken,s._app?.options.projectId);const A=r.mockUserToken.sub||r.mockUserToken.user_id;if(!A)throw new oe(J.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");T=new Wt(A)}s._authCredentials=new vx(new eT(g,T))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ia{constructor(e,i,r){this.converter=i,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new ia(this.firestore,e,this._query)}}class ft{constructor(e,i,r){this.converter=i,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new tr(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new ft(this.firestore,e,this._key)}toJSON(){return{type:ft._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,i,r){if(Zl(i,ft._jsonSchema))return new ft(e,r||null,new me(tt.fromString(i.referencePath)))}}ft._jsonSchemaVersion="firestore/documentReference/1.0",ft._jsonSchema={type:Nt("string",ft._jsonSchemaVersion),referencePath:Nt("string")};class tr extends ia{constructor(e,i,r){super(e,i,Dh(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new ft(this.firestore,null,new me(e))}withConverter(e){return new tr(this.firestore,e,this._path)}}function Bn(s,e,...i){if(s=Pt(s),tT("collection","path",e),s instanceof zh){const r=tt.fromString(e,...i);return ev(r),new tr(s,null,r)}{if(!(s instanceof ft||s instanceof tr))throw new oe(J.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=s._path.child(tt.fromString(e,...i));return ev(r),new tr(s.firestore,null,r)}}function rs(s,e,...i){if(s=Pt(s),arguments.length===1&&(e=tp.newId()),tT("doc","path",e),s instanceof zh){const r=tt.fromString(e,...i);return W0(r),new ft(s,null,new me(r))}{if(!(s instanceof ft||s instanceof tr))throw new oe(J.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=s._path.child(tt.fromString(e,...i));return W0(r),new ft(s.firestore,s instanceof tr?s.converter:null,new me(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qv="AsyncQueue";class Hv{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new YT(this,"async_queue_retry"),this._c=()=>{const r=um();r&&le(qv,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;const i=um();i&&typeof i.addEventListener=="function"&&i.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const i=um();i&&typeof i.removeEventListener=="function"&&i.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const i=new ss;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(i.resolve,i.reject),i.promise))).then((()=>i.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!go(e))throw e;le(qv,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const i=this.ac.then((()=>(this.rc=!0,e().catch((r=>{throw this.nc=r,this.rc=!1,ls("INTERNAL UNHANDLED ERROR: ",Fv(r)),r})).then((r=>(this.rc=!1,r))))));return this.ac=i,i}enqueueAfterDelay(e,i,r){this.uc(),this.oc.indexOf(e)>-1&&(i=0);const l=vp.createAndSchedule(this,e,i,r,(u=>this.hc(u)));return this.tc.push(l),l}uc(){this.nc&&_e(47125,{Pc:Fv(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const i of this.tc)if(i.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((i,r)=>i.targetTimeMs-r.targetTimeMs));for(const i of this.tc)if(i.skipDelay(),e!=="all"&&i.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){const i=this.tc.indexOf(e);this.tc.splice(i,1)}}function Fv(s){let e=s.message||"";return s.stack&&(e=s.stack.includes(s.message)?s.stack:s.message+`
`+s.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gv(s){return(function(i,r){if(typeof i!="object"||i===null)return!1;const l=i;for(const u of r)if(u in l&&typeof l[u]=="function")return!0;return!1})(s,["next","error","complete"])}class ur extends zh{constructor(e,i,r,l){super(e,i,r,l),this.type="firestore",this._queue=new Hv,this._persistenceKey=l?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Hv(e),this._firestoreClient=void 0,await e}}}function pC(s,e){const i=typeof s=="object"?s:cE(),r=typeof s=="string"?s:lh,l=Gm(i,"firestore").getImmediate({identifier:r});if(!l._initialized){const u=wA("firestore");u&&mC(l,...u)}return l}function Bh(s){if(s._terminated)throw new oe(J.FAILED_PRECONDITION,"The client has already been terminated.");return s._firestoreClient||gC(s),s._firestoreClient}function gC(s){const e=s._freezeSettings(),i=(function(l,u,f,p){return new Ux(l,u,f,p.host,p.ssl,p.experimentalForceLongPolling,p.experimentalAutoDetectLongPolling,c1(p.experimentalLongPollingOptions),p.useFetchStreams,p.isUsingEmulator)})(s._databaseId,s._app?.options.appId||"",s._persistenceKey,e);s._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(s._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),s._firestoreClient=new uC(s._authCredentials,s._appCheckCredentials,s._queue,i,s._componentsProvider&&(function(l){const u=l?._online.build();return{_offline:l?._offline.build(u),_online:u}})(s._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zn{constructor(e){this._byteString=e}static fromBase64String(e){try{return new zn($t.fromBase64String(e))}catch(i){throw new oe(J.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+i)}}static fromUint8Array(e){return new zn($t.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:zn._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Zl(e,zn._jsonSchema))return zn.fromBase64String(e.bytes)}}zn._jsonSchemaVersion="firestore/bytes/1.0",zn._jsonSchema={type:Nt("string",zn._jsonSchemaVersion),bytes:Nt("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qh{constructor(...e){for(let i=0;i<e.length;++i)if(e[i].length===0)throw new oe(J.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Xt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hh{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oi{constructor(e,i){if(!isFinite(e)||e<-90||e>90)throw new oe(J.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(i)||i<-180||i>180)throw new oe(J.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+i);this._lat=e,this._long=i}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return ke(this._lat,e._lat)||ke(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Oi._jsonSchemaVersion}}static fromJSON(e){if(Zl(e,Oi._jsonSchema))return new Oi(e.latitude,e.longitude)}}Oi._jsonSchemaVersion="firestore/geoPoint/1.0",Oi._jsonSchema={type:Nt("string",Oi._jsonSchemaVersion),latitude:Nt("number"),longitude:Nt("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mi{constructor(e){this._values=(e||[]).map((i=>i))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(r,l){if(r.length!==l.length)return!1;for(let u=0;u<r.length;++u)if(r[u]!==l[u])return!1;return!0})(this._values,e._values)}toJSON(){return{type:Mi._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Zl(e,Mi._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((i=>typeof i=="number")))return new Mi(e.vectorValues);throw new oe(J.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Mi._jsonSchemaVersion="firestore/vectorValue/1.0",Mi._jsonSchema={type:Nt("string",Mi._jsonSchemaVersion),vectorValues:Nt("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yC=/^__.*__$/;class _C{constructor(e,i,r){this.data=e,this.fieldMask=i,this.fieldTransforms=r}toMutation(e,i){return this.fieldMask!==null?new dr(e,this.data,this.fieldMask,i,this.fieldTransforms):new eu(e,this.data,i,this.fieldTransforms)}}class f1{constructor(e,i,r){this.data=e,this.fieldMask=i,this.fieldTransforms=r}toMutation(e,i){return new dr(e,this.data,this.fieldMask,i,this.fieldTransforms)}}function d1(s){switch(s){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw _e(40011,{Ac:s})}}class Ip{constructor(e,i,r,l,u,f){this.settings=e,this.databaseId=i,this.serializer=r,this.ignoreUndefinedProperties=l,u===void 0&&this.Rc(),this.fieldTransforms=u||[],this.fieldMask=f||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new Ip({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){const i=this.path?.child(e),r=this.Vc({path:i,fc:!1});return r.gc(e),r}yc(e){const i=this.path?.child(e),r=this.Vc({path:i,fc:!1});return r.Rc(),r}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return _h(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find((i=>e.isPrefixOf(i)))!==void 0||this.fieldTransforms.find((i=>e.isPrefixOf(i.field)))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(d1(this.Ac)&&yC.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class vC{constructor(e,i,r){this.databaseId=e,this.ignoreUndefinedProperties=i,this.serializer=r||Ph(e)}Cc(e,i,r,l=!1){return new Ip({Ac:e,methodName:i,Dc:r,path:Xt.emptyPath(),fc:!1,bc:l},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Fh(s){const e=s._freezeSettings(),i=Ph(s._databaseId);return new vC(s._databaseId,!!e.ignoreUndefinedProperties,i)}function m1(s,e,i,r,l,u={}){const f=s.Cc(u.merge||u.mergeFields?2:0,e,i,l);Np("Data must be an object, but it was:",f,r);const p=p1(r,f);let y,g;if(u.merge)y=new Sn(f.fieldMask),g=f.fieldTransforms;else if(u.mergeFields){const T=[];for(const A of u.mergeFields){const x=Lm(e,A,i);if(!f.contains(x))throw new oe(J.INVALID_ARGUMENT,`Field '${x}' is specified in your field mask but missing from your input data.`);y1(T,x)||T.push(x)}y=new Sn(T),g=f.fieldTransforms.filter((A=>y.covers(A.field)))}else y=null,g=f.fieldTransforms;return new _C(new mn(p),y,g)}class Gh extends Hh{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Gh}}class Cp extends Hh{_toFieldTransform(e){return new hR(e.path,new Hl)}isEqual(e){return e instanceof Cp}}function EC(s,e,i,r){const l=s.Cc(1,e,i);Np("Data must be an object, but it was:",l,r);const u=[],f=mn.empty();fr(r,((y,g)=>{const T=Dp(e,y,i);g=Pt(g);const A=l.yc(T);if(g instanceof Gh)u.push(T);else{const x=su(g,A);x!=null&&(u.push(T),f.set(T,x))}}));const p=new Sn(u);return new f1(f,p,l.fieldTransforms)}function TC(s,e,i,r,l,u){const f=s.Cc(1,e,i),p=[Lm(e,r,i)],y=[l];if(u.length%2!=0)throw new oe(J.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let x=0;x<u.length;x+=2)p.push(Lm(e,u[x])),y.push(u[x+1]);const g=[],T=mn.empty();for(let x=p.length-1;x>=0;--x)if(!y1(g,p[x])){const V=p[x];let q=y[x];q=Pt(q);const G=f.yc(V);if(q instanceof Gh)g.push(V);else{const K=su(q,G);K!=null&&(g.push(V),T.set(V,K))}}const A=new Sn(g);return new f1(T,A,f.fieldTransforms)}function bC(s,e,i,r=!1){return su(i,s.Cc(r?4:3,e))}function su(s,e){if(g1(s=Pt(s)))return Np("Unsupported field value:",e,s),p1(s,e);if(s instanceof Hh)return(function(r,l){if(!d1(l.Ac))throw l.Sc(`${r._methodName}() can only be used with update() and set()`);if(!l.path)throw l.Sc(`${r._methodName}() is not currently supported inside arrays`);const u=r._toFieldTransform(l);u&&l.fieldTransforms.push(u)})(s,e),null;if(s===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),s instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(r,l){const u=[];let f=0;for(const p of r){let y=su(p,l.wc(f));y==null&&(y={nullValue:"NULL_VALUE"}),u.push(y),f++}return{arrayValue:{values:u}}})(s,e)}return(function(r,l){if((r=Pt(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return lR(l.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const u=st.fromDate(r);return{timestampValue:dh(l.serializer,u)}}if(r instanceof st){const u=new st(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:dh(l.serializer,u)}}if(r instanceof Oi)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof zn)return{bytesValue:jT(l.serializer,r._byteString)};if(r instanceof ft){const u=l.databaseId,f=r.firestore._databaseId;if(!f.isEqual(u))throw l.Sc(`Document reference is for database ${f.projectId}/${f.database} but should be for database ${u.projectId}/${u.database}`);return{referenceValue:cp(r.firestore._databaseId||l.databaseId,r._key.path)}}if(r instanceof Mi)return(function(f,p){return{mapValue:{fields:{[cT]:{stringValue:hT},[uh]:{arrayValue:{values:f.toArray().map((g=>{if(typeof g!="number")throw p.Sc("VectorValues must only contain numeric values.");return op(p.serializer,g)}))}}}}}})(r,l);throw l.Sc(`Unsupported field value: ${Rh(r)}`)})(s,e)}function p1(s,e){const i={};return sT(s)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):fr(s,((r,l)=>{const u=su(l,e.mc(r));u!=null&&(i[r]=u)})),{mapValue:{fields:i}}}function g1(s){return!(typeof s!="object"||s===null||s instanceof Array||s instanceof Date||s instanceof st||s instanceof Oi||s instanceof zn||s instanceof ft||s instanceof Hh||s instanceof Mi)}function Np(s,e,i){if(!g1(i)||!nT(i)){const r=Rh(i);throw r==="an object"?e.Sc(s+" a custom object"):e.Sc(s+" "+r)}}function Lm(s,e,i){if((e=Pt(e))instanceof qh)return e._internalPath;if(typeof e=="string")return Dp(s,e);throw _h("Field path arguments must be of type string or ",s,!1,void 0,i)}const AC=new RegExp("[~\\*/\\[\\]]");function Dp(s,e,i){if(e.search(AC)>=0)throw _h(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,s,!1,void 0,i);try{return new qh(...e.split("."))._internalPath}catch{throw _h(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,s,!1,void 0,i)}}function _h(s,e,i,r,l){const u=r&&!r.isEmpty(),f=l!==void 0;let p=`Function ${e}() called with invalid data`;i&&(p+=" (via `toFirestore()`)"),p+=". ";let y="";return(u||f)&&(y+=" (found",u&&(y+=` in field ${r}`),f&&(y+=` in document ${l}`),y+=")"),new oe(J.INVALID_ARGUMENT,p+s+y)}function y1(s,e){return s.some((i=>i.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _1{constructor(e,i,r,l,u){this._firestore=e,this._userDataWriter=i,this._key=r,this._document=l,this._converter=u}get id(){return this._key.path.lastSegment()}get ref(){return new ft(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new SC(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const i=this._document.data.field(v1("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i)}}}class SC extends _1{data(){return super.data()}}function v1(s,e){return typeof e=="string"?Dp(s,e):e instanceof qh?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function E1(s){if(s.limitType==="L"&&s.explicitOrderBy.length===0)throw new oe(J.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Op{}class wC extends Op{}function ru(s,e,...i){let r=[];e instanceof Op&&r.push(e),r=r.concat(i),(function(u){const f=u.filter((y=>y instanceof Vp)).length,p=u.filter((y=>y instanceof Mp)).length;if(f>1||f>0&&p>0)throw new oe(J.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(r);for(const l of r)s=l._apply(s);return s}class Mp extends wC{constructor(e,i,r){super(),this._field=e,this._op=i,this._value=r,this.type="where"}static _create(e,i,r){return new Mp(e,i,r)}_apply(e){const i=this._parse(e);return T1(e._query,i),new ia(e.firestore,e.converter,Rm(e._query,i))}_parse(e){const i=Fh(e.firestore);return(function(u,f,p,y,g,T,A){let x;if(g.isKeyField()){if(T==="array-contains"||T==="array-contains-any")throw new oe(J.INVALID_ARGUMENT,`Invalid Query. You can't perform '${T}' queries on documentId().`);if(T==="in"||T==="not-in"){Yv(A,T);const q=[];for(const G of A)q.push(Qv(y,u,G));x={arrayValue:{values:q}}}else x=Qv(y,u,A)}else T!=="in"&&T!=="not-in"&&T!=="array-contains-any"||Yv(A,T),x=bC(p,f,A,T==="in"||T==="not-in");return Ct.create(g,T,x)})(e._query,"where",i,e.firestore._databaseId,this._field,this._op,this._value)}}class Vp extends Op{constructor(e,i){super(),this.type=e,this._queryConstraints=i}static _create(e,i){return new Vp(e,i)}_parse(e){const i=this._queryConstraints.map((r=>r._parse(e))).filter((r=>r.getFilters().length>0));return i.length===1?i[0]:si.create(i,this._getOperator())}_apply(e){const i=this._parse(e);return i.getFilters().length===0?e:((function(l,u){let f=l;const p=u.getFlattenedFilters();for(const y of p)T1(f,y),f=Rm(f,y)})(e._query,i),new ia(e.firestore,e.converter,Rm(e._query,i)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}function Qv(s,e,i){if(typeof(i=Pt(i))=="string"){if(i==="")throw new oe(J.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!vT(e)&&i.indexOf("/")!==-1)throw new oe(J.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${i}' contains a '/' character.`);const r=e.path.child(tt.fromString(i));if(!me.isDocumentKey(r))throw new oe(J.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return lv(s,new me(r))}if(i instanceof ft)return lv(s,i._key);throw new oe(J.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Rh(i)}.`)}function Yv(s,e){if(!Array.isArray(s)||s.length===0)throw new oe(J.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function T1(s,e){const i=(function(l,u){for(const f of l)for(const p of f.getFlattenedFilters())if(u.indexOf(p.op)>=0)return p.op;return null})(s.filters,(function(l){switch(l){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(i!==null)throw i===e.op?new oe(J.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new oe(J.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${i.toString()}' filters.`)}class xC{convertValue(e,i="none"){switch(ar(e)){case 0:return null;case 1:return e.booleanValue;case 2:return yt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,i);case 5:return e.stringValue;case 6:return this.convertBytes(rr(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,i);case 11:return this.convertObject(e.mapValue,i);case 10:return this.convertVectorValue(e.mapValue);default:throw _e(62114,{value:e})}}convertObject(e,i){return this.convertObjectMap(e.fields,i)}convertObjectMap(e,i="none"){const r={};return fr(e,((l,u)=>{r[l]=this.convertValue(u,i)})),r}convertVectorValue(e){const i=e.fields?.[uh].arrayValue?.values?.map((r=>yt(r.doubleValue)));return new Mi(i)}convertGeoPoint(e){return new Oi(yt(e.latitude),yt(e.longitude))}convertArray(e,i){return(e.values||[]).map((r=>this.convertValue(r,i)))}convertServerTimestamp(e,i){switch(i){case"previous":const r=Nh(e);return r==null?null:this.convertValue(r,i);case"estimate":return this.convertTimestamp(zl(e));default:return null}}convertTimestamp(e){const i=sr(e);return new st(i.seconds,i.nanos)}convertDocumentKey(e,i){const r=tt.fromString(e);Ge(qT(r),9688,{name:e});const l=new Bl(r.get(1),r.get(3)),u=new me(r.popFirst(5));return l.isEqual(i)||ls(`Document ${u} contains a document reference within a different database (${l.projectId}/${l.database}) which is not supported. It will be treated as a reference in the current database (${i.projectId}/${i.database}) instead.`),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function b1(s,e,i){let r;return r=s?s.toFirestore(e):e,r}class Cl{constructor(e,i){this.hasPendingWrites=e,this.fromCache=i}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Yr extends _1{constructor(e,i,r,l,u,f){super(e,i,r,l,f),this._firestore=e,this._firestoreImpl=e,this.metadata=u}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const i=new Zc(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(i,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,i={}){if(this._document){const r=this._document.data.field(v1("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,i.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new oe(J.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,i={};return i.type=Yr._jsonSchemaVersion,i.bundle="",i.bundleSource="DocumentSnapshot",i.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?i:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),i.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),i)}}Yr._jsonSchemaVersion="firestore/documentSnapshot/1.0",Yr._jsonSchema={type:Nt("string",Yr._jsonSchemaVersion),bundleSource:Nt("string","DocumentSnapshot"),bundleName:Nt("string"),bundle:Nt("string")};class Zc extends Yr{data(e={}){return super.data(e)}}class Kr{constructor(e,i,r,l){this._firestore=e,this._userDataWriter=i,this._snapshot=l,this.metadata=new Cl(l.hasPendingWrites,l.fromCache),this.query=r}get docs(){const e=[];return this.forEach((i=>e.push(i))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,i){this._snapshot.docs.forEach((r=>{e.call(i,new Zc(this._firestore,this._userDataWriter,r.key,r,new Cl(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const i=!!e.includeMetadataChanges;if(i&&this._snapshot.excludesMetadataChanges)throw new oe(J.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===i||(this._cachedChanges=(function(l,u){if(l._snapshot.oldDocs.isEmpty()){let f=0;return l._snapshot.docChanges.map((p=>{const y=new Zc(l._firestore,l._userDataWriter,p.doc.key,p.doc,new Cl(l._snapshot.mutatedKeys.has(p.doc.key),l._snapshot.fromCache),l.query.converter);return p.doc,{type:"added",doc:y,oldIndex:-1,newIndex:f++}}))}{let f=l._snapshot.oldDocs;return l._snapshot.docChanges.filter((p=>u||p.type!==3)).map((p=>{const y=new Zc(l._firestore,l._userDataWriter,p.doc.key,p.doc,new Cl(l._snapshot.mutatedKeys.has(p.doc.key),l._snapshot.fromCache),l.query.converter);let g=-1,T=-1;return p.type!==0&&(g=f.indexOf(p.doc.key),f=f.delete(p.doc.key)),p.type!==1&&(f=f.add(p.doc),T=f.indexOf(p.doc.key)),{type:RC(p.type),doc:y,oldIndex:g,newIndex:T}}))}})(this,i),this._cachedChangesIncludeMetadataChanges=i),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new oe(J.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Kr._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=tp.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const i=[],r=[],l=[];return this.docs.forEach((u=>{u._document!==null&&(i.push(u._document),r.push(this._userDataWriter.convertObjectMap(u._document.data.value.mapValue.fields,"previous")),l.push(u.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function RC(s){switch(s){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return _e(61501,{type:s})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vh(s){s=wn(s,ft);const e=wn(s.firestore,ur);return fC(Bh(e),s._key).then((i=>A1(e,s,i)))}Kr._jsonSchemaVersion="firestore/querySnapshot/1.0",Kr._jsonSchema={type:Nt("string",Kr._jsonSchemaVersion),bundleSource:Nt("string","QuerySnapshot"),bundleName:Nt("string"),bundle:Nt("string")};class kp extends xC{constructor(e){super(),this.firestore=e}convertBytes(e){return new zn(e)}convertReference(e){const i=this.convertDocumentKey(e,this.firestore._databaseId);return new ft(this.firestore,null,i)}}function jp(s){s=wn(s,ia);const e=wn(s.firestore,ur),i=Bh(e),r=new kp(e);return E1(s._query),dC(i,s._query).then((l=>new Kr(e,r,s,l)))}function IC(s,e,i){s=wn(s,ft);const r=wn(s.firestore,ur),l=b1(s.converter,e);return Lp(r,[m1(Fh(r),"setDoc",s._key,l,s.converter!==null,i).toMutation(s._key,ni.none())])}function Pp(s,e,i,...r){s=wn(s,ft);const l=wn(s.firestore,ur),u=Fh(l);let f;return f=typeof(e=Pt(e))=="string"||e instanceof qh?TC(u,"updateDoc",s._key,e,i,r):EC(u,"updateDoc",s._key,e),Lp(l,[f.toMutation(s._key,ni.exists(!0))])}function Qh(s,e){const i=wn(s.firestore,ur),r=rs(s),l=b1(s.converter,e);return Lp(i,[m1(Fh(s.firestore),"addDoc",r._key,l,s.converter!==null,{}).toMutation(r._key,ni.exists(!1))]).then((()=>r))}function au(s,...e){s=Pt(s);let i={includeMetadataChanges:!1,source:"default"},r=0;typeof e[r]!="object"||Gv(e[r])||(i=e[r++]);const l={includeMetadataChanges:i.includeMetadataChanges,source:i.source};if(Gv(e[r])){const y=e[r];e[r]=y.next?.bind(y),e[r+1]=y.error?.bind(y),e[r+2]=y.complete?.bind(y)}let u,f,p;if(s instanceof ft)f=wn(s.firestore,ur),p=Dh(s._key.path),u={next:y=>{e[r]&&e[r](A1(f,s,y))},error:e[r+1],complete:e[r+2]};else{const y=wn(s,ia);f=wn(y.firestore,ur),p=y._query;const g=new kp(f);u={next:T=>{e[r]&&e[r](new Kr(f,g,y,T))},error:e[r+1],complete:e[r+2]},E1(s._query)}return(function(g,T,A,x){const V=new Rp(x),q=new Sp(T,V,A);return g.asyncQueue.enqueueAndForget((async()=>Tp(await yh(g),q))),()=>{V.Nu(),g.asyncQueue.enqueueAndForget((async()=>bp(await yh(g),q)))}})(Bh(f),p,l,u)}function Lp(s,e){return(function(r,l){const u=new ss;return r.asyncQueue.enqueueAndForget((async()=>eC(await hC(r),l,u))),u.promise})(Bh(s),e)}function A1(s,e,i){const r=i.docs.get(e._key),l=new kp(s);return new Yr(s,l,e._key,r,new Cl(i.hasPendingWrites,i.fromCache),e.converter)}function ou(){return new Cp("serverTimestamp")}(function(e,i=!0){(function(l){mo=l})(ho),io(new $r("firestore",((r,{instanceIdentifier:l,options:u})=>{const f=r.getProvider("app").getImmediate(),p=new ur(new Ex(r.getProvider("auth-internal")),new Ax(f,r.getProvider("app-check-internal")),(function(g,T){if(!Object.prototype.hasOwnProperty.apply(g.options,["projectId"]))throw new oe(J.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Bl(g.options.projectId,T)})(f,l),f);return u={useFetchStreams:i,...u},p._setSettings(u),p}),"PUBLIC").setMultipleInstances(!0)),Ws(X0,$0,e),Ws(X0,$0,"esm2020")})();/**
 * @license lucide-react v0.548.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CC=s=>s.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),NC=s=>s.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,i,r)=>r?r.toUpperCase():i.toLowerCase()),Kv=s=>{const e=NC(s);return e.charAt(0).toUpperCase()+e.slice(1)},S1=(...s)=>s.filter((e,i,r)=>!!e&&e.trim()!==""&&r.indexOf(e)===i).join(" ").trim(),DC=s=>{for(const e in s)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};/**
 * @license lucide-react v0.548.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var OC={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.548.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MC=se.forwardRef(({color:s="currentColor",size:e=24,strokeWidth:i=2,absoluteStrokeWidth:r,className:l="",children:u,iconNode:f,...p},y)=>se.createElement("svg",{ref:y,...OC,width:e,height:e,stroke:s,strokeWidth:r?Number(i)*24/Number(e):i,className:S1("lucide",l),...!u&&!DC(p)&&{"aria-hidden":"true"},...p},[...f.map(([g,T])=>se.createElement(g,T)),...Array.isArray(u)?u:[u]]));/**
 * @license lucide-react v0.548.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _t=(s,e)=>{const i=se.forwardRef(({className:r,...l},u)=>se.createElement(MC,{ref:u,iconNode:e,className:S1(`lucide-${CC(Kv(s))}`,`lucide-${s}`,r),...l}));return i.displayName=Kv(s),i};/**
 * @license lucide-react v0.548.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VC=[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]],Xv=_t("award",VC);/**
 * @license lucide-react v0.548.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kC=[["path",{d:"M12 8V4H8",key:"hb8ula"}],["rect",{width:"16",height:"12",x:"4",y:"8",rx:"2",key:"enze0r"}],["path",{d:"M2 14h2",key:"vft8re"}],["path",{d:"M20 14h2",key:"4cs60a"}],["path",{d:"M15 13v2",key:"1xurst"}],["path",{d:"M9 13v2",key:"rq6x2g"}]],Eh=_t("bot",kC);/**
 * @license lucide-react v0.548.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jC=[["path",{d:"M12 5a3 3 0 1 0-5.997.125 4 4 0 0 0-2.526 5.77 4 4 0 0 0 .556 6.588A4 4 0 1 0 12 18Z",key:"l5xja"}],["path",{d:"M9 13a4.5 4.5 0 0 0 3-4",key:"10igwf"}],["path",{d:"M6.003 5.125A3 3 0 0 0 6.401 6.5",key:"105sqy"}],["path",{d:"M3.477 10.896a4 4 0 0 1 .585-.396",key:"ql3yin"}],["path",{d:"M6 18a4 4 0 0 1-1.967-.516",key:"2e4loj"}],["path",{d:"M12 13h4",key:"1ku699"}],["path",{d:"M12 18h6a2 2 0 0 1 2 2v1",key:"105ag5"}],["path",{d:"M12 8h8",key:"1lhi5i"}],["path",{d:"M16 8V5a2 2 0 0 1 2-2",key:"u6izg6"}],["circle",{cx:"16",cy:"13",r:".5",key:"ry7gng"}],["circle",{cx:"18",cy:"3",r:".5",key:"1aiba7"}],["circle",{cx:"20",cy:"21",r:".5",key:"yhc1fs"}],["circle",{cx:"20",cy:"8",r:".5",key:"1e43v0"}]],Um=_t("brain-circuit",jC);/**
 * @license lucide-react v0.548.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PC=[["path",{d:"M16 20V4a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"jecpp"}],["rect",{width:"20",height:"14",x:"2",y:"6",rx:"2",key:"i6l2r4"}]],$v=_t("briefcase",PC);/**
 * @license lucide-react v0.548.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LC=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],Up=_t("file-text",LC);/**
 * @license lucide-react v0.548.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UC=[["polyline",{points:"22 12 16 12 14 15 10 15 8 12 2 12",key:"o97t9d"}],["path",{d:"M5.45 5.11 2 12v6a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-6l-3.45-6.89A2 2 0 0 0 16.76 4H7.24a2 2 0 0 0-1.79 1.11z",key:"oot6mr"}]],Jv=_t("inbox",UC);/**
 * @license lucide-react v0.548.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zC=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],qn=_t("loader-circle",zC);/**
 * @license lucide-react v0.548.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BC=[["path",{d:"m10 17 5-5-5-5",key:"1bsop3"}],["path",{d:"M15 12H3",key:"6jk70r"}],["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}]],qC=_t("log-in",BC);/**
 * @license lucide-react v0.548.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HC=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],FC=_t("log-out",HC);/**
 * @license lucide-react v0.548.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GC=[["path",{d:"M4 5h16",key:"1tepv9"}],["path",{d:"M4 12h16",key:"1lakjw"}],["path",{d:"M4 19h16",key:"1djgab"}]],QC=_t("menu",GC);/**
 * @license lucide-react v0.548.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YC=[["path",{d:"M2.992 16.342a2 2 0 0 1 .094 1.167l-1.065 3.29a1 1 0 0 0 1.236 1.168l3.413-.998a2 2 0 0 1 1.099.092 10 10 0 1 0-4.777-4.719",key:"1sd12s"}]],KC=_t("message-circle",YC);/**
 * @license lucide-react v0.548.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XC=[["path",{d:"M22 17a2 2 0 0 1-2 2H6.828a2 2 0 0 0-1.414.586l-2.202 2.202A.71.71 0 0 1 2 21.286V5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2z",key:"18887p"}]],$C=_t("message-square",XC);/**
 * @license lucide-react v0.548.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JC=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],zp=_t("plus",JC);/**
 * @license lucide-react v0.548.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZC=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],WC=_t("save",ZC);/**
 * @license lucide-react v0.548.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eN=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],zm=_t("search",eN);/**
 * @license lucide-react v0.548.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tN=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]],w1=_t("send",tN);/**
 * @license lucide-react v0.548.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nN=[["path",{d:"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z",key:"1s2grr"}],["path",{d:"M20 2v4",key:"1rf3ol"}],["path",{d:"M22 4h-4",key:"gwowj6"}],["circle",{cx:"4",cy:"20",r:"2",key:"6kqj1y"}]],iN=_t("sparkles",nN);/**
 * @license lucide-react v0.548.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sN=[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]],rN=_t("square-pen",sN);/**
 * @license lucide-react v0.548.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aN=[["path",{d:"M7 10v12",key:"1qc93n"}],["path",{d:"M15 5.88 14 10h5.83a2 2 0 0 1 1.92 2.56l-2.33 8A2 2 0 0 1 17.5 22H4a2 2 0 0 1-2-2v-8a2 2 0 0 1 2-2h2.76a2 2 0 0 0 1.79-1.11L12 2a3.13 3.13 0 0 1 3 3.88Z",key:"emmmcr"}]],oN=_t("thumbs-up",aN);/**
 * @license lucide-react v0.548.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lN=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],ki=_t("user",lN);/**
 * @license lucide-react v0.548.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uN=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],Yh=_t("x",uN),hm="@iilm.edu",x1=["BBA","MBA","B.Tech (CSE)","B.Tech (AI/ML)","B.Design","BA LLB","BBA LLB","BA (Psychology)","Other"],R1=["1st","2nd","3rd","4th","5th","6th","7th","8th"];let Bm;try{Bm="AIzaSyAw6cStq_bIQlKxD5Vcw9xXIoxwhP9vwCs"}catch(s){console.error("Failed to read Gemini API key",s),Bm=""}const cN="gemini-2.5-flash-preview-09-2025",hN=`https://generativelanguage.googleapis.com/v1beta/models/${cN}:generateContent?key=${Bm}`;let Th;try{Th=JSON.parse(`{
  "apiKey": "AIzaSyAWq-EYNJi0hOQ9x6eKYIYRaUF9nysam2w",
  "authDomain": "collabnest2-d5f3b.firebaseapp.com",
  "projectId": "collabnest2-d5f3b",
  "storageBucket": "collabnest2-d5f3b.firebasestorage.app",
  "messagingSenderId": "356729784665",
  "appId": "1:356729784665:web:98fcb5927e75dca706e448",
  "measurementId": "G-CJ6W78Q5H7"
}`)}catch(s){console.error("Failed to parse Firebase config. Make sure it's set in your .env.local file or Netlify/GitHub variables.",s),Th={}}const Dt=Th.appId||"default-app-id",I1=uE(Th),bh=px(I1),Ot=pC(I1);try{yx("Debug")}catch(s){console.error("Failed to set Firestore log level:",s)}const Bp=async(s,e=5)=>{let i=0,r=1e3;for(;i<e;)try{const l=await fetch(hN,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)});if(l.ok){const u=await l.json(),f=u.candidates?.[0]?.content?.parts?.[0]?.text;if(f)return f;throw console.error("Gemini API Error: No text in response",u),new Error("Invalid response from API. Check console for details.")}if(l.status===429||l.status>=500)console.warn(`Gemini API Error: Status ${l.status}. Retrying in ${r}ms...`),await new Promise(u=>setTimeout(u,r)),r*=2,i++;else{const u=await l.json();throw console.error("Gemini API Error:",u),new Error(`API request failed with status ${l.status}. Check console.`)}}catch(l){if(console.error("Error calling Gemini API:",l),i>=e-1)throw l;await new Promise(u=>setTimeout(u,r)),r*=2,i++}throw new Error("Gemini API call failed after all retries.")},hs=({size:s=24})=>E.jsx("div",{className:"flex justify-center items-center p-4",children:E.jsx(qn,{size:s,className:"animate-spin text-emerald-600"})}),fN=({title:s,message:e,isOpen:i,onClose:r})=>i?E.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-75 backdrop-blur-sm z-50 flex justify-center items-center p-4",children:E.jsxs("div",{className:"bg-white rounded-xl shadow-2xl w-full max-w-md p-6 relative transition-all transform scale-100 opacity-100",children:[E.jsx("button",{onClick:r,className:"absolute top-3 right-3 text-gray-400 hover:text-gray-600",children:E.jsx(Yh,{size:20})}),E.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:s}),E.jsx("p",{className:"text-sm text-gray-700 whitespace-pre-wrap",children:e}),E.jsx("button",{onClick:r,className:"mt-6 w-full bg-emerald-600 text-white py-2 px-4 rounded-md hover:bg-emerald-700 focus:outline-none focus:ring-2 focus:ring-emerald-500 focus:ring-offset-2 transition-colors",children:"Close"})]})}):null,dN=({setPage:s,showModal:e})=>{const[i,r]=se.useState(""),[l,u]=se.useState(""),[f,p]=se.useState(!1),y=async g=>{g.preventDefault(),p(!0);try{await e2(bh,i,l)}catch(T){console.error("Login Error:",T),e("Login Failed",T.message.replace("Firebase: ",""))}p(!1)};return E.jsx("div",{className:"flex-grow flex items-center justify-center bg-gradient-to-br from-green-50 to-emerald-100 p-4",children:E.jsxs("div",{className:"w-full max-w-md bg-white rounded-xl shadow-2xl p-8 sm:p-10",children:[E.jsxs("div",{className:"flex justify-center items-center mb-6",children:[E.jsx(Up,{className:"h-10 w-10 text-emerald-600"}),E.jsx("span",{className:"ml-2 text-3xl font-bold text-gray-900",children:"CollabNest"})]}),E.jsx("h2",{className:"text-2xl font-bold text-center text-gray-800 mb-6",children:"Welcome Back"}),E.jsxs("form",{onSubmit:y,className:"space-y-6",children:[E.jsxs("div",{children:[E.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700",children:"Email Address"}),E.jsx("input",{id:"email",name:"email",type:"email",autoComplete:"email",required:!0,value:i,onChange:g=>r(g.target.value),className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-emerald-500 focus:border-emerald-500 transition duration-150"})]}),E.jsxs("div",{children:[E.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700",children:"Password"}),E.jsx("input",{id:"password",name:"password",type:"password",autoComplete:"current-password",required:!0,value:l,onChange:g=>u(g.target.value),className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-emerald-500 focus:border-emerald-500 transition duration-150"})]}),E.jsx("button",{type:"submit",disabled:f,className:"w-full flex justify-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-emerald-600 hover:bg-emerald-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-emerald-500 disabled:bg-emerald-300 transition-colors duration-300",children:f?E.jsx(qn,{className:"animate-spin"}):"Sign In"})]}),E.jsxs("p",{className:"mt-6 text-center text-sm text-gray-600",children:["Don't have an account?"," ",E.jsx("button",{onClick:()=>s({name:"signup"}),className:"font-medium text-emerald-600 hover:text-emerald-500 transition-colors",children:"Sign Up"})]})]})})},mN=({setPage:s,showModal:e})=>{const[i,r]=se.useState(""),[l,u]=se.useState(""),[f,p]=se.useState(""),[y,g]=se.useState("student"),[T,A]=se.useState(""),[x,V]=se.useState(""),[q,G]=se.useState(!1),K=async ee=>{if(ee.preventDefault(),!i.endsWith(hm)){e("Invalid Email",`Sign-up is restricted to ${hm} email addresses.`);return}if(l.length<6){e("Weak Password","Password should be at least 6 characters long.");return}if(y==="student"&&(!T||!x)){e("Incomplete Form","Please select your course and semester.");return}G(!0);try{const ne=(await Ww(bh,i,l)).user,he=rs(Ot,`artifacts/${Dt}/public/data/users`,ne.uid);await IC(he,{uid:ne.uid,email:ne.email,name:f,role:y,bio:"",skills:[],linkedin:"",github:"",course:y==="student"?T:"",semester:y==="student"?x:"",createdAt:ou()})}catch(te){console.error("Sign Up Error:",te),te.code==="auth/operation-not-allowed"?e("Sign Up Failed","Email/Password sign-up is not enabled in the Firebase project. The administrator must enable it in the Firebase Console (Authentication > Sign-in method)."):e("Sign Up Failed",te.message.replace("Firebase: ",""))}G(!1)};return E.jsx("div",{className:"flex-grow flex items-center justify-center bg-gradient-to-br from-green-50 to-emerald-100 p-4",children:E.jsxs("div",{className:"w-full max-w-md bg-white rounded-xl shadow-2xl p-8 sm:p-10",children:[E.jsxs("div",{className:"flex justify-center items-center mb-6",children:[E.jsx(Up,{className:"h-10 w-10 text-emerald-600"}),E.jsx("span",{className:"ml-2 text-3xl font-bold text-gray-900",children:"CollabNest"})]}),E.jsx("h2",{className:"text-2xl font-bold text-center text-gray-800 mb-6",children:"Create Your Account"}),E.jsxs("form",{onSubmit:K,className:"space-y-6",children:[E.jsxs("div",{children:[E.jsx("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-700",children:"Full Name"}),E.jsx("input",{id:"name",name:"name",type:"text",required:!0,value:f,onChange:ee=>p(ee.target.value),className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-emerald-500 focus:border-emerald-500 transition duration-150"})]}),E.jsxs("div",{children:[E.jsxs("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700",children:["University Email (",hm,")"]}),E.jsx("input",{id:"email",name:"email",type:"email",autoComplete:"email",required:!0,value:i,onChange:ee=>r(ee.target.value),className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-emerald-500 focus:border-emerald-500 transition duration-150"})]}),E.jsxs("div",{children:[E.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700",children:"Password (min. 6 characters)"}),E.jsx("input",{id:"password",name:"password",type:"password",required:!0,value:l,onChange:ee=>u(ee.target.value),className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-emerald-500 focus:border-emerald-500 transition duration-150"})]}),E.jsxs("div",{children:[E.jsx("label",{htmlFor:"role",className:"block text-sm font-medium text-gray-700",children:"I am a..."}),E.jsxs("select",{id:"role",name:"role",value:y,onChange:ee=>g(ee.target.value),className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-emerald-500 focus:border-emerald-500 transition duration-150",children:[E.jsx("option",{value:"student",children:"Student"}),E.jsx("option",{value:"teacher",children:"Teacher"})]})]}),y==="student"&&E.jsxs(E.Fragment,{children:[E.jsxs("div",{children:[E.jsx("label",{htmlFor:"course",className:"block text-sm font-medium text-gray-700",children:"Course"}),E.jsxs("select",{id:"course",name:"course",value:T,onChange:ee=>A(ee.target.value),required:!0,className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-emerald-500 focus:border-emerald-500 transition duration-150",children:[E.jsx("option",{value:"",disabled:!0,children:"Select your course"}),x1.map(ee=>E.jsx("option",{value:ee,children:ee},ee))]})]}),E.jsxs("div",{children:[E.jsx("label",{htmlFor:"semester",className:"block text-sm font-medium text-gray-700",children:"Semester"}),E.jsxs("select",{id:"semester",name:"semester",value:x,onChange:ee=>V(ee.target.value),required:!0,className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-emerald-500 focus:border-emerald-500 transition duration-150",children:[E.jsx("option",{value:"",disabled:!0,children:"Select your semester"}),R1.map(ee=>E.jsx("option",{value:ee,children:ee},ee))]})]})]}),E.jsx("button",{type:"submit",disabled:q,className:"w-full flex justify-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-emerald-600 hover:bg-emerald-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-emerald-500 disabled:bg-emerald-300 transition-colors duration-300",children:q?E.jsx(qn,{className:"animate-spin"}):"Sign Up"})]}),E.jsxs("p",{className:"mt-6 text-center text-sm text-gray-600",children:["Already have an account?"," ",E.jsx("button",{onClick:()=>s({name:"login"}),className:"font-medium text-emerald-600 hover:text-emerald-500 transition-colors",children:"Sign In"})]})]})})},pN=({user:s,setPage:e,handleLogout:i})=>{const[r,l]=se.useState(!1),[u,f]=se.useState(!1);se.useEffect(()=>{if(s){const g=Bn(Ot,`artifacts/${Dt}/public/data/users`,s.uid,"messages"),T=ru(g),A=au(T,x=>{const V=x.docs.some(q=>!q.data().isRead);f(V)},x=>{console.error("Error checking for new messages:",x)});return()=>A()}},[s]);const p=({pageName:g,icon:T,children:A,hasBadge:x=!1})=>E.jsxs("button",{onClick:()=>{e({name:g,props:{}}),l(!1)},className:"relative flex items-center space-x-2 text-gray-600 hover:text-emerald-600 px-3 py-2 rounded-md text-sm font-medium transition-colors",children:[E.jsx(T,{size:18}),E.jsx("span",{children:A}),x&&E.jsxs("span",{className:"absolute top-1 right-1 flex h-3 w-3",children:[E.jsx("span",{className:"animate-ping absolute inline-flex h-full w-full rounded-full bg-red-400 opacity-75"}),E.jsx("span",{className:"relative inline-flex rounded-full h-3 w-3 bg-red-500"})]})]}),y=({isMobile:g=!1})=>s?E.jsxs("div",{className:`flex items-center ${g?"flex-col space-y-2":"space-x-4"}`,children:[E.jsxs("button",{onClick:()=>{e({name:"profile",props:{profileId:s.uid}}),l(!1)},className:"flex items-center space-x-2 text-gray-600 hover:text-emerald-600 px-3 py-2 rounded-md text-sm font-medium transition-colors",children:[E.jsx(ki,{size:18}),E.jsx("span",{children:"My Profile"})]}),E.jsxs("button",{onClick:i,className:"flex items-center space-x-2 bg-emerald-600 text-white hover:bg-emerald-700 px-3 py-2 rounded-md text-sm font-medium transition-colors",children:[E.jsx(FC,{size:18}),E.jsx("span",{children:"Logout"})]})]}):E.jsxs("div",{className:`flex items-center ${g?"flex-col space-y-2":"space-x-2"}`,children:[E.jsxs("button",{onClick:()=>{e({name:"login"}),l(!1)},className:"flex items-center space-x-2 text-gray-600 hover:text-emerald-600 px-3 py-2 rounded-md text-sm font-medium transition-colors",children:[E.jsx(qC,{size:18}),E.jsx("span",{children:"Login"})]}),E.jsxs("button",{onClick:()=>{e({name:"signup"}),l(!1)},className:"flex items-center space-x-2 bg-emerald-600 text-white hover:bg-emerald-700 px-3 py-2 rounded-md text-sm font-medium transition-colors",children:[E.jsx(ki,{size:18}),E.jsx("span",{children:"Sign Up"})]})]});return E.jsxs("nav",{className:"bg-white/95 backdrop-blur-sm shadow-md sticky top-0 z-40",children:[E.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:E.jsxs("div",{className:"flex justify-between items-center h-16",children:[E.jsxs("div",{className:"flex-shrink-0 flex items-center",children:[E.jsx(Up,{className:"h-8 w-8 text-emerald-600"}),E.jsx("span",{className:"ml-2 text-xl font-bold text-emerald-600",children:"CollabNest"})]}),E.jsx("div",{className:"hidden sm:flex sm:items-center sm:space-x-4",children:s&&E.jsxs(E.Fragment,{children:[E.jsx(p,{pageName:"dashboard",icon:Xv,children:"Dashboard"}),E.jsx(p,{pageName:"projects",icon:$v,children:"Projects"}),E.jsx(p,{pageName:"search",icon:zm,children:"Search"}),E.jsx(p,{pageName:"ai_matcher",icon:Um,children:"AI Matcher"}),E.jsx(p,{pageName:"inbox",icon:Jv,hasBadge:u,children:"Inbox"}),E.jsx(p,{pageName:"ai_assistant",icon:Eh,children:"AI Assistant"})]})}),E.jsx("div",{className:"hidden sm:flex sm:items-center",children:E.jsx(y,{})}),E.jsx("div",{className:"sm:hidden flex items-center",children:E.jsx("button",{onClick:()=>l(!r),className:"text-gray-600 hover:text-gray-900 focus:outline-none",children:E.jsx(QC,{size:24})})})]})}),r&&E.jsxs("div",{className:"sm:hidden bg-white shadow-lg absolute top-16 left-0 right-0 z-30 p-4 space-y-2",children:[s&&E.jsxs(E.Fragment,{children:[E.jsx(p,{pageName:"dashboard",icon:Xv,children:"Dashboard"}),E.jsx(p,{pageName:"projects",icon:$v,children:"Projects"}),E.jsx(p,{pageName:"search",icon:zm,children:"Search"}),E.jsx(p,{pageName:"ai_matcher",icon:Um,children:"AI Matcher"}),E.jsx(p,{pageName:"inbox",icon:Jv,hasBadge:u,children:"Inbox"}),E.jsx(p,{pageName:"ai_assistant",icon:Eh,children:"AI Assistant"})]}),E.jsx(y,{isMobile:!0})]})]})},gN=({postId:s,userId:e,authorName:i,showModal:r})=>{const[l,u]=se.useState([]),[f,p]=se.useState(""),[y,g]=se.useState(!1),[T,A]=se.useState(!0),x=q=>{if(!q)return"just now";const G=Math.floor((new Date-q.toDate())/1e3);let K=G/31536e3;return K>1?Math.floor(K)+"y":(K=G/2592e3,K>1?Math.floor(K)+"mo":(K=G/86400,K>1?Math.floor(K)+"d":(K=G/3600,K>1?Math.floor(K)+"h":(K=G/60,K>1?Math.floor(K)+"m":"just now"))))};se.useEffect(()=>{A(!0);const q=Bn(Ot,`artifacts/${Dt}/public/data/achievements`,s,"comments"),G=ru(q),K=au(G,ee=>{const te=[];ee.forEach(ne=>{te.push({id:ne.id,...ne.data()})}),te.sort((ne,he)=>{const ve=ne.createdAt?.toDate()||0,Te=he.createdAt?.toDate()||0;return ve-Te}),u(te),A(!1)},ee=>{console.error("Error fetching comments:",ee),r("Error","Could not load comments."),A(!1)});return()=>K()},[s,r]);const V=async q=>{if(q.preventDefault(),f.trim()!==""){g(!0);try{const G=Bn(Ot,`artifacts/${Dt}/public/data/achievements`,s,"comments");await Qh(G,{text:f,authorId:e,authorName:i,createdAt:ou()}),p("")}catch(G){console.error("Error posting comment:",G),r("Error","Could not post your comment.")}g(!1)}};return E.jsxs("div",{className:"mt-4 pt-4 border-t border-gray-100",children:[E.jsxs("form",{onSubmit:V,className:"flex space-x-2 mb-4",children:[E.jsx("input",{type:"text",value:f,onChange:q=>p(q.target.value),placeholder:"Write a comment...",className:"flex-grow px-3 py-2 border border-gray-300 rounded-md shadow-sm text-sm focus:outline-none focus:ring-1 focus:ring-emerald-500"}),E.jsx("button",{type:"submit",disabled:y,className:"flex-shrink-0 bg-emerald-600 text-white px-3 py-2 rounded-md text-sm hover:bg-emerald-700 disabled:bg-emerald-300 transition-colors",children:y?E.jsx(qn,{size:18,className:"animate-spin"}):"Post"})]}),E.jsxs("div",{className:"space-y-3",children:[T&&E.jsx(hs,{size:20}),!T&&l.length===0&&E.jsx("p",{className:"text-xs text-gray-500 text-center",children:"No comments yet."}),l.map(q=>E.jsxs("div",{className:"flex items-start space-x-2",children:[E.jsx("div",{className:"flex-shrink-0 bg-gray-100 rounded-full h-8 w-8 flex items-center justify-center",children:E.jsx(ki,{size:16,className:"text-gray-500"})}),E.jsxs("div",{className:"flex-grow bg-gray-50 p-3 rounded-lg",children:[E.jsxs("div",{className:"flex items-center justify-between",children:[E.jsx("span",{className:"text-sm font-semibold text-gray-800",children:q.authorName}),E.jsx("span",{className:"text-xs text-gray-400",children:x(q.createdAt)})]}),E.jsx("p",{className:"text-sm text-gray-700 mt-1",children:q.text})]})]},q.id))]})]})},yN=({showModal:s})=>{const[e,i]=se.useState([{role:"model",parts:[{text:"Hello! I'm CollabBot. How can I help you with your projects or collaborations today?"}]}]),[r,l]=se.useState(""),[u,f]=se.useState(!1),p=uA.useRef(null),y={role:"system",parts:[{text:"You are 'CollabBot,' a helpful AI assistant for the CollabNest college portal. Your goal is to help students connect, find collaborators, and get tips on their projects. Be friendly, encouraging, and concise. Your name is CollabBot. If users need administrative help or support, they can contact collabnest.iilm@gmail.com."}]};se.useEffect(()=>{p.current?.scrollIntoView({behavior:"smooth"})},[e]);const g=async T=>{if(T.preventDefault(),r.trim()===""||u)return;const A={role:"user",parts:[{text:r}]};i(x=>[...x,A]),l(""),f(!0);try{const x={contents:[...e,A],systemInstruction:y},q={role:"model",parts:[{text:await Bp(x)}]};i(G=>[...G,q])}catch(x){console.error("Gemini chat error:",x),s("AI Error",`Sorry, I couldn't get a response from the assistant. Please try again.

`+x.message),i(V=>V.slice(0,V.length-1))}f(!1)};return E.jsxs("div",{className:"max-w-4xl mx-auto p-4 sm:p-6 lg:p-8 flex flex-col",style:{height:"calc(100vh - 8rem)"},children:[E.jsx("h2",{className:"text-3xl font-bold text-gray-900 mb-6",children:"AI Assistant"}),E.jsx("div",{className:"flex-grow bg-white p-6 rounded-xl shadow-lg mb-6 overflow-y-auto",children:E.jsxs("div",{className:"space-y-4",children:[e.map((T,A)=>E.jsx("div",{className:`flex ${T.role==="user"?"justify-end":"justify-start"}`,children:E.jsxs("div",{className:`flex items-start space-x-2 max-w-xs lg:max-w-md ${T.role==="user"?"flex-row-reverse space-x-reverse":""}`,children:[E.jsx("div",{className:`flex-shrink-0 h-8 w-8 rounded-full flex items-center justify-center ${T.role==="user"?"bg-emerald-600":"bg-gray-200"}`,children:T.role==="user"?E.jsx(ki,{size:16,className:"text-white"}):E.jsx(Eh,{size:16,className:"text-gray-600"})}),E.jsx("div",{className:`px-4 py-2 rounded-lg ${T.role==="user"?"bg-emerald-600 text-white":"bg-gray-100 text-gray-800"}`,children:E.jsx("p",{className:"whitespace-pre-wrap",children:T.parts[0].text})})]})},A)),u&&E.jsx("div",{className:"flex justify-start",children:E.jsxs("div",{className:"flex items-start space-x-2",children:[E.jsx("div",{className:"flex-shrink-0 h-8 w-8 rounded-full flex items-center justify-center bg-gray-200",children:E.jsx(Eh,{size:16,className:"text-gray-600"})}),E.jsx("div",{className:"px-4 py-2 rounded-lg bg-gray-100 text-gray-800",children:E.jsx(qn,{size:16,className:"animate-spin"})})]})}),E.jsx("div",{ref:p})]})}),E.jsxs("form",{onSubmit:g,className:"flex space-x-2",children:[E.jsx("input",{type:"text",value:r,onChange:T=>l(T.target.value),placeholder:"Ask CollabBot anything...",className:"flex-grow px-4 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-emerald-500"}),E.jsx("button",{type:"submit",disabled:u,className:"flex-shrink-0 bg-emerald-600 text-white px-4 py-2 rounded-md hover:bg-emerald-700 flex items-center justify-center transition-colors disabled:bg-emerald-300",children:u?E.jsx(qn,{size:18,className:"animate-spin"}):E.jsx(w1,{size:18})})]})]})},Zv=({userId:s,user:e,showModal:i})=>{const[r,l]=se.useState([]),[u,f]=se.useState(""),[p,y]=se.useState(!1),[g,T]=se.useState(!1),[A,x]=se.useState("..."),[V,q]=se.useState(null);se.useEffect(()=>{s&&(async()=>{const ne=rs(Ot,`artifacts/${Dt}/public/data/users`,s),he=await vh(ne);he.exists()&&x(he.data().name)})()},[s]),se.useEffect(()=>{y(!0);const te=Bn(Ot,`artifacts/${Dt}/public/data/achievements`),ne=ru(te),he=au(ne,ve=>{const Te=[];ve.forEach(w=>{Te.push({id:w.id,...w.data()})});const N=Te.sort((w,I)=>{const k=w.createdAt?.toDate()||0;return(I.createdAt?.toDate()||0)-k});l(N),y(!1)},ve=>{console.error("Error fetching achievements:",ve),i("Error","Could not load achievements feed."),y(!1)});return()=>he()},[i]);const G=async te=>{if(te.preventDefault(),u.trim()===""){i("Empty Post","Please write something to post.");return}T(!0);try{const ne=Bn(Ot,`artifacts/${Dt}/public/data/achievements`);await Qh(ne,{content:u,imageUrl:"",authorId:s,authorName:A,authorEmail:e.email,createdAt:ou(),likes:[]}),f("")}catch(ne){console.error("Error posting achievement:",ne),i("Error","Could not post your achievement. Please try again.")}T(!1)},K=async(te,ne)=>{if(!s){i("Error","You must be logged in to like a post.");return}const he=rs(Ot,`artifacts/${Dt}/public/data/achievements`,te),ve=ne.includes(s);let Te;ve?Te=ne.filter(N=>N!==s):Te=[...ne,s];try{await Pp(he,{likes:Te})}catch(N){console.error("Error liking post:",N),i("Error","Could not update like.")}},ee=te=>{if(!te)return"just now";const ne=Math.floor((new Date-te.toDate())/1e3);let he=ne/31536e3;return he>1?Math.floor(he)+"y ago":(he=ne/2592e3,he>1?Math.floor(he)+"mo ago":(he=ne/86400,he>1?Math.floor(he)+"d ago":(he=ne/3600,he>1?Math.floor(he)+"h ago":(he=ne/60,he>1?Math.floor(he)+"m ago":"just now"))))};return E.jsxs("div",{className:"max-w-4xl mx-auto p-4 sm:p-6 lg:p-8",children:[E.jsx("h2",{className:"text-3xl font-bold text-gray-900 mb-6",children:"Achievement Feed"}),E.jsxs("form",{onSubmit:G,className:"bg-white p-6 rounded-xl shadow-lg mb-8",children:[E.jsx("textarea",{value:u,onChange:te=>f(te.target.value),placeholder:`What have you achieved today, ${A.split(" ")[0]}?`,className:"w-full p-3 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-emerald-500",rows:"3"}),E.jsx("div",{className:"flex justify-end items-center mt-4",children:E.jsxs("button",{type:"submit",disabled:g,className:"flex items-center justify-center bg-emerald-600 text-white px-5 py-2 rounded-md hover:bg-emerald-700 disabled:bg-emerald-300 shadow-md hover:shadow-lg transition-all",children:[g?E.jsx(qn,{className:"animate-spin"}):E.jsx(zp,{size:18,className:"mr-2"}),"Post"]})})]}),E.jsx("div",{className:"space-y-6",children:p?E.jsx(hs,{size:32}):r.length===0?E.jsx("p",{className:"text-center text-gray-500",children:"No achievements yet. Be the first to post!"}):r.map(te=>{const ne=te.likes||[],he=ne.includes(s);return E.jsxs("div",{className:"bg-white p-5 rounded-xl shadow-lg",children:[E.jsxs("div",{className:"flex items-center mb-3",children:[E.jsx("div",{className:"flex-shrink-0 bg-emerald-100 rounded-full h-10 w-10 flex items-center justify-center",children:E.jsx(ki,{size:20,className:"text-emerald-600"})}),E.jsxs("div",{className:"ml-3",children:[E.jsx("p",{className:"text-sm font-semibold text-gray-900",children:te.authorName}),E.jsx("p",{className:"text-xs text-gray-500",children:ee(te.createdAt)})]})]}),te.content&&E.jsx("p",{className:"text-gray-800 whitespace-pre-wrap",children:te.content}),E.jsx("div",{className:"flex justify-between items-center mt-4 pt-3 border-t border-gray-100",children:E.jsxs("div",{className:"flex space-x-5",children:[E.jsxs("button",{onClick:()=>K(te.id,ne),className:"flex items-center space-x-1 text-gray-500 hover:text-emerald-600 transition-colors group",children:[E.jsx(oN,{size:18,className:`group-hover:text-emerald-600 ${he?"text-emerald-600 fill-emerald-600":""}`}),E.jsxs("span",{className:`text-sm group-hover:text-emerald-6D0 ${he?"text-emerald-600":""}`,children:[ne.length," ",ne.length===1?"Like":"Likes"]})]}),E.jsxs("button",{onClick:()=>q(te.id===V?null:te.id),className:"flex items-center space-x-1 text-gray-500 hover:text-emerald-600 transition-colors group",children:[E.jsx($C,{size:18,className:`group-hover:text-emerald-600 ${V===te.id?"text-emerald-600":""}`}),E.jsx("span",{className:`text-sm group-hover:text-emerald-600 ${V===te.id?"text-emerald-600":""}`,children:"Comment"})]})]})}),V===te.id&&E.jsx(gN,{postId:te.id,userId:s,authorName:A,showModal:i})]},te.id)})})]})},_N=({setPage:s})=>{const[e,i]=se.useState(""),[r,l]=se.useState([]),[u,f]=se.useState([]),[p,y]=se.useState(!1),[g,T]=se.useState(!1);se.useEffect(()=>{(async()=>{y(!0);try{const q=Bn(Ot,`artifacts/${Dt}/public/data/users`),K=(await jp(q)).docs.map(ee=>({id:ee.id,...ee.data()}));f(K)}catch(q){console.error("Error fetching all users:",q)}y(!1)})()},[]);const A=V=>{if(V.preventDefault(),e.trim()===""){l([]),T(!0);return}const q=e.toLowerCase(),G=u.filter(K=>{const ee=K.name.toLowerCase().includes(q),te=K.skills.some(ne=>ne.toLowerCase().includes(q));return ee||te});l(G),T(!0)},x=({user:V})=>E.jsxs("div",{className:"bg-white p-5 rounded-xl shadow-lg flex items-start space-x-4 transition-shadow duration-300 hover:shadow-xl",children:[E.jsx("div",{className:"flex-shrink-0 bg-gray-200 rounded-full h-12 w-12 flex items-center justify-center",children:E.jsx(ki,{size:24,className:"text-gray-600"})}),E.jsxs("div",{className:"flex-grow",children:[E.jsx("h4",{className:"text-lg font-semibold text-gray-900",children:V.name}),E.jsx("p",{className:"text-sm text-gray-600 capitalize",children:V.role}),E.jsxs("div",{className:"mt-2 flex flex-wrap gap-2",children:[V.skills.slice(0,5).map((q,G)=>E.jsx("span",{className:"px-2 py-0.5 bg-emerald-100 text-emerald-800 text-xs font-medium rounded-full",children:q},G)),V.skills.length>5&&E.jsxs("span",{className:"px-2 py-0.5 bg-gray-100 text-gray-800 text-xs font-medium rounded-full",children:["+",V.skills.length-5," more"]})]})]}),E.jsx("div",{className:"flex-shrink-0",children:E.jsx("button",{onClick:()=>s({name:"profile",props:{profileId:V.id}}),className:"px-3 py-1 bg-emerald-50 text-emerald-700 text-sm rounded-md hover:bg-emerald-100 transition-colors",children:"View Profile"})})]});return E.jsxs("div",{className:"max-w-4xl mx-auto p-4 sm:p-6 lg:p-8",children:[E.jsx("h2",{className:"text-3xl font-bold text-gray-900 mb-6",children:"Find Collaborators"}),E.jsxs("form",{onSubmit:A,className:"flex space-x-2 mb-8",children:[E.jsx("input",{type:"search",value:e,onChange:V=>i(V.target.value),placeholder:"Search by name or skill (e.g., 'Python', 'Jane Doe')",className:"flex-grow px-4 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-emerald-500"}),E.jsx("button",{type:"submit",className:"flex-shrink-0 bg-emerald-600 text-white px-4 py-2 rounded-md hover:bg-emerald-700 flex items-center justify-center transition-colors",children:E.jsx(zm,{size:18})})]}),E.jsxs("div",{className:"space-y-4",children:[p&&E.jsx(hs,{size:32}),!p&&g&&r.length===0&&E.jsx("p",{className:"text-center text-gray-500",children:"No users found matching your search."}),r.map(V=>E.jsx(x,{user:V},V.id))]})]})},vN=({recipientId:s,recipientName:e,currentUserId:i,authorName:r,showModal:l,onClose:u})=>{const[f,p]=se.useState(""),[y,g]=se.useState(!1),T=async A=>{if(A.preventDefault(),f.trim()!==""){g(!0);try{const x=Bn(Ot,`artifacts/${Dt}/public/data/users`,s,"messages");await Qh(x,{text:f,fromId:i,fromName:r,sentAt:ou(),isRead:!1}),l("Message Sent!",`Your message to ${e} has been sent.`),u()}catch(x){console.error("Error sending message:",x),l("Error","Could not send your message. Please try again.")}g(!1)}};return E.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-75 backdrop-blur-sm z-50 flex justify-center items-center p-4",children:E.jsxs("div",{className:"bg-white rounded-xl shadow-2xl w-full max-w-md p-6 relative",children:[E.jsx("button",{onClick:u,className:"absolute top-3 right-3 text-gray-400 hover:text-gray-600",children:E.jsx(Yh,{size:20})}),E.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:["Send Message to ",e]}),E.jsxs("form",{onSubmit:T,children:[E.jsx("textarea",{value:f,onChange:A=>p(A.target.value),placeholder:"Write your message here...",className:"w-full p-3 h-32 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-emerald-500",rows:"4"}),E.jsxs("button",{type:"submit",disabled:y,className:"mt-4 w-full flex items-center justify-center bg-emerald-600 text-white px-5 py-2 rounded-md hover:bg-emerald-700 disabled:bg-emerald-300 shadow-md hover:shadow-lg transition-all",children:[y?E.jsx(qn,{className:"animate-spin"}):E.jsx(w1,{size:18,className:"mr-2"}),"Send"]})]})]})})},EN=({userId:s,showModal:e,setPage:i})=>{const[r,l]=se.useState([]),[u,f]=se.useState(!0),p=g=>{if(!g)return"just now";const T=Math.floor((new Date-g.toDate())/1e3);let A=T/31536e3;return A>1?Math.floor(A)+"y ago":(A=T/2592e3,A>1?Math.floor(A)+"mo ago":(A=T/86400,A>1?Math.floor(A)+"d ago":(A=T/3600,A>1?Math.floor(A)+"h ago":(A=T/60,A>1?Math.floor(A)+"m ago":"just now"))))};se.useEffect(()=>{if(!s)return;f(!0);const g=Bn(Ot,`artifacts/${Dt}/public/data/users`,s,"messages"),T=ru(g),A=au(T,x=>{const V=[];x.forEach(q=>{V.push({id:q.id,...q.data()})}),V.sort((q,G)=>{const K=q.sentAt?.toDate()||0;return(G.sentAt?.toDate()||0)-K}),l(V),f(!1),y(V.filter(q=>!q.isRead))},x=>{console.error("Error fetching messages:",x),e("Error","Could not load your inbox."),f(!1)});return()=>A()},[s,e]);const y=async g=>{if(g.length!==0)try{for(const T of g){const A=rs(Ot,`artifacts/${Dt}/public/data/users`,s,"messages",T.id);await Pp(A,{isRead:!0})}}catch(T){console.error("Error marking messages as read:",T)}};return E.jsxs("div",{className:"max-w-4xl mx-auto p-4 sm:p-6 lg:p-8",children:[E.jsx("h2",{className:"text-3xl font-bold text-gray-900 mb-6",children:"Inbox"}),E.jsxs("div",{className:"space-y-4",children:[u&&E.jsx(hs,{size:32}),!u&&r.length===0&&E.jsx("p",{className:"text-center text-gray-500",children:"You have no messages."}),r.map(g=>E.jsxs("div",{className:`bg-white p-5 rounded-xl shadow-lg border-l-4 ${g.isRead?"border-transparent":"border-emerald-500"}`,children:[E.jsxs("div",{className:"flex justify-between items-center mb-2",children:[E.jsxs("button",{onClick:()=>i({name:"profile",props:{profileId:g.fromId}}),className:"flex items-center space-x-2 group",children:[E.jsx("div",{className:"flex-shrink-0 bg-gray-100 rounded-full h-8 w-8 flex items-center justify-center",children:E.jsx(ki,{size:16,className:"text-gray-500"})}),E.jsx("span",{className:"text-sm font-semibold text-gray-900 group-hover:text-emerald-600 group-hover:underline",children:g.fromName})]}),E.jsx("span",{className:"text-xs text-gray-400",children:p(g.sentAt)})]}),E.jsx("p",{className:"text-gray-700 whitespace-pre-wrap ml-10",children:g.text})]},g.id))]})]})},TN=({userId:s,showModal:e,setPage:i})=>{const[r,l]=se.useState(""),[u,f]=se.useState(!1),[p,y]=se.useState([]),g=async A=>{if(A.preventDefault(),r.trim()===""){e("Error","Please describe your project first.");return}f(!0),y([]);try{const x=Bn(Ot,`artifacts/${Dt}/public/data/users`),q=(await jp(x)).docs.map(ve=>ve.data()).filter(ve=>ve.uid!==s);if(q.length===0){e("No Users","There are no other users in the directory to match with."),f(!1);return}const G=q.map(ve=>`User ID: ${ve.uid}
Name: ${ve.name}
Role: ${ve.role}
Bio: ${ve.bio||"N/A"}
Skills: ${(ve.skills||[]).join(", ")}
`).join(`
---
`),te={contents:[{parts:[{text:`Here is my project description:
"${r}"

Here is the list of available users:
${G}

Return the JSON array of top matches.`}]}],systemInstruction:{parts:[{text:"You are an AI assistant helping a student find project collaborators from a university directory. Your task is to analyze a project description and a list of user profiles. Return a JSON array of the top 3-5 best matches. For each match, provide their `userId`, a brief `reason` (1-2 sentences) why they are a good match, and their `name`. Do not match the user with themselves. If no good matches are found, return an empty array."}]},generationConfig:{responseMimeType:"application/json",responseSchema:{type:"ARRAY",items:{type:"OBJECT",properties:{userId:{type:"STRING"},name:{type:"STRING"},reason:{type:"STRING"}}}}}},ne=await Bp(te),he=JSON.parse(ne);y(he)}catch(x){console.error("Error in AI Matcher:",x),e("AI Error",`Could not find matches. Please try again.
`+x.message)}f(!1)},T=({match:A})=>E.jsxs("div",{className:"bg-white p-5 rounded-xl shadow-lg flex items-start space-x-4",children:[E.jsx("div",{className:"flex-shrink-0 bg-emerald-100 rounded-full h-12 w-12 flex items-center justify-center",children:E.jsx(ki,{size:24,className:"text-emerald-700"})}),E.jsxs("div",{className:"flex-grow",children:[E.jsx("h4",{className:"text-lg font-semibold text-gray-900",children:A.name}),E.jsxs("p",{className:"text-sm text-gray-600 italic",children:['"',A.reason,'"']})]}),E.jsx("div",{className:"flex-shrink-0",children:E.jsx("button",{onClick:()=>i({name:"profile",props:{profileId:A.userId}}),className:"px-3 py-1 bg-emerald-50 text-emerald-700 text-sm rounded-md hover:bg-emerald-100 transition-colors",children:"View Profile"})})]});return E.jsxs("div",{className:"max-w-4xl mx-auto p-4 sm:p-6 lg:p-8",children:[E.jsx("h2",{className:"text-3xl font-bold text-gray-900 mb-6",children:"AI Project Matcher"}),E.jsxs("form",{onSubmit:g,className:"bg-white p-6 rounded-xl shadow-lg mb-8",children:[E.jsx("label",{htmlFor:"projectDesc",className:"block text-sm font-medium text-gray-700 mb-2",children:"Describe your project to find the best collaborators:"}),E.jsx("textarea",{id:"projectDesc",value:r,onChange:A=>l(A.target.value),placeholder:"e.g., 'I'm building a website to track club events. I need someone who knows React for the frontend and maybe Firebase for the backend...'",className:"w-full p-3 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-emerald-500",rows:"5"}),E.jsx("div",{className:"flex justify-end items-center mt-4",children:E.jsxs("button",{type:"submit",disabled:u,className:"flex items-center justify-center bg-emerald-600 text-white px-5 py-2 rounded-md hover:bg-emerald-700 disabled:bg-emerald-300 shadow-md hover:shadow-lg transition-all",children:[u?E.jsx(qn,{className:"animate-spin"}):E.jsx(Um,{size:18,className:"mr-2"}),"Find Matches"]})})]}),E.jsxs("div",{className:"space-y-4",children:[u&&E.jsx(hs,{size:32}),!u&&p.length>0&&E.jsxs(E.Fragment,{children:[E.jsx("h3",{className:"text-2xl font-bold text-gray-800",children:"Top Matches"}),p.map(A=>E.jsx(T,{match:A},A.userId))]}),!u&&!p.length&&r&&E.jsx("p",{className:"text-center text-gray-500",children:"No strong matches found. Try broadening your project description."})]})]})},bN=({userId:s,user:e,showModal:i,setPage:r})=>{const[l,u]=se.useState([]),[f,p]=se.useState(!0),[y,g]=se.useState(!1),[T,A]=se.useState("...");se.useEffect(()=>{s&&(async()=>{const q=rs(Ot,`artifacts/${Dt}/public/data/users`,s),G=await vh(q);G.exists()?A(G.data().name):A(e.email)})()},[s,e.email]),se.useEffect(()=>{p(!0);const V=Bn(Ot,`artifacts/${Dt}/public/data/projects`),q=ru(V),G=au(q,K=>{const ee=[];K.forEach(te=>{ee.push({id:te.id,...te.data()})}),ee.sort((te,ne)=>{const he=te.createdAt?.toDate()||0;return(ne.createdAt?.toDate()||0)-he}),u(ee),p(!1)},K=>{console.error("Error fetching projects:",K),i("Error","Could not load projects."),p(!1)});return()=>G()},[i]);const x=V=>{if(!V)return"just now";const q=Math.floor((new Date-V.toDate())/1e3);let G=q/86400;return G>1?Math.floor(G)+"d ago":(G=q/3600,G>1?Math.floor(G)+"h ago":(G=q/60,G>1?Math.floor(G)+"m ago":"just now"))};return E.jsxs("div",{className:"max-w-4xl mx-auto p-4 sm:p-6 lg:p-8",children:[E.jsxs("div",{className:"flex justify-between items-center mb-6",children:[E.jsx("h2",{className:"text-3xl font-bold text-gray-900",children:"Projects"}),E.jsxs("button",{onClick:()=>g(!0),className:"flex items-center justify-center bg-emerald-600 text-white px-4 py-2 rounded-md hover:bg-emerald-700 shadow-md hover:shadow-lg transition-all",children:[E.jsx(zp,{size:18,className:"mr-2"}),"Post a Project"]})]}),E.jsxs("div",{className:"space-y-6",children:[f&&E.jsx(hs,{size:32}),!f&&l.length===0&&E.jsx("p",{className:"text-center text-gray-500",children:"No projects listed yet. Be the first to post!"}),l.map(V=>E.jsxs("div",{className:"bg-white p-5 rounded-xl shadow-lg",children:[E.jsxs("div",{className:"flex justify-between items-start",children:[E.jsxs("div",{children:[E.jsx("h3",{className:"text-xl font-semibold text-gray-900",children:V.title}),E.jsxs("button",{onClick:()=>r({name:"profile",props:{profileId:V.authorId}}),className:"text-sm text-gray-500 hover:text-emerald-600 hover:underline",children:["by ",V.authorName]})]}),E.jsx("span",{className:"text-xs text-gray-400 flex-shrink-0 ml-2",children:x(V.createdAt)})]}),E.jsx("p",{className:"text-gray-700 whitespace-pre-wrap my-3",children:V.description}),E.jsxs("div",{className:"flex flex-wrap gap-2",children:[E.jsx("span",{className:"text-xs font-semibold text-gray-600",children:"Skills needed:"}),V.skills.map((q,G)=>E.jsx("span",{className:"px-2 py-0.5 bg-emerald-100 text-emerald-800 text-xs font-medium rounded-full",children:q},G))]})]},V.id))]}),y&&E.jsx(AN,{userId:s,authorName:T,showModal:i,onClose:()=>g(!1)})]})},AN=({userId:s,authorName:e,showModal:i,onClose:r})=>{const[l,u]=se.useState(""),[f,p]=se.useState(""),[y,g]=se.useState(""),[T,A]=se.useState(!1),x=async V=>{if(V.preventDefault(),l.trim()===""||f.trim()===""||y.trim()===""){i("Incomplete Form","Please fill out all fields.");return}A(!0);const q=y.split(",").map(G=>G.trim()).filter(G=>G);try{const G=Bn(Ot,`artifacts/${Dt}/public/data/projects`);await Qh(G,{title:l,description:f,skills:q,authorId:s,authorName:e,createdAt:ou()}),i("Success!","Your project has been posted."),r()}catch(G){console.error("Error posting project:",G),i("Error","Could not post your project.")}A(!1)};return E.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-75 backdrop-blur-sm z-50 flex justify-center items-center p-4",children:E.jsxs("div",{className:"bg-white rounded-xl shadow-2xl w-full max-w-lg p-6 relative",children:[E.jsx("button",{onClick:r,className:"absolute top-3 right-3 text-gray-400 hover:text-gray-600",children:E.jsx(Yh,{size:20})}),E.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Post a New Project"}),E.jsxs("form",{onSubmit:x,className:"space-y-4",children:[E.jsxs("div",{children:[E.jsx("label",{htmlFor:"title",className:"block text-sm font-medium text-gray-700",children:"Project Title"}),E.jsx("input",{id:"title",type:"text",value:l,onChange:V=>u(V.target.value),className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-emerald-500 focus:border-emerald-500"})]}),E.jsxs("div",{children:[E.jsx("label",{htmlFor:"description",className:"block text-sm font-medium text-gray-700",children:"Description"}),E.jsx("textarea",{id:"description",value:f,onChange:V=>p(V.target.value),rows:"4",className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-emerald-500 focus:border-emerald-500"})]}),E.jsxs("div",{children:[E.jsx("label",{htmlFor:"skills",className:"block text-sm font-medium text-gray-700",children:"Skills Needed (comma-separated)"}),E.jsx("input",{id:"skills",type:"text",value:y,onChange:V=>g(V.target.value),placeholder:"e.g., React, Python, UI/UX Design",className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-emerald-500 focus:border-emerald-500"})]}),E.jsxs("button",{type:"submit",disabled:T,className:"mt-4 w-full flex items-center justify-center bg-emerald-600 text-white px-5 py-2 rounded-md hover:bg-emerald-700 disabled:bg-emerald-300 shadow-md hover:shadow-lg transition-all",children:[T?E.jsx(qn,{className:"animate-spin"}):E.jsx(zp,{size:18,className:"mr-2"}),"Post Project"]})]})]})})},SN=({setPage:s})=>{const[e,i]=se.useState([]),[r,l]=se.useState(!0);se.useEffect(()=>{(async()=>{l(!0);try{const p=Bn(Ot,`artifacts/${Dt}/public/data/users`),g=(await jp(p)).docs.map(T=>({id:T.id,...T.data()}));g.sort((T,A)=>T.name.localeCompare(A.name)),i(g)}catch(p){console.error("Error fetching user directory:",p)}l(!1)})()},[]);const u=({user:f})=>E.jsxs("li",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-4 p-4 bg-white rounded-xl shadow-lg transition-shadow duration-300 hover:shadow-xl",children:[E.jsxs("div",{className:"flex items-center space-x-3",children:[E.jsx("div",{className:"flex-shrink-0 bg-gray-200 rounded-full h-10 w-10 flex items-center justify-center",children:E.jsx(ki,{size:20,className:"text-gray-600"})}),E.jsxs("div",{children:[E.jsx("p",{className:"text-sm font-semibold text-gray-900",children:f.name}),E.jsx("p",{className:"text-sm text-gray-500",children:f.email})]})]}),E.jsxs("div",{className:"w-full sm:w-auto flex flex-col sm:items-end gap-2",children:[E.jsx("p",{className:"text-sm text-gray-600 capitalize",children:f.role}),E.jsx("button",{onClick:()=>s({name:"profile",props:{profileId:f.id}}),className:"w-full sm:w-auto px-3 py-1 bg-emerald-50 text-emerald-700 text-sm rounded-md hover:bg-emerald-100 transition-colors text-center",children:"View Profile"})]})]});return E.jsxs("div",{className:"max-w-4xl mx-auto p-4 sm:p-6 lg:p-8",children:[E.jsx("h2",{className:"text-3xl font-bold text-gray-900 mb-6",children:"User Directory"}),r?E.jsx(hs,{size:32}):E.jsx("ul",{className:"space-y-3",children:e.map(f=>E.jsx(u,{user:f},f.id))})]})},wN=({currentUserId:s,currentUser:e,showModal:i,setPage:r,profileId:l})=>{const[u,f]=se.useState(null),[p,y]=se.useState(!0),[g,T]=se.useState(!1),[A,x]=se.useState(!1),[V,q]=se.useState({name:"",bio:"",skills:"",linkedin:"",github:"",course:"",semester:""}),[G,K]=se.useState(""),[ee,te]=se.useState(!1),[ne,he]=se.useState(!1),[ve,Te]=se.useState("..."),N=s===l;se.useEffect(()=>{e&&(async()=>{const j=rs(Ot,`artifacts/${Dt}/public/data/users`,s),R=await vh(j);R.exists()?Te(R.data().name):Te(e.email)})()},[s,e]),se.useEffect(()=>{if(!l){y(!1);return}y(!0),(async()=>{try{const j=rs(Ot,`artifacts/${Dt}/public/data/users`,l),R=await vh(j);if(R.exists()){const be=R.data();f(be),q({name:be.name||"",bio:be.bio||"",skills:(be.skills||[]).join(", "),linkedin:be.linkedin||"",github:be.github||"",course:be.course||"",semester:be.semester||""})}else i("Error","Profile not found."),f(null)}catch(j){console.error("Error fetching profile:",j),i("Error","Could not load profile.")}y(!1)})()},[l,i]);const w=D=>{const{name:j,value:R}=D.target;q(be=>({...be,[j]:R}))},I=async D=>{D.preventDefault(),x(!0);const j=V.skills.split(",").map(be=>be.trim()).filter(be=>be!==""),R={name:V.name,bio:V.bio,skills:j,linkedin:V.linkedin,github:V.github,course:V.course,semester:V.semester};try{const be=rs(Ot,`artifacts/${Dt}/public/data/users`,s);await Pp(be,R),f(lt=>({...lt,...R})),T(!1),i("Success","Your profile has been updated.")}catch(be){console.error("Error updating profile:",be),i("Error","Could not save your profile.")}x(!1)},k=async()=>{if(G.trim()===""){i("Keywords Needed","Please enter a few keywords for the AI to write your bio.");return}te(!0);try{const R={contents:[{parts:[{text:`Generate a bio based on these keywords: "${G}"`}]}],systemInstruction:{parts:[{text:"You are a helpful assistant writing a professional, first-person bio for a student's profile on a college collaboration portal. The bio should be 2-3 sentences long. Be friendly but professional."}]}},be=await Bp(R);q(lt=>({...lt,bio:be.trim()}))}catch(D){console.error("Error generating bio:",D),i("AI Error",`Could not generate bio. Please try again.
`+D.message)}te(!1)};return p?E.jsx("div",{className:"flex-grow pt-20",children:E.jsx(hs,{size:40})}):u?E.jsxs(E.Fragment,{children:[E.jsx("div",{className:"max-w-4xl mx-auto p-4 sm:p-6 lg:p-8",children:E.jsx("div",{className:"bg-white shadow-2xl rounded-xl overflow-hidden",children:E.jsxs("div",{className:"p-6 sm:p-8",children:[E.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between",children:[E.jsxs("div",{className:"flex items-center space-x-4",children:[E.jsx("div",{className:"flex-shrink-0 bg-gradient-to-br from-green-500 to-emerald-600 rounded-full h-24 w-24 flex items-center justify-center shadow-lg",children:E.jsx(ki,{size:48,className:"text-white"})}),E.jsxs("div",{children:[g?E.jsx("input",{type:"text",name:"name",value:V.name,onChange:w,className:"text-2xl font-bold text-gray-900 border-b-2 border-gray-300 focus:border-emerald-500 outline-none"}):E.jsx("h2",{className:"text-3xl font-bold text-gray-900",children:u.name}),E.jsx("p",{className:"text-md text-gray-600 capitalize",children:u.role}),E.jsx("p",{className:"text-sm text-gray-500",children:u.email}),u.role==="student"&&(u.course||u.semester)&&E.jsxs("p",{className:"text-sm text-emerald-700 font-medium pt-1",children:[u.course,u.course&&u.semester&&" - ",u.semester,u.semester?" Sem":""]})]})]}),E.jsx("div",{className:"mt-4 sm:mt-0 flex-shrink-0",children:N?g?E.jsxs("div",{className:"flex space-x-2",children:[E.jsxs("button",{onClick:()=>T(!1),className:"flex items-center bg-gray-100 text-gray-700 px-4 py-2 rounded-md hover:bg-gray-200 transition-colors",children:[E.jsx(Yh,{size:18,className:"mr-1"}),"Cancel"]}),E.jsxs("button",{onClick:I,disabled:A,className:"flex items-center bg-green-600 text-white px-4 py-2 rounded-md hover:bg-green-700 disabled:bg-green-300 transition-colors",children:[A?E.jsx(qn,{className:"animate-spin"}):E.jsx(WC,{size:18,className:"mr-1"}),"Save"]})]}):E.jsxs("button",{onClick:()=>T(!0),className:"flex items-center bg-emerald-600 text-white px-4 py-2 rounded-md hover:bg-emerald-700 transition-all shadow-md hover:shadow-lg",children:[E.jsx(rN,{size:18,className:"mr-1"}),"Edit Profile"]}):E.jsxs("button",{onClick:()=>he(!0),className:"flex items-center bg-emerald-600 text-white px-4 py-2 rounded-md hover:bg-emerald-700 transition-all shadow-md hover:shadow-lg",children:[E.jsx(KC,{size:18,className:"mr-1"}),"Send Message"]})})]}),E.jsxs("div",{className:"mt-8 space-y-6",children:[E.jsxs("div",{children:[E.jsx("h4",{className:"text-sm font-semibold text-gray-500 uppercase tracking-wider",children:"Bio"}),g?E.jsxs("div",{className:"space-y-2",children:[E.jsx("textarea",{name:"bio",value:V.bio,onChange:w,placeholder:"Tell everyone a bit about yourself...",className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-emerald-500 focus:border-emerald-500"}),E.jsxs("div",{className:"p-3 bg-emerald-50 rounded-md border border-emerald-200 space-y-2",children:[E.jsx("label",{htmlFor:"bio-keywords",className:"block text-xs font-medium text-emerald-800",children:" Get help from AI"}),E.jsxs("div",{className:"flex space-x-2",children:[E.jsx("input",{id:"bio-keywords",type:"text",value:G,onChange:D=>K(D.target.value),placeholder:"Keywords: e.g., '3rd year CS, loves React'",className:"flex-grow px-3 py-1.5 border border-gray-300 rounded-md shadow-sm text-sm focus:outline-none focus:ring-1 focus:ring-emerald-500"}),E.jsxs("button",{type:"button",onClick:k,disabled:ee,className:"flex-shrink-0 bg-emerald-600 text-white px-3 py-1.5 rounded-md text-sm hover:bg-emerald-700 disabled:bg-emerald-300 transition-colors flex items-center",children:[ee?E.jsx(qn,{size:16,className:"animate-spin mr-1"}):E.jsx(iN,{size:16,className:"mr-1"}),"Generate"]})]})]})]}):E.jsx("p",{className:"mt-1 text-gray-800 whitespace-pre-wrap",children:u.bio||E.jsx("span",{className:"text-gray-400 italic",children:"No bio provided."})})]}),g&&u.role==="student"&&E.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[E.jsxs("div",{children:[E.jsx("h4",{className:"text-sm font-semibold text-gray-500 uppercase tracking-wider",children:"Course"}),E.jsxs("select",{name:"course",value:V.course,onChange:w,className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-emerald-500 focus:border-emerald-500",children:[E.jsx("option",{value:"",disabled:!0,children:"Select your course"}),x1.map(D=>E.jsx("option",{value:D,children:D},D))]})]}),E.jsxs("div",{children:[E.jsx("h4",{className:"text-sm font-semibold text-gray-500 uppercase tracking-wider",children:"Semester"}),E.jsxs("select",{name:"semester",value:V.semester,onChange:w,className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-emerald-500 focus:border-emerald-500",children:[E.jsx("option",{value:"",disabled:!0,children:"Select your semester"}),R1.map(D=>E.jsx("option",{value:D,children:D},D))]})]})]}),E.jsxs("div",{children:[E.jsx("h4",{className:"text-sm font-semibold text-gray-500 uppercase tracking-wider",children:"Skills"}),g?E.jsx("input",{type:"text",name:"skills",value:V.skills,onChange:w,placeholder:"e.g., Python, React, Data Analysis",className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-emerald-500 focus:border-emerald-500"}):E.jsx("div",{className:"mt-2 flex flex-wrap gap-2",children:u.skills&&u.skills.length>0?u.skills.map((D,j)=>E.jsx("span",{className:"px-3 py-1 bg-emerald-100 text-emerald-800 text-sm font-medium rounded-full",children:D},j)):E.jsx("span",{className:"text-gray-400 italic",children:"No skills listed."})}),g&&E.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Enter skills separated by commas."})]}),E.jsxs("div",{children:[E.jsx("h4",{className:"text-sm font-semibold text-gray-500 uppercase tracking-wider",children:"Links"}),E.jsx("div",{className:"mt-2 space-y-2",children:g?E.jsxs(E.Fragment,{children:[E.jsx("input",{type:"text",name:"github",value:V.github,onChange:w,placeholder:"GitHub URL (e.g., https://github.com/username)",className:"block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-emerald-500 focus:border-emerald-500"}),E.jsx("input",{type:"text",name:"linkedin",value:V.linkedin,onChange:w,placeholder:"LinkedIn URL (e.g., https://linkedin.com/in/username)",className:"block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-emerald-500 focus:border-emerald-500"})]}):E.jsxs(E.Fragment,{children:[E.jsxs("p",{className:"text-gray-800",children:[E.jsx("strong",{children:"GitHub:"})," ",u.github?E.jsx("a",{href:u.github,target:"_blank",rel:"noopener noreferrer",className:"text-emerald-600 hover:underline",children:u.github}):E.jsx("span",{className:"text-gray-400 italic",children:"Not provided"})]}),E.jsxs("p",{className:"text-gray-800",children:[E.jsx("strong",{children:"LinkedIn:"})," ",u.linkedin?E.jsx("a",{href:u.linkedin,target:"_blank",rel:"noopener noreferrer",className:"text-emerald-600 hover:underline",children:u.linkedin}):E.jsx("span",{className:"text-gray-400 italic",children:"Not provided"})]})]})})]})]})]})})}),ne&&E.jsx(vN,{recipientId:l,recipientName:u.name,currentUserId:s,authorName:ve,showModal:i,onClose:()=>he(!1)})]}):E.jsx("div",{className:"flex-grow flex items-center justify-center",children:E.jsx("p",{className:"text-xl text-gray-600",children:"Profile not found."})})},xN=()=>E.jsx("footer",{className:"w-full bg-gray-100 border-t border-gray-200 mt-12 py-6",children:E.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 text-center text-sm text-gray-500",children:[E.jsxs("p",{children:[" ",new Date().getFullYear()," CollabNest. All rights reserved."]}),E.jsxs("p",{className:"mt-1",children:["For support, contact: ",E.jsx("a",{href:"mailto:collabnest.iilm@gmail.com",className:"font-medium text-emerald-600 hover:text-emerald-500",children:"collabnest.iilm@gmail.com"})]})]})});function RN(){const[s,e]=se.useState(null),[i,r]=se.useState(null),[l,u]=se.useState(!1),[f,p]=se.useState({name:"login"}),[y,g]=se.useState({isOpen:!1,title:"",message:""}),T=(q,G)=>{g({isOpen:!0,title:q,message:G})},A=()=>{g({isOpen:!1,title:"",message:""})};se.useEffect(()=>{const q=i2(bh,G=>{G&&!G.isAnonymous?(e(G),r(G.uid),(f.name==="login"||f.name==="signup")&&p({name:"dashboard"})):(e(null),r(null),p({name:"login"})),u(!0)});return()=>q()},[]);const x=async()=>{try{await s2(bh),p({name:"login"})}catch(q){console.error("Logout Error:",q),T("Logout Failed","An error occurred while logging out.")}},V=()=>{if(!l)return E.jsx("div",{className:"flex-grow flex items-center justify-center",children:E.jsx(hs,{size:40})});if(!s)switch(f.name){case"signup":return E.jsx(mN,{setPage:p,showModal:T});case"login":default:return E.jsx(dN,{setPage:p,showModal:T})}switch(f.name){case"dashboard":return E.jsx(Zv,{userId:i,user:s,showModal:T});case"projects":return E.jsx(bN,{userId:i,user:s,showModal:T,setPage:p});case"search":return E.jsx(_N,{setPage:p});case"ai_matcher":return E.jsx(TN,{userId:i,showModal:T,setPage:p});case"inbox":return E.jsx(EN,{userId:i,showModal:T,setPage:p});case"users":return E.jsx(SN,{setPage:p});case"ai_assistant":return E.jsx(yN,{showModal:T});case"profile":return E.jsx(wN,{currentUserId:i,currentUser:s,profileId:f.props?.profileId||i,showModal:T,setPage:p});default:return E.jsx(Zv,{userId:i,user:s,showModal:T})}};return E.jsxs("div",{className:"min-h-screen flex flex-col bg-slate-50 font-inter",children:[E.jsx(pN,{user:s,setPage:p,handleLogout:x}),E.jsx("main",{className:"flex-grow w-full",children:V()}),E.jsx(xN,{}),E.jsx(fN,{isOpen:y.isOpen,title:y.title,message:y.message,onClose:A})]})}gA.createRoot(document.getElementById("root")).render(E.jsx(se.StrictMode,{children:E.jsx(RN,{})}));
